import"./_commonjsHelpers-B-UnjaXt.js";import{_ as w,L as G,b as T,s as J,d as X,g as u,A as R,W as Y,i as j,c as Z,a as q}from"./AutoWebViewJs-Dd6EJXHO.js";import{a as B}from"./androidDispatchers-BsATMfwW.js";let z=class{constructor(E,e=!1){this._target="Event.target",this.type=E,this.cancelable=e,this.canceled=!1}get target(){return this[this._target]}toString(){const E={};return w.each(Object.keys(this),e=>{E[e]=this[e]}),E}};class V extends z{constructor(E,e,s=!1){super(E,s),this.data=e}}class h{constructor(){this.listenDomainMap=new Map,this.listenMap=new Map,this.onceListeners=new Map}addDomainEventListener(E,e,s,_){let o=this.listenDomainMap.get(E);o||(o=new Map,this.listenDomainMap.set(E,o));let r=o.get(e);r||(r=[],o.set(e,r)),r.indexOf(s)==-1&&r.push(s),this.addEventListener(e,s,_)}addDomainOnceListener(E,e,s,_){this.addOnceListener(e,s,_,E)}addEventListener(E,e,s){if(E==="")try{throw new Error("addDomainEventListener error no type")}catch(r){console.log("EventDispatcher2","addDomainEventListener","err",E,r)}if(typeof e!="function")try{throw new Error("addDomainEventListener error no cb")}catch(r){console.log("EventDispatcher2","addDomainEventListener","err",e,r)}let _=this.listenMap.get(E);_||(_=[],this.listenMap.set(E,_));const o=_.indexOf(e);o>-1&&_.splice(o,1),(s==null||s<0)&&(s=_.length),s=Math.max(0,Math.min(s,_.length)),_.splice(s,0,e)}addEventListenerOnce(E,e,s){return this.addOnceListener(E,e,s,void 0)}onceListenerCb(E,e,s){const _=this;return(function(...o){if(typeof e=="function")e(...o);else throw console.error(e),console.log(...o),new Error("onEvent not a function");const r=_.onceListeners.get(E);r&&(s?_.removeDomainEventListener(s,E,r.get(e)):_.removeEventListener(E,r.get(e)))}).bind(this)}addOnceListener(E,e,s,_){let o=this.onceListeners.get(E);o||(o=new Map,this.onceListeners.set(E,o));const r=this.onceListenerCb(E,e,_);return o.set(e,r),_?this.addDomainEventListener(_,E,r,s):this.addEventListener(E,r,s),r}dispatchArgs(E,...e){const s=this.listenMap.get(E);if(!s)return!1;for(let _=0,o=s.length;_<o;_++)s[_].apply(null,e);return!0}dispatchEvent(E){if(!E||!E.type)return!0;const e=this.listenMap.get(E.type);if(!e)return!1;E[E._target]=this;for(let s=0,_=e.length;s<_;s++){if(E.canceled)return!1;try{e[s](E)}catch(o){console.log("EventDispatcher2","dispatchEvent","err",o),console.log("event is",E)}}return!0}removeDomain(E){var e;const s=this.listenDomainMap.get(E);if(!s)return!1;for(const _ in s)(e=s.get(_))==null||e.forEach(o=>{try{this.removeEventListener(_,o)}catch(r){console.log("eventdispatcher2","removedomain","err",r)}},this);return this.listenDomainMap.delete(E),!0}removeDomainEventListener(E,e,s){const _=this.listenDomainMap.get(E);if(!_)return!1;const o=_.get(e);if(!o)return!1;const r=o.indexOf(s);return r==-1?!1:(o.splice(r,1),this.removeEventListener(e,s))}removeEventListener(E,e){const s=this.listenMap.get(E);if(!s)return!1;const _=s.indexOf(e);return _==-1?!1:(s.splice(_,1),!0)}willTrigger(E){const e=this.listenMap.get(E);return!(!e||e.length==0)}}const D=[];function ii(n,E,e=!1,...s){e||Ei(n);let _={fn:n,handle:-1,cancelled:!1};return _.handle=window.setTimeout(()=>{_.cancelled||(n.apply(void 0,s),ei(_))},E),D.push(_),_}function Ei(n){for(let E=0;E<D.length;E++){let e=D[E];if(e&&e.fn==n){W(e,E);return}}}function ei(n){let E=D.indexOf(n);W(n,E)}function W(n,E){n&&(clearTimeout(n.handle),n.cancelled=!0,E>-1&&D.splice(E,1))}const m="documentEventTypeDocumentIsShow";function c(n,...E){throw console.error(n,E),console.trace(n),new Error(n)}function ni(n,E){return n.then(function(e){return[null,e]}).catch(function(e){return[e,void 0]})}const k=typeof window<"u";let si="android",p=k?window[si]:"";k&&(window.global||(window.global=window));function _i(n,E,e,s,_){if(!p)return-1;const o=p==null?void 0:p.listen(n,E,e,s);if(!o)return-1;let r=o.toString();try{r=`${typeof n=="string"?n:"target"}-${typeof E=="string"?E:"type"}-${typeof e=="string"?e:"callbackEventType"}-${typeof o=="string"?o:o.toString()}`}catch(t){console.log("listen_fn 2 error",t)}return r}class oi extends V{constructor(E,e,s,_){super(E,{bl:e,extra:s,permission:_}),this.bl=e,this.extra=s,this.permission=_}}const l=class M extends h{constructor(){super(...arguments),this.logger=new G(!1,this.constructor.name),this.androidPermissionList=[],this.exitFunList=[],this.isComplete=!1,this.isTerminate=!1,this.checkOrAsk=()=>{this.isTerminate=!1,this.isComplete=!1;let E=this.check();return E||(this.runAsk(),!1)},this.runAsk=()=>{this.conf.askUi.show(this)},this.listenAskBack=()=>{this.conf.listenResume&&document.addEventListener(m,this.onDocumentShow)},this.onDocumentShow=E=>{document.removeEventListener(m,this.onDocumentShow),this.askComplete()},this.askComplete=()=>{this.isComplete||(this.check(),this.dispatchMayUpdatedEvent(this.isSuccess,void 0),this.complete())},this.complete=()=>{this.isComplete=!0,this.clear(),this.dispatchEvent(new V(M.eventComplete))}}init(E){this.conf=E}runCheck(){let E,e,s,{print:_,error:o,warn:r,logger:t}=this.logger.sub(!1,"fn-runCheck");if(this.conf.scripts.check.isRunner?(E=T.callScriptRunner(this.conf.scripts.check.script),s=E.runnerResult):(E=T.callScript(this.conf.scripts.check.script),E.errMsg&&o(E.errMsg),s=E.javaResultString),s)try{e=JSON.parse(s)}catch(A){o("json parese strData",A)}return e}check(){this.isSuccess=void 0;let{print:E,error:e,warn:s,logger:_}=this.logger.sub(!1,"fn_check"),o=this.runCheck();return w.isBoolean(o)?this.isSuccess=o:(e("hasPermission is not bool",o),o=!1),o===!0&&ii(this.complete,1),this.isSuccess}ask(){this.conf.scripts.ask.isRunner?T.callScriptRunner(this.conf.scripts.ask.script):T.callScript(this.conf.scripts.ask.script)}callAsk(){this.listenAskBack(),this.ask()}dispatchMayUpdatedEvent(E=void 0,e=void 0){for(let s=0;s<this.androidPermissionList.length;s++){let _=this.androidPermissionList[s],o=new oi(_,E,e,this);M.dispacher.dispatchEvent(o),this.dispatchEvent(o)}}clear(){for(let E=0;E<this.exitFunList.length;E++)this.exitFunList[E]();this.exitFunList.length=0}};l.dispacher=new h;l.eventPermissionMayUpdated="eventPermissionMayUpdated";l.eventComplete="complete";let U=l;const ri=J.namespace("permission-droid/android");class H{constructor(){this.exited=!1,this.showDialog=()=>{this.initDialog()},this.storeCheckValue=()=>{let{hasCheckBox:E,storageKey:e}=this.conf;if(!E)return;let s=document.getElementById("permissionAskHideCheckBox"),_=!1;if(s&&(_=s.checked),_){let o={hide:!0,time:Date.now()};X.setItem(e,o)}},this.show=E=>{this.permission=E,this.showDialog()}}getCheckBoxValue(){let{storageKey:E}=this.conf;if(!E)return;const e=ri.read(E);let s=!0;if(e&&e.hide===!0){let _=Date.now(),o=e.time;_-o<1e3*60*60*24*15&&(s=!1)}return s}createDialogInnerHtml(){let{text:E,title:e,hasCheckBox:s,checkBoxText:_,okButtonText:o,cancelButtonText:r}=this.conf,t=s?`<div style="flex;flex-direction: row"><input id="permissionAskHideCheckBox" type="checkbox" />
            <span>${_}</span>
            </div> `:"";return`<div>
        <div>
        <div style="text-align: center">
        <b>${e}</b>
        </div>
        <p>${E}</p>
        ${t}
        </div>
        <div style="text-align: right;margin-right: 20px">
        <button id="permissionAskCancelButton" href="#" style="margin-right: 20px">${r}</button>
        <button id="permissionAskOkButton">${o}</button></div>
        </div>`}initDialog(){if(this.getCheckBoxValue()===!1){this.callAsk(),this.exit();return}var e=document.createElement("dialog");this.dialog=e,e.innerHTML=this.createDialogInnerHtml(),document.body.appendChild(e),this.initCloseButton(),this.initOkButton(),e.showModal()}initCloseButton(){let E=document.getElementById("permissionAskCancelButton");E&&(E.onclick=()=>{this.closeDialog()})}initOkButton(){let E=document.getElementById("permissionAskOkButton");console.log("oooooooooke button=",E),E&&(console.log("oozz",E,this),E.onclick=this.onOkClick.bind(this))}callAsk(){this.permission.callAsk()}exit(){this.exited||(this.exited=!0)}closeDialog(){this.exit(),this.dialog&&(this.dialog.close(),document.body.removeChild(this.dialog),this.dialog=void 0)}onOkClick(){console.log("ooooooooooookkkkk clickedqqq"),this.storeCheckValue(),this.callAsk(),this.closeDialog()}onCloseClick(){this.closeDialog()}}let C=class{};C.ACTIVITY_RECOGNITION="android.permission-group.ACTIVITY_RECOGNITION";C.CALENDAR="android.permission-group.CALENDAR";C.CALL_LOG="android.permission-group.CALL_LOG";C.CAMERA="android.permission-group.CAMERA";C.CONTACTS="android.permission-group.CONTACTS";C.LOCATION="android.permission-group.LOCATION";C.MICROPHONE="android.permission-group.MICROPHONE";C.NEARBY_DEVICES="android.permission-group.NEARBY_DEVICES";C.NOTIFICATIONS="android.permission-group.NOTIFICATIONS";C.PHONE="android.permission-group.PHONE";C.READ_MEDIA_AURAL="android.permission-group.READ_MEDIA_AURAL";C.READ_MEDIA_VISUAL="android.permission-group.READ_MEDIA_VISUAL";C.SENSORS="android.permission-group.SENSORS";C.SMS="android.permission-group.SMS";C.STORAGE="android.permission-group.STORAGE";class i{}i.ACCEPT_HANDOVER="android.permission.ACCEPT_HANDOVER";i.ACCESS_BACKGROUND_LOCATION="android.permission.ACCESS_BACKGROUND_LOCATION";i.ACCESS_BLOBS_ACROSS_USERS="android.permission.ACCESS_BLOBS_ACROSS_USERS";i.ACCESS_CHECKIN_PROPERTIES="android.permission.ACCESS_CHECKIN_PROPERTIES";i.ACCESS_COARSE_LOCATION="android.permission.ACCESS_COARSE_LOCATION";i.ACCESS_FINE_LOCATION="android.permission.ACCESS_FINE_LOCATION";i.ACCESS_LOCATION_EXTRA_COMMANDS="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS";i.ACCESS_MEDIA_LOCATION="android.permission.ACCESS_MEDIA_LOCATION";i.ACCESS_NETWORK_STATE="android.permission.ACCESS_NETWORK_STATE";i.ACCESS_NOTIFICATION_POLICY="android.permission.ACCESS_NOTIFICATION_POLICY";i.ACCESS_WIFI_STATE="android.permission.ACCESS_WIFI_STATE";i.ACCOUNT_MANAGER="android.permission.ACCOUNT_MANAGER";i.ACTIVITY_RECOGNITION="android.permission.ACTIVITY_RECOGNITION";i.ADD_VOICEMAIL="com.android.voicemail.permission.ADD_VOICEMAIL";i.ANSWER_PHONE_CALLS="android.permission.ANSWER_PHONE_CALLS";i.BATTERY_STATS="android.permission.BATTERY_STATS";i.BIND_ACCESSIBILITY_SERVICE="android.permission.BIND_ACCESSIBILITY_SERVICE";i.BIND_APPWIDGET="android.permission.BIND_APPWIDGET";i.BIND_AUTOFILL_SERVICE="android.permission.BIND_AUTOFILL_SERVICE";i.BIND_CALL_REDIRECTION_SERVICE="android.permission.BIND_CALL_REDIRECTION_SERVICE";i.BIND_CARRIER_MESSAGING_CLIENT_SERVICE="android.permission.BIND_CARRIER_MESSAGING_CLIENT_SERVICE";i.BIND_CARRIER_MESSAGING_SERVICE="android.permission.BIND_CARRIER_MESSAGING_SERVICE";i.BIND_CARRIER_SERVICES="android.permission.BIND_CARRIER_SERVICES";i.BIND_CHOOSER_TARGET_SERVICE="android.permission.BIND_CHOOSER_TARGET_SERVICE";i.BIND_COMPANION_DEVICE_SERVICE="android.permission.BIND_COMPANION_DEVICE_SERVICE";i.BIND_CONDITION_PROVIDER_SERVICE="android.permission.BIND_CONDITION_PROVIDER_SERVICE";i.BIND_CONTROLS="android.permission.BIND_CONTROLS";i.BIND_CREDENTIAL_PROVIDER_SERVICE="android.permission.BIND_CREDENTIAL_PROVIDER_SERVICE";i.BIND_DEVICE_ADMIN="android.permission.BIND_DEVICE_ADMIN";i.BIND_DREAM_SERVICE="android.permission.BIND_DREAM_SERVICE";i.BIND_INCALL_SERVICE="android.permission.BIND_INCALL_SERVICE";i.BIND_INPUT_METHOD="android.permission.BIND_INPUT_METHOD";i.BIND_MIDI_DEVICE_SERVICE="android.permission.BIND_MIDI_DEVICE_SERVICE";i.BIND_NFC_SERVICE="android.permission.BIND_NFC_SERVICE";i.BIND_NOTIFICATION_LISTENER_SERVICE="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE";i.BIND_PRINT_SERVICE="android.permission.BIND_PRINT_SERVICE";i.BIND_QUICK_ACCESS_WALLET_SERVICE="android.permission.BIND_QUICK_ACCESS_WALLET_SERVICE";i.BIND_QUICK_SETTINGS_TILE="android.permission.BIND_QUICK_SETTINGS_TILE";i.BIND_REMOTEVIEWS="android.permission.BIND_REMOTEVIEWS";i.BIND_SCREENING_SERVICE="android.permission.BIND_SCREENING_SERVICE";i.BIND_TELECOM_CONNECTION_SERVICE="android.permission.BIND_TELECOM_CONNECTION_SERVICE";i.BIND_TEXT_SERVICE="android.permission.BIND_TEXT_SERVICE";i.BIND_TV_INPUT="android.permission.BIND_TV_INPUT";i.BIND_TV_INTERACTIVE_APP="android.permission.BIND_TV_INTERACTIVE_APP";i.BIND_VISUAL_VOICEMAIL_SERVICE="android.permission.BIND_VISUAL_VOICEMAIL_SERVICE";i.BIND_VOICE_INTERACTION="android.permission.BIND_VOICE_INTERACTION";i.BIND_VPN_SERVICE="android.permission.BIND_VPN_SERVICE";i.BIND_VR_LISTENER_SERVICE="android.permission.BIND_VR_LISTENER_SERVICE";i.BIND_WALLPAPER="android.permission.BIND_WALLPAPER";i.BLUETOOTH="android.permission.BLUETOOTH";i.BLUETOOTH_ADMIN="android.permission.BLUETOOTH_ADMIN";i.BLUETOOTH_ADVERTISE="android.permission.BLUETOOTH_ADVERTISE";i.BLUETOOTH_CONNECT="android.permission.BLUETOOTH_CONNECT";i.BLUETOOTH_PRIVILEGED="android.permission.BLUETOOTH_PRIVILEGED";i.BLUETOOTH_SCAN="android.permission.BLUETOOTH_SCAN";i.BODY_SENSORS="android.permission.BODY_SENSORS";i.BODY_SENSORS_BACKGROUND="android.permission.BODY_SENSORS_BACKGROUND";i.BROADCAST_PACKAGE_REMOVED="android.permission.BROADCAST_PACKAGE_REMOVED";i.BROADCAST_SMS="android.permission.BROADCAST_SMS";i.BROADCAST_STICKY="android.permission.BROADCAST_STICKY";i.BROADCAST_WAP_PUSH="android.permission.BROADCAST_WAP_PUSH";i.CALL_COMPANION_APP="android.permission.CALL_COMPANION_APP";i.CALL_PHONE="android.permission.CALL_PHONE";i.CALL_PRIVILEGED="android.permission.CALL_PRIVILEGED";i.CAMERA="android.permission.CAMERA";i.CAPTURE_AUDIO_OUTPUT="android.permission.CAPTURE_AUDIO_OUTPUT";i.CHANGE_COMPONENT_ENABLED_STATE="android.permission.CHANGE_COMPONENT_ENABLED_STATE";i.CHANGE_CONFIGURATION="android.permission.CHANGE_CONFIGURATION";i.CHANGE_NETWORK_STATE="android.permission.CHANGE_NETWORK_STATE";i.CHANGE_WIFI_MULTICAST_STATE="android.permission.CHANGE_WIFI_MULTICAST_STATE";i.CHANGE_WIFI_STATE="android.permission.CHANGE_WIFI_STATE";i.CLEAR_APP_CACHE="android.permission.CLEAR_APP_CACHE";i.CONFIGURE_WIFI_DISPLAY="android.permission.CONFIGURE_WIFI_DISPLAY";i.CONTROL_LOCATION_UPDATES="android.permission.CONTROL_LOCATION_UPDATES";i.CREDENTIAL_MANAGER_QUERY_CANDIDATE_CREDENTIALS="android.permission.CREDENTIAL_MANAGER_QUERY_CANDIDATE_CREDENTIALS";i.CREDENTIAL_MANAGER_SET_ALLOWED_PROVIDERS="android.permission.CREDENTIAL_MANAGER_SET_ALLOWED_PROVIDERS";i.CREDENTIAL_MANAGER_SET_ORIGIN="android.permission.CREDENTIAL_MANAGER_SET_ORIGIN";i.DELETE_CACHE_FILES="android.permission.DELETE_CACHE_FILES";i.DELETE_PACKAGES="android.permission.DELETE_PACKAGES";i.DELIVER_COMPANION_MESSAGES="android.permission.DELIVER_COMPANION_MESSAGES";i.DETECT_SCREEN_CAPTURE="android.permission.DETECT_SCREEN_CAPTURE";i.DIAGNOSTIC="android.permission.DIAGNOSTIC";i.DISABLE_KEYGUARD="android.permission.DISABLE_KEYGUARD";i.DUMP="android.permission.DUMP";i.ENFORCE_UPDATE_OWNERSHIP="android.permission.ENFORCE_UPDATE_OWNERSHIP";i.EXECUTE_APP_ACTION="android.permission.EXECUTE_APP_ACTION";i.EXPAND_STATUS_BAR="android.permission.EXPAND_STATUS_BAR";i.FACTORY_TEST="android.permission.FACTORY_TEST";i.FOREGROUND_SERVICE="android.permission.FOREGROUND_SERVICE";i.FOREGROUND_SERVICE_CAMERA="android.permission.FOREGROUND_SERVICE_CAMERA";i.FOREGROUND_SERVICE_CONNECTED_DEVICE="android.permission.FOREGROUND_SERVICE_CONNECTED_DEVICE";i.FOREGROUND_SERVICE_DATA_SYNC="android.permission.FOREGROUND_SERVICE_DATA_SYNC";i.FOREGROUND_SERVICE_HEALTH="android.permission.FOREGROUND_SERVICE_HEALTH";i.FOREGROUND_SERVICE_LOCATION="android.permission.FOREGROUND_SERVICE_LOCATION";i.FOREGROUND_SERVICE_MEDIA_PLAYBACK="android.permission.FOREGROUND_SERVICE_MEDIA_PLAYBACK";i.FOREGROUND_SERVICE_MEDIA_PROJECTION="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION";i.FOREGROUND_SERVICE_MICROPHONE="android.permission.FOREGROUND_SERVICE_MICROPHONE";i.FOREGROUND_SERVICE_PHONE_CALL="android.permission.FOREGROUND_SERVICE_PHONE_CALL";i.FOREGROUND_SERVICE_REMOTE_MESSAGING="android.permission.FOREGROUND_SERVICE_REMOTE_MESSAGING";i.FOREGROUND_SERVICE_SPECIAL_USE="android.permission.FOREGROUND_SERVICE_SPECIAL_USE";i.FOREGROUND_SERVICE_SYSTEM_EXEMPTED="android.permission.FOREGROUND_SERVICE_SYSTEM_EXEMPTED";i.GET_ACCOUNTS="android.permission.GET_ACCOUNTS";i.GET_ACCOUNTS_PRIVILEGED="android.permission.GET_ACCOUNTS_PRIVILEGED";i.GET_PACKAGE_SIZE="android.permission.GET_PACKAGE_SIZE";i.GET_TASKS="android.permission.GET_TASKS";i.GLOBAL_SEARCH="android.permission.GLOBAL_SEARCH";i.HIDE_OVERLAY_WINDOWS="android.permission.HIDE_OVERLAY_WINDOWS";i.HIGH_SAMPLING_RATE_SENSORS="android.permission.HIGH_SAMPLING_RATE_SENSORS";i.INSTALL_LOCATION_PROVIDER="android.permission.INSTALL_LOCATION_PROVIDER";i.INSTALL_PACKAGES="android.permission.INSTALL_PACKAGES";i.INSTALL_SHORTCUT="com.android.launcher.permission.INSTALL_SHORTCUT";i.INSTANT_APP_FOREGROUND_SERVICE="android.permission.INSTANT_APP_FOREGROUND_SERVICE";i.INTERACT_ACROSS_PROFILES="android.permission.INTERACT_ACROSS_PROFILES";i.INTERNET="android.permission.INTERNET";i.KILL_BACKGROUND_PROCESSES="android.permission.KILL_BACKGROUND_PROCESSES";i.LAUNCH_CAPTURE_CONTENT_ACTIVITY_FOR_NOTE="android.permission.LAUNCH_CAPTURE_CONTENT_ACTIVITY_FOR_NOTE";i.LAUNCH_MULTI_PANE_SETTINGS_DEEP_LINK="android.permission.LAUNCH_MULTI_PANE_SETTINGS_DEEP_LINK";i.LOADER_USAGE_STATS="android.permission.LOADER_USAGE_STATS";i.LOCATION_HARDWARE="android.permission.LOCATION_HARDWARE";i.MANAGE_DEVICE_LOCK_STATE="android.permission.MANAGE_DEVICE_LOCK_STATE";i.MANAGE_DEVICE_POLICY_ACCESSIBILITY="android.permission.MANAGE_DEVICE_POLICY_ACCESSIBILITY";i.MANAGE_DEVICE_POLICY_ACCOUNT_MANAGEMENT="android.permission.MANAGE_DEVICE_POLICY_ACCOUNT_MANAGEMENT";i.MANAGE_DEVICE_POLICY_ACROSS_USERS="android.permission.MANAGE_DEVICE_POLICY_ACROSS_USERS";i.MANAGE_DEVICE_POLICY_ACROSS_USERS_FULL="android.permission.MANAGE_DEVICE_POLICY_ACROSS_USERS_FULL";i.MANAGE_DEVICE_POLICY_ACROSS_USERS_SECURITY_CRITICAL="android.permission.MANAGE_DEVICE_POLICY_ACROSS_USERS_SECURITY_CRITICAL";i.MANAGE_DEVICE_POLICY_AIRPLANE_MODE="android.permission.MANAGE_DEVICE_POLICY_AIRPLANE_MODE";i.MANAGE_DEVICE_POLICY_APPS_CONTROL="android.permission.MANAGE_DEVICE_POLICY_APPS_CONTROL";i.MANAGE_DEVICE_POLICY_APP_RESTRICTIONS="android.permission.MANAGE_DEVICE_POLICY_APP_RESTRICTIONS";i.MANAGE_DEVICE_POLICY_APP_USER_DATA="android.permission.MANAGE_DEVICE_POLICY_APP_USER_DATA";i.MANAGE_DEVICE_POLICY_AUDIO_OUTPUT="android.permission.MANAGE_DEVICE_POLICY_AUDIO_OUTPUT";i.MANAGE_DEVICE_POLICY_AUTOFILL="android.permission.MANAGE_DEVICE_POLICY_AUTOFILL";i.MANAGE_DEVICE_POLICY_BACKUP_SERVICE="android.permission.MANAGE_DEVICE_POLICY_BACKUP_SERVICE";i.MANAGE_DEVICE_POLICY_BLUETOOTH="android.permission.MANAGE_DEVICE_POLICY_BLUETOOTH";i.MANAGE_DEVICE_POLICY_BUGREPORT="android.permission.MANAGE_DEVICE_POLICY_BUGREPORT";i.MANAGE_DEVICE_POLICY_CALLS="android.permission.MANAGE_DEVICE_POLICY_CALLS";i.MANAGE_DEVICE_POLICY_CAMERA="android.permission.MANAGE_DEVICE_POLICY_CAMERA";i.MANAGE_DEVICE_POLICY_CERTIFICATES="android.permission.MANAGE_DEVICE_POLICY_CERTIFICATES";i.MANAGE_DEVICE_POLICY_COMMON_CRITERIA_MODE="android.permission.MANAGE_DEVICE_POLICY_COMMON_CRITERIA_MODE";i.MANAGE_DEVICE_POLICY_DEBUGGING_FEATURES="android.permission.MANAGE_DEVICE_POLICY_DEBUGGING_FEATURES";i.MANAGE_DEVICE_POLICY_DEFAULT_SMS="android.permission.MANAGE_DEVICE_POLICY_DEFAULT_SMS";i.MANAGE_DEVICE_POLICY_DEVICE_IDENTIFIERS="android.permission.MANAGE_DEVICE_POLICY_DEVICE_IDENTIFIERS";i.MANAGE_DEVICE_POLICY_DISPLAY="android.permission.MANAGE_DEVICE_POLICY_DISPLAY";i.MANAGE_DEVICE_POLICY_FACTORY_RESET="android.permission.MANAGE_DEVICE_POLICY_FACTORY_RESET";i.MANAGE_DEVICE_POLICY_FUN="android.permission.MANAGE_DEVICE_POLICY_FUN";i.MANAGE_DEVICE_POLICY_INPUT_METHODS="android.permission.MANAGE_DEVICE_POLICY_INPUT_METHODS";i.MANAGE_DEVICE_POLICY_INSTALL_UNKNOWN_SOURCES="android.permission.MANAGE_DEVICE_POLICY_INSTALL_UNKNOWN_SOURCES";i.MANAGE_DEVICE_POLICY_KEEP_UNINSTALLED_PACKAGES="android.permission.MANAGE_DEVICE_POLICY_KEEP_UNINSTALLED_PACKAGES";i.MANAGE_DEVICE_POLICY_KEYGUARD="android.permission.MANAGE_DEVICE_POLICY_KEYGUARD";i.MANAGE_DEVICE_POLICY_LOCALE="android.permission.MANAGE_DEVICE_POLICY_LOCALE";i.MANAGE_DEVICE_POLICY_LOCATION="android.permission.MANAGE_DEVICE_POLICY_LOCATION";i.MANAGE_DEVICE_POLICY_LOCK="android.permission.MANAGE_DEVICE_POLICY_LOCK";i.MANAGE_DEVICE_POLICY_LOCK_CREDENTIALS="android.permission.MANAGE_DEVICE_POLICY_LOCK_CREDENTIALS";i.MANAGE_DEVICE_POLICY_LOCK_TASK="android.permission.MANAGE_DEVICE_POLICY_LOCK_TASK";i.MANAGE_DEVICE_POLICY_METERED_DATA="android.permission.MANAGE_DEVICE_POLICY_METERED_DATA";i.MANAGE_DEVICE_POLICY_MICROPHONE="android.permission.MANAGE_DEVICE_POLICY_MICROPHONE";i.MANAGE_DEVICE_POLICY_MOBILE_NETWORK="android.permission.MANAGE_DEVICE_POLICY_MOBILE_NETWORK";i.MANAGE_DEVICE_POLICY_MODIFY_USERS="android.permission.MANAGE_DEVICE_POLICY_MODIFY_USERS";i.MANAGE_DEVICE_POLICY_MTE="android.permission.MANAGE_DEVICE_POLICY_MTE";i.MANAGE_DEVICE_POLICY_NEARBY_COMMUNICATION="android.permission.MANAGE_DEVICE_POLICY_NEARBY_COMMUNICATION";i.MANAGE_DEVICE_POLICY_NETWORK_LOGGING="android.permission.MANAGE_DEVICE_POLICY_NETWORK_LOGGING";i.MANAGE_DEVICE_POLICY_ORGANIZATION_IDENTITY="android.permission.MANAGE_DEVICE_POLICY_ORGANIZATION_IDENTITY";i.MANAGE_DEVICE_POLICY_OVERRIDE_APN="android.permission.MANAGE_DEVICE_POLICY_OVERRIDE_APN";i.MANAGE_DEVICE_POLICY_PACKAGE_STATE="android.permission.MANAGE_DEVICE_POLICY_PACKAGE_STATE";i.MANAGE_DEVICE_POLICY_PHYSICAL_MEDIA="android.permission.MANAGE_DEVICE_POLICY_PHYSICAL_MEDIA";i.MANAGE_DEVICE_POLICY_PRINTING="android.permission.MANAGE_DEVICE_POLICY_PRINTING";i.MANAGE_DEVICE_POLICY_PRIVATE_DNS="android.permission.MANAGE_DEVICE_POLICY_PRIVATE_DNS";i.MANAGE_DEVICE_POLICY_PROFILES="android.permission.MANAGE_DEVICE_POLICY_PROFILES";i.MANAGE_DEVICE_POLICY_PROFILE_INTERACTION="android.permission.MANAGE_DEVICE_POLICY_PROFILE_INTERACTION";i.MANAGE_DEVICE_POLICY_PROXY="android.permission.MANAGE_DEVICE_POLICY_PROXY";i.MANAGE_DEVICE_POLICY_QUERY_SYSTEM_UPDATES="android.permission.MANAGE_DEVICE_POLICY_QUERY_SYSTEM_UPDATES";i.MANAGE_DEVICE_POLICY_RESET_PASSWORD="android.permission.MANAGE_DEVICE_POLICY_RESET_PASSWORD";i.MANAGE_DEVICE_POLICY_RESTRICT_PRIVATE_DNS="android.permission.MANAGE_DEVICE_POLICY_RESTRICT_PRIVATE_DNS";i.MANAGE_DEVICE_POLICY_RUNTIME_PERMISSIONS="android.permission.MANAGE_DEVICE_POLICY_RUNTIME_PERMISSIONS";i.MANAGE_DEVICE_POLICY_RUN_IN_BACKGROUND="android.permission.MANAGE_DEVICE_POLICY_RUN_IN_BACKGROUND";i.MANAGE_DEVICE_POLICY_SAFE_BOOT="android.permission.MANAGE_DEVICE_POLICY_SAFE_BOOT";i.MANAGE_DEVICE_POLICY_SCREEN_CAPTURE="android.permission.MANAGE_DEVICE_POLICY_SCREEN_CAPTURE";i.MANAGE_DEVICE_POLICY_SCREEN_CONTENT="android.permission.MANAGE_DEVICE_POLICY_SCREEN_CONTENT";i.MANAGE_DEVICE_POLICY_SECURITY_LOGGING="android.permission.MANAGE_DEVICE_POLICY_SECURITY_LOGGING";i.MANAGE_DEVICE_POLICY_SETTINGS="android.permission.MANAGE_DEVICE_POLICY_SETTINGS";i.MANAGE_DEVICE_POLICY_SMS="android.permission.MANAGE_DEVICE_POLICY_SMS";i.MANAGE_DEVICE_POLICY_STATUS_BAR="android.permission.MANAGE_DEVICE_POLICY_STATUS_BAR";i.MANAGE_DEVICE_POLICY_SUPPORT_MESSAGE="android.permission.MANAGE_DEVICE_POLICY_SUPPORT_MESSAGE";i.MANAGE_DEVICE_POLICY_SUSPEND_PERSONAL_APPS="android.permission.MANAGE_DEVICE_POLICY_SUSPEND_PERSONAL_APPS";i.MANAGE_DEVICE_POLICY_SYSTEM_APPS="android.permission.MANAGE_DEVICE_POLICY_SYSTEM_APPS";i.MANAGE_DEVICE_POLICY_SYSTEM_DIALOGS="android.permission.MANAGE_DEVICE_POLICY_SYSTEM_DIALOGS";i.MANAGE_DEVICE_POLICY_SYSTEM_UPDATES="android.permission.MANAGE_DEVICE_POLICY_SYSTEM_UPDATES";i.MANAGE_DEVICE_POLICY_TIME="android.permission.MANAGE_DEVICE_POLICY_TIME";i.MANAGE_DEVICE_POLICY_USB_DATA_SIGNALLING="android.permission.MANAGE_DEVICE_POLICY_USB_DATA_SIGNALLING";i.MANAGE_DEVICE_POLICY_USB_FILE_TRANSFER="android.permission.MANAGE_DEVICE_POLICY_USB_FILE_TRANSFER";i.MANAGE_DEVICE_POLICY_USERS="android.permission.MANAGE_DEVICE_POLICY_USERS";i.MANAGE_DEVICE_POLICY_VPN="android.permission.MANAGE_DEVICE_POLICY_VPN";i.MANAGE_DEVICE_POLICY_WALLPAPER="android.permission.MANAGE_DEVICE_POLICY_WALLPAPER";i.MANAGE_DEVICE_POLICY_WIFI="android.permission.MANAGE_DEVICE_POLICY_WIFI";i.MANAGE_DEVICE_POLICY_WINDOWS="android.permission.MANAGE_DEVICE_POLICY_WINDOWS";i.MANAGE_DEVICE_POLICY_WIPE_DATA="android.permission.MANAGE_DEVICE_POLICY_WIPE_DATA";i.MANAGE_DOCUMENTS="android.permission.MANAGE_DOCUMENTS";i.MANAGE_EXTERNAL_STORAGE="android.permission.MANAGE_EXTERNAL_STORAGE";i.MANAGE_MEDIA="android.permission.MANAGE_MEDIA";i.MANAGE_ONGOING_CALLS="android.permission.MANAGE_ONGOING_CALLS";i.MANAGE_OWN_CALLS="android.permission.MANAGE_OWN_CALLS";i.MANAGE_WIFI_INTERFACES="android.permission.MANAGE_WIFI_INTERFACES";i.MANAGE_WIFI_NETWORK_SELECTION="android.permission.MANAGE_WIFI_NETWORK_SELECTION";i.MASTER_CLEAR="android.permission.MASTER_CLEAR";i.MEDIA_CONTENT_CONTROL="android.permission.MEDIA_CONTENT_CONTROL";i.MODIFY_AUDIO_SETTINGS="android.permission.MODIFY_AUDIO_SETTINGS";i.MODIFY_PHONE_STATE="android.permission.MODIFY_PHONE_STATE";i.MOUNT_FORMAT_FILESYSTEMS="android.permission.MOUNT_FORMAT_FILESYSTEMS";i.MOUNT_UNMOUNT_FILESYSTEMS="android.permission.MOUNT_UNMOUNT_FILESYSTEMS";i.NEARBY_WIFI_DEVICES="android.permission.NEARBY_WIFI_DEVICES";i.NFC="android.permission.NFC";i.NFC_PREFERRED_PAYMENT_INFO="android.permission.NFC_PREFERRED_PAYMENT_INFO";i.NFC_TRANSACTION_EVENT="android.permission.NFC_TRANSACTION_EVENT";i.OVERRIDE_WIFI_CONFIG="android.permission.OVERRIDE_WIFI_CONFIG";i.PACKAGE_USAGE_STATS="android.permission.PACKAGE_USAGE_STATS";i.PERSISTENT_ACTIVITY="android.permission.PERSISTENT_ACTIVITY";i.POST_NOTIFICATIONS="android.permission.POST_NOTIFICATIONS";i.PROCESS_OUTGOING_CALLS="android.permission.PROCESS_OUTGOING_CALLS";i.PROVIDE_OWN_AUTOFILL_SUGGESTIONS="android.permission.PROVIDE_OWN_AUTOFILL_SUGGESTIONS";i.PROVIDE_REMOTE_CREDENTIALS="android.permission.PROVIDE_REMOTE_CREDENTIALS";i.QUERY_ALL_PACKAGES="android.permission.QUERY_ALL_PACKAGES";i.READ_ASSISTANT_APP_SEARCH_DATA="android.permission.READ_ASSISTANT_APP_SEARCH_DATA";i.READ_BASIC_PHONE_STATE="android.permission.READ_BASIC_PHONE_STATE";i.READ_CALENDAR="android.permission.READ_CALENDAR";i.READ_CALL_LOG="android.permission.READ_CALL_LOG";i.READ_CONTACTS="android.permission.READ_CONTACTS";i.READ_EXTERNAL_STORAGE="android.permission.READ_EXTERNAL_STORAGE";i.READ_HOME_APP_SEARCH_DATA="android.permission.READ_HOME_APP_SEARCH_DATA";i.READ_INPUT_STATE="android.permission.READ_INPUT_STATE";i.READ_LOGS="android.permission.READ_LOGS";i.READ_MEDIA_AUDIO="android.permission.READ_MEDIA_AUDIO";i.READ_MEDIA_IMAGES="android.permission.READ_MEDIA_IMAGES";i.READ_MEDIA_VIDEO="android.permission.READ_MEDIA_VIDEO";i.READ_MEDIA_VISUAL_USER_SELECTED="android.permission.READ_MEDIA_VISUAL_USER_SELECTED";i.READ_NEARBY_STREAMING_POLICY="android.permission.READ_NEARBY_STREAMING_POLICY";i.READ_PHONE_NUMBERS="android.permission.READ_PHONE_NUMBERS";i.READ_PHONE_STATE="android.permission.READ_PHONE_STATE";i.READ_PRECISE_PHONE_STATE="android.permission.READ_PRECISE_PHONE_STATE";i.READ_SMS="android.permission.READ_SMS";i.READ_SYNC_SETTINGS="android.permission.READ_SYNC_SETTINGS";i.READ_SYNC_STATS="android.permission.READ_SYNC_STATS";i.READ_VOICEMAIL="com.android.voicemail.permission.READ_VOICEMAIL";i.REBOOT="android.permission.REBOOT";i.RECEIVE_BOOT_COMPLETED="android.permission.RECEIVE_BOOT_COMPLETED";i.RECEIVE_MMS="android.permission.RECEIVE_MMS";i.RECEIVE_SMS="android.permission.RECEIVE_SMS";i.RECEIVE_WAP_PUSH="android.permission.RECEIVE_WAP_PUSH";i.RECORD_AUDIO="android.permission.RECORD_AUDIO";i.REORDER_TASKS="android.permission.REORDER_TASKS";i.REQUEST_COMPANION_PROFILE_APP_STREAMING="android.permission.REQUEST_COMPANION_PROFILE_APP_STREAMING";i.REQUEST_COMPANION_PROFILE_AUTOMOTIVE_PROJECTION="android.permission.REQUEST_COMPANION_PROFILE_AUTOMOTIVE_PROJECTION";i.REQUEST_COMPANION_PROFILE_COMPUTER="android.permission.REQUEST_COMPANION_PROFILE_COMPUTER";i.REQUEST_COMPANION_PROFILE_GLASSES="android.permission.REQUEST_COMPANION_PROFILE_GLASSES";i.REQUEST_COMPANION_PROFILE_NEARBY_DEVICE_STREAMING="android.permission.REQUEST_COMPANION_PROFILE_NEARBY_DEVICE_STREAMING";i.REQUEST_COMPANION_PROFILE_WATCH="android.permission.REQUEST_COMPANION_PROFILE_WATCH";i.REQUEST_COMPANION_RUN_IN_BACKGROUND="android.permission.REQUEST_COMPANION_RUN_IN_BACKGROUND";i.REQUEST_COMPANION_SELF_MANAGED="android.permission.REQUEST_COMPANION_SELF_MANAGED";i.REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND="android.permission.REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND";i.REQUEST_COMPANION_USE_DATA_IN_BACKGROUND="android.permission.REQUEST_COMPANION_USE_DATA_IN_BACKGROUND";i.REQUEST_DELETE_PACKAGES="android.permission.REQUEST_DELETE_PACKAGES";i.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS="android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS";i.REQUEST_INSTALL_PACKAGES="android.permission.REQUEST_INSTALL_PACKAGES";i.REQUEST_OBSERVE_COMPANION_DEVICE_PRESENCE="android.permission.REQUEST_OBSERVE_COMPANION_DEVICE_PRESENCE";i.REQUEST_PASSWORD_COMPLEXITY="android.permission.REQUEST_PASSWORD_COMPLEXITY";i.RESTART_PACKAGES="android.permission.RESTART_PACKAGES";i.RUN_USER_INITIATED_JOBS="android.permission.RUN_USER_INITIATED_JOBS";i.SCHEDULE_EXACT_ALARM="android.permission.SCHEDULE_EXACT_ALARM";i.SEND_RESPOND_VIA_MESSAGE="android.permission.SEND_RESPOND_VIA_MESSAGE";i.SEND_SMS="android.permission.SEND_SMS";i.SET_ALARM="com.android.alarm.permission.SET_ALARM";i.SET_ALWAYS_FINISH="android.permission.SET_ALWAYS_FINISH";i.SET_ANIMATION_SCALE="android.permission.SET_ANIMATION_SCALE";i.SET_DEBUG_APP="android.permission.SET_DEBUG_APP";i.SET_PREFERRED_APPLICATIONS="android.permission.SET_PREFERRED_APPLICATIONS";i.SET_PROCESS_LIMIT="android.permission.SET_PROCESS_LIMIT";i.SET_TIME="android.permission.SET_TIME";i.SET_TIME_ZONE="android.permission.SET_TIME_ZONE";i.SET_WALLPAPER="android.permission.SET_WALLPAPER";i.SET_WALLPAPER_HINTS="android.permission.SET_WALLPAPER_HINTS";i.SIGNAL_PERSISTENT_PROCESSES="android.permission.SIGNAL_PERSISTENT_PROCESSES";i.SMS_FINANCIAL_TRANSACTIONS="android.permission.SMS_FINANCIAL_TRANSACTIONS";i.START_FOREGROUND_SERVICES_FROM_BACKGROUND="android.permission.START_FOREGROUND_SERVICES_FROM_BACKGROUND";i.START_VIEW_APP_FEATURES="android.permission.START_VIEW_APP_FEATURES";i.START_VIEW_PERMISSION_USAGE="android.permission.START_VIEW_PERMISSION_USAGE";i.STATUS_BAR="android.permission.STATUS_BAR";i.SUBSCRIBE_TO_KEYGUARD_LOCKED_STATE="android.permission.SUBSCRIBE_TO_KEYGUARD_LOCKED_STATE";i.SYSTEM_ALERT_WINDOW="android.permission.SYSTEM_ALERT_WINDOW";i.TRANSMIT_IR="android.permission.TRANSMIT_IR";i.TURN_SCREEN_ON="android.permission.TURN_SCREEN_ON";i.UNINSTALL_SHORTCUT="com.android.launcher.permission.UNINSTALL_SHORTCUT";i.UPDATE_DEVICE_STATS="android.permission.UPDATE_DEVICE_STATS";i.UPDATE_PACKAGES_WITHOUT_USER_ACTION="android.permission.UPDATE_PACKAGES_WITHOUT_USER_ACTION";i.USE_BIOMETRIC="android.permission.USE_BIOMETRIC";i.USE_EXACT_ALARM="android.permission.USE_EXACT_ALARM";i.USE_FINGERPRINT="android.permission.USE_FINGERPRINT";i.USE_FULL_SCREEN_INTENT="android.permission.USE_FULL_SCREEN_INTENT";i.USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER="android.permission.USE_ICC_AUTH_WITH_DEVICE_IDENTIFIER";i.USE_SIP="android.permission.USE_SIP";i.UWB_RANGING="android.permission.UWB_RANGING";i.VIBRATE="android.permission.VIBRATE";i.WAKE_LOCK="android.permission.WAKE_LOCK";i.WRITE_APN_SETTINGS="android.permission.WRITE_APN_SETTINGS";i.WRITE_CALENDAR="android.permission.WRITE_CALENDAR";i.WRITE_CALL_LOG="android.permission.WRITE_CALL_LOG";i.WRITE_CONTACTS="android.permission.WRITE_CONTACTS";i.WRITE_EXTERNAL_STORAGE="android.permission.WRITE_EXTERNAL_STORAGE";i.WRITE_GSERVICES="android.permission.WRITE_GSERVICES";i.WRITE_SECURE_SETTINGS="android.permission.WRITE_SECURE_SETTINGS";i.WRITE_SETTINGS="android.permission.WRITE_SETTINGS";i.WRITE_SYNC_SETTINGS="android.permission.WRITE_SYNC_SETTINGS";i.WRITE_VOICEMAIL="com.android.voicemail.permission.WRITE_VOICEMAIL";class N{}N.Permission=i;N.PermissionGroup=C;var Ai=(n,E,e)=>new Promise((s,_)=>{var o=A=>{try{t(e.next(A))}catch(a){_(a)}},r=A=>{try{t(e.throw(A))}catch(a){_(a)}},t=A=>A.done?s(A.value):Promise.resolve(A.value).then(o,r);t((e=e.apply(n,E)).next())});let y;function ti(){return Ai(this,null,function*(){y=yield u("droid-android/android/components/content")})}ti();function K(){return y}function Ii(n,E){}function Ci(n){return{askUi:n,callback:Ii,permissionId:0,scripts:{ask:{script:"",isRunner:!1},check:{script:"",isRunner:!1}},listenResume:!0}}function ai(){const n=K();let E={cancelButtonText:n("A11yPermission.cancel"),checkBoxText:n("A11yPermission.checkBoxText"),hasCheckBox:!0,okButtonText:n("A11yPermission.ok"),storageKey:"storageKeys.permissions.a11y.showAsk",text:n("A11yPermission.content"),title:n("A11yPermission.title")},e=new H;return e.conf=E,e}function di(){let n=ai(),E=Ci(n),e=new Si;return e.conf=E,e}class Si extends U{constructor(){super(),this.androidPermissionList=[N.Permission.BIND_ACCESSIBILITY_SERVICE]}runCheck(){let{print:E,error:e,warn:s,logger:_}=this.logger.sub(!1,"fn_ask"),o=T.onCallGetA11yServiceLiveInfo(),{errMsg:r,javaResultData:t}=o;if(r){e(r),e(r);return}return E("data2 is",o),t==null?void 0:t.hasPermission}ask(){T.onCallOpenA11yPermission()}}var Ni=(n,E,e)=>new Promise((s,_)=>{var o=A=>{try{t(e.next(A))}catch(a){_(a)}},r=A=>{try{t(e.throw(A))}catch(a){_(a)}},t=A=>A.done?s(A.value):Promise.resolve(A.value).then(o,r);t((e=e.apply(n,E)).next())});function Ti(){return Ni(this,null,function*(){yield u("droid-android/android/components/content")})}Ti();function Oi(n,E){}function x(n,E){let e=`
var bl = com.fanfanlo.lib.permissions.FloatPermission.openPermission(function(bl){
        webViewJs.callJsEvent("${n}", bl, "${E}");
    });
    webViewJs.callJsEvent("${n}", bl, "${E}");
`;const s={forceStopTime:0,onlyRunSingle:!0,stopPrevIfOnlyRunSingle:!0,injects:[["webViewJs"]],script:e};return R.confToScript(s)}function Ri(n,E,e){return{askUi:n,callback:Oi,permissionId:0,scripts:{ask:{script:x(E,e),isRunner:!0},check:{script:`var bl = com.fanfanlo.lib.permissions.FloatPermission.hasPermission();
 bl;`,isRunner:!1}},listenResume:!1}}function Di(){const n=K();let E={cancelButtonText:n("floatPermission.cancel"),checkBoxText:n("floatPermission.checkBoxText"),hasCheckBox:!0,okButtonText:n("floatPermission.ok"),storageKey:"storageKeys.permissions.float.showAsk",text:n("floatPermission.content"),title:n("floatPermission.title")},e=new H;return e.conf=E,e}function Li(n,E){let e=new G(!1,"fn-listenAskBackEvent").print;const s=Y.instance.shellListen(B.webViewJs.name,n,n,!0,_);e("index is",s);function _(r){e("fn-onBack result is",r)}document.addEventListener(m,o);function o(){document.removeEventListener(m,o);let r=Y.instance.shellRemoveListen(B.webViewJs.name,s);E.askComplete(),e("android listener removeListen",r)}}function mi(){let n=Di(),E=Date.now().toString(),e=`onFloatPermissionSettingResult${E}`,s=Ri(n,e,E),_=new li;return _.conf=s,_}class li extends U{constructor(){super(),this.androidPermissionList=[N.Permission.SYSTEM_ALERT_WINDOW]}ask(){let E=Date.now().toString(),e=`onFloatPermissionSettingResult${E}`;this.conf.scripts.ask.script=x(e,E),Li(e,this),super.ask(),this.dispatchMayUpdatedEvent(void 0,void 0)}}const $=class b extends h{constructor(E=[]){super(),this.index=-1,this.logger=new G(!1,this.constructor.name),this.run=()=>{this.checkNext()},this.runPermission=()=>{if(this.permissions.length<=this.index)throw new Error("permission index out of bounds");let e=this.permissions[this.index];e.addDomainEventListener(this,U.eventComplete,this.onPermissionComplete),e.checkOrAsk()},this.onPermissionComplete=e=>{e.target.removeDomain(this),this.checkNext()},this.checkNext=()=>{if(this.index++,this.index>=this.permissions.length)return this.dispatchComplete();this.runPermission()},this.dispatchComplete=()=>{var e;this.dispatchEvent(new V(b.eventComplete)),(e=this.callback)==null||e.call(this,this,this.isSuccess)},this.exit=()=>{for(let e=0;e<this.permissions.length;e++)this.permissions[e].removeDomain(this)},this.permissions=E}get isSuccess(){let{print:E,error:e,warn:s,logger:_}=this.logger.sub(!1,"fn_isSuccess");for(let o=0;o<this.permissions.length;o++){let r=this.permissions[o];if(E(`permission is ${r.constructor.name}, success is ${r.isSuccess}`),!r.isSuccess)return!1}return!0}addCallback(E){return this.callback=E,this}};$.eventComplete="complete";let Q=$;var Pi=(n,E,e)=>new Promise((s,_)=>{var o=A=>{try{t(e.next(A))}catch(a){_(a)}},r=A=>{try{t(e.throw(A))}catch(a){_(a)}},t=A=>A.done?s(A.value):Promise.resolve(A.value).then(o,r);t((e=e.apply(n,E)).next())});const g=N.Permission,ci={[g.BIND_ACCESSIBILITY_SERVICE]:di,[g.SYSTEM_ALERT_WINDOW]:mi};function pi(...n){let E=[];for(let s=0;s<n.length;s++){let _=n[s],o=ci[_];if(!o)throw new Error("no permission registed "+_);E.push(o())}return new Q(E)}function Mi(...n){return Pi(this,null,function*(){return new Promise((E,e)=>{let s=pi(...n);s.addEventListener(Q.eventComplete,()=>{s.isSuccess?E(s):e(s)}),s.run()})})}const F="[a-fA-F\\d:]",S=n=>n&&n.includeBoundaries?`(?:(?<=\\s|^)(?=${F})|(?<=${F})(?=\\s|$))`:"",d="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",I="[a-fA-F\\d]{1,4}",P=`
(?:
(?:${I}:){7}(?:${I}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${I}:){6}(?:${d}|:${I}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${I}:){5}(?::${d}|(?::${I}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${I}:){4}(?:(?::${I}){0,1}:${d}|(?::${I}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${I}:){3}(?:(?::${I}){0,2}:${d}|(?::${I}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${I}:){2}(?:(?::${I}){0,3}:${d}|(?::${I}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${I}:){1}(?:(?::${I}){0,4}:${d}|(?::${I}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${I}){0,5}:${d}|(?::${I}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Gi=new RegExp(`(?:^${d}$)|(?:^${P}$)`),ui=new RegExp(`^${d}$`),Vi=new RegExp(`^${P}$`),f=n=>n&&n.exact?Gi:new RegExp(`(?:${S(n)}${d}${S(n)})|(?:${S(n)}${P}${S(n)})`,"g");f.v4=n=>n&&n.exact?ui:new RegExp(`${S(n)}${d}${S(n)}`,"g");f.v6=n=>n&&n.exact?Vi:new RegExp(`${S(n)}${P}${S(n)}`,"g");function hi(n){const E=(...e)=>n(...e);return Object.defineProperty(E,"name",{value:`functionTimeout(${n.name||"<anonymous>"})`,configurable:!0}),E}const{toString:Ui}=Object.prototype;function fi(n){return Ui.call(n)==="[object RegExp]"}const v={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function Yi(n,E={}){if(!fi(n))throw new TypeError("Expected a RegExp instance");const e=Object.keys(v).map(_=>(typeof E[_]=="boolean"?E[_]:n[_])?v[_]:"").join(""),s=new RegExp(E.source||n.source,e);return s.lastIndex=typeof E.lastIndex=="number"?E.lastIndex:n.lastIndex,s}function Bi(n,E,{timeout:e}={}){try{return hi(()=>Yi(n).test(E),{timeout:e})()}catch(s){throw s}}const gi=45,Fi={timeout:400};function vi(n){return n.length>gi?!1:Bi(f({exact:!0}),n,Fi)}function wi(){return typeof window>"u"?"":vi(window.location.hostname)?`${window.location.protocol}://${window.location.hostname}:5173/`:window.location.origin+"/"}class Wi{constructor(){this.htmlOrigin=wi()}}const ki=new Wi;var Hi=(n,E,e)=>new Promise((s,_)=>{var o=A=>{try{t(e.next(A))}catch(a){_(a)}},r=A=>{try{t(e.throw(A))}catch(a){_(a)}},t=A=>A.done?s(A.value):Promise.resolve(A.value).then(o,r);t((e=e.apply(n,E)).next())});const{htmlOrigin:O}=ki;function yi(n){return`
    function onJavaCallTerminate(){
        let res = ""
        if(win){
            win.dispatchEvent("callExit", "", true);
            res += \`window exited123\\n\`
        }
        return javaRunner;
        return res;
    }
    const webViewJsParams = {
        javaToJsDataString:'${window.btoa(n)}',
        fitContentWidth:true,
        fitContentHeight:true,
    }
    var webViewConf = {
        backgroundColor:0,
        layoutParams:{
            width:-1,
            height:5000
        }
    }
    var htmlConf = {
        url2:"${O}pages/accessibility-nodes-panel/#/",
        url:"${O}pages/accessibility-nodes-panel/index.html/",
        webViewJsParams:webViewJsParams,
        webViewConf:webViewConf
    }

    var Gravity = android.view.Gravity;
    var PixelFormat = android.graphics.PixelFormat;
    var LayoutParams = android.view.WindowManager.LayoutParams;
    var WindowManager = android.view.WindowManager;
    var statusBarHeight = com.fanfanlo.lib.utils.SysUtils.Companion.statusBarHeight;
    var viewLayoutParams = {
        width:-1,
        height:-100,
        type:WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,
        flags:WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS|WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
        flags2:WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS ,
        format:PixelFormat.TRANSLUCENT,
        gravity : Gravity.START | Gravity.LEFT,
        x:0,
        y:0
    }

    var systemWindowConf ={
        viewLayoutParams:viewLayoutParams,
        listenBackKey:true
    }
    var conf = {
        contentType:"html",
        windowType:"system",
        forceDismissWindowTime:1000 * 10 * 30,
        htmlConf:htmlConf,
        systemWindowConf:systemWindowConf
    }
    var builder = com.fanfanlo.lib.components.floatview.floatwindow.WindowBuilder;
    var win = builder.build(JSON.stringify(conf), a11yModel._service)
    win.addListener("windowDismiss", function (s){javaRunner.onJsCallStoped()}, true, null)
    `}function Ki(n){const E={forceStopTime:0,onlyRunSingle:!0,stopPrevIfOnlyRunSingle:!0,script:yi(n),scriptParams:[O],injects:[["a11yModel"],["javaRunner"]],params:{[O]:O,javaToJsDataString:""}};R.instance.callScriptByConf(E)}function xi(n){return Hi(this,null,function*(){let{errMsg:E,javaResultData:e,javaResultString:s}=R.instance.onCallNowPackageNodesJsonInfo();if(console.log("openHtmlNodesPanel_fn",E,e,s),E){const r=`"openHtmlNodesPanel has error", ${E}`;c(r,n),alert(E);return}if({errMsg:E,javaResultData:e}=R.instance.onCallNowPackageNodesJsonInfo(),E){const r=`"openHtmlNodesPanel onCallNowPackageNodesJsonInfo has error", ${E}`;c(r,n),alert(E);return}const[_]=yield ni(Mi(N.Permission.SYSTEM_ALERT_WINDOW,N.Permission.BIND_ACCESSIBILITY_SERVICE));if(_){const r=`call runPermissionGroup err ${_.toString()}`;c(r,n),alert(r);return}const o={event:n,info:s};console.log("ooooooooooooaaaaaaaaaaaddddddddddd333336666666666",JSON.stringify(o)),Ki(JSON.stringify(o))})}const L=new R;async function $i(){j(),Z();const n="htmls/pages/accessibility-info-buttons/content",E=await u(n),e=await q(n,"content.title");L.init(),document.title=e,bi(E)}$i();async function bi(n){const{errMsg:E,javaResultData:e,javaResultString:s}=L.callJavaToJsDataString();E&&console.log("eeeeeeeeeeeeeeeeror a11y node info button toosl",E);const _=document.getElementById("layout");_.innerText=n("content.layout");const o=document.getElementById("close");o.innerText=n("content.close"),document.getElementById("close").onclick=function(){L.onJsCallEvent("callExit","")},document.getElementById("layout").onclick=function(){console.log("java resultData event=",e),xi(e.event)},L.onDocumentReady(),_i("WebViewJsDispatcher","a11yEditNodeSelected","a11yEditNodeSelected",!0)}
