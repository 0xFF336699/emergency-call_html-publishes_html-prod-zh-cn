import"./_commonjsHelpers-B-UnjaXt.js";import{b as Y,A as j,i as q,c as G,g as Q,a as Z}from"./AutoWebViewJs-Dd6EJXHO.js";import{a as J}from"./androidDispatchers-BsATMfwW.js";class _{constructor(e,c,a){this.prop=e,this.alias=c,this.valueType=a}}const E={},M=[],H=[],U=[],O=[],ee={text:"text",num:"num",bl:"bl",rect:"rect",unused:"unused"},te={viewIdResourceName:"viewIdResourceName",text:"text",contentDescription:"contentDescription",availableExtraData:"availableExtraData",hintText:"hintText",className:"className",boundsInScreen:"boundsInScreen",index:"index",isAccessibilityDataSensitive:"isAccessibilityDataSensitive",isAccessibilityFocused:"isAccessibilityFocused",isCheckable:"isCheckable",isChecked:"isChecked",isClickable:"isClickable",isContentInvalid:"isContentInvalid",isContextClickable:"isContextClickable",isDismissable:"isDismissable",isEditable:"isEditable",isEnabled:"isEnabled",isFocusable:"isFocusable",isFocused:"isFocused",isHeading:"isHeading",isImportantForAccessibility:"isImportantForAccessibility",isLongClickable:"isLongClickable",isMultiLine:"isMultiLine",isPassword:"isPassword",isScreenReaderFocusable:"isScreenReaderFocusable",isScrollable:"isScrollable",isSelected:"isSelected",isShowingHintText:"isShowingHintText",isTextEntryKey:"isTextEntryKey",isTextSelectable:"isTextSelectable",isVisibleToUser:"isVisibleToUser"};ne();function ne(){function s(l){E[l.prop]=l,M.push(l)}function e(l){E[l.prop]=l,U.push(l)}function c(l){E[l.prop]=l,H.push(l)}function a(l){E[l.prop]=l,O.push(l)}function n(l,p,r){return new _(l,p,r)}const o=te,i=ee;s(n(o.viewIdResourceName,"id",i.text)),s(n(o.text,"文本",i.unused)),s(n(o.contentDescription,"说明",i.text)),s(n(o.availableExtraData,"其它",i.text)),s(n(o.hintText,"提示",i.text)),s(n(o.className,"类名",i.text)),a(n(o.boundsInScreen,"位置",i.rect)),c(n(o.index,"父级位置",i.num)),e(n(o.isAccessibilityDataSensitive,"私密",i.bl)),e(n(o.isAccessibilityFocused,"辅助焦点",i.bl)),e(n(o.isCheckable,"可选",i.bl)),e(n(o.isChecked,"已选",i.bl)),e(n(o.isClickable,"可点击",i.bl)),e(n(o.isContentInvalid,"内容可用",i.bl)),e(n(o.isContextClickable,"内容可点击",i.bl)),e(n(o.isDismissable,"可丢弃",i.bl)),e(n(o.isEditable,"可编辑",i.bl)),e(n(o.isEnabled,"可用",i.bl)),e(n(o.isFocusable,"可焦点",i.bl)),e(n(o.isFocused,"正在焦点",i.bl)),e(n(o.isHeading,"标题",i.bl)),e(n(o.isImportantForAccessibility,"重要辅助",i.bl)),e(n(o.isLongClickable,"可长按",i.bl)),e(n(o.isMultiLine,"多行",i.bl)),e(n(o.isPassword,"密码",i.bl)),e(n(o.isScreenReaderFocusable,"读取器焦点",i.bl)),e(n(o.isScrollable,"可滚动",i.bl)),e(n(o.isSelected,"可选",i.bl)),e(n(o.isShowingHintText,"正在提示",i.bl)),e(n(o.isTextEntryKey,"按键",i.bl)),e(n(o.isTextSelectable,"文字可选",i.bl)),e(n(o.isVisibleToUser,"对用户可见",i.bl))}function ie(s,e){const c=document.getElementById("propertiesContainer");c.innerHTML="";const a=document.createElement("p");a.innerHTML=`
                  <span >
                  <input id="clipboardinput" class=""  type="text" value="def" />
                  <label><span>cccc:</span><span >hhh</span></label>
</span>
`;let n=O[0];i(c,s,n.prop,n.alias,`x=${s.boundsInScreen.left},y=${s.boundsInScreen.top},width=${s.boundsInScreen.right-s.boundsInScreen.left},height=${s.boundsInScreen.bottom-s.boundsInScreen.top}`);for(n of M)i(c,s,n.prop,n.alias,s[n.prop]||"");for(n of H)i(c,s,n.prop,n.alias,s[n.prop]);for(n of U)o(c,s,n.prop,n.alias);function o(p,r,x,I){i(p,r,x,I,r[x]?"true":"false")}function i(p,r,x,I,T){let b,k=r[x];if(k!==void 0&&k!==""){k=JSON.stringify(k);const L=e[x];if(L){const C=L[k];C&&(b=C.length>1)}}l(p,x,I,T,b)}function l(p,r,x,I,T){const b=document.createElement("p");b.innerHTML=`
                  <span >
                  <!--<input class="nodePropertyClass" data-name="${r}" type="checkbox" value="${r}" />-->
                  <label><span>${r}:</span><span style="color:${T==null?"black":T?"red":"green"}">${I}</span></label>
</span>
`,b.onclick=function(){Y.clipboardSetText(I)},p.appendChild(b)}}function oe(s,e){for(const a in E)c(s,E[a].prop);function c(a,n){let o=a[n];if(o===void 0||o==="")return;o=JSON.stringify(o);let i=e[n];i||(i={},e[n]=i);let l=i[o];l||(l=[],i[o]=l),l.push(a)}}function se(s){function e(c,a){document.getElementById(c).innerText=s(`content.${c}`)}e("howToUse"),e("howToUseTooltip"),e("otherNodesSummary"),e("moreNodes"),e("nodeInfoDialogOkButton")}const y=new j;async function le(){q(),G();const s="htmls/pages/accessibility-nodes-panel/content",e=await Q(s),c=await Z(s,"content.title");y.init(),document.title=c,ce(e)}le();function ce(s){if(!y.isInApp){console.log("not in app");return}const{error:e,errMsg:c,javaResultString:a}=y.callJavaToJsDataString();if(e){console.log("callJavaToJsDataString error",c,e);return}se(s),ae(a)}function B(s){return s?decodeURIComponent(s):""}async function ae(s){let e;const c={};let a;try{s=window.atob(s),e=JSON.parse(s),a=e.event;const t=e.info;e=JSON.parse(t),console.log("iiiiiiiiiiiiiiinof",t)}catch(t){console.log("ffffffffffffaaaaaaaaaaaaa err",t),console.log("ssss is",s),T()}const n=e.root;if(!n)return;const o=document.getElementById("layout");if(!o)return;o.innerHTML="";const i=[];let l=null,p=!0,r=[],x=[],I;document.getElementById("pn").onclick=function(){y.clipboardSetText(e.pn)},document.getElementById("an").onclick=function(){y.clipboardSetText(e.activeActivity)},document.getElementById("cn").onclick=function(){y.clipboardSetText(e.className)};function T(){console.log("html nodes info panel excute exit"),y.onJsCallEvent("callExit",""),y.callExitFromJs(),console.log("html nodes info panel exited")}const b=document.getElementById("nodeInfoDialog"),k=document.getElementById("nodeInfoDialogCloseButton");k.onclick=function(){C()};const L=document.getElementById("nodeInfoDialogOkButton");L.onclick=function(){delete I.parent;const t={activeActivity:e.activeActivity,pn:e.pn,cn:e.className,node:I};console.log("node selected",a),console.log("data=",t),console.log("androidDispatchers.WebViewJsDispatcher.name, nodeSelectedEventType",J.WebViewJsDispatcher.name,a),y.dispatchData(J.WebViewJsDispatcher.name,a,JSON.stringify(t)),C(),T()};function C(t){b.close(t),p=!0}b.onclose=function(){p=!0,document.removeEventListener("click",N),document.addEventListener("click",N)};function R(t){t.textDecoded||(t.textDecoded=!0,t.text&&(t.text=B(t.text)),t.contentDescription&&(t.contentDescription=B(t.contentDescription)),t.hintText&&(t.hintText=B(t.hintText)),t.listIndex=i.length,i.push(t))}function P(t){return(t.right-t.left)*(t.bottom-t.top)}document.addEventListener("click",N);let $=Date.now();await A(n,o);function N(t){if(p==!1)return;l=null;const u=t.pageX-window.pageXOffset,d=t.pageY-window.pageYOffset;if(z(u,d),r==null||r.length==0){console.log(`not find, x=${u}, y=${d}`);return}const m=document.getElementById("moreNodes");m.innerHTML="",l=null;for(let S=0;S<r.length;S++){const f=r[S];if(!l)l=f;else{const v=P(f.boundsInScreen),X=P(l.boundsInScreen);v<X&&(l=f)}const h=f.listIndex,D=`nodeUnderPoint${h}`,g=`
            <span>
            <input class="radioinline" name="nodeUnderPoint" type="radio" id="${D}" checked value="${h}">  
                            <label for="${D}">${h}</label>
</span>
            `,w=document.createElement("span");w.innerHTML=g,m.appendChild(w),document.getElementById(D).onchange=v=>{!v||!v.target||V(v.target.value)}}p=!1,document.removeEventListener("click",N),F(l)}function V(t){b.close(t);const u=i[t];u?F(u):console.log("no node finde",t,i.length)}function F(t){I=t;const u=document.getElementById(`node${t.listIndex}`);u.onanimationend=()=>{u.onanimationend=null,u.classList.remove("twinkle2"),b.open||(document.removeEventListener("click",N),b.showModal())},ie(t,c),document.getElementById("pn").innerHTML=e.pn,document.getElementById("an").innerHTML=e.activeActivity,document.getElementById("cn").innerHTML=e.className,W(),u.classList.add("twinkle2");const d=document.getElementById(`nodeUnderPoint${t.listIndex}`);d?d.checked=!0:console.log("ssssssssssssssssssssssssss",t.listIndex,i.length)}function W(){const t=document.getElementsByClassName("nodePropertyClass");for(const u of t)u.onchange=function(d){d.target&&console.log("ddddddddddddddddd",d.target.checked)}}function z(t,u){r=[],x=[];const d=document.elementsFromPoint(t,u);if(!d){console.log("getNodesUnderPoint list is null");return}for(let m=0;m<d.length;m++){const f=d[m].getAttribute("data-index");if(f==null)continue;const h=i[f];h&&(r.push(h),x.push(h.listIndex))}}async function K(){Date.now()-$>1e3&&(await new Promise(t=>setTimeout(t,100*5)),$=Date.now(),console.log("checkLaterDraw"))}async function A(t,u){if(!t)return;await K(),R(t),oe(t,c);const d=t.boundsInScreen;if(!d)return;const m=e.deviceScale;let S=d.left,f=d.top,h=d.right-S,D=d.bottom-f;S/=m,f/=m,f=f+e.statusBarHeight/m,h=h/m,D=D/m;const g=document.createElement("div");g.id=`node${t.listIndex}`,g.style.width=h+"px",g.style.height=D+"px",g.style.left=S+"px",g.style.top=f+"px",g.style.position="absolute",g.style["border-color"]=`#${Number((Math.random()*16777215).toFixed(0)).toString(16)}`,g.classList.add("rect"),g.setAttribute("data-index",t.listIndex),u.appendChild(g);for(let w=0;w<t.children.length;w++){const v=t.children[w];v.index=w,await A(v,u)}}}
