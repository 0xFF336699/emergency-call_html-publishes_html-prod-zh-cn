{"version":3,"file":"static/chunks/pages/join-call-879f7bbacead7244.js","mappings":";;;;;;;;;;;;;;;AAA0C;AACN;AACoB;AAEzC,SAASG;IACpB,MAAMC,YAAY,IAAIC,IAAIC,OAAOC,QAAQ,CAACC,IAAI,EAAEC,YAAY;IAC5D,MAAMC,OAAON,UAAUO,GAAG,CAAC,WAAW;IACtC,MAAMC,OAAQR,UAAUO,GAAG,CAAC,WAAW,aAA2C,oBAAoB;IACtG,MAAME,YAAaT,UAAUO,GAAG,CAAC,gBAAgB,YAAuC,0BAA0B;IAElH,qBAAqB;IACrB,MAAMG,0BAA0B;QAC9B,IAAG,IAAI,EAAC;YACN,OAAO;gBACLC,OAAM;gBACNC,OAAM;gBACNC,iBAAgB;YAClB;QACF;QACE,IAAIJ,cAAc,WAAW;YACzB,+BAA+B;YAC/B,OAAO;gBACHE,OAAOH,SAAS;gBAChBI,OAAOJ,SAAS;gBAChBK,iBAAiB,KAAK,YAAY;YACtC;QACJ,OAAO;YACH,2BAA2B;YAC3B,OAAO;gBACHF,OAAOH,SAAS;gBAChBI,OAAOJ,SAAS;gBAChBK,iBAAiBL,SAAS,YAAY,YAAY;YACtD;QACJ;IACJ;IACA,MAAMM,gBAAgBJ;IAExB,qBACE,wDAACb,wFAAGA;QAACkB,IAAI;YAACC,QAAQ;QAAO;;0BACrB,wDAACnB,wFAAGA;;oBAAC;oBACKS;oBAAK;oBAAQE;oBAAK;oBAAaC;;;0BAE3C,uDAACb,6DAAWA;gBACVqB,UAAUX;gBACVY,UAAU;gBACVC,UAAU,QAAmD,OAA3CC,KAAKC,MAAM,GAAGC,QAAQ,CAAC,IAAIC,SAAS,CAAC,GAAG;gBAC1DC,eAAe1B,2EAASA,CAAC2B,SAAS,CAACC,OAAO;gBAC1CC,qBAAqBb,cAAcH,KAAK;gBACxCiB,qBAAqBd,cAAcF,KAAK;gBACxCJ,MAAMA;gBACNC,WAAWA;gBACXI,iBAAiBC,cAAcD,eAAe;;;;AAItD;;;;;;;;;ACtDA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,KAAwC;AAC/D;AACA;AACA,OAAO,KAAU,EAAE,EAId;AACL","sources":["webpack://_N_E/./src/pages/join-call/index.tsx","webpack://_N_E/?18ea"],"sourcesContent":["import { MeetingRoom } from '@im/livekit';\nimport { Box } from '@mui/material';\nimport { mainModel } from '@src/libs/mc/main/MainModel';\n\nexport default function JoinCall() {\n    const urlParams = new URL(window.location.href).searchParams;\n    const name = urlParams.get(\"code\") || \"test\";\n    const role = (urlParams.get(\"role\") || \"initiator\") as 'initiator' | 'responder'; // Get role from URL\n    const eventType = (urlParams.get(\"eventType\") || \"security\") as 'medical' | 'security'; // Get event type from URL\n\n    // 根据事件类型和角色确定音视频初始状态\n    const getInitialMediaSettings = () => {\n      if(1==1){\n        return {\n          audio:true,\n          video:true,\n          canControlMedia:true\n        }\n      }\n        if (eventType === 'medical') {\n            // 医疗呼救：发送方发送音视频，接收方初始只接收，可手动控制\n            return {\n                audio: role === 'initiator', // 发起者开启音频\n                video: role === 'initiator', // 发起者开启视频\n                canControlMedia: true // 接收方可以手动控制\n            };\n        } else {\n            // 安全呼救：发送方发送音视频但不接收，接收方只接收\n            return {\n                audio: role === 'initiator', // 发起者开启音频\n                video: role === 'initiator', // 发起者开启视频\n                canControlMedia: role === 'responder' // 只有接收方可以控制\n            };\n        }\n    };\n    const mediaSettings = getInitialMediaSettings();\n\n  return (\n    <Box sx={{height: '100vh'}}>\n        <Box>\n            name:{name}, role:{role}, eventType:{eventType}\n        </Box>\n      <MeetingRoom\n        roomName={name}\n        directly={true}\n        userName={`user-${Math.random().toString(36).substring(2, 8)}`}\n        livekitConfig={mainModel.appConfig.livekit}\n        initialAudioEnabled={mediaSettings.audio}\n        initialVideoEnabled={mediaSettings.video}\n        role={role}\n        eventType={eventType}\n        canControlMedia={mediaSettings.canControlMedia}\n      />\n    </Box>\n  );\n}\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/join-call\",\n      function () {\n        return require(\"private-next-pages/join-call/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/join-call\"])\n      });\n    }\n  "],"names":["MeetingRoom","Box","mainModel","JoinCall","urlParams","URL","window","location","href","searchParams","name","get","role","eventType","getInitialMediaSettings","audio","video","canControlMedia","mediaSettings","sx","height","roomName","directly","userName","Math","random","toString","substring","livekitConfig","appConfig","livekit","initialAudioEnabled","initialVideoEnabled"],"sourceRoot":"","ignoreList":[]}