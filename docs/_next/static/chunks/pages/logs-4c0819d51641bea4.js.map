{"version":3,"file":"static/chunks/pages/logs-4c0819d51641bea4.js","mappings":"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","sources":["webpack://_N_E/../../node_modules/.pnpm/styled-jsx@5.1.6_@babel+core@7.28.0_babel-plugin-macros@3.1.0_react@19.1.0/node_modules/styled-jsx/style.js","webpack://_N_E/?59f2","webpack://_N_E/./src/utils/EmergencyLogManager.ts","webpack://_N_E/./src/components/emergency-log-viewer/EmergencyLogViewer.tsx","webpack://_N_E/./src/components/emergency-log-viewer/index.ts","webpack://_N_E/./src/pages/logs/index.tsx","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/fanfanlo/src/i18n/i18n-init.ts","webpack://_N_E/../../libs/fanfanlo/src/storage/store-page-context.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/AppShell.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/PageContent.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/AndroidPageContent.tsx","webpack://_N_E/../../node_modules/.pnpm/styled-jsx@5.1.6_@babel+core@7.28.0_babel-plugin-macros@3.1.0_react@19.1.0/node_modules/styled-jsx/dist/index/index.js","webpack://_N_E/../../libs/app/static/src/mc/static-model.ts","webpack://_N_E/../../libs/app/ui/src/components/motion/page-transition.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/PageShell.tsx","webpack://_N_E/../../libs/app/ui/src/components/appbar/AppBar.tsx"],"sourcesContent":["module.exports = require('./dist/index').style\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/logs\",\n      function () {\n        return require(\"private-next-pages/logs/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/logs\"])\n      });\n    }\n  ","// 紧急呼救日志前端接口\n// 提供Web端查看和管理紧急呼救日志的功能\n\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\n\ninterface EmergencyLogSession {\n  sessionId: number;\n  triggerSource: string;\n  callType: string;\n  startTime: number;\n  endTime?: number;\n  endReason?: string;\n  duration?: number;\n  logCount: number;\n  formattedStartTime: string;\n  formattedEndTime?: string;\n}\n\ninterface EmergencyLogEntry {\n  timestamp: number;\n  formattedTime: string;\n  step: string;\n  message: string;\n  data: Record<string, string>;\n  threadName: string;\n}\n\ninterface EmergencyLogDetail extends EmergencyLogSession {\n  logs: EmergencyLogEntry[];\n}\n\ninterface EmergencyLogStatistics {\n  totalSessions: number;\n  successfulCalls: number;\n  canceledCalls: number;\n  failedCalls: number;\n  averageDuration: number;\n  formattedAverageDuration: string;\n  oldestLogTime?: number;\n  newestLogTime?: number;\n  formattedOldestLogTime?: string;\n  formattedNewestLogTime?: string;\n}\n\ninterface EmergencyLogResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  message?: string;\n}\n\nconst fileLog = new Log(false, 'EmergencyLogManager',)\n// fileLog.pause = true;\n// fileLog.childrenPaused = true;\n\n/**\n * 紧急呼救日志管理类\n */\nclass EmergencyLogManager {\n  \n  /**\n   * Check if running in Android WebView environment\n   */\n  private static isAndroidWebView(): boolean {\n    try {\n      // Check if autoWebViewJs is available\n      const hasAutoWebViewJs = !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n      \n      // Check for Android WebView user agent\n      const isAndroidWebViewUA = /Android.*wv\\)|;.*[wW]v/.test(navigator.userAgent);\n      \n      // Check for other Android interface indicators\n      const hasAndroidInterface = !!(window as any).android || !!(window as any).Android;\n      \n      console.log('🔍 EmergencyLogManager: WebView detection:', {\n        hasAutoWebViewJs,\n        isAndroidWebViewUA,\n        hasAndroidInterface,\n        userAgent: navigator.userAgent\n      });\n      \n      return hasAutoWebViewJs;\n    } catch (e) {\n      console.warn('🔍 EmergencyLogManager: Error checking WebView environment:', e);\n      return false;\n    }\n  }\n\n  /**\n   * 获取紧急呼救日志列表\n   * @param limit 限制数量，默认10\n   */\n  static async getEmergencyLogs(limit: number = 10): Promise<EmergencyLogSession[]> {\n      const logger = fileLog.sub(false, 'getEmergencyLogs_fn');\n    return new Promise((resolve, reject) => {\n      // logger.pause = true;\n      logger.log('getEmergencyLogs called with limit:', limit);\n\n      try {\n        // Check if running in Android WebView\n        if (!this.isAndroidWebView()) {\n          console.warn('📊 EmergencyLogManager: Not running in Android WebView, returning empty data');\n          resolve([]);\n          return;\n        }\n        // 使用V2系统的静态方法\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.getEmergencyLogs(${limit});\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        logger.log('getEmergencyLogs result:', javaResultString);\n        \n        // 移除processing自动重试机制，直接处理结果\n        // if (javaResultString === 'processing') {\n        //   // 异步处理中，等待一段时间后重试\n        //   setTimeout(() => {\n        //     this.getEmergencyLogs(limit).then(resolve).catch(reject);\n        //   }, 1000);\n        //   return;\n        // }\n        \n        if (javaResultString === 'processing') {\n          // 不再重试，直接返回空结果\n          resolve([]);\n          return;\n        }\n        \n        const result: EmergencyLogResponse<EmergencyLogSession[]> = JSON.parse(javaResultString || '{\"success\": false, \"error\": \"No result\"}');\n        if (result.success && result.data) {\n          resolve(result.data);\n        } else {\n          reject(new Error(result.error || 'Failed to get emergency logs'));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * 获取指定会话的详细日志\n   * @param sessionId 会话ID\n   */\n  static async getEmergencyLogDetail(sessionId: number): Promise<EmergencyLogDetail> {\n    return new Promise((resolve, reject) => {\n      if (typeof autoWebViewJs === 'undefined') {\n        reject(new Error('autoWebViewJs not available'));\n        return;\n      }\n\n      try {\n        // 使用V2系统的静态方法\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.getEmergencyLogDetail(${sessionId});\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        \n        if (javaResultString === 'processing') {\n          // 不再重试，直接返回错误\n          reject(new Error('Log detail not available - processing'));\n          return;\n        }\n        \n        const result: EmergencyLogResponse<EmergencyLogDetail> = JSON.parse(javaResultString || '{\"success\": false, \"error\": \"No result\"}');\n        if (result.success && result.data) {\n          resolve(result.data);\n        } else {\n          reject(new Error(result.error || 'Failed to get emergency log detail'));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * 获取日志统计信息\n   */\n  static async getEmergencyLogStats(): Promise<EmergencyLogStatistics> {\n    const logger = fileLog.sub(false, 'getEmergencyLogStats_fn');\n    return new Promise((resolve, reject) => {\n\n      try {\n        // 使用V2系统的静态方法\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.getEmergencyLogStats();\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        logger.log('getEmergencyLogStats result:', javaResultString);\n        if (javaResultString === 'processing') {\n          // 不再重试，返回默认统计数据\n          resolve({\n            totalSessions: 0,\n            successfulCalls: 0,\n            canceledCalls: 0,\n            failedCalls: 0,\n            averageDuration: 0,\n            formattedAverageDuration: '0ms'\n          } as EmergencyLogStatistics);\n          return;\n        }\n        \n        const result: EmergencyLogResponse<EmergencyLogStatistics> = JSON.parse(javaResultString || '{\"success\": false, \"error\": \"No result\"}');\n        if (result.success && result.data) {\n          resolve(result.data);\n        } else {\n          reject(new Error(result.error || 'Failed to get emergency log stats'));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * 导出日志为文本\n   * @param sessionId 可选，指定会话ID，不提供则导出所有\n   */\n  static async exportEmergencyLogs(sessionId?: number): Promise<{text: string, filename: string}> {\n    return new Promise((resolve, reject) => {\n      if (typeof autoWebViewJs === 'undefined') {\n        reject(new Error('autoWebViewJs not available'));\n        return;\n      }\n\n      try {\n        // 使用V2系统的静态方法\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.exportEmergencyLogs(${sessionId || -1});\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        \n        if (javaResultString === 'processing') {\n          // 不再重试，直接返回错误\n          reject(new Error('Log export not available - processing'));\n          return;\n        }\n        \n        const result: EmergencyLogResponse<string> = JSON.parse(javaResultString || '{\"success\": false, \"error\": \"No result\"}');\n        if (result.success && result.data) {\n          const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n          const filename = sessionId \n            ? `emergency-log-session-${sessionId}-${timestamp}.txt`\n            : `emergency-logs-all-${timestamp}.txt`;\n          resolve({ text: result.data, filename });\n        } else {\n          reject(new Error(result.error || 'Failed to export emergency logs'));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * 清空所有日志\n   */\n  static async clearEmergencyLogs(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (typeof autoWebViewJs === 'undefined') {\n        reject(new Error('autoWebViewJs not available'));\n        return;\n      }\n\n      try {\n        // 使用V2系统的静态方法\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.clearEmergencyLogs();\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        \n        const result: EmergencyLogResponse<any> = JSON.parse(javaResultString || '{\"success\": false, \"error\": \"No result\"}');\n        console.log(\"clearEmergencyLogs result=\", result);\n        if (result.success) {\n          resolve();\n        } else {\n          reject(new Error(result.error || 'Failed to clear emergency logs'));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * 下载日志文件\n   * @param text 文本内容\n   * @param filename 文件名\n   */\n  static downloadLogFile(text: string, filename: string) {\n    const blob = new Blob([text], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }\n\n  /**\n   * 格式化日志状态显示\n   */\n  static getStatusDisplay(session: EmergencyLogSession): { text: string, color: string } {\n    if (!session.endReason) {\n      return { text: '进行中', color: '#1976d2' };\n    }\n\n    switch (session.endReason) {\n      case 'COMPLETED':\n        return { text: '已完成', color: '#388e3c' };\n      case 'CANCELED':\n      case 'USER_STOPPED':\n        return { text: '已取消', color: '#f57c00' };\n      case 'ERROR':\n        return { text: '出错', color: '#d32f2f' };\n      case 'TIMEOUT':\n        return { text: '超时', color: '#7b1fa2' };\n      default:\n        return { text: session.endReason, color: '#616161' };\n    }\n  }\n\n  /**\n   * 格式化触发源显示\n   */\n  static getTriggerSourceDisplay(source: string): string {\n    switch (source) {\n      case 'MANUAL':\n        return '手动触发';\n      case 'SENSOR':\n        return '传感器检测';\n      case 'SHORTCUT':\n        return '快捷方式';\n      case 'SCHEDULE':\n        return '定时触发';\n      default:\n        return source;\n    }\n  }\n\n  /**\n   * 格式化呼救类型显示\n   */\n  static getCallTypeDisplay(type: string): string {\n    switch (type) {\n      case 'MEDICAL_ASSIST':\n        return '医疗呼救';\n      case 'SECURITY_ALERT':\n        return '安全报警';\n      case 'GENERAL_EMERGENCY':\n        return '一般紧急';\n      default:\n        return type;\n    }\n  }\n  \n  /**\n   * 创建测试日志（用于调试）\n   * Create test logs for debugging purposes\n   */\n  static async createTestLogs(): Promise<{success: boolean, message?: string, error?: string}> {\n    return new Promise((resolve, reject) => {\n      try {\n        console.log('🧪 EmergencyLogManager: createTestLogs called');\n        \n        // Check if running in Android WebView\n        if (!this.isAndroidWebView()) {\n          console.warn('🧪 EmergencyLogManager: Not running in Android WebView, cannot create test logs');\n          resolve({ success: false, error: 'Not running in Android WebView environment' });\n          return;\n        }\n\n        // Use the same autoWebViewJs pattern as other methods\n        const script = `\n        var result = com.fanfanlo.emergencycall.v2.log.EmergencyLogWebInterface.createTestLogs();\n        result;`;\n        \n        const { javaResultString } = autoWebViewJs.callScript(script);\n        console.log('🧪 EmergencyLogManager: createTestLogs result:', javaResultString);\n\n        if (javaResultString === 'processing') {\n          // Don't retry, return success immediately\n          resolve({ success: true, message: 'Test logs creation initiated' });  \n          return;\n        }\n\n        const result = JSON.parse(javaResultString);\n        if (result.success) {\n          resolve(result);\n        } else {\n          reject(new Error(result.error || 'Failed to create test logs'));\n        }\n      } catch (error) {\n        console.error('🧪 EmergencyLogManager: createTestLogs error:', error);\n        reject(error);\n      }\n    });\n  }\n}\n\n// 扩展Window接口以支持autoWebViewJs\ndeclare global {\n  interface Window {\n    autoWebViewJs?: any;\n  }\n}\n\nexport {\n  EmergencyLogManager,\n};","import React, { useState, useEffect } from 'react';\nimport { \n  EmergencyLogManager, \n  EmergencyLogSession, \n  EmergencyLogDetail,\n  EmergencyLogStatistics \n} from '../../utils/EmergencyLogManager';\n\ninterface EmergencyLogViewerProps {\n  className?: string;\n}\n\nconst EmergencyLogViewer: React.FC<EmergencyLogViewerProps> = ({ className }) => {\n  const [sessions, setSessions] = useState<EmergencyLogSession[]>([]);\n  const [selectedSession, setSelectedSession] = useState<EmergencyLogDetail | null>(null);\n  const [statistics, setStatistics] = useState<EmergencyLogStatistics | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState<string>('all');\n\n  useEffect(() => {\n    // 初始加载日志\n    loadLogs();\n    loadStatistics();\n    \n    // 移除自动轮询，改为手动刷新\n    // const interval = setInterval(() => {\n    //   loadLogs();\n    //   loadStatistics();\n    // }, 5000); // 每5秒刷新一次\n    \n    // return () => clearInterval(interval);\n  }, []);\n\n  const loadLogs = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('📊 EmergencyLogViewer: Starting to load logs...');\n      const logs = await EmergencyLogManager.getEmergencyLogs(20);\n      console.log('📊 EmergencyLogViewer: Loaded logs:', logs);\n      console.log('📊 EmergencyLogViewer: Logs count:', logs?.length || 0);\n      setSessions(logs);\n    } catch (err) {\n      console.error('📊 EmergencyLogViewer: Failed to load logs:', err);\n      setError(err instanceof Error ? err.message : '加载日志失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadStatistics = async () => {\n    try {\n      const stats = await EmergencyLogManager.getEmergencyLogStats();\n      setStatistics(stats);\n    } catch (err) {\n      console.error('Failed to load statistics:', err);\n    }\n  };\n\n  const refreshData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      await Promise.all([\n        loadLogs(),\n        loadStatistics()\n      ]);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '刷新数据失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadSessionDetail = async (sessionId: number) => {\n    setLoading(true);\n    try {\n      const detail = await EmergencyLogManager.getEmergencyLogDetail(sessionId);\n      setSelectedSession(detail);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '加载详细日志失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportLogs = async (sessionId?: number) => {\n    try {\n      const { text, filename } = await EmergencyLogManager.exportEmergencyLogs(sessionId);\n      EmergencyLogManager.downloadLogFile(text, filename);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '导出日志失败');\n    }\n  };\n\n  const clearLogs = async () => {\n    if (!confirm('确定要清空所有日志吗？此操作不可恢复。')) return;\n    \n    try {\n      await EmergencyLogManager.clearEmergencyLogs();\n      setSessions([]);\n      setSelectedSession(null);\n      setStatistics(null);\n      alert('日志已清空');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '清空日志失败');\n    }\n  };\n\n  const createTestLogs = async () => {\n    if (!confirm('确定要创建测试日志吗？这将用于调试目的。')) return;\n    \n    try {\n      setLoading(true);\n      const result = await EmergencyLogManager.createTestLogs();\n      if (result.success) {\n        alert('测试日志创建成功！请点击刷新查看。');\n        // 延迟刷新，让测试日志有时间保存\n        setTimeout(() => {\n          refreshData();\n        }, 1000);\n      } else {\n        setError(result.error || '创建测试日志失败');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : '创建测试日志失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredSessions = sessions.filter(session => {\n    const matchesSearch = searchTerm === '' || \n      session.sessionId.toString().includes(searchTerm) ||\n      EmergencyLogManager.getTriggerSourceDisplay(session.triggerSource).includes(searchTerm) ||\n      EmergencyLogManager.getCallTypeDisplay(session.callType).includes(searchTerm);\n\n    const matchesFilter = filterStatus === 'all' || \n      (filterStatus === 'completed' && session.endReason === 'COMPLETED') ||\n      (filterStatus === 'canceled' && (session.endReason === 'CANCELED' || session.endReason === 'USER_STOPPED')) ||\n      (filterStatus === 'error' && session.endReason === 'ERROR') ||\n      (filterStatus === 'active' && !session.endReason);\n\n    return matchesSearch && matchesFilter;\n  });\n\n  return (\n    <div className={`emergency-log-viewer ${className || ''}`}>\n      <div className=\"log-header\">\n        <h2>紧急呼救日志</h2>\n        <div className=\"log-actions\">\n          <button onClick={refreshData} disabled={loading}>\n            {loading ? '刷新中...' : '刷新日志'}\n          </button>\n          <button onClick={createTestLogs} disabled={loading}>\n            创建测试日志\n          </button>\n          <button onClick={() => exportLogs()}>\n            导出所有日志\n          </button>\n          <button onClick={clearLogs} className=\"danger\">\n            清空日志\n          </button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"log-error\">\n          错误: {error}\n          <button onClick={() => setError(null)}>×</button>\n        </div>\n      )}\n\n      {statistics && (\n        <div className=\"log-statistics\">\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">总会话数:</span>\n            <span className=\"stat-value\">{statistics.totalSessions}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">成功:</span>\n            <span className=\"stat-value success\">{statistics.successfulCalls}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">取消:</span>\n            <span className=\"stat-value canceled\">{statistics.canceledCalls}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">失败:</span>\n            <span className=\"stat-value error\">{statistics.failedCalls}</span>\n          </div>\n          <div className=\"stat-item\">\n            <span className=\"stat-label\">平均时长:</span>\n            <span className=\"stat-value\">{statistics.formattedAverageDuration}</span>\n          </div>\n        </div>\n      )}\n\n      <div className=\"log-filters\">\n        <input\n          type=\"text\"\n          placeholder=\"搜索会话ID、触发源或呼救类型...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"search-input\"\n        />\n        <select\n          value={filterStatus}\n          onChange={(e) => setFilterStatus(e.target.value)}\n          className=\"filter-select\"\n        >\n          <option value=\"all\">全部状态</option>\n          <option value=\"active\">进行中</option>\n          <option value=\"completed\">已完成</option>\n          <option value=\"canceled\">已取消</option>\n          <option value=\"error\">出错</option>\n        </select>\n      </div>\n\n      <div className=\"log-content\">\n        <div className=\"sessions-list\">\n          <h3>日志会话列表 ({filteredSessions.length})</h3>\n          {filteredSessions.length === 0 ? (\n            <div className=\"no-data\">暂无日志数据</div>\n          ) : (\n            <div className=\"sessions-grid\">\n              {filteredSessions.map(session => {\n                const status = EmergencyLogManager.getStatusDisplay(session);\n                return (\n                  <div\n                    key={session.sessionId}\n                    className={`session-card ${selectedSession?.sessionId === session.sessionId ? 'selected' : ''}`}\n                    onClick={() => loadSessionDetail(session.sessionId)}\n                  >\n                    <div className=\"session-header\">\n                      <span className=\"session-id\">会话 #{session.sessionId}</span>\n                      <span \n                        className=\"session-status\" \n                        style={{ color: status.color }}\n                      >\n                        {status.text}\n                      </span>\n                    </div>\n                    <div className=\"session-info\">\n                      <div>触发源: {EmergencyLogManager.getTriggerSourceDisplay(session.triggerSource)}</div>\n                      <div>呼救类型: {EmergencyLogManager.getCallTypeDisplay(session.callType)}</div>\n                      <div>开始时间: {session.formattedStartTime}</div>\n                      {session.duration && <div>持续时长: {Math.round(session.duration / 1000)}秒</div>}\n                      <div>日志条数: {session.logCount}</div>\n                    </div>\n                    <div className=\"session-actions\">\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation();\n                          exportLogs(session.sessionId);\n                        }}\n                        className=\"export-btn\"\n                      >\n                        导出\n                      </button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        {selectedSession && (\n          <div className=\"session-detail\">\n            <div className=\"detail-header\">\n              <h3>会话 #{selectedSession.sessionId} 详细日志</h3>\n              <button \n                onClick={() => setSelectedSession(null)}\n                className=\"close-btn\"\n              >\n                ×\n              </button>\n            </div>\n            <div className=\"detail-info\">\n              <div>触发源: {EmergencyLogManager.getTriggerSourceDisplay(selectedSession.triggerSource)}</div>\n              <div>呼救类型: {EmergencyLogManager.getCallTypeDisplay(selectedSession.callType)}</div>\n              <div>开始时间: {selectedSession.formattedStartTime}</div>\n              {selectedSession.endTime && <div>结束时间: {selectedSession.formattedEndTime}</div>}\n              {selectedSession.duration && <div>持续时长: {Math.round(selectedSession.duration / 1000)}秒</div>}\n            </div>\n            <div className=\"logs-container\">\n              {selectedSession.logs.map((log, index) => (\n                <div key={index} className=\"log-entry\">\n                  <div className=\"log-time\">{log.formattedTime}</div>\n                  <div className=\"log-content\">\n                    <div className=\"log-step\">[{log.step}]</div>\n                    <div className=\"log-message\">{log.message}</div>\n                    {Object.keys(log.data).length > 0 && (\n                      <div className=\"log-data\">\n                        {Object.entries(log.data).map(([key, value]) => (\n                          <span key={key} className=\"data-item\">\n                            {key}: {value}\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"log-thread\">{log.threadName}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      <style jsx>{`\n        .emergency-log-viewer {\n          padding: 20px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .log-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid #eee;\n        }\n\n        .log-header h2 {\n          margin: 0;\n          color: #333;\n        }\n\n        .log-actions {\n          display: flex;\n          gap: 10px;\n        }\n\n        .log-actions button {\n          padding: 8px 16px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background: white;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .log-actions button:hover {\n          background-color: #f5f5f5;\n        }\n\n        .log-actions button.danger {\n          color: #d32f2f;\n          border-color: #d32f2f;\n        }\n\n        .log-actions button.danger:hover {\n          background-color: #ffebee;\n        }\n\n        .log-actions button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .log-error {\n          background-color: #ffebee;\n          color: #d32f2f;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 20px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .log-error button {\n          background: none;\n          border: none;\n          color: #d32f2f;\n          font-size: 18px;\n          cursor: pointer;\n          padding: 0;\n          width: 20px;\n          height: 20px;\n        }\n\n        .log-statistics {\n          display: flex;\n          gap: 20px;\n          margin-bottom: 20px;\n          padding: 15px;\n          background-color: #f9f9f9;\n          border-radius: 8px;\n          flex-wrap: wrap;\n        }\n\n        .stat-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 5px;\n        }\n\n        .stat-label {\n          font-size: 12px;\n          color: #666;\n        }\n\n        .stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: #333;\n        }\n\n        .stat-value.success {\n          color: #388e3c;\n        }\n\n        .stat-value.canceled {\n          color: #f57c00;\n        }\n\n        .stat-value.error {\n          color: #d32f2f;\n        }\n\n        .log-filters {\n          display: flex;\n          gap: 15px;\n          margin-bottom: 20px;\n          align-items: center;\n        }\n\n        .search-input, .filter-select {\n          padding: 8px 12px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          font-size: 14px;\n        }\n\n        .search-input {\n          flex: 1;\n          max-width: 300px;\n        }\n\n        .log-content {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 20px;\n          min-height: 500px;\n        }\n\n        .sessions-list h3 {\n          margin: 0 0 15px 0;\n          color: #333;\n        }\n\n        .no-data {\n          text-align: center;\n          color: #666;\n          padding: 40px;\n          background-color: #f9f9f9;\n          border-radius: 8px;\n        }\n\n        .sessions-grid {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          max-height: 600px;\n          overflow-y: auto;\n        }\n\n        .session-card {\n          border: 1px solid #ddd;\n          border-radius: 8px;\n          padding: 15px;\n          cursor: pointer;\n          transition: all 0.2s;\n          background: white;\n        }\n\n        .session-card:hover {\n          border-color: #1976d2;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        }\n\n        .session-card.selected {\n          border-color: #1976d2;\n          background-color: #e3f2fd;\n        }\n\n        .session-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 10px;\n        }\n\n        .session-id {\n          font-weight: bold;\n          color: #333;\n        }\n\n        .session-status {\n          font-size: 12px;\n          font-weight: bold;\n          padding: 2px 8px;\n          border-radius: 12px;\n          background-color: rgba(255,255,255,0.8);\n        }\n\n        .session-info {\n          font-size: 13px;\n          color: #666;\n          line-height: 1.4;\n        }\n\n        .session-info > div {\n          margin-bottom: 2px;\n        }\n\n        .session-actions {\n          margin-top: 10px;\n          text-align: right;\n        }\n\n        .export-btn {\n          padding: 4px 12px;\n          font-size: 12px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background: white;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .export-btn:hover {\n          background-color: #f5f5f5;\n        }\n\n        .session-detail {\n          border: 1px solid #ddd;\n          border-radius: 8px;\n          background: white;\n          display: flex;\n          flex-direction: column;\n          max-height: 600px;\n        }\n\n        .detail-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 15px;\n          border-bottom: 1px solid #eee;\n          background-color: #f9f9f9;\n        }\n\n        .detail-header h3 {\n          margin: 0;\n          color: #333;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          color: #666;\n          padding: 0;\n          width: 30px;\n          height: 30px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .close-btn:hover {\n          color: #333;\n        }\n\n        .detail-info {\n          padding: 15px;\n          background-color: #f9f9f9;\n          font-size: 13px;\n          color: #666;\n          line-height: 1.4;\n        }\n\n        .detail-info > div {\n          margin-bottom: 5px;\n        }\n\n        .logs-container {\n          flex: 1;\n          overflow-y: auto;\n          padding: 15px;\n        }\n\n        .log-entry {\n          display: grid;\n          grid-template-columns: 120px 1fr 80px;\n          gap: 10px;\n          padding: 8px 0;\n          border-bottom: 1px solid #f0f0f0;\n          font-size: 13px;\n        }\n\n        .log-entry:last-child {\n          border-bottom: none;\n        }\n\n        .log-time {\n          color: #666;\n          font-family: monospace;\n          font-size: 11px;\n        }\n\n        .log-content {\n          display: flex;\n          flex-direction: column;\n          gap: 3px;\n        }\n\n        .log-step {\n          color: #1976d2;\n          font-weight: bold;\n          font-size: 11px;\n        }\n\n        .log-message {\n          color: #333;\n          line-height: 1.3;\n        }\n\n        .log-data {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 8px;\n          margin-top: 3px;\n        }\n\n        .data-item {\n          background-color: #e8f4f8;\n          color: #00695c;\n          padding: 1px 6px;\n          border-radius: 3px;\n          font-size: 11px;\n        }\n\n        .log-thread {\n          color: #999;\n          font-size: 10px;\n          font-family: monospace;\n          text-align: right;\n        }\n\n        @media (max-width: 768px) {\n          .log-content {\n            grid-template-columns: 1fr;\n          }\n          \n          .log-statistics {\n            flex-direction: column;\n            gap: 10px;\n          }\n          \n          .log-filters {\n            flex-direction: column;\n            align-items: stretch;\n          }\n          \n          .search-input {\n            max-width: none;\n          }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default EmergencyLogViewer;","export { default as EmergencyLogViewer } from './EmergencyLogViewer';","import React from 'react';\nimport type { NextPage } from 'next';\nimport { EmergencyLogViewer } from '../../components/emergency-log-viewer';\nimport { AppbarContainer, AppShell } from '@app/ui';\n\nconst LogsPage: NextPage = () => {\n\n  return (\n\n            <AppShell>\n                <AppbarContainer appbarProps={{title:\"日志\", back:true}}>\n                  <EmergencyLogViewer />\n                </AppbarContainer>\n            </AppShell>\n  )\n  return (\n    <div className=\"logs-page\">\n      <EmergencyLogViewer />\n    </div>\n  );\n};\n\nexport default LogsPage;","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","\"use client\";\r\n// 现在用的是这个文件\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport Backend, { type HttpBackendOptions } from \"i18next-http-backend\";\r\n\r\nimport i18next from \"i18next\";\r\nimport { Log } from \"../log/Log\";\r\nimport { getBuildTime, isServer } from \"../nextjs/env/env\";\r\nimport { fileMapUtils } from \"../utils\";\r\n;\r\nexport { useTranslation } from 'react-i18next';\r\nlet fileDateVersion:string = ''// = getConfig().publicRuntimeConfig?.version\r\nexport const i18nLogger = new Log(false, `i18n`);\r\nconst windowHref = (()=>{\r\n  if(typeof window === 'undefined')return ''\r\n  const u = new URL(window.location.href || window.parent?.location.href);\r\n  // 同域文本iframe里的页面会获取不到href，所以判断一下直接用父级的就行.\r\n  return u.origin == null || u.origin == 'null' ? '' : u.origin\r\n})()\r\nconst backendOptions = {\r\n  loadPath: function (lngs: string[], namespaces: string[]) {\r\n    const log = i18nLogger.sub(false, `i18n loadpath`);\r\n    log.pause = true;\r\n    const lng = lngs[0]\r\n    let p = ``\r\n    // p = `/options/_locales/${lngs[0].replace(\"-\", \"_\")}/messages.json`;\r\n    // p = `/locales/zh-CN/ns1/content.json`;\r\n    // p = `locales/${lng}/${namespaces[0]}.json?v=${fileDateVersion}`\r\n    const ps = namespaces[0].split('/')\r\n    ps.splice(ps.length - 1, 0, lng)\r\n    // p = `locales/${ps.join('/')}.json?v=${fileDateVersion}`\r\n    // p = `locales/${ps.join('/')}.json?v=${getBuildTime()}`\r\n    p = `locales/${ps.join('/')}.json`\r\n    log.log(`lngs=`, lngs);\r\n    log.log(`namespaces=`, namespaces);\r\n    log.log(\"p=\", p);\r\n    p = fileMapUtils.getFile(`/${p}`);\r\n    // console.log('map p=', p)\r\n    p = `${windowHref}/${p}`\r\n    return p;\r\n\r\n  },\r\n  parse: function (\r\n    data: string,\r\n    languages?: string | string[],\r\n    namespaces?: string | string[]\r\n  ) {\r\n    const log = i18nLogger.sub(false, `i18n backend parse`);\r\n    log.pause = true;\r\n    // log.log(`parrrse`, data, languages, namespaces);\r\n    const l = JSON.parse(data);\r\n    log.print(`before set i18ndata`);\r\n    // i18nData = l as II18n;\r\n    // log.log(`i18nData.rule.scripts.sys.rules`, i18nData.rule.scripts.sys.rules);\r\n    log.log(`parrrse`, languages, namespaces);\r\n    return l;\r\n  },\r\n};\r\nconst backend = new Backend();\r\nbackend.init(null, backendOptions);\r\nexport const i18n = i18next;\r\n// export const resources: Resource = {\r\n//   // 'zh-CN': {\r\n//   //   translation: _.merge({}, zhCN),\r\n//   // },\r\n//   // en: {\r\n//   //   translation: _.merge({}, en),\r\n//   // },\r\n// };\r\n\r\n\r\ni18n.on(\"languageChanged\", async function (lng) {\r\n  const log = i18nLogger.sub(false, `onlanguageChanged`);\r\n  log.pause = true;\r\n  log.log(`lllllng`, lng);\r\n  // lng = \"en\";\r\n  // const p = `/options/_locales/${lng.replace(\"-\", \"_\")}/messages.json`;\r\n});\r\n\r\n\r\n\r\n\r\nexport function i18nInit(_fileDateVersion:string=''){\r\n  fileDateVersion = _fileDateVersion\r\n  i18n\r\n  .use(LanguageDetector)\r\n  .use(backend)\r\n  .use(initReactI18next)\r\n  .init<HttpBackendOptions>({\r\n    load: \"currentOnly\",\r\n    // load: \"all\",\r\n    // supportedLngs: ['zh-CN', 'zh-TW', 'en', 'en-GB', 'ja'],\r\n    // resources,\r\n    fallbackLng: isServer ? \"en\" : \"zh-CN\",\r\n    // fallbackLng: \"zh-CN\",\r\n    // lng: \"zh-CN\",\r\n    partialBundledLanguages:true,\r\n    ns:[],\r\n    \r\n    debug: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    detection: {\r\n      caches: [\"localStorage\"],\r\n    },\r\n  });\r\n}\r\ni18n.on(\"missingKey\", function (lngs, namespace, key, res) {\r\n  console.error(\r\n    \"i18n mssing key, lngs=%s, namespace=%s, key=%s, res=%s\",\r\n    lngs,\r\n    namespace,\r\n    key,\r\n    res\r\n  );\r\n});\r\n\r\ni18n.on(\"loaded\", function (loaded) {\r\n  const log = i18nLogger.sub(false, `onloaded`);\r\n  log.pause = true;\r\n  log.log(`onloaded arguments`, loaded);\r\n});\r\n\r\ni18n.on(\"failedLoading\", function (lng, ns, msg) {\r\n  const log = i18nLogger.sub(false, `onfailedLoading`);\r\n  log.pause = true;\r\n  log.log(`failedLoading arguments`, lng, ns, msg);\r\n});\r\n\r\ni18n.on(\"added\", function () {\r\n  console.log('added', arguments)\r\n});   \r\n\r\nexport default i18n;","import { createContext } from \"react\";\r\nimport { storeUtils } from \"./store-utils\";\r\n// import { storeUtils } from \"./store\";\r\nconst s = storeUtils.namespace('store-page-context')\r\n\r\nexport interface IPageScrollPosition{\r\n    x:number\r\n    y:number\r\n}\r\n\r\nfunction create(){\r\n    return createContext(s)\r\n}\r\nexport const StorePageContext = createContext<any>(s)\r\n\r\nexport const StorePageDynamicContext = createContext<Record<string, any>>({})","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport getConfig from \"node_modules/next/config\";\r\nimport { PropsWithChildren, useEffect, useState } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\nimport {trackingPrint} from \"@app/model\"\r\ncheckReloadPage();\r\ni18nInit()\r\n\r\n\r\nfunction checkReloadPage(){\r\n  if(typeof window === 'undefined')return\r\n  if(getConfig().publicRuntimeConfig.isDevelopment){\r\n    return\r\n  }\r\n  if(window.location.href.indexOf('qiniu') == -1)return;\r\n  // 帮我检测url中是否包含_htmlRefreshTime的参数\r\n  // 如果没有，则添加_htmlRefresTime的参数，值为当前时间的毫秒数\r\n  const searchParams = new URL(window.location.href).searchParams\r\n  const htmlRefreshTime = searchParams.get('_htmlRefreshTime')\r\n  if (!htmlRefreshTime) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n    return\r\n  }\r\n\r\n  const refreshTime = Number(htmlRefreshTime)\r\n  if (refreshTime + 2 * 60 * 1000 < Date.now()) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n  }\r\n}\r\nconst dynamicKeyMap = new Map<string, boolean>();\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const [isOpened] = useState(dynamicKeyMap.get(dynamicKey) === true)\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    trackingPrint({params:{\r\n      type:\"页面进入\",\r\n      title:\"页面\",\r\n      subtitle:\"发送者-AppShell\",\r\n      extra:{\r\n        href:window.location.href\r\n      }\r\n    }})\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        if(isOpened){\r\n          window.scrollTo(info.x, info.y)\r\n        }\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  useEffect(()=>{\r\n    dynamicKeyMap.set(dynamicKey, true)\r\n  },[])\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","import { isDev, loadI18nValue, useTranslation } from '@fanfanlo';\r\nimport { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf } from '.';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  const {t} = useTranslation(\"app-ui/components/page/content\")\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>{t(\"PageContent.refresh\")}</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ \r\n      height: '100%',\r\n      overflow: 'auto', \r\n      padding: \"0px\",\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        \r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n","require('client-only');\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n/*\nBased on Glamor's sheet\nhttps://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/src/sheet.js\n*/ function _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nvar isProd = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === \"production\";\nvar isString = function(o) {\n    return Object.prototype.toString.call(o) === \"[object String]\";\n};\nvar StyleSheet = /*#__PURE__*/ function() {\n    function StyleSheet(param) {\n        var ref = param === void 0 ? {} : param, _name = ref.name, name = _name === void 0 ? \"stylesheet\" : _name, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? isProd : _optimizeForSpeed;\n        invariant$1(isString(name), \"`name` must be a string\");\n        this._name = name;\n        this._deletedRulePlaceholder = \"#\" + name + \"-deleted-rule____{}\";\n        invariant$1(typeof optimizeForSpeed === \"boolean\", \"`optimizeForSpeed` must be a boolean\");\n        this._optimizeForSpeed = optimizeForSpeed;\n        this._serverSheet = undefined;\n        this._tags = [];\n        this._injected = false;\n        this._rulesCount = 0;\n        var node = typeof window !== \"undefined\" && document.querySelector('meta[property=\"csp-nonce\"]');\n        this._nonce = node ? node.getAttribute(\"content\") : null;\n    }\n    var _proto = StyleSheet.prototype;\n    _proto.setOptimizeForSpeed = function setOptimizeForSpeed(bool) {\n        invariant$1(typeof bool === \"boolean\", \"`setOptimizeForSpeed` accepts a boolean\");\n        invariant$1(this._rulesCount === 0, \"optimizeForSpeed cannot be when rules have already been inserted\");\n        this.flush();\n        this._optimizeForSpeed = bool;\n        this.inject();\n    };\n    _proto.isOptimizeForSpeed = function isOptimizeForSpeed() {\n        return this._optimizeForSpeed;\n    };\n    _proto.inject = function inject() {\n        var _this = this;\n        invariant$1(!this._injected, \"sheet already injected\");\n        this._injected = true;\n        if (typeof window !== \"undefined\" && this._optimizeForSpeed) {\n            this._tags[0] = this.makeStyleTag(this._name);\n            this._optimizeForSpeed = \"insertRule\" in this.getSheet();\n            if (!this._optimizeForSpeed) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.\");\n                }\n                this.flush();\n                this._injected = true;\n            }\n            return;\n        }\n        this._serverSheet = {\n            cssRules: [],\n            insertRule: function(rule, index) {\n                if (typeof index === \"number\") {\n                    _this._serverSheet.cssRules[index] = {\n                        cssText: rule\n                    };\n                } else {\n                    _this._serverSheet.cssRules.push({\n                        cssText: rule\n                    });\n                }\n                return index;\n            },\n            deleteRule: function(index) {\n                _this._serverSheet.cssRules[index] = null;\n            }\n        };\n    };\n    _proto.getSheetForTag = function getSheetForTag(tag) {\n        if (tag.sheet) {\n            return tag.sheet;\n        }\n        // this weirdness brought to you by firefox\n        for(var i = 0; i < document.styleSheets.length; i++){\n            if (document.styleSheets[i].ownerNode === tag) {\n                return document.styleSheets[i];\n            }\n        }\n    };\n    _proto.getSheet = function getSheet() {\n        return this.getSheetForTag(this._tags[this._tags.length - 1]);\n    };\n    _proto.insertRule = function insertRule(rule, index) {\n        invariant$1(isString(rule), \"`insertRule` accepts only strings\");\n        if (typeof window === \"undefined\") {\n            if (typeof index !== \"number\") {\n                index = this._serverSheet.cssRules.length;\n            }\n            this._serverSheet.insertRule(rule, index);\n            return this._rulesCount++;\n        }\n        if (this._optimizeForSpeed) {\n            var sheet = this.getSheet();\n            if (typeof index !== \"number\") {\n                index = sheet.cssRules.length;\n            }\n            // this weirdness for perf, and chrome's weird bug\n            // https://stackoverflow.com/questions/20007992/chrome-suddenly-stopped-accepting-insertrule\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                return -1;\n            }\n        } else {\n            var insertionPoint = this._tags[index];\n            this._tags.push(this.makeStyleTag(this._name, rule, insertionPoint));\n        }\n        return this._rulesCount++;\n    };\n    _proto.replaceRule = function replaceRule(index, rule) {\n        if (this._optimizeForSpeed || typeof window === \"undefined\") {\n            var sheet = typeof window !== \"undefined\" ? this.getSheet() : this._serverSheet;\n            if (!rule.trim()) {\n                rule = this._deletedRulePlaceholder;\n            }\n            if (!sheet.cssRules[index]) {\n                // @TBD Should we throw an error?\n                return index;\n            }\n            sheet.deleteRule(index);\n            try {\n                sheet.insertRule(rule, index);\n            } catch (error) {\n                if (!isProd) {\n                    console.warn(\"StyleSheet: illegal rule: \\n\\n\" + rule + \"\\n\\nSee https://stackoverflow.com/q/20007992 for more info\");\n                }\n                // In order to preserve the indices we insert a deleteRulePlaceholder\n                sheet.insertRule(this._deletedRulePlaceholder, index);\n            }\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"old rule at index `\" + index + \"` not found\");\n            tag.textContent = rule;\n        }\n        return index;\n    };\n    _proto.deleteRule = function deleteRule(index) {\n        if (typeof window === \"undefined\") {\n            this._serverSheet.deleteRule(index);\n            return;\n        }\n        if (this._optimizeForSpeed) {\n            this.replaceRule(index, \"\");\n        } else {\n            var tag = this._tags[index];\n            invariant$1(tag, \"rule at index `\" + index + \"` not found\");\n            tag.parentNode.removeChild(tag);\n            this._tags[index] = null;\n        }\n    };\n    _proto.flush = function flush() {\n        this._injected = false;\n        this._rulesCount = 0;\n        if (typeof window !== \"undefined\") {\n            this._tags.forEach(function(tag) {\n                return tag && tag.parentNode.removeChild(tag);\n            });\n            this._tags = [];\n        } else {\n            // simpler on server\n            this._serverSheet.cssRules = [];\n        }\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        if (typeof window === \"undefined\") {\n            return this._serverSheet.cssRules;\n        }\n        return this._tags.reduce(function(rules, tag) {\n            if (tag) {\n                rules = rules.concat(Array.prototype.map.call(_this.getSheetForTag(tag).cssRules, function(rule) {\n                    return rule.cssText === _this._deletedRulePlaceholder ? null : rule;\n                }));\n            } else {\n                rules.push(null);\n            }\n            return rules;\n        }, []);\n    };\n    _proto.makeStyleTag = function makeStyleTag(name, cssString, relativeToTag) {\n        if (cssString) {\n            invariant$1(isString(cssString), \"makeStyleTag accepts only strings as second parameter\");\n        }\n        var tag = document.createElement(\"style\");\n        if (this._nonce) tag.setAttribute(\"nonce\", this._nonce);\n        tag.type = \"text/css\";\n        tag.setAttribute(\"data-\" + name, \"\");\n        if (cssString) {\n            tag.appendChild(document.createTextNode(cssString));\n        }\n        var head = document.head || document.getElementsByTagName(\"head\")[0];\n        if (relativeToTag) {\n            head.insertBefore(tag, relativeToTag);\n        } else {\n            head.appendChild(tag);\n        }\n        return tag;\n    };\n    _createClass(StyleSheet, [\n        {\n            key: \"length\",\n            get: function get() {\n                return this._rulesCount;\n            }\n        }\n    ]);\n    return StyleSheet;\n}();\nfunction invariant$1(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheet: \" + message + \".\");\n    }\n}\n\nfunction hash(str) {\n    var _$hash = 5381, i = str.length;\n    while(i){\n        _$hash = _$hash * 33 ^ str.charCodeAt(--i);\n    }\n    /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */ return _$hash >>> 0;\n}\nvar stringHash = hash;\n\nvar sanitize = function(rule) {\n    return rule.replace(/\\/style/gi, \"\\\\/style\");\n};\nvar cache = {};\n/**\n * computeId\n *\n * Compute and memoize a jsx id from a basedId and optionally props.\n */ function computeId(baseId, props) {\n    if (!props) {\n        return \"jsx-\" + baseId;\n    }\n    var propsToString = String(props);\n    var key = baseId + propsToString;\n    if (!cache[key]) {\n        cache[key] = \"jsx-\" + stringHash(baseId + \"-\" + propsToString);\n    }\n    return cache[key];\n}\n/**\n * computeSelector\n *\n * Compute and memoize dynamic selectors.\n */ function computeSelector(id, css) {\n    var selectoPlaceholderRegexp = /__jsx-style-dynamic-selector/g;\n    // Sanitize SSR-ed CSS.\n    // Client side code doesn't need to be sanitized since we use\n    // document.createTextNode (dev) and the CSSOM api sheet.insertRule (prod).\n    if (typeof window === \"undefined\") {\n        css = sanitize(css);\n    }\n    var idcss = id + css;\n    if (!cache[idcss]) {\n        cache[idcss] = css.replace(selectoPlaceholderRegexp, id);\n    }\n    return cache[idcss];\n}\n\nfunction mapRulesToStyle(cssRules, options) {\n    if (options === void 0) options = {};\n    return cssRules.map(function(args) {\n        var id = args[0];\n        var css = args[1];\n        return /*#__PURE__*/ React__default[\"default\"].createElement(\"style\", {\n            id: \"__\" + id,\n            // Avoid warnings upon render with a key\n            key: \"__\" + id,\n            nonce: options.nonce ? options.nonce : undefined,\n            dangerouslySetInnerHTML: {\n                __html: css\n            }\n        });\n    });\n}\nvar StyleSheetRegistry = /*#__PURE__*/ function() {\n    function StyleSheetRegistry(param) {\n        var ref = param === void 0 ? {} : param, _styleSheet = ref.styleSheet, styleSheet = _styleSheet === void 0 ? null : _styleSheet, _optimizeForSpeed = ref.optimizeForSpeed, optimizeForSpeed = _optimizeForSpeed === void 0 ? false : _optimizeForSpeed;\n        this._sheet = styleSheet || new StyleSheet({\n            name: \"styled-jsx\",\n            optimizeForSpeed: optimizeForSpeed\n        });\n        this._sheet.inject();\n        if (styleSheet && typeof optimizeForSpeed === \"boolean\") {\n            this._sheet.setOptimizeForSpeed(optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    }\n    var _proto = StyleSheetRegistry.prototype;\n    _proto.add = function add(props) {\n        var _this = this;\n        if (undefined === this._optimizeForSpeed) {\n            this._optimizeForSpeed = Array.isArray(props.children);\n            this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);\n            this._optimizeForSpeed = this._sheet.isOptimizeForSpeed();\n        }\n        if (typeof window !== \"undefined\" && !this._fromServer) {\n            this._fromServer = this.selectFromServer();\n            this._instancesCounts = Object.keys(this._fromServer).reduce(function(acc, tagName) {\n                acc[tagName] = 0;\n                return acc;\n            }, {});\n        }\n        var ref = this.getIdAndRules(props), styleId = ref.styleId, rules = ref.rules;\n        // Deduping: just increase the instances count.\n        if (styleId in this._instancesCounts) {\n            this._instancesCounts[styleId] += 1;\n            return;\n        }\n        var indices = rules.map(function(rule) {\n            return _this._sheet.insertRule(rule);\n        })// Filter out invalid rules\n        .filter(function(index) {\n            return index !== -1;\n        });\n        this._indices[styleId] = indices;\n        this._instancesCounts[styleId] = 1;\n    };\n    _proto.remove = function remove(props) {\n        var _this = this;\n        var styleId = this.getIdAndRules(props).styleId;\n        invariant(styleId in this._instancesCounts, \"styleId: `\" + styleId + \"` not found\");\n        this._instancesCounts[styleId] -= 1;\n        if (this._instancesCounts[styleId] < 1) {\n            var tagFromServer = this._fromServer && this._fromServer[styleId];\n            if (tagFromServer) {\n                tagFromServer.parentNode.removeChild(tagFromServer);\n                delete this._fromServer[styleId];\n            } else {\n                this._indices[styleId].forEach(function(index) {\n                    return _this._sheet.deleteRule(index);\n                });\n                delete this._indices[styleId];\n            }\n            delete this._instancesCounts[styleId];\n        }\n    };\n    _proto.update = function update(props, nextProps) {\n        this.add(nextProps);\n        this.remove(props);\n    };\n    _proto.flush = function flush() {\n        this._sheet.flush();\n        this._sheet.inject();\n        this._fromServer = undefined;\n        this._indices = {};\n        this._instancesCounts = {};\n    };\n    _proto.cssRules = function cssRules() {\n        var _this = this;\n        var fromServer = this._fromServer ? Object.keys(this._fromServer).map(function(styleId) {\n            return [\n                styleId,\n                _this._fromServer[styleId]\n            ];\n        }) : [];\n        var cssRules = this._sheet.cssRules();\n        return fromServer.concat(Object.keys(this._indices).map(function(styleId) {\n            return [\n                styleId,\n                _this._indices[styleId].map(function(index) {\n                    return cssRules[index].cssText;\n                }).join(_this._optimizeForSpeed ? \"\" : \"\\n\")\n            ];\n        })// filter out empty rules\n        .filter(function(rule) {\n            return Boolean(rule[1]);\n        }));\n    };\n    _proto.styles = function styles(options) {\n        return mapRulesToStyle(this.cssRules(), options);\n    };\n    _proto.getIdAndRules = function getIdAndRules(props) {\n        var css = props.children, dynamic = props.dynamic, id = props.id;\n        if (dynamic) {\n            var styleId = computeId(id, dynamic);\n            return {\n                styleId: styleId,\n                rules: Array.isArray(css) ? css.map(function(rule) {\n                    return computeSelector(styleId, rule);\n                }) : [\n                    computeSelector(styleId, css)\n                ]\n            };\n        }\n        return {\n            styleId: computeId(id),\n            rules: Array.isArray(css) ? css : [\n                css\n            ]\n        };\n    };\n    /**\n   * selectFromServer\n   *\n   * Collects style tags from the document with id __jsx-XXX\n   */ _proto.selectFromServer = function selectFromServer() {\n        var elements = Array.prototype.slice.call(document.querySelectorAll('[id^=\"__jsx-\"]'));\n        return elements.reduce(function(acc, element) {\n            var id = element.id.slice(2);\n            acc[id] = element;\n            return acc;\n        }, {});\n    };\n    return StyleSheetRegistry;\n}();\nfunction invariant(condition, message) {\n    if (!condition) {\n        throw new Error(\"StyleSheetRegistry: \" + message + \".\");\n    }\n}\nvar StyleSheetContext = /*#__PURE__*/ React.createContext(null);\nStyleSheetContext.displayName = \"StyleSheetContext\";\nfunction createStyleRegistry() {\n    return new StyleSheetRegistry();\n}\nfunction StyleRegistry(param) {\n    var configuredRegistry = param.registry, children = param.children;\n    var rootRegistry = React.useContext(StyleSheetContext);\n    var ref = React.useState(function() {\n        return rootRegistry || configuredRegistry || createStyleRegistry();\n    }), registry = ref[0];\n    return /*#__PURE__*/ React__default[\"default\"].createElement(StyleSheetContext.Provider, {\n        value: registry\n    }, children);\n}\nfunction useStyleRegistry() {\n    return React.useContext(StyleSheetContext);\n}\n\n// Opt-into the new `useInsertionEffect` API in React 18, fallback to `useLayoutEffect`.\n// https://github.com/reactwg/react-18/discussions/110\nvar useInsertionEffect = React__default[\"default\"].useInsertionEffect || React__default[\"default\"].useLayoutEffect;\nvar defaultRegistry = typeof window !== \"undefined\" ? createStyleRegistry() : undefined;\nfunction JSXStyle(props) {\n    var registry = defaultRegistry ? defaultRegistry : useStyleRegistry();\n    // If `registry` does not exist, we do nothing here.\n    if (!registry) {\n        return null;\n    }\n    if (typeof window === \"undefined\") {\n        registry.add(props);\n        return null;\n    }\n    useInsertionEffect(function() {\n        registry.add(props);\n        return function() {\n            registry.remove(props);\n        };\n    // props.children can be string[], will be striped since id is identical\n    }, [\n        props.id,\n        String(props.dynamic)\n    ]);\n    return null;\n}\nJSXStyle.dynamic = function(info) {\n    return info.map(function(tagInfo) {\n        var baseId = tagInfo[0];\n        var props = tagInfo[1];\n        return computeId(baseId, props);\n    }).join(\" \");\n};\n\nexports.StyleRegistry = StyleRegistry;\nexports.createStyleRegistry = createStyleRegistry;\nexports.style = JSXStyle;\nexports.useStyleRegistry = useStyleRegistry;\n","import { Dispatcher } from \"@fanfanlo\"\r\nimport { DispatcherUnsubscribe } from \"@fanfanlo\"\r\n\r\nconst dipsatcher = new Dispatcher()\r\ninterface IStaticModel{\r\n    dipsatcher:Dispatcher\r\n    screenLockCount:number\r\n    switchPage:()=>void\r\n    listenSwitchPage:(callback:()=>void)=>DispatcherUnsubscribe \r\n}\r\nexport const staticModel:IStaticModel = {\r\n    dipsatcher,\r\n    screenLockCount:0,\r\n    switchPage:async()=>{\r\n        dipsatcher.dispatch(\"switchPage\")\r\n        staticModel.screenLockCount = 0\r\n    },\r\n    listenSwitchPage:(callback:()=>void)=>{\r\n        return dipsatcher.addListener(\"switchPage\",callback)\r\n    }\r\n}   \r\n","import { PropsWithChildren } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/router\";\r\n\r\n\r\nexport function PageTransition({ children }: PropsWithChildren) {\r\n    const router = useRouter()\r\n    return (\r\n\r\n        <AnimatePresence mode=\"sync\">\r\n            <motion.div\r\n                key={router.route}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -110 }}\r\n                transition={{ duration: 0.3 }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}","import { staticModel } from \"@app/static\";\r\nimport { Box } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { PageTransition } from \"../motion\";\r\nlet idCount = 0\r\nexport function PageShell({children}:{children:React.ReactNode}){\r\n    const id = `app-shell-${idCount++}`\r\n    useEffect(()=>{\r\n        const box = document.querySelector(`#${id}`)\r\n        const unlisten = staticModel.listenSwitchPage(()=>{\r\n            if(!box)return\r\n        })\r\n        if(!box)return\r\n        box.addEventListener(\"click\",(e)=>{\r\n            if(staticModel.screenLockCount == 0)return\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n        })\r\n        return ()=>{\r\n            unlisten()\r\n        }\r\n    },[])\r\n    return (\r\n        <Box id={id}>\r\n            <PageTransition>\r\n                {children}  \r\n            </PageTransition>\r\n        </Box>\r\n    )\r\n}\r\n","import { AppBar, Box, Container, CssBaseline, Fab, Fade, Slide, Toolbar, Typography, useScrollTrigger } from \"@mui/material\";\r\nimport { PropsWithChildren, ReactNode } from \"react\";\r\n// import {AndroidPageContent} from \"../../\";\r\nimport { browserHistoryUtils, IDispatcher } from \"@fanfanlo\";\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PageShell } from \"../app/PageShell\";\r\nimport shadows from \"@mui/material/styles/shadows\";\r\nimport AndroidPageContent from \"../page/AndroidPageContent\";\r\nimport { IAppBarBackAskEvent } from \"@app/static\";\r\nimport { ITitleI18nConf } from \"../page\";\r\ninterface Props {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window?: () => Window;\r\n    children?: React.ReactElement<unknown>;\r\n}\r\n\r\nfunction HideOnScroll(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n    });\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children ?? <div />}\r\n        </Slide>\r\n    );\r\n}\r\nexport interface IAppbarProps extends PropsWithChildren {\r\n    title: ReactNode\r\n    back: boolean\r\n    backHandler?: () => boolean\r\n    backDispatcher?:IDispatcher\r\n    toolbar?:ReactNode\r\n    toolbarContent?:ReactNode\r\n}\r\nexport function Appbar({ title }: { title: ReactNode } & PropsWithChildren) {\r\n    return (\r\n\r\n        <AppBar color={\"inherit\"}>\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\ninterface IAppbarContainerProps extends PropsWithChildren {\r\n    appbarProps: IAppbarProps\r\n    titleConf?:ITitleI18nConf\r\n    reload?: boolean\r\n}\r\n\r\n// export interface IAppBarBackAskEvent{\r\n//     defaultPrevented:boolean\r\n// }\r\n\r\nfunction ScrollTop(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n        disableHysteresis: true,\r\n        threshold: 100,\r\n    });\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const anchor = (\r\n            (event.target as HTMLDivElement).ownerDocument || document\r\n        ).querySelector('#back-to-top-anchor');\r\n\r\n        if (anchor) {\r\n            anchor.scrollIntoView({\r\n                block: 'center',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fade in={trigger}>\r\n            <Box data-id=\"content-scroll-top-button\"\r\n                onClick={handleClick}\r\n                role=\"presentation\"\r\n                sx={{ position: 'fixed', bottom: 16, right: 16 }}\r\n            >\r\n                {children}\r\n            </Box>\r\n        </Fade>\r\n    );\r\n}\r\nexport function AppbarContainer(props: IAppbarContainerProps) {\r\n    const { children, appbarProps, titleConf, reload } = props;\r\n    const router = useRouter()\r\n    function handleBack(){\r\n        // 本想抽象成底层一个方法，但是考虑了一下router需要注入或者是一个callback，似乎像现在这样判断一下event也可以。回头继续观察一下吧。\r\n        const event = browserHistoryUtils.askHistoryBack()\r\n        if(event.defaultPrevented)return\r\n        if(appbarProps.backDispatcher){\r\n            const e:IAppBarBackAskEvent = {defaultPrevented:false}\r\n            appbarProps.backDispatcher.dispatch('back',e)\r\n            if(e.defaultPrevented)return\r\n        }\r\n        router.back()\r\n    }\r\n    return (\r\n        <PageShell>\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <HideOnScroll {...props}>\r\n                <AppBar color=\"inherit\">\r\n                    {appbarProps.toolbar ? \r\n                    appbarProps.toolbar:\r\n                    <Toolbar>\r\n                        <KeyboardArrowLeft onClick={handleBack} />\r\n                        {appbarProps.title}\r\n                    </Toolbar>\r\n                    }\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Toolbar id=\"back-to-top-anchor\" />\r\n            <Container sx={{padding:\"0\", marginTop:\"17px\"}}>\r\n                <AndroidPageContent titleConf={titleConf} reload={reload}>\r\n                    {children}\r\n                </AndroidPageContent>\r\n            </Container>\r\n\r\n            <ScrollTop {...props}>\r\n                <Fab size=\"small\" aria-label=\"scroll back to top\">\r\n                    <KeyboardArrowUpIcon />\r\n                </Fab>\r\n            </ScrollTop>\r\n        </React.Fragment>\r\n        </PageShell>\r\n    );\r\n}\r\n"],"names":["module","exports","require","style","autoWebViewJs","Log","fileLog","EmergencyLogManager","isAndroidWebView","hasAutoWebViewJs","callScript","isAndroidWebViewUA","test","navigator","userAgent","hasAndroidInterface","window","android","Android","console","log","e","warn","getEmergencyLogs","limit","logger","sub","Promise","resolve","reject","script","javaResultString","result","JSON","parse","success","data","Error","error","getEmergencyLogDetail","sessionId","getEmergencyLogStats","totalSessions","successfulCalls","canceledCalls","failedCalls","averageDuration","formattedAverageDuration","exportEmergencyLogs","timestamp","Date","toISOString","replace","filename","text","clearEmergencyLogs","downloadLogFile","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","getStatusDisplay","session","endReason","color","getTriggerSourceDisplay","source","getCallTypeDisplay","createTestLogs","message","React","useState","useEffect","EmergencyLogViewer","className","sessions","setSessions","selectedSession","setSelectedSession","statistics","setStatistics","loading","setLoading","setError","searchTerm","setSearchTerm","filterStatus","setFilterStatus","loadLogs","loadStatistics","logs","length","err","stats","refreshData","all","loadSessionDetail","detail","exportLogs","clearLogs","confirm","alert","setTimeout","filteredSessions","filter","matchesSearch","toString","includes","triggerSource","callType","matchesFilter","div","h2","button","onClick","disabled","span","input","placeholder","value","onChange","target","select","option","h3","map","status","formattedStartTime","duration","Math","round","logCount","stopPropagation","endTime","formattedEndTime","index","formattedTime","step","Object","keys","entries","key","threadName","default","AppbarContainer","AppShell","LogsPage","appbarProps","title","back","initReactI18next","LanguageDetector","Backend","i18next","isServer","fileMapUtils","useTranslation","fileDateVersion","i18nLogger","windowHref","u","location","parent","origin","backendOptions","loadPath","lngs","namespaces","pause","lng","p","ps","split","splice","join","getFile","languages","l","print","backend","init","i18n","on","i18nInit","_fileDateVersion","use","load","fallbackLng","partialBundledLanguages","ns","debug","interpolation","escapeValue","detection","caches","namespace","res","loaded","msg","arguments","createContext","storeUtils","s","create","StorePageContext","StorePageDynamicContext","toProxy","watchUpdates","useRouter","getConfig","I18nextProvider","trackingPrint","checkReloadPage","publicRuntimeConfig","isDevelopment","indexOf","searchParams","htmlRefreshTime","get","newUrl","set","String","now","refreshTime","Number","dynamicKeyMap","Map","children","router","scrollKey","dynamicKey","isOpened","o","read","write","beforePopState","state","clearAll","params","subtitle","extra","info","x","y","listenScroll","requestAnimationFrame","scrollTo","onScroll","scrollX","scrollY","addEventListener","unsub","removeEventListener","isDev","loadI18nValue","Box","Button","Container","useContext","Reload","t","reload","toLocaleString","ScrollP","PageContent","titleConf","scroll","clazz","random","loadTitle","container","getElementsByClassName","scrollTop","passive","sx","height","overflow","padding","display","flexDirection","undefined","AndroidPageContent","_interopDefaultLegacy","React__default","_defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","isProd","process","env","isString","call","StyleSheet","param","ref","_name","name","_optimizeForSpeed","optimizeForSpeed","invariant$1","_deletedRulePlaceholder","_serverSheet","_tags","_injected","_rulesCount","node","querySelector","_nonce","getAttribute","_proto","setOptimizeForSpeed","bool","flush","inject","isOptimizeForSpeed","_this","makeStyleTag","getSheet","cssRules","insertRule","rule","cssText","push","deleteRule","getSheetForTag","tag","sheet","styleSheets","ownerNode","insertionPoint","replaceRule","trim","textContent","parentNode","forEach","reduce","rules","concat","Array","cssString","relativeToTag","setAttribute","createTextNode","head","getElementsByTagName","insertBefore","condition","hash","str","_$hash","charCodeAt","stringHash","sanitize","cache","computeId","baseId","propsToString","computeSelector","id","css","selectoPlaceholderRegexp","idcss","mapRulesToStyle","options","args","nonce","dangerouslySetInnerHTML","__html","StyleSheetRegistry","_styleSheet","styleSheet","_sheet","_fromServer","_indices","_instancesCounts","add","isArray","selectFromServer","acc","tagName","getIdAndRules","styleId","indices","remove","invariant","tagFromServer","update","nextProps","fromServer","Boolean","styles","dynamic","elements","slice","querySelectorAll","element","StyleSheetContext","displayName","createStyleRegistry","StyleRegistry","configuredRegistry","registry","rootRegistry","Provider","useStyleRegistry","useInsertionEffect","useLayoutEffect","defaultRegistry","JSXStyle","tagInfo","Dispatcher","dipsatcher","staticModel","screenLockCount","switchPage","dispatch","listenSwitchPage","callback","addListener","AnimatePresence","motion","PageTransition","mode","initial","opacity","animate","exit","transition","route","idCount","PageShell","box","unlisten","preventDefault","AppBar","CssBaseline","Fab","Fade","Slide","Toolbar","Typography","useScrollTrigger","browserHistoryUtils","KeyboardArrowLeft","KeyboardArrowUpIcon","HideOnScroll","trigger","appear","direction","in","Appbar","variant","component","ScrollTop","disableHysteresis","threshold","handleClick","event","anchor","ownerDocument","scrollIntoView","block","data-id","role","position","bottom","right","handleBack","askHistoryBack","defaultPrevented","backDispatcher","Fragment","toolbar","marginTop","size","aria-label"],"sourceRoot":"","ignoreList":[0,6,12]}