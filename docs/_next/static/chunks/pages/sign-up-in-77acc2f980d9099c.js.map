{"version":3,"file":"static/chunks/pages/sign-up-in-77acc2f980d9099c.js","mappings":"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","sources":["webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/fanfanlo/src/i18n/i18n-init.ts","webpack://_N_E/../../libs/fanfanlo/src/storage/store-page-context.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/AppShell.tsx","webpack://_N_E/../../libs/app/model/src/remote/user/get-verification-code.ts","webpack://_N_E/../../libs/app/model/src/remote/user/loginByCode.ts","webpack://_N_E/../../libs/app/model/src/remote/user/common.ts","webpack://_N_E/./src/components/common/UnifiedLogin.tsx","webpack://_N_E/./src/components/common/LoginController.tsx","webpack://_N_E/./src/components/pages/sign-up-in/content/SignInUpContent.tsx","webpack://_N_E/./src/pages/sign-up-in/index.tsx","webpack://_N_E/?6431","webpack://_N_E/../../libs/app/ui/src/components/page/PageContent.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/AndroidPageContent.tsx","webpack://_N_E/./src/components/privacies/PrivacyDialogDisplay.tsx","webpack://_N_E/../../libs/app/static/src/mc/static-model.ts","webpack://_N_E/../../libs/app/ui/src/components/motion/page-transition.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/PageShell.tsx","webpack://_N_E/../../libs/app/ui/src/components/appbar/AppBar.tsx"],"sourcesContent":["export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","\"use client\";\r\n// 现在用的是这个文件\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport Backend, { type HttpBackendOptions } from \"i18next-http-backend\";\r\n\r\nimport i18next from \"i18next\";\r\nimport { Log } from \"../log/Log\";\r\nimport { getBuildTime, isServer } from \"../nextjs/env/env\";\r\nimport { fileMapUtils } from \"../utils\";\r\n;\r\nexport { useTranslation } from 'react-i18next';\r\nlet fileDateVersion:string = ''// = getConfig().publicRuntimeConfig?.version\r\nexport const i18nLogger = new Log(false, `i18n`);\r\nconst windowHref = (()=>{\r\n  if(typeof window === 'undefined')return ''\r\n  const u = new URL(window.location.href || window.parent?.location.href);\r\n  // 同域文本iframe里的页面会获取不到href，所以判断一下直接用父级的就行.\r\n  return u.origin == null || u.origin == 'null' ? '' : u.origin\r\n})()\r\nconst backendOptions = {\r\n  loadPath: function (lngs: string[], namespaces: string[]) {\r\n    const log = i18nLogger.sub(false, `i18n loadpath`);\r\n    log.pause = true;\r\n    const lng = lngs[0]\r\n    let p = ``\r\n    // p = `/options/_locales/${lngs[0].replace(\"-\", \"_\")}/messages.json`;\r\n    // p = `/locales/zh-CN/ns1/content.json`;\r\n    // p = `locales/${lng}/${namespaces[0]}.json?v=${fileDateVersion}`\r\n    const ps = namespaces[0].split('/')\r\n    ps.splice(ps.length - 1, 0, lng)\r\n    // p = `locales/${ps.join('/')}.json?v=${fileDateVersion}`\r\n    // p = `locales/${ps.join('/')}.json?v=${getBuildTime()}`\r\n    p = `locales/${ps.join('/')}.json`\r\n    log.log(`lngs=`, lngs);\r\n    log.log(`namespaces=`, namespaces);\r\n    log.log(\"p=\", p);\r\n    p = fileMapUtils.getFile(`/${p}`);\r\n    // console.log('map p=', p)\r\n    p = `${windowHref}/${p}`\r\n    return p;\r\n\r\n  },\r\n  parse: function (\r\n    data: string,\r\n    languages?: string | string[],\r\n    namespaces?: string | string[]\r\n  ) {\r\n    const log = i18nLogger.sub(false, `i18n backend parse`);\r\n    log.pause = true;\r\n    // log.log(`parrrse`, data, languages, namespaces);\r\n    const l = JSON.parse(data);\r\n    log.print(`before set i18ndata`);\r\n    // i18nData = l as II18n;\r\n    // log.log(`i18nData.rule.scripts.sys.rules`, i18nData.rule.scripts.sys.rules);\r\n    log.log(`parrrse`, languages, namespaces);\r\n    return l;\r\n  },\r\n};\r\nconst backend = new Backend();\r\nbackend.init(null, backendOptions);\r\nexport const i18n = i18next;\r\n// export const resources: Resource = {\r\n//   // 'zh-CN': {\r\n//   //   translation: _.merge({}, zhCN),\r\n//   // },\r\n//   // en: {\r\n//   //   translation: _.merge({}, en),\r\n//   // },\r\n// };\r\n\r\n\r\ni18n.on(\"languageChanged\", async function (lng) {\r\n  const log = i18nLogger.sub(false, `onlanguageChanged`);\r\n  log.pause = true;\r\n  log.log(`lllllng`, lng);\r\n  // lng = \"en\";\r\n  // const p = `/options/_locales/${lng.replace(\"-\", \"_\")}/messages.json`;\r\n});\r\n\r\n\r\n\r\n\r\nexport function i18nInit(_fileDateVersion:string=''){\r\n  fileDateVersion = _fileDateVersion\r\n  i18n\r\n  .use(LanguageDetector)\r\n  .use(backend)\r\n  .use(initReactI18next)\r\n  .init<HttpBackendOptions>({\r\n    load: \"currentOnly\",\r\n    // load: \"all\",\r\n    // supportedLngs: ['zh-CN', 'zh-TW', 'en', 'en-GB', 'ja'],\r\n    // resources,\r\n    fallbackLng: isServer ? \"en\" : \"zh-CN\",\r\n    // fallbackLng: \"zh-CN\",\r\n    // lng: \"zh-CN\",\r\n    partialBundledLanguages:true,\r\n    ns:[],\r\n    \r\n    debug: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    detection: {\r\n      caches: [\"localStorage\"],\r\n    },\r\n  });\r\n}\r\ni18n.on(\"missingKey\", function (lngs, namespace, key, res) {\r\n  console.error(\r\n    \"i18n mssing key, lngs=%s, namespace=%s, key=%s, res=%s\",\r\n    lngs,\r\n    namespace,\r\n    key,\r\n    res\r\n  );\r\n});\r\n\r\ni18n.on(\"loaded\", function (loaded) {\r\n  const log = i18nLogger.sub(false, `onloaded`);\r\n  log.pause = true;\r\n  log.log(`onloaded arguments`, loaded);\r\n});\r\n\r\ni18n.on(\"failedLoading\", function (lng, ns, msg) {\r\n  const log = i18nLogger.sub(false, `onfailedLoading`);\r\n  log.pause = true;\r\n  log.log(`failedLoading arguments`, lng, ns, msg);\r\n});\r\n\r\ni18n.on(\"added\", function () {\r\n  console.log('added', arguments)\r\n});   \r\n\r\nexport default i18n;","import { createContext } from \"react\";\r\nimport { storeUtils } from \"./store-utils\";\r\n// import { storeUtils } from \"./store\";\r\nconst s = storeUtils.namespace('store-page-context')\r\n\r\nexport interface IPageScrollPosition{\r\n    x:number\r\n    y:number\r\n}\r\n\r\nfunction create(){\r\n    return createContext(s)\r\n}\r\nexport const StorePageContext = createContext<any>(s)\r\n\r\nexport const StorePageDynamicContext = createContext<Record<string, any>>({})","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport getConfig from \"node_modules/next/config\";\r\nimport { PropsWithChildren, useEffect, useState } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\nimport {trackingPrint} from \"@app/model\"\r\ncheckReloadPage();\r\ni18nInit()\r\n\r\n\r\nfunction checkReloadPage(){\r\n  if(typeof window === 'undefined')return\r\n  if(getConfig().publicRuntimeConfig.isDevelopment){\r\n    return\r\n  }\r\n  if(window.location.href.indexOf('qiniu') == -1)return;\r\n  // 帮我检测url中是否包含_htmlRefreshTime的参数\r\n  // 如果没有，则添加_htmlRefresTime的参数，值为当前时间的毫秒数\r\n  const searchParams = new URL(window.location.href).searchParams\r\n  const htmlRefreshTime = searchParams.get('_htmlRefreshTime')\r\n  if (!htmlRefreshTime) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n    return\r\n  }\r\n\r\n  const refreshTime = Number(htmlRefreshTime)\r\n  if (refreshTime + 2 * 60 * 1000 < Date.now()) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n  }\r\n}\r\nconst dynamicKeyMap = new Map<string, boolean>();\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const [isOpened] = useState(dynamicKeyMap.get(dynamicKey) === true)\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    trackingPrint({params:{\r\n      type:\"页面进入\",\r\n      title:\"页面\",\r\n      subtitle:\"发送者-AppShell\",\r\n      extra:{\r\n        href:window.location.href\r\n      }\r\n    }})\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        if(isOpened){\r\n          window.scrollTo(info.x, info.y)\r\n        }\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  useEffect(()=>{\r\n    dynamicKeyMap.set(dynamicKey, true)\r\n  },[])\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","import { IRequestParams } from \"@fanfanlo\";\r\nimport { request } from \"@fanfanlo\";\r\nimport { tms } from \"../tms\";\r\nimport { IResultContent } from \"@fanfanlo\";\r\nimport { IRequestOptions } from \"../IRequestOptions\";\r\n\r\nexport interface IRegCodeInfo{\r\n    login_name:string\r\n    endtime:string\r\n    code:string\r\n}\r\nexport interface ITMGetVerificationCodeResult extends IResultContent{\r\n    reg_code_info:IRegCodeInfo\r\n}\r\nexport enum TMGetVerificationCodeType {\r\n    cnMobile = 'cnMobile',\r\n    email = \"email\"\r\n}\r\ninterface ITMGetVerificationCodeParams extends IRequestParams{\r\n    login_name:string\r\n    type:TMGetVerificationCodeType\r\n}\r\n\r\nexport async function tmsGetVerificationCode(opts:IRequestOptions<ITMGetVerificationCodeParams>){\r\n    const res = await request<ITMGetVerificationCodeResult>(tms.TUser, tms.MUserCreateRegCode, opts.params, opts.gateway, opts.handler);\r\n    return res\r\n}\r\n","import { IRequestParams, IResultContent } from \"@fanfanlo\"\r\nimport { UserLoginType } from \"./common\"\r\nimport { request } from \"@fanfanlo\"\r\nimport { tms } from \"../tms\"\r\nimport { IRequestOptions } from \"../IRequestOptions\";\r\n\r\n\r\nexport interface ITMLoginByCodeParams extends IRequestParams{\r\n    login_name:string\r\n    code:string\r\n    type:UserLoginType\r\n}\r\n\r\n\r\nexport interface ITMLoginByCodeResult extends IResultContent{\r\n    is_ok:boolean\r\n    msg:string\r\n    user_token?:string\r\n}\r\n\r\nexport async function tmsLoginByCode(opts:IRequestOptions<ITMLoginByCodeParams>){\r\n    console.log('options=', opts);\r\n    const res = await request<ITMLoginByCodeResult>(tms.TUser, tms.MUserLoginByCode, opts.params, opts.gateway, opts.handler);\r\n    return res\r\n}\r\n","export enum UserLoginType {\r\n    cnMobile = 'cnMobile',\r\n    email = \"email\"\r\n}\r\n    ","import { useEffect, useState } from \"react\";\nimport { TextField, Button, Box, Typography, Stack, FormControlLabel, Checkbox } from \"@mui/material\";\nimport { objectCountUtils, useProxyWatch } from \"@fanfanlo\";\n\nconst PHONE_REGEX = /^1[3-9]\\d{9}$/;\nconst VERIFICATION_CODE_REGEX = /^\\d{6}$/;\n\nexport interface IPrivacyAgreeData{\n  agree:boolean\n  code?:string // 物联网卡可以默认登录\n}\n\ninterface UnifiedLoginProps {\n  onGetCode: (phone: string) => Promise<void>;\n  onLogin: (phone: string, code: string) => Promise<void>;\n  onShowPrivacyDialog: () => void;\n  showAgreementCheckbox: boolean;\n  isLoading: boolean;\n  error: string;\n  countdown: number;\n  agreeData:IPrivacyAgreeData;\n}\n\nexport function UnifiedLogin({\n  onGetCode,\n  onLogin,\n  onShowPrivacyDialog,\n  showAgreementCheckbox,\n  isLoading,\n  error,\n  countdown,\n  agreeData,\n}: UnifiedLoginProps) {\n  const [phone, setPhone] = useState('');\n  const [code, setCode] = useState('');\n  // const [privacyAgreed, setPrivacyAgreed] = useState(!showAgreementCheckbox);\n  const [agree] = useProxyWatch(agreeData, 'agree', agreeData.agree);\n  const [code14] = useProxyWatch(agreeData, 'code', agreeData.code);\n  const isPhoneValid = PHONE_REGEX.test(phone);\n  const isCodeValid = VERIFICATION_CODE_REGEX.test(code);\n  const canGetCode = !isLoading && isPhoneValid && countdown === 0;\n  const canLogin = isPhoneValid && isCodeValid && !isLoading && agree;\n\n  const waitForPrivacyAgree = isPhoneValid && isCodeValid && !isLoading  && !agree;\n  useEffect(()=>{\n    // setPrivacyAgreed(agree)\n  },[agree])\n\n  useEffect(()=>{\n    if(!code14)return;\n    setCode(code14)\n  }, [code14])\n\n  const handleGetCodeClick = () => {\n    if (canGetCode) {\n      onGetCode(phone);\n    }\n  };\n\n  const handleLoginClick = () => {\n    if (canLogin) {\n      onLogin(phone, code);\n    }\n  };\n\n  const handlePrivacyClick = (event: React.MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    onShowPrivacyDialog();\n  };\n  return (\n    <Box sx={{ maxWidth: 400, mx: 'auto', p: { xs: 1, sm: 3 } }}>\n      <Typography variant=\"h5\" component=\"h1\" gutterBottom align=\"center\">\n        手机号登录/注册\n      </Typography>\n      <form onSubmit={(e) => { e.preventDefault(); handleLoginClick(); }}>\n        <Stack spacing={2}>\n          <TextField\n            fullWidth\n            label=\"手机号\"\n            value={phone}\n            onChange={(e) => setPhone(e.target.value)}\n            placeholder=\"请输入您的手机号\"\n            disabled={isLoading || countdown > 0}\n            margin=\"normal\"\n            inputProps={{ maxLength: 11 }}\n          />\n          <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n            <TextField\n              fullWidth\n              label=\"验证码\"\n              value={code}\n              onChange={(e) => setCode(e.target.value.replace(/\\D/g, '').substring(0, 6))}\n              placeholder=\"请输入6位验证码\"\n              disabled={isLoading}\n              margin=\"normal\"\n              inputProps={{ maxLength: 6 }}\n            />\n            <Button\n              variant=\"outlined\"\n              onClick={handleGetCodeClick}\n              disabled={!canGetCode}\n              fullWidth\n              sx={{ mt: '8px', mb: '4px', height: '56px' }}\n            >\n              {countdown > 0 ? `${countdown}秒后重试` : '获取验证码'}\n            </Button>\n          </Box>\n\n          {showAgreementCheckbox && (\n            <Box sx={{ display: 'flex', alignItems: 'center', mt: 1, mb: 1 }}>\n              <Box \n              sx={{color: waitForPrivacyAgree ? 'error.main' : 'inherit',}}>\n                <FormControlLabel\n                label=\"我已阅读并同意\"\n                control={<Checkbox checked={agree} onChange={(e) => {\n                  // setPrivacyAgreed(e.target.checked)\n                  agreeData.agree = e.target.checked\n                }\n                } />}\n              />\n              </Box>\n              <Typography variant=\"body2\" sx={{ userSelect: 'none' }}>\n                <Box component=\"span\" sx={{ color: 'primary.main', cursor: 'pointer' }} onClick={handlePrivacyClick}>\n                  《隐私政策》\n                </Box>\n              </Typography>\n            </Box>\n          )}\n\n          <Button\n            variant=\"contained\"\n            onClick={handleLoginClick}\n            disabled={!canLogin}\n            fullWidth\n            sx={{ mt: 2, py: 1.5 }}\n          >\n            登录 / 注册\n          </Button>\n\n          {error && (\n            <Typography color=\"error\" align=\"center\" sx={{ mt: 2 }}>\n              {error}\n            </Typography>\n          )}\n        </Stack>\n      </form>\n    </Box>\n  );\n}\n","import { useState, useEffect, useCallback } from \"react\";\nimport { tmsGetVerificationCode, TMGetVerificationCodeType, tmsLoginByCode, UserLoginType, user } from \"@app/model\";\nimport _ from \"lodash\";\nimport toast from \"react-hot-toast\";\nimport { IPrivacyAgreeData, UnifiedLogin } from \"./UnifiedLogin\";\n\nimport { PrivacyDialogDisplay } from \"../privacies/PrivacyDialogDisplay\";\nimport { objectCountUtils, toProxy } from \"@fanfanlo\";\n\ninterface LoginControllerProps {\n  onLoginSuccess: () => void;\n  showAgreementCheckbox: boolean;\n  agreeData:IPrivacyAgreeData\n}\n\nexport function LoginController({ agreeData, onLoginSuccess, showAgreementCheckbox }: LoginControllerProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [countdown, setCountdown] = useState(0);\n  const [openPrivacy, setOpenPrivacy] = useState(false);\n  useEffect(() => {\n    let timer: NodeJS.Timeout;\n    if (countdown > 0) {\n      timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n    }\n    return () => clearTimeout(timer);\n  }, [countdown]);\n\n  const handleGetCode = useCallback(async (phone: string) => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const res = await tmsGetVerificationCode({\n        params: { login_name: phone, type: TMGetVerificationCodeType.cnMobile },\n        gateway: '',\n        handler: { printLog: false }\n      });\n      if (res.err || !res.shellIsOk || !res.dataIsOk) {\n        setError(res.err?.toString() || '获取验证码失败');\n        return;\n      }\n      const codeFromServer = res.data?.reg_code_info?.code;\n      if (codeFromServer && codeFromServer.length === 6 && !_.isNaN(parseInt(codeFromServer))) {\n        agreeData.code = codeFromServer\n        toast('物联网号码无需短信，已自动填入验证码', { duration: 5000 });\n      }\n      setCountdown(60);\n    } catch (err) {\n      setError('请求失败，请稍后再试');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  const handleLogin = useCallback(async (phone: string, code: string) => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const res = await tmsLoginByCode({\n        params: { login_name: phone, code, type: UserLoginType.cnMobile },\n        gateway: '',\n        handler: { printLog: false }\n      });\n      if (res.err || !res.shellIsOk || !res.dataIsOk || !res.data?.is_ok) {\n        setError(res.data?.msg || res.err?.toString() || '登录失败');\n        return;\n      }\n      const userToken = res.data?.user_token;\n      if (userToken) {\n        if (showAgreementCheckbox) {\n          localStorage.setItem('privacyPolicyAgreed', 'true');\n        }\n        user.data.storeData.user_token = userToken;\n        onLoginSuccess();\n      } else {\n        setError(res.data?.msg || '登录失败');\n      }\n    } catch (err) {\n      setError('请求失败，请稍后再试');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [onLoginSuccess, showAgreementCheckbox]);\n\n  const handleShowPrivacyDialog = () => {\n    // privacy.show();\n    setOpenPrivacy(!openPrivacy)\n  };\n\n  function onPrivacyClose(agree?:boolean){\n    console.log('agree =', typeof agree, agree, objectCountUtils.getObjectCount(agreeData))\n    if(typeof agree !== 'undefined'){\n      agreeData.agree = agree\n    }\n    setOpenPrivacy(false)\n  }\n\n  return (\n    <>\n      <PrivacyDialogDisplay open={openPrivacy} onClose={onPrivacyClose} area=\"zh-cn\"  type=\"main\"/>\n    <UnifiedLogin\n    agreeData={agreeData}\n      onGetCode={handleGetCode}\n      onLogin={handleLogin}\n      onShowPrivacyDialog={handleShowPrivacyDialog}\n      showAgreementCheckbox={showAgreementCheckbox}\n      isLoading={isLoading}\n      error={error}\n      countdown={countdown}\n    />\n    </>\n  );\n}\n","import { Box } from \"@mui/material\";\r\nimport { useRouter } from \"next/router\";\r\nimport { toProxy, useProxyWatch } from \"@fanfanlo\";\r\nimport { user, trackingPrint } from \"@app/model\";\r\nimport toast from \"react-hot-toast\";\r\nimport { SignUp } from \"../../sign-up/content/SignUp\";\r\nimport { LoginController } from \"@src/components/common/LoginController\";\r\nimport { useState } from \"react\";\r\n\r\nexport function SignInUpContent(){\r\n    const router = useRouter();\r\n    const [token] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\r\n    \r\n      const [agreeData] = useState(toProxy({agree:false}))\r\n    console.log('SignInUpContent_fn token=', token)\r\n    if(token){\r\n        const waitTime = 1000;\r\n        \r\n        // 登录成功埋点\r\n        trackingPrint({params:{\r\n            type:\"用户操作\",\r\n            title:\"用户登录\",\r\n            subtitle:\"登录-成功完成\",\r\n            extra:{\r\n                timestamp: Date.now(),\r\n                redirectDelay: waitTime + 500,\r\n                backUrl: router.query.back || '/',\r\n                hasBackParam: !!router.query.back\r\n            }\r\n        }});\r\n        \r\n        toast('登录成功', { duration: waitTime })\r\n        setTimeout(() => {\r\n            back()\r\n        }, waitTime + 500);\r\n    }\r\n    function back(){\r\n        let p = '/';\r\n        if(router.query.back){\r\n            if(router.query.back instanceof Array){\r\n                p = router.query.back[0]\r\n            }else{\r\n                p = router.query.back\r\n            }\r\n        }\r\n        router.replace(p);\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            {/* <SignUp /> */}\r\n            \r\n             <LoginController \r\n             agreeData={agreeData}\r\n                 onLoginSuccess={back}\r\n                 showAgreementCheckbox={true}\r\n             />\r\n        </Box>\r\n    )\r\n}","import { AppbarContainer, AppShell, TabbarContainer } from \"@app/ui\";\r\nimport { NavBar } from \"@src/components/navbar/NavBar\";\r\nimport { SignInUpContent } from \"@src/components/pages/sign-up-in/content/SignInUpContent\";\r\n\r\n\r\nexport default function SignUpInPage() {\r\n    return (\r\n        <AppShell>\r\n            \r\n                            <AppbarContainer appbarProps={{title:\"登录\", back:true}}>\r\n                <SignInUpContent />\r\n                            </AppbarContainer>\r\n            {/* <TabbarContainer titleConf={{ ns: \"emergency-call/pages/sign-up-in/content\", key: \"content.title\" }}\r\n            navBar={<NavBar/>}\r\n            >\r\n                <SignInUpContent />\r\n            </TabbarContainer> */}\r\n        </AppShell>\r\n    )\r\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/sign-up-in\",\n      function () {\n        return require(\"private-next-pages/sign-up-in/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/sign-up-in\"])\n      });\n    }\n  ","import { isDev, loadI18nValue, useTranslation } from '@fanfanlo';\r\nimport { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf } from '.';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  const {t} = useTranslation(\"app-ui/components/page/content\")\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>{t(\"PageContent.refresh\")}</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ \r\n      height: '100%',\r\n      overflow: 'auto', \r\n      padding: \"0px\",\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        \r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n","import { Dialog, DialogContent, IconButton } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\nimport React from 'react';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport _ from 'lodash';\nimport getConfig from 'next/config';\n\ninterface PrivacyDialogDisplayProps {\n  open: boolean;\n  onClose: (agree?:boolean) => void;\n  type: string;\n  area: string;\n  showAgree?:boolean;\n}\n\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\n\n/**\n * 纯显示组件 - 负责隐私协议弹窗的显示和交互\n * 可以被手动控制打开/关闭\n */\nexport function PrivacyDialogDisplay({ open, onClose, type, area,showAgree }: PrivacyDialogDisplayProps) {\n  let suffix = (typeof window === \"undefined\") ? \"\" : window.location.href.indexOf(\"qiniu\") > -1 ? `/index.html?v=${getConfig().publicRuntimeConfig.buildTime}` : \"/\"\n  const [iframeSrc, setIframeSrc] = useState(`/privacies/${type}/${area}${suffix}#showAgree=${_.isBoolean(showAgree)?showAgree:true}`);\n  const iframeRef = React.useRef<HTMLIFrameElement>(null);\n\n  const [agree, setAgree] = useState(false)\n  useEffect(() => {\n    setIframeSrc(`/privacies/${type}/${area}${suffix}`);\n  }, [type, area]);\n\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      // 安全检查：确保消息来自iframe\n      if (event.source !== iframeRef.current?.contentWindow) {\n        return;\n      }\n\n      const { sender, agree } = event.data;\n\n      if (sender === 'privacy_page') {\n        console.log(`Received privacy decision: ${agree ? 'Agreed' : 'Disagreed'}`);\n\n        const value: IPrivacyInfo = {\n          agree,\n          disagreeTime: agree ? 0 : Date.now()\n        };\n\n        // 保存到本地存储\n        autoJsStoreUtils.write(`privacy_${type}`, value);\n        \n        // 同步到Android端\n        const script = `\n          var data = new com.fanfanlo.emergencycall.data.PrivacyData(${value.agree}, ${value.disagreeTime});\n          com.fanfanlo.emergencycall.data.PrivacyStateHolder.updateMainPrivacyByJs(data);\n        `;\n        autoWebViewJs.callScript(script);\n\n        // 关闭弹窗\n        setAgree(agree)\n        onClose(agree);\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n\n    return () => {\n      window.removeEventListener('message', handleMessage);\n    };\n  }, [type, onClose]);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={()=>{\n        onClose(agree)\n      }}\n      PaperProps={{\n        sx: {\n          width: '80%',\n          height: '80%',\n          maxWidth: 'none',\n        },\n      }}\n    >\n      <IconButton\n        aria-label=\"close\"\n        onClick={()=>{onClose(agree)}}\n        sx={{\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          color: theme => theme.palette.grey[500],\n        }}\n      >\n        <CloseIcon />\n      </IconButton>\n      <DialogContent sx={{ padding: 0, overflow: 'hidden' }}>\n        {iframeSrc && (\n          <iframe\n            ref={iframeRef}\n            src={iframeSrc}\n            style={{ width: '100%', height: '100%', border: 'none' }}\n            title={`Privacy Policy - ${type}/${area}`}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}","import { Dispatcher } from \"@fanfanlo\"\r\nimport { DispatcherUnsubscribe } from \"@fanfanlo\"\r\n\r\nconst dipsatcher = new Dispatcher()\r\ninterface IStaticModel{\r\n    dipsatcher:Dispatcher\r\n    screenLockCount:number\r\n    switchPage:()=>void\r\n    listenSwitchPage:(callback:()=>void)=>DispatcherUnsubscribe \r\n}\r\nexport const staticModel:IStaticModel = {\r\n    dipsatcher,\r\n    screenLockCount:0,\r\n    switchPage:async()=>{\r\n        dipsatcher.dispatch(\"switchPage\")\r\n        staticModel.screenLockCount = 0\r\n    },\r\n    listenSwitchPage:(callback:()=>void)=>{\r\n        return dipsatcher.addListener(\"switchPage\",callback)\r\n    }\r\n}   \r\n","import { PropsWithChildren } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/router\";\r\n\r\n\r\nexport function PageTransition({ children }: PropsWithChildren) {\r\n    const router = useRouter()\r\n    return (\r\n\r\n        <AnimatePresence mode=\"sync\">\r\n            <motion.div\r\n                key={router.route}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -110 }}\r\n                transition={{ duration: 0.3 }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}","import { staticModel } from \"@app/static\";\r\nimport { Box } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { PageTransition } from \"../motion\";\r\nlet idCount = 0\r\nexport function PageShell({children}:{children:React.ReactNode}){\r\n    const id = `app-shell-${idCount++}`\r\n    useEffect(()=>{\r\n        const box = document.querySelector(`#${id}`)\r\n        const unlisten = staticModel.listenSwitchPage(()=>{\r\n            if(!box)return\r\n        })\r\n        if(!box)return\r\n        box.addEventListener(\"click\",(e)=>{\r\n            if(staticModel.screenLockCount == 0)return\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n        })\r\n        return ()=>{\r\n            unlisten()\r\n        }\r\n    },[])\r\n    return (\r\n        <Box id={id}>\r\n            <PageTransition>\r\n                {children}  \r\n            </PageTransition>\r\n        </Box>\r\n    )\r\n}\r\n","import { AppBar, Box, Container, CssBaseline, Fab, Fade, Slide, Toolbar, Typography, useScrollTrigger } from \"@mui/material\";\r\nimport { PropsWithChildren, ReactNode } from \"react\";\r\n// import {AndroidPageContent} from \"../../\";\r\nimport { browserHistoryUtils, IDispatcher } from \"@fanfanlo\";\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PageShell } from \"../app/PageShell\";\r\nimport shadows from \"@mui/material/styles/shadows\";\r\nimport AndroidPageContent from \"../page/AndroidPageContent\";\r\nimport { IAppBarBackAskEvent } from \"@app/static\";\r\nimport { ITitleI18nConf } from \"../page\";\r\ninterface Props {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window?: () => Window;\r\n    children?: React.ReactElement<unknown>;\r\n}\r\n\r\nfunction HideOnScroll(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n    });\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children ?? <div />}\r\n        </Slide>\r\n    );\r\n}\r\nexport interface IAppbarProps extends PropsWithChildren {\r\n    title: ReactNode\r\n    back: boolean\r\n    backHandler?: () => boolean\r\n    backDispatcher?:IDispatcher\r\n    toolbar?:ReactNode\r\n    toolbarContent?:ReactNode\r\n}\r\nexport function Appbar({ title }: { title: ReactNode } & PropsWithChildren) {\r\n    return (\r\n\r\n        <AppBar color={\"inherit\"}>\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\ninterface IAppbarContainerProps extends PropsWithChildren {\r\n    appbarProps: IAppbarProps\r\n    titleConf?:ITitleI18nConf\r\n    reload?: boolean\r\n}\r\n\r\n// export interface IAppBarBackAskEvent{\r\n//     defaultPrevented:boolean\r\n// }\r\n\r\nfunction ScrollTop(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n        disableHysteresis: true,\r\n        threshold: 100,\r\n    });\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const anchor = (\r\n            (event.target as HTMLDivElement).ownerDocument || document\r\n        ).querySelector('#back-to-top-anchor');\r\n\r\n        if (anchor) {\r\n            anchor.scrollIntoView({\r\n                block: 'center',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fade in={trigger}>\r\n            <Box data-id=\"content-scroll-top-button\"\r\n                onClick={handleClick}\r\n                role=\"presentation\"\r\n                sx={{ position: 'fixed', bottom: 16, right: 16 }}\r\n            >\r\n                {children}\r\n            </Box>\r\n        </Fade>\r\n    );\r\n}\r\nexport function AppbarContainer(props: IAppbarContainerProps) {\r\n    const { children, appbarProps, titleConf, reload } = props;\r\n    const router = useRouter()\r\n    function handleBack(){\r\n        // 本想抽象成底层一个方法，但是考虑了一下router需要注入或者是一个callback，似乎像现在这样判断一下event也可以。回头继续观察一下吧。\r\n        const event = browserHistoryUtils.askHistoryBack()\r\n        if(event.defaultPrevented)return\r\n        if(appbarProps.backDispatcher){\r\n            const e:IAppBarBackAskEvent = {defaultPrevented:false}\r\n            appbarProps.backDispatcher.dispatch('back',e)\r\n            if(e.defaultPrevented)return\r\n        }\r\n        router.back()\r\n    }\r\n    return (\r\n        <PageShell>\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <HideOnScroll {...props}>\r\n                <AppBar color=\"inherit\">\r\n                    {appbarProps.toolbar ? \r\n                    appbarProps.toolbar:\r\n                    <Toolbar>\r\n                        <KeyboardArrowLeft onClick={handleBack} />\r\n                        {appbarProps.title}\r\n                    </Toolbar>\r\n                    }\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Toolbar id=\"back-to-top-anchor\" />\r\n            <Container sx={{padding:\"0\", marginTop:\"17px\"}}>\r\n                <AndroidPageContent titleConf={titleConf} reload={reload}>\r\n                    {children}\r\n                </AndroidPageContent>\r\n            </Container>\r\n\r\n            <ScrollTop {...props}>\r\n                <Fab size=\"small\" aria-label=\"scroll back to top\">\r\n                    <KeyboardArrowUpIcon />\r\n                </Fab>\r\n            </ScrollTop>\r\n        </React.Fragment>\r\n        </PageShell>\r\n    );\r\n}\r\n"],"names":["initReactI18next","LanguageDetector","Backend","i18next","Log","isServer","fileMapUtils","useTranslation","fileDateVersion","i18nLogger","windowHref","window","u","URL","location","href","parent","origin","backendOptions","loadPath","lngs","namespaces","log","sub","pause","lng","p","ps","split","splice","length","join","getFile","parse","data","languages","l","JSON","print","backend","init","i18n","on","i18nInit","_fileDateVersion","use","load","fallbackLng","partialBundledLanguages","ns","debug","interpolation","escapeValue","detection","caches","namespace","key","res","console","error","loaded","msg","arguments","createContext","storeUtils","s","create","StorePageContext","StorePageDynamicContext","toProxy","watchUpdates","useRouter","getConfig","useEffect","useState","I18nextProvider","trackingPrint","checkReloadPage","publicRuntimeConfig","isDevelopment","indexOf","searchParams","htmlRefreshTime","get","newUrl","set","String","Date","now","toString","refreshTime","Number","dynamicKeyMap","Map","AppShell","children","router","scrollKey","dynamicKey","isOpened","o","read","write","beforePopState","state","clearAll","params","type","title","subtitle","extra","info","x","y","listenScroll","requestAnimationFrame","scrollTo","onScroll","e","scrollX","scrollY","addEventListener","unsub","removeEventListener","value","request","tms","TMGetVerificationCodeType","tmsGetVerificationCode","opts","TUser","MUserCreateRegCode","gateway","handler","tmsLoginByCode","MUserLoginByCode","UserLoginType","TextField","Button","Box","Typography","Stack","FormControlLabel","Checkbox","useProxyWatch","PHONE_REGEX","VERIFICATION_CODE_REGEX","UnifiedLogin","onGetCode","onLogin","onShowPrivacyDialog","showAgreementCheckbox","isLoading","countdown","agreeData","phone","setPhone","code","setCode","agree","code14","isPhoneValid","test","isCodeValid","canGetCode","canLogin","waitForPrivacyAgree","handleGetCodeClick","handleLoginClick","handlePrivacyClick","event","preventDefault","stopPropagation","sx","maxWidth","mx","xs","sm","variant","component","gutterBottom","align","form","onSubmit","spacing","fullWidth","label","onChange","target","placeholder","disabled","margin","inputProps","maxLength","display","gap","alignItems","replace","substring","onClick","mt","mb","height","color","control","checked","userSelect","cursor","py","useCallback","user","_","toast","PrivacyDialogDisplay","objectCountUtils","LoginController","onLoginSuccess","setIsLoading","setError","setCountdown","openPrivacy","setOpenPrivacy","timer","setTimeout","clearTimeout","handleGetCode","login_name","cnMobile","printLog","err","shellIsOk","dataIsOk","codeFromServer","reg_code_info","isNaN","parseInt","duration","handleLogin","is_ok","userToken","user_token","localStorage","setItem","storeData","handleShowPrivacyDialog","onPrivacyClose","getObjectCount","open","onClose","area","SignInUpContent","token","waitTime","timestamp","redirectDelay","backUrl","query","back","hasBackParam","Array","AppbarContainer","SignUpInPage","appbarProps","isDev","loadI18nValue","Container","useContext","Reload","t","reload","toLocaleString","ScrollP","index","PageContent","titleConf","scroll","clazz","Math","random","loadTitle","document","container","getElementsByClassName","scrollTop","passive","className","overflow","padding","flexDirection","undefined","AndroidPageContent","Dialog","DialogContent","IconButton","CloseIcon","React","autoJsStoreUtils","autoWebViewJs","showAgree","suffix","buildTime","iframeSrc","setIframeSrc","isBoolean","iframeRef","useRef","setAgree","handleMessage","source","current","contentWindow","sender","disagreeTime","script","callScript","PaperProps","width","aria-label","position","right","top","theme","palette","grey","iframe","ref","src","style","border","Dispatcher","dipsatcher","staticModel","screenLockCount","switchPage","dispatch","listenSwitchPage","callback","addListener","AnimatePresence","motion","PageTransition","mode","div","initial","opacity","animate","exit","transition","route","idCount","PageShell","id","box","querySelector","unlisten","AppBar","CssBaseline","Fab","Fade","Slide","Toolbar","useScrollTrigger","browserHistoryUtils","KeyboardArrowLeft","KeyboardArrowUpIcon","HideOnScroll","props","trigger","appear","direction","in","Appbar","ScrollTop","disableHysteresis","threshold","handleClick","anchor","ownerDocument","scrollIntoView","block","data-id","role","bottom","handleBack","askHistoryBack","defaultPrevented","backDispatcher","Fragment","toolbar","marginTop","size"],"sourceRoot":"","ignoreList":[0]}