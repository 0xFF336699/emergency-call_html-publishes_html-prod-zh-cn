{"version":3,"file":"static/chunks/9236.fe5d20b08467eaf4.js","mappings":"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","sources":["webpack://_N_E/../../libs/droid/project-v2-interface/src/constants/namespace.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/constants/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/types/ProjectCategory.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/types/IProjectSettings.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/mergeToDefaultData.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/ITrigger.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/ITriggerGroup.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/IAction.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/IActionGroup.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/triggerActionUtils.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/ITriggerAction.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/ITriggerActionGroup.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/entities/IProject.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/projectMerge.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/storage/storage.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/trigger-action-handlers/createTriggerHandler.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/trigger-action-handlers/createActionHandler.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/events/projectMemberType.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/events/trigger-list-action-list-intf.ts","webpack://_N_E/../../libs/fanfanlo/src/utils/throw-trace-error.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/events/projectEventUtils.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/events/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/contexts/project-contexts.tsx","webpack://_N_E/../../libs/droid/project-v2-interface/src/contexts/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/childToProjectData.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/projectHistory.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/descriptionUtils.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/entityFinder.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/utils/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/a11y/sfdata.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/a11y/A11yNode.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/a11y/NodeActionUI.tsx","webpack://_N_E/../../libs/droid/project-v2-interface/src/a11y/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/common/IEntityDescription.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/common/index.ts","webpack://_N_E/../../libs/fanfanlo/src/translation/TranslationGlobalData.ts","webpack://_N_E/../../libs/fanfanlo/src/translation/translationCache.ts","webpack://_N_E/../../libs/fanfanlo/src/translation/translationService.ts","webpack://_N_E/../../libs/fanfanlo/src/translation/TranslationComponent.tsx","webpack://_N_E/../../libs/droid/project-v2-interface/src/components/description-renderer/DescriptionContentRenderer.tsx","webpack://_N_E/../../libs/droid/project-v2-interface/src/components/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/projectRunner2.script.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/javaLibDataMap.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/extractDependencies.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/assembleProjectScript.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/assembleRhinoRunner.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/RhinoInjectKeys.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/runner/index.ts","webpack://_N_E/../../libs/droid/project-v2-interface/src/index.ts"],"sourcesContent":["/**\r\n * Project \r\n *  trigger/action  type \r\n */\r\nexport const projectNamespace = \"fanfanlo/javajs/v1/project/components/\"\r\n","export * from './namespace'\r\n","import { Log } from \"@fanfanlo\";\n\nconst fileLog = new Log(true, 'ProjectCategory');\nfileLog.pause = true;\n\n/**\n * Project \n *\n * QuickAction -  action trigger\n * ScriptRunner -  script action\n * Workflow -  trigger + action\n */\nexport enum ProjectCategory {\n  /**  -  action trigger */\n  QuickAction = 'quick-action',\n\n  /**  -  script action */\n  ScriptRunner = 'script-runner',\n\n  /**  -  trigger + action */\n  Workflow = 'workflow'\n}\n\n/**\n * Project  UI \n */\nexport interface ProjectCategoryUIConfig {\n  /**  trigger  */\n  showTrigger: boolean;\n\n  /**  action  */\n  showActionList: boolean;\n\n  /**  triggerActionGroup */\n  allowAddGroup: boolean;\n\n  /**  script action */\n  forceScriptAction: boolean;\n}\n\n/**\n * Project \n */\nexport interface ProjectCategoryConfig {\n  /**  ID */\n  category: ProjectCategory;\n\n  /** i18n key */\n  labelKey: string;\n\n  /** i18n key */\n  descriptionKey: string;\n\n  /**  (MUI icon) */\n  icon: string;\n\n  /** UI  */\n  uiConfig: ProjectCategoryUIConfig;\n}\n\n/**\n * \n */\nexport const PROJECT_CATEGORY_CONFIGS: Record<ProjectCategory, ProjectCategoryConfig> = {\n  [ProjectCategory.QuickAction]: {\n    category: ProjectCategory.QuickAction,\n    labelKey: 'ProjectCategory.QuickAction.label',\n    descriptionKey: 'ProjectCategory.QuickAction.description',\n    icon: 'flash_on',\n    uiConfig: {\n      showTrigger: false,\n      showActionList: true,\n      allowAddGroup: false,\n      forceScriptAction: false\n    }\n  },\n\n  [ProjectCategory.ScriptRunner]: {\n    category: ProjectCategory.ScriptRunner,\n    labelKey: 'ProjectCategory.ScriptRunner.label',\n    descriptionKey: 'ProjectCategory.ScriptRunner.description',\n    icon: 'code',\n    uiConfig: {\n      showTrigger: false,\n      showActionList: false,\n      allowAddGroup: false,\n      forceScriptAction: true\n    }\n  },\n\n  [ProjectCategory.Workflow]: {\n    category: ProjectCategory.Workflow,\n    labelKey: 'ProjectCategory.Workflow.label',\n    descriptionKey: 'ProjectCategory.Workflow.description',\n    icon: 'account_tree',\n    uiConfig: {\n      showTrigger: true,\n      showActionList: true,\n      allowAddGroup: true,\n      forceScriptAction: false\n    }\n  }\n};\n\n/**\n *  ProjectCategory \n * @param category  Workflow \n */\nexport function getProjectCategoryConfig(category?: ProjectCategory): ProjectCategoryConfig {\n  fileLog.log(`[getProjectCategoryConfig]  category=${category}`);\n\n  let resolvedCategory: ProjectCategory;\n  if (category) {\n    resolvedCategory = category;\n    fileLog.log(`[getProjectCategoryConfig]  category=${resolvedCategory}`);\n  } else {\n    resolvedCategory = ProjectCategory.Workflow;\n    fileLog.log(`[getProjectCategoryConfig] category  Workflow`);\n  }\n\n  const config = PROJECT_CATEGORY_CONFIGS[resolvedCategory];\n  fileLog.log(`[getProjectCategoryConfig] :`, JSON.stringify(config));\n\n  return config;\n}\n","\r\n// \r\nexport enum RemoteSyncStatus {\r\n    Synced = 'synced',      // \r\n    Pending = 'pending',    // \r\n    Failed = 'failed',      // \r\n}\r\n\r\n// IProject\r\nexport interface IProjectSettings {\r\n    syncToServer: boolean; // falsepublicprojectforkprojectproject\r\n\r\n    //  syncToServer=true \r\n    // undefined: \r\n    remoteSyncStatus?: RemoteSyncStatus;\r\n\r\n    // \r\n    lastSyncTime?: number;\r\n}\r\n\r\nexport function createDefaultProjectSettings(): IProjectSettings {\r\n    return {\r\n        syncToServer: false,\r\n        // remoteSyncStatus \r\n        // lastSyncTime \r\n    };\r\n}\r\n","/**\n * \n */\nimport _ from \"lodash\"\n\nexport function mergeToDefaultData<T>(createDefaultData: () => T, data?: Partial<T>): T {\n  return mergeDataWith(createDefaultData(), data)\n}\n\nexport function mergeDataWith<T>(dist: T, src?: Partial<T>) {\n  return _.mergeWith(dist, src, (a, b) => {\n    if (_.isArray(a) && _.isArray(b)) {\n      //  https://gemini.google.com/app/8bb39bcc58ded134\n      return b\n    }\n  })\n}\n\nexport function createMergeToDefaultData<T>(createDefaultData: () => T) {\n  return (data?: Partial<T>) => mergeToDefaultData(createDefaultData, data)\n}\n","import {\n  IThreeLayerID,\n  IR2PathsWithScript,\n  IEntityBase,\n  IMetadata,\n  IScriptParams,\n  ITriggerJavaData,\n  ITriggerWebConfig\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionLeaf } from '../types/version';\nimport { IPermissionData, IInjectConfig } from '../types/permission';\nimport { ulid } from 'ulid';\nimport { createMergeToDefaultData } from '../utils/mergeToDefaultData';\n\n/**\n * \n * SQLproject_trigger\n * GoProjectTrigger\n */\nexport interface ITrigger<\n  TJavaData extends ITriggerJavaData = ITriggerJavaData,\n  TWebConfig extends ITriggerWebConfig = ITriggerWebConfig\n> extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2PathsWithScript,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionLeaf,\n  IMetadata,\n  IScriptParams<TJavaData, TWebConfig>\n{\n  type:string\n  permissions?: IPermissionData[];    // \n  injects?: IInjectConfig[];          // \n}\n\n// \nexport type ITriggerDefault = ITrigger<ITriggerJavaData, ITriggerWebConfig>;\n\n// ===  ===\nexport const triggerType = 'trigger'\n\n// === Trigger Utils ===\nfunction createDefaultTrigger(): ITrigger {\n  return {\n    ulid: ulid(),\n    uuid: '',\n    type:'',\n    ownerUuid: '',\n    currentVersion: 1,\n    permissions: [],\n    injects: [],\n    createdAt: Date.now(),\n    updatedAt: Date.now(),\n    authorUuid: ''\n  } as ITrigger\n}\n\nexport interface ITriggerBaseUtils {\n  type: string\n  createDefaultData: () => ITrigger\n  mergeDataToDefaultData: (data: Partial<ITrigger>) => ITrigger\n}\n\nexport const triggerBaseUtils: ITriggerBaseUtils = {\n  type: triggerType,\n  createDefaultData: createDefaultTrigger,\n  mergeDataToDefaultData: createMergeToDefaultData(createDefaultTrigger)\n}\n","import {\n  IThreeLayerID,\n  IR2Paths,\n  IEntityBase,\n  IMetadata\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionContainer } from '../types/version';\nimport { ITreeStructure } from '../types/tree';\nimport { ITrigger } from './ITrigger';\nimport { createMergeToDefaultData, mergeDataWith } from '../utils/mergeToDefaultData';\nimport { ulid } from 'ulid';\nimport { Log } from '@fanfanlo';\n\nconst fileLog = new Log(false, 'ITriggerGroup_f')\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n// ===  ===\nexport const triggerGroupType = 'triggerGroup'\n\n/**\n * \n * SQLproject_trigger_group\n * GoProjectTriggerGroup\n *\n * listtriggerULID\n * childrentrigger\n */\nexport interface ITriggerGroup extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2Paths,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionContainer,\n  ITreeStructure<ITrigger>,\n  IMetadata\n{\n  // listITreeStructuretriggerULID\n  // childrenITreeStructure<ITrigger>\n}\n\n// === TriggerGroup Utils ===\nfunction createDefaultTriggerGroup(): ITriggerGroup {\n  return {\n    ulid: ulid(),\n    uuid: '',\n    list: [],\n    children: [],\n    checks: [],\n    isSequential: true,\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  } as ITriggerGroup\n}\n\nexport interface ITriggerGroupUtils {\n  type: string\n  createDefaultData: () => ITriggerGroup\n  mergeDataToDefaultData: (data: Partial<ITriggerGroup>) => ITriggerGroup\n}\n\nexport const triggerGroupUtils: ITriggerGroupUtils = {\n  type: triggerGroupType,\n  createDefaultData: createDefaultTriggerGroup,\n  mergeDataToDefaultData: createMergeToDefaultData(createDefaultTriggerGroup)\n}\n\n// === Trigger Registry ===\nexport interface ITriggerUtils<T extends ITrigger> {\n  type: string\n  init: () => void\n  mergeDataToDefaultData: (data: Partial<T>) => T\n  createDefaultData: () => T\n  create: (triggerGroup: ITriggerGroup, data?: Partial<T>) => void\n  update: (trigger: T, data?: Partial<T>) => void\n  UI: (data: T) => React.ReactNode\n  onClickChange?: (data: { query: any }, ...rest: any[]) => void\n  loadI18nTexts?: (data: T) => Promise<void>\n}\n\nexport interface ITriggerUtilsMap {\n  [key: string]: ITriggerUtils<any>\n}\n\nexport const TriggerUtilsMap: ITriggerUtilsMap = {}\n\nexport function registerTriggerUtils(key: string, utils: ITriggerUtils<any>) {\n  fileLog.log('[registerTriggerUtils] key:', key)\n  if (key in TriggerUtilsMap) {\n    throw new Error(`TriggerUtilsMap already has key: ${key}`)\n  }\n  TriggerUtilsMap[key] = utils\n  fileLog.log('[registerTriggerUtils] , keys:', Object.keys(TriggerUtilsMap))\n}\n\nexport function getTriggerUtils<T extends ITrigger>(key: string): ITriggerUtils<T> {\n  fileLog.log('[getTriggerUtils] key:', key)\n  const utils = TriggerUtilsMap[key]\n  if (!utils) {\n    fileLog.log('[getTriggerUtils] , keys:', Object.keys(TriggerUtilsMap))\n  } else {\n    fileLog.log('[getTriggerUtils] ')\n  }\n  return utils\n}\n\nexport function createTriggerUtils<T extends ITrigger>(\n  type: string,\n  init: () => void,\n  createDefaultData: () => T,\n  UI: (data: T) => React.ReactNode\n): ITriggerUtils<T> {\n  fileLog.log('[createTriggerUtils] type:', type)\n  const res: ITriggerUtils<T> = {\n    type,\n    mergeDataToDefaultData: createMergeToDefaultData(createDefaultData),\n    createDefaultData,\n    create: (triggerGroup: ITriggerGroup, data?: Partial<T>) => {\n      fileLog.log('[createTriggerUtils.create] triggerGroup.ulid:', triggerGroup.ulid)\n      const trigger = createDefaultData()\n      fileLog.log('[createTriggerUtils.create] trigger.ulid:', trigger.ulid)\n      if (data) {\n        fileLog.log('[createTriggerUtils.create] merging data')\n        Object.assign(trigger, data)\n      }\n      // childrenweblist\n      if (!triggerGroup.children) {\n        fileLog.log('[createTriggerUtils.create] children[]')\n        triggerGroup.children = []\n      }\n      triggerGroup.children.push(trigger)\n      fileLog.log('[createTriggerUtils.create] pushed to children, length:', triggerGroup.children.length)\n    },\n    update: (trigger: T, data?: Partial<T>) => {\n      fileLog.log('[createTriggerUtils.update] trigger.ulid:', trigger.ulid)\n      mergeDataWith(trigger, data)\n    },\n    UI,\n    init,\n  }\n  registerTriggerUtils(type, res)\n  fileLog.log('[createTriggerUtils]  type:', type)\n  return res\n}\n","import {\n  IThreeLayerID,\n  IR2PathsWithScript,\n  IEntityBase,\n  IMetadata,\n  IScriptParams,\n  IActionJavaData,\n  IActionWebConfig\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionLeaf } from '../types/version';\nimport { IPermissionData, IInjectConfig } from '../types/permission';\nimport { ulid } from 'ulid';\nimport { createMergeToDefaultData } from '../utils/mergeToDefaultData';\n\n/**\n * \n * SQLproject_action\n * GoProjectAction\n */\nexport interface IAction<\n  TJavaData extends IActionJavaData = IActionJavaData,\n  TWebConfig extends IActionWebConfig = IActionWebConfig\n> extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2PathsWithScript,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionLeaf,\n  IMetadata,\n  IScriptParams<TJavaData, TWebConfig>\n{\n  type: string;                      // tap, swipe, type\n  permissions?: IPermissionData[];    // \n  injects?: IInjectConfig[];          // \n}\n\n// \nexport type IActionDefault = IAction<IActionJavaData, IActionWebConfig>;\n\n// ===  ===\nexport const actionType = 'action'\n\n// === Action Utils ===\nfunction createDefaultAction(): IAction {\n  return {\n    ulid: ulid(),\n    uuid: '',\n    ownerUuid: '',\n    currentVersion: 1,\n    type: '',\n    createdAt: Date.now(),\n    updatedAt: Date.now(),\n    authorUuid: ''\n  } as IAction\n}\n\nexport interface IActionBaseUtils {\n  type: string\n  createDefaultData: () => IAction\n  mergeDataToDefaultData: (data: Partial<IAction>) => IAction\n}\n\nexport const actionBaseUtils: IActionBaseUtils = {\n  type: actionType,\n  createDefaultData: createDefaultAction,\n  mergeDataToDefaultData: createMergeToDefaultData(createDefaultAction)\n}\n","import {\n  IThreeLayerID,\n  IR2Paths,\n  IEntityBase,\n  IMetadata\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionContainer } from '../types/version';\nimport { ITreeStructure } from '../types/tree';\nimport { IAction } from './IAction';\nimport { createMergeToDefaultData, mergeDataWith } from '../utils/mergeToDefaultData';\nimport { ulid } from 'ulid';\nimport { Log } from '@fanfanlo';\n\nconst fileLog = new Log(false, 'IActionGroup_f')\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\n// === Action  ===\n/**\n * Action \n *  onClickChange \n */\nexport interface IOnChangeActionJavaDataProps {\n    query: any  // IActionOrTriggerListPageParams  any\n    // projectEventUtils.dispatchEditEventurljavaData\n    // \n    // projectEventUtils.dispatchEditEvent\n    // \n    // projectEventUtils.dispatchEditEventmerge\n    // url\n    // onJavaDataChangeDataSelect?:(data:any)=>void\n    // \n    // actionaction proxydispatcher\n    onDataSelectedEventType?: string\n}\n\n// ===  ===\nexport const actionGroupType = 'actionGroup'\n\n/**\n * \n * SQLproject_action_group\n * GoProjectActionGroup\n *\n * listactionULID\n * childrenaction\n */\nexport interface IActionGroup extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2Paths,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionContainer,\n  ITreeStructure<IAction>,\n  IMetadata\n{\n  // listITreeStructureactionULID\n  // childrenITreeStructure<IAction>\n}\n\n// === ActionGroup Utils ===\nfunction createDefaultActionGroup(): IActionGroup {\n  return {\n    ulid: ulid(),\n    uuid: '',\n    list: [],\n    children: [],\n    checks: [],\n    isSequential: true,\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  } as IActionGroup\n}\n\nexport interface IActionGroupUtils {\n  type: string\n  createDefaultData: () => IActionGroup\n  mergeDataToDefaultData: (data: Partial<IActionGroup>) => IActionGroup\n}\n\nexport const actionGroupUtils: IActionGroupUtils = {\n  type: actionGroupType,\n  createDefaultData: createDefaultActionGroup,\n  mergeDataToDefaultData: createMergeToDefaultData(createDefaultActionGroup)\n}\n\n// === Action Registry ===\nexport interface IActionUtils<T extends IAction> {\n  type: string\n  init: () => void\n  mergeDataToDefaultData: (data: Partial<T>) => T\n  createDefaultData: () => T\n  create: (actionGroup: IActionGroup, data?: Partial<T>) => void\n  update: (action: T, data?: Partial<T>) => void\n  UI: (data: T) => React.ReactNode\n  onClickChange?: (data: IOnChangeActionJavaDataProps, ...rest: any[]) => void\n  loadI18nTexts?: (data: T) => Promise<void>\n}\n\nexport interface IActionUtilsMap {\n  [key: string]: IActionUtils<any>\n}\n\nexport const ActionUtilsMap: IActionUtilsMap = {}\n\nexport function registerActionUtils(key: string, utils: IActionUtils<any>) {\n  fileLog.log('[registerActionUtils] key:', key)\n  if (key in ActionUtilsMap) {\n    throw new Error(`ActionUtilsMap already has key: ${key}`)\n  }\n  ActionUtilsMap[key] = utils\n  fileLog.log('[registerActionUtils] , keys:', Object.keys(ActionUtilsMap))\n}\n\nexport function getActionUtils<T extends IAction>(key: string): IActionUtils<T> {\n  fileLog.log('[getActionUtils] key:', key)\n  const utils = ActionUtilsMap[key]\n  if (!utils) {\n    fileLog.log('[getActionUtils] , keys:', Object.keys(ActionUtilsMap))\n  } else {\n    fileLog.log('[getActionUtils] ')\n  }\n  return utils\n}\n\nexport function createActionUtils<T extends IAction>(\n  type: string,\n  init: () => void,\n  createDefaultData: () => T,\n  UI: (data: T) => React.ReactNode\n): IActionUtils<T> {\n  fileLog.log('[createActionUtils] type:', type)\n  const res: IActionUtils<T> = {\n    type,\n    mergeDataToDefaultData: createMergeToDefaultData(createDefaultData),\n    createDefaultData,\n    create: (actionGroup: IActionGroup, data?: Partial<T>) => {\n      fileLog.log('[createActionUtils.create] actionGroup.ulid:', actionGroup.ulid)\n      const action = createDefaultData()\n      fileLog.log('[createActionUtils.create] action.ulid:', action.ulid)\n      if (data) {\n        fileLog.log('[createActionUtils.create] merging data')\n        Object.assign(action, data)\n      }\n      // childrenweblist\n      if (!actionGroup.children) {\n        fileLog.log('[createActionUtils.create] children[]')\n        actionGroup.children = []\n      }\n      actionGroup.children.push(action)\n      fileLog.log('[createActionUtils.create] pushed to children, length:', actionGroup.children.length)\n    },\n    update: (action: T, data?: Partial<T>) => {\n      fileLog.log('[createActionUtils.update] action.ulid:', action.ulid)\n      mergeDataWith(action, data)\n    },\n    UI,\n    init,\n  }\n  registerActionUtils(type, res)\n  fileLog.log('[createActionUtils]  type:', type)\n  return res\n}\n","/**\r\n * TriggerAction \r\n */\r\nimport { createMergeToDefaultData } from './mergeToDefaultData'\r\nimport type { ITriggerAction } from '../entities/ITriggerAction'\r\n\r\nexport interface ITriggerActionUtils {\r\n  type: string\r\n  createDefaultData: () => ITriggerAction\r\n  mergeDataToDefaultData: (data: Partial<ITriggerAction>) => ITriggerAction\r\n}\r\n\r\nexport function createTriggerActionUtils(\r\n  type: string,\r\n  createDefaultData: () => ITriggerAction\r\n): ITriggerActionUtils {\r\n  return {\r\n    type,\r\n    createDefaultData,\r\n    mergeDataToDefaultData: createMergeToDefaultData(createDefaultData)\r\n  }\r\n}\r\n","import {\n  IThreeLayerID,\n  IR2Paths,\n  IEntityBase,\n  IMetadata\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionRelation } from '../types/version';\nimport { ITriggerGroup, triggerGroupUtils } from './ITriggerGroup';\nimport { IActionGroup, actionGroupUtils } from './IActionGroup';\nimport { ulid } from 'ulid';\nimport { createTriggerActionUtils } from '../utils/triggerActionUtils';\n\n/**\n * -\n * SQLproject_trigger_action\n * GoProjectTriggerAction\n *\n * \n *  triggerGroupUuid/triggerGroupUlid  actionGroupUuid/actionGroupUlid  TriggerGroup  ActionGroup\n *  TriggerAction  TriggerActionGroup \n */\nexport interface ITriggerAction extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2Paths,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionRelation,\n  IMetadata\n{\n  triggerGroupUuid: string;           // trigger_groupUUID\n  triggerGroupUlid: string;           // trigger_groupULIDWeb- \n  actionGroupUuid: string;            // action_groupUUID\n  actionGroupUlid: string;            // action_groupULIDWeb- \n\n  //  - Web\n  triggerGroup: ITriggerGroup;        //  TriggerGroup  - \n  actionGroup: IActionGroup;          //  ActionGroup  - \n}\n\n// ===  ===\nexport const triggerActionType = 'triggerAction'\n\n// ===  TriggerAction ===\nexport function createDefaultTriggerAction(): ITriggerAction {\n  const triggerGroup = triggerGroupUtils.createDefaultData()\n  const actionGroup = actionGroupUtils.createDefaultData()\n  const triggerActionUlid = ulid()\n  return {\n    ulid: triggerActionUlid,\n    uuid: '',\n    triggerGroupUuid: triggerGroup.uuid,\n    triggerGroupUlid: triggerGroup.ulid,\n    actionGroupUuid: actionGroup.uuid,\n    actionGroupUlid: actionGroup.ulid,\n    triggerGroup,\n    actionGroup,\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  } as ITriggerAction\n}\n\n// === TriggerAction Utils ===\nexport const triggerActionUtils = createTriggerActionUtils(\n  triggerActionType,\n  createDefaultTriggerAction\n)\n","import {\n  IThreeLayerID,\n  IR2Paths,\n  IEntityBase,\n  IMetadata\n} from '../types/base';\nimport { IOwnership } from '../types/ownership';\nimport { IVisibilityChild } from '../types/visibility';\nimport { IFork } from '../types/fork';\nimport { IVersionContainer } from '../types/version';\nimport { ITreeStructure } from '../types/tree';\nimport { ITriggerAction, createDefaultTriggerAction, triggerActionUtils } from './ITriggerAction';\nimport { mergeToDefaultData } from '../utils/mergeToDefaultData';\nimport { ulid } from 'ulid';\n\n// ===  ===\nexport const triggerActionGroupType = 'triggerActionGroup'\n\n/**\n * -\n * SQLproject_trigger_action_group\n * GoProjectTriggerActionGroup\n *\n * - TriggerAction-\n *  TriggerAction  TriggerGroup ActionGroup\n *\n * listtrigger_actionULID\n * childrentrigger_action\n */\nexport interface ITriggerActionGroup extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2Paths,\n  IOwnership,\n  IVisibilityChild,\n  IFork,\n  IVersionContainer,\n  ITreeStructure<ITriggerAction>,\n  IMetadata\n{\n  // listITreeStructuretrigger_actionULID\n  // childrenITreeStructure<ITriggerAction>\n}\n\n// ===  TriggerActionGroup ===\nexport function createDefaultTriggerActionGroup(): ITriggerActionGroup {\n  const triggerAction = triggerActionUtils.createDefaultData()\n  const triggerActionGroupUlid = ulid()\n  return {\n    ulid: triggerActionGroupUlid,\n    uuid: '',\n    list: [triggerAction.ulid],\n    // childrenweb\n    children: [triggerAction],\n    checks: [[true]],\n    isSequential: false,\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  } as ITriggerActionGroup\n}\n\nexport function mergeTriggerActionGroupToDefaultData(data: Partial<ITriggerActionGroup>): ITriggerActionGroup {\n  const result = mergeToDefaultData(createDefaultTriggerActionGroup, data)\n  return result\n}\n","import { ulid } from 'ulid';\nimport {\n  IEntityBase,\n  IMetadata,\n  IProjectJavaData,\n  IProjectWebConfig,\n  IR2PathsWithThumbnail,\n  IScriptParams,\n  IThreeLayerID\n} from '../types/base';\nimport { IFork } from '../types/fork';\nimport { IOwnership } from '../types/ownership';\nimport { ProjectCategory } from '../types/ProjectCategory';\nimport { ITreeStructure } from '../types/tree';\nimport { IVersionContainer } from '../types/version';\nimport { createMergeToDefaultData } from '../utils/mergeToDefaultData';\nimport { createDefaultTriggerActionGroup, ITriggerActionGroup } from './ITriggerActionGroup';\n\n/**\n * \n * SQLproject_project\n * GoProjectProject\n *\n * listtrigger_action_groupULID\n * childrentrigger_action_group\n */\nexport interface IProject<\n  TJavaData extends IProjectJavaData = IProjectJavaData,\n  TWebConfig extends IProjectWebConfig = IProjectWebConfig\n> extends\n  IThreeLayerID,\n  IEntityBase,\n  IR2PathsWithThumbnail,\n  IOwnership,\n  IFork,\n  IVersionContainer,\n  ITreeStructure<ITriggerActionGroup>,\n  IMetadata,\n  IScriptParams<TJavaData, TWebConfig>\n{\n  visibility: ProjectVisibility;   // \n  // clientId?: string;\n  title?: string;                     // \n  subtitle?: string;                  // \n\n  type: string;                       // \n  category: string;                   // \n  keepAlive?: boolean;                // \n\n  tags?: string[];                    // \n  categories?: string[];              // \n\n  r2Path?: string;                    // R2\n  r2Account?: string;                 // R2IDURL\n\n  usageCount?: number;                // \n  forkCount?: number;                 // fork\n\n  // listITreeStructuretrigger_action_groupuuid\n  // childrenITreeStructure<ITriggerActionGroup>\n\n  //  TriggerActionGroupchildrentriggerActionGroupchildren[0]triggerActionGroup triggerActionGroup children[0]\n  // triggerActionGrouptriggerActionGroupchildren\n  // triggerActionGroup: ITriggerActionGroup;\n}\n\n// \nexport type IProjectDefault = IProject<IProjectJavaData, IProjectWebConfig>;\n\n// ===  ===\nexport const projectType = 'project'\n\n/**\n * \n */\nexport enum ProjectVisibility {\n  Private = 'private',\n  Public = 'public'\n}\n\n// === Project Utils ===\n/**\n * Project\n *  TriggerActionGroup\n *\n * :  ulid,uuid \n * list  trigger_action_group  ulid\n */\nexport function createDefaultProject(): IProject {\n  const triggerActionGroup = createDefaultTriggerActionGroup();\n  return {\n    ulid: ulid(),\n    uuid: '',\n    ownerUuid: '',\n    currentVersion: 1,\n    type: projectType,\n    category: '',\n    list: [],\n    children: [triggerActionGroup],\n    createdAt: Date.now(),\n    updatedAt: Date.now(),\n    authorUuid: '',\n    visibility: ProjectVisibility.Private,\n    childrenVersion: 1\n  } as IProject\n}\n\n/**\n *  ProjectCategory  Project \n * @param category \n */\nexport function createProjectByCategory(category: ProjectCategory): IProject {\n  const project = createDefaultProject();\n  project.category = category;\n  return project;\n}\n\nexport interface IProjectUtils {\n  type: string\n  createDefaultData: () => IProject\n  mergeDataToDefaultData: (data: Partial<IProject>) => IProject\n}\n\nexport const projectUtils: IProjectUtils = {\n  type: projectType,\n  createDefaultData: createDefaultProject,\n  mergeDataToDefaultData: createMergeToDefaultData(createDefaultProject)\n}\n","import { IProject } from '../entities/IProject';\r\nimport { ITriggerActionGroup } from '../entities/ITriggerActionGroup';\r\nimport { ITriggerAction } from '../entities/ITriggerAction';\r\nimport { Log } from '@fanfanlo';\r\n\r\nconst fileLog = new Log(false, 'projectMerge');\r\nfileLog.pause = true;\r\n\r\n/**\r\n * \r\n */\r\nexport enum MergeStrategy {\r\n  /** 1 */\r\n  REPLACE = 'replace',\r\n  /** 2 */\r\n  MERGE = 'merge'\r\n}\r\n\r\n/**\r\n * \r\n * \r\n */\r\nexport function getMergeStrategy(): MergeStrategy {\r\n  const fnLog = fileLog.sub(false, 'getMergeStrategy_fn');\r\n  fnLog.pause = true;\r\n\r\n  //  MERGE\r\n  const strategy = (typeof window !== 'undefined' && (window as any).__PROJECT_MERGE_STRATEGY__)\r\n    || process.env.NEXT_PUBLIC_PROJECT_MERGE_STRATEGY\r\n    || MergeStrategy.MERGE;\r\n\r\n  fnLog.log(`[getMergeStrategy] : ${strategy}`);\r\n  return strategy as MergeStrategy;\r\n}\r\n\r\n/**\r\n * 1\r\n *  project  project\r\n */\r\nexport function replaceProject(localProject: IProject, backendProject: IProject): void {\r\n  const fnLog = fileLog.sub(false, 'replaceProject_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[replaceProject]  project, ulid=${localProject.ulid}`);\r\n  fnLog.log(`[replaceProject]  project uuid=${backendProject.uuid}`);\r\n\r\n  // \r\n  Object.assign(localProject, backendProject);\r\n\r\n  fnLog.log(`[replaceProject] ,  uuid=${localProject.uuid}`);\r\n}\r\n\r\n/**\r\n * 2\r\n * \r\n */\r\nexport function mergeProject(localProject: IProject, backendProject: IProject): void {\r\n  const fnLog = fileLog.sub(false, 'mergeProject_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeProject]  project`);\r\n  fnLog.log(`[mergeProject]  ulid=${localProject.ulid},  ulid=${backendProject.ulid}`);\r\n  fnLog.log(`[mergeProject]  uuid=${localProject.uuid},  uuid=${backendProject.uuid}`);\r\n\r\n  // 1. \r\n  mergeBackendFields(localProject, backendProject, fnLog);\r\n\r\n  // 2. \r\n  mergeBusinessFields(localProject, backendProject, fnLog);\r\n\r\n  // 3.  children\r\n  mergeChildren(localProject, backendProject, fnLog);\r\n\r\n  fnLog.log(`[mergeProject] `);\r\n}\r\n\r\n/**\r\n * \r\n * \r\n */\r\nfunction mergeBackendFields(localProject: IProject, backendProject: IProject, parentLog: Log): void {\r\n  const fnLog = parentLog.sub(false, 'mergeBackendFields_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeBackendFields] `);\r\n\r\n  // \r\n  const backendFields = [\r\n    'uuid',\r\n    'list',\r\n    'createdAt',\r\n    'updatedAt',\r\n    'deletedAt',\r\n    'ownerUuid',\r\n    'authorUuid',\r\n    'currentVersion',\r\n    'childrenVersion'\r\n  ];\r\n\r\n  backendFields.forEach(field => {\r\n    const oldValue = (localProject as any)[field];\r\n    const newValue = (backendProject as any)[field];\r\n\r\n    if (oldValue !== newValue) {\r\n      fnLog.log(`[mergeBackendFields]  ${field}: ${JSON.stringify(oldValue)} -> ${JSON.stringify(newValue)}`);\r\n      (localProject as any)[field] = newValue;\r\n    }\r\n  });\r\n\r\n  fnLog.log(`[mergeBackendFields] `);\r\n}\r\n\r\n/**\r\n * \r\n * \r\n */\r\nfunction mergeBusinessFields(localProject: IProject, backendProject: IProject, parentLog: Log): void {\r\n  const fnLog = parentLog.sub(false, 'mergeBusinessFields_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeBusinessFields] `);\r\n\r\n  // \r\n  const businessFields = [\r\n    'title',\r\n    'subtitle',\r\n    'name',\r\n    'type',\r\n    'category',\r\n    'keepAlive',\r\n    'tags',\r\n    'categories',\r\n    'r2Path',\r\n    'r2Account',\r\n    'usageCount',\r\n    'forkCount',\r\n    'visibility',\r\n    'originUuid',\r\n    'forkFromVersion',\r\n    'isSequential',\r\n    'checks',\r\n    'javaData',\r\n    'webConfig',\r\n    'sourceLang',\r\n    'summaryPath',\r\n    'descriptionPath',\r\n    'briefDescriptionPath',\r\n    'thumbnailPath'\r\n  ];\r\n\r\n  businessFields.forEach(field => {\r\n    const oldValue = (localProject as any)[field];\r\n    const newValue = (backendProject as any)[field];\r\n\r\n    if (oldValue !== newValue) {\r\n      fnLog.log(`[mergeBusinessFields]  ${field}: ${JSON.stringify(oldValue)} -> ${JSON.stringify(newValue)}`);\r\n      (localProject as any)[field] = newValue;\r\n    }\r\n  });\r\n\r\n  fnLog.log(`[mergeBusinessFields] `);\r\n}\r\n\r\n/**\r\n *  children\r\n *  ulid \r\n *  ulid \r\n * \r\n */\r\nfunction mergeChildren(localProject: IProject, backendProject: IProject, parentLog: Log): void {\r\n  const fnLog = parentLog.sub(false, 'mergeChildren_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeChildren]  children`);\r\n  fnLog.log(`[mergeChildren]  children =${localProject.children?.length || 0}`);\r\n  fnLog.log(`[mergeChildren]  children =${backendProject.children?.length || 0}`);\r\n\r\n  //  children children\r\n  if (!backendProject.children || backendProject.children.length === 0) {\r\n    fnLog.log(`[mergeChildren]  children children`);\r\n    localProject.children = [];\r\n    return;\r\n  }\r\n\r\n  //  children \r\n  if (!localProject.children) {\r\n    localProject.children = [];\r\n  }\r\n\r\n  //  children\r\n  for (let i = 0; i < backendProject.children.length; i++) {\r\n    const backendChild = backendProject.children[i];\r\n    const localChild = localProject.children[i];\r\n\r\n    fnLog.log(`[mergeChildren]  child[${i}],  ulid=${backendChild.ulid}`);\r\n\r\n    //  ulid \r\n    if (localChild && localChild.ulid === backendChild.ulid) {\r\n      fnLog.log(`[mergeChildren] child[${i}] ulid `);\r\n      mergeChild(localChild, backendChild, fnLog);\r\n    } else {\r\n      fnLog.log(`[mergeChildren] child[${i}] ulid `);\r\n      if (localChild) {\r\n        fnLog.log(`[mergeChildren]  ulid=${localChild.ulid},  ulid=${backendChild.ulid}`);\r\n      }\r\n      localProject.children[i] = backendChild;\r\n    }\r\n  }\r\n\r\n  //  children \r\n  if (localProject.children.length > backendProject.children.length) {\r\n    fnLog.log(`[mergeChildren]  children  (${localProject.children.length} -> ${backendProject.children.length})`);\r\n    localProject.children.length = backendProject.children.length;\r\n  }\r\n\r\n  fnLog.log(`[mergeChildren] children `);\r\n}\r\n\r\n/**\r\n *  childTriggerActionGroup\r\n */\r\nfunction mergeChild(localChild: ITriggerActionGroup, backendChild: ITriggerActionGroup, parentLog: Log): void {\r\n  const fnLog = parentLog.sub(false, 'mergeChild_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeChild]  child, ulid=${localChild.ulid}`);\r\n\r\n  // 1. \r\n  const backendFields = [\r\n    'uuid',\r\n    'list',\r\n    'createdAt',\r\n    'updatedAt',\r\n    'deletedAt',\r\n    'ownerUuid',\r\n    'authorUuid',\r\n    'currentVersion',\r\n    'childrenVersion'\r\n  ];\r\n\r\n  backendFields.forEach(field => {\r\n    const oldValue = (localChild as any)[field];\r\n    const newValue = (backendChild as any)[field];\r\n\r\n    if (oldValue !== newValue) {\r\n      fnLog.log(`[mergeChild]  ${field}: ${JSON.stringify(oldValue)} -> ${JSON.stringify(newValue)}`);\r\n      (localChild as any)[field] = newValue;\r\n    }\r\n  });\r\n\r\n  // 2. \r\n  const businessFields = [\r\n    'name',\r\n    'isSequential',\r\n    'checks',\r\n    'javaData',\r\n    'webConfig',\r\n    'sourceLang',\r\n    'summaryPath',\r\n    'descriptionPath',\r\n    'briefDescriptionPath',\r\n    'visibility',\r\n    'originUuid',\r\n    'forkFromVersion'\r\n  ];\r\n\r\n  businessFields.forEach(field => {\r\n    const oldValue = (localChild as any)[field];\r\n    const newValue = (backendChild as any)[field];\r\n\r\n    if (oldValue !== newValue) {\r\n      fnLog.log(`[mergeChild]  ${field}: ${JSON.stringify(oldValue)} -> ${JSON.stringify(newValue)}`);\r\n      (localChild as any)[field] = newValue;\r\n    }\r\n  });\r\n\r\n  // 3.  children\r\n  if (!backendChild.children || backendChild.children.length === 0) {\r\n    fnLog.log(`[mergeChild]  children children`);\r\n    localChild.children = [];\r\n  } else {\r\n    if (!localChild.children) {\r\n      localChild.children = [];\r\n    }\r\n\r\n    for (let i = 0; i < backendChild.children.length; i++) {\r\n      const backendGrandChild = backendChild.children[i];\r\n      const localGrandChild = localChild.children[i];\r\n\r\n      fnLog.log(`[mergeChild]  grandChild[${i}],  ulid=${backendGrandChild.ulid}`);\r\n\r\n      if (localGrandChild && localGrandChild.ulid === backendGrandChild.ulid) {\r\n        fnLog.log(`[mergeChild] grandChild[${i}] ulid `);\r\n        mergeTriggerAction(localGrandChild, backendGrandChild, fnLog);\r\n      } else {\r\n        fnLog.log(`[mergeChild] grandChild[${i}] ulid `);\r\n        localChild.children[i] = backendGrandChild;\r\n      }\r\n    }\r\n\r\n    if (localChild.children.length > backendChild.children.length) {\r\n      fnLog.log(`[mergeChild]  children `);\r\n      localChild.children.length = backendChild.children.length;\r\n    }\r\n  }\r\n\r\n  fnLog.log(`[mergeChild] child `);\r\n}\r\n\r\n/**\r\n *  TriggerAction\r\n *  TriggerAction  TriggerAction\r\n */\r\nfunction mergeTriggerAction(localTriggerAction: ITriggerAction, backendTriggerAction: ITriggerAction, parentLog: Log): void {\r\n  const fnLog = parentLog.sub(false, 'mergeTriggerAction_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log(`[mergeTriggerAction]  triggerAction, ulid=${localTriggerAction.ulid}`);\r\n\r\n  // \r\n  const backendFields = [\r\n    'uuid',\r\n    'triggerGroupUuid',\r\n    'triggerGroupUlid',\r\n    'actionGroupUuid',\r\n    'actionGroupUlid',\r\n    'createdAt',\r\n    'updatedAt',\r\n    'deletedAt',\r\n    'ownerUuid',\r\n    'authorUuid',\r\n    'currentVersion'\r\n  ];\r\n\r\n  backendFields.forEach(field => {\r\n    const oldValue = (localTriggerAction as any)[field];\r\n    const newValue = (backendTriggerAction as any)[field];\r\n\r\n    if (oldValue !== newValue) {\r\n      fnLog.log(`[mergeTriggerAction]  ${field}: ${JSON.stringify(oldValue)} -> ${JSON.stringify(newValue)}`);\r\n      (localTriggerAction as any)[field] = newValue;\r\n    }\r\n  });\r\n\r\n  fnLog.log(`[mergeTriggerAction] triggerAction `);\r\n}\r\n\r\n/**\r\n *  project\r\n */\r\nexport function syncProject(localProject: IProject, backendProject: IProject): void {\r\n  const fnLog = fileLog.sub(false, 'syncProject_fn');\r\n  fnLog.pause = true;\r\n\r\n  const strategy = getMergeStrategy();\r\n  fnLog.log(`[syncProject] : ${strategy}`);\r\n  fnLog.log(`[syncProject]  ulid=${localProject.ulid},  ulid=${backendProject.ulid}`);\r\n\r\n  if (strategy === MergeStrategy.REPLACE) {\r\n    fnLog.log(`[syncProject] `);\r\n    replaceProject(localProject, backendProject);\r\n  } else {\r\n    fnLog.log(`[syncProject] `);\r\n    mergeProject(localProject, backendProject);\r\n  }\r\n\r\n  fnLog.log(`[syncProject] `);\r\n}\r\n","// ai\nimport { isProxy, Log, objectCountUtils, proxyUtils, storeUtils, toParentWatchProxy, toProxy, watchUpdates } from '@fanfanlo';\nimport _ from 'lodash';\nimport { ulid } from 'ulid';\nimport store from 'store2';\nimport { createDefaultProject } from '../entities/IProject';\nimport { createDefaultTriggerActionGroup } from '../entities/ITriggerActionGroup';\nimport { IProject } from '../entities/IProject';\nimport { createDefaultProjectSettings, IProjectSettings } from '../types/IProjectSettings';\nimport { syncProject } from '../utils/projectMerge';\n\nexport const s = storeUtils.namespace('project-v2');\nconst listName = 'list';\nconst draftName = 'draft';\nconst projectSettingsMapName = \"projectSettings\"\n\nconst fileLog = new Log(false, 'project-v2-interface-storage');\n// fileLog.pause = true;\n// fileLog.childrenPaused = true;\n\nfunction loadProjectList(): IProject[] {\n  const fnLog = fileLog.sub(false, 'loadProjectList_fn');\n  fnLog.pause = true;\n  let list = s.read(listName) as IProject[];\n  fnLog.log('list=', list);\n  if (!_.isArray(list) || !list) list = [];\n  const res = prepareProjectList(list);\n  return res;\n}\n\nfunction loadDraft(): IProject[] {\n  const fnLog = fileLog.sub(false, 'loadDraft_fn');\n  fnLog.pause = true;\n  let list = s.read(draftName) as IProject[];\n  fnLog.log('list=', list);\n  if (!_.isArray(list) || !list) list = [];\n  const res = prepareProjectList(list);\n  return res;\n}\n\nfunction loadProjectSettingsMap():Record<string, IProjectSettings>{\n  const fnLog = fileLog.sub(false, 'loadProjectSettingsMap_fn');\n  // fnLog.pause = true;\n  let map:Record<string, IProjectSettings> = s.read(projectSettingsMapName) as Record<string, IProjectSettings>\n  fnLog.log('map=', map)\n  fnLog.log('map json =', JSON.stringify(map), 'ismap bool=', _.isMap(map))\n  if(!map || !_.isObject(map)) map = {}\n  return toProxy(map);\n}\n\nfunction prepareProjectList(list: IProject[]) {\n  const fnLog = fileLog.sub(false, 'prepareProjectList_fn');\n  fnLog.pause = true;\n  return list.map(p => {\n    fnLog.log(`[prepareProjectList] , ulid=${p.ulid}`);\n\n    //  children \n    if (!p.children) {\n      p.children = [];\n      fnLog.log(`[prepareProjectList]  children `);\n    }\n\n    //  children[0] \n    if (!p.children[0]) {\n      \n        // \n        const triggerActionGroup = createDefaultTriggerActionGroup();\n        p.children[0] = triggerActionGroup;\n    }\n\n    const merged = _.merge(createDefaultProject(), p);\n    if (!merged.ulid) {\n      merged.ulid = ulid();\n      fnLog.log(`[]  ulid: ${merged.ulid}`);\n    }\n    return merged;\n  });\n}\n\nconst list: IProject[] = toParentWatchProxy(loadProjectList());\nconst draft: IProject[] = toParentWatchProxy(loadDraft());\n\n// const projectSettingsMap:Record<string, IProjectSettings> = toParentWatchProxy(loadProjectSettingsMap());\nconst _projectSettingsMap = loadProjectSettingsMap();\nconsole.log('_projectSettingsMap file init', _projectSettingsMap)\nconst projectSettingsMap:Record<string, IProjectSettings> = toProxy(_projectSettingsMap);\ntoParentWatchProxy(projectSettingsMap)\nconsole.log('projectSettingsMap file init', projectSettingsMap,'ssssssss', JSON.stringify(projectSettingsMap))\nfunction printList() {\n  const fnLog = fileLog.sub(false, 'printList_fn');\n  fnLog.pause = true;\n  fnLog.log('storage initialize list=', objectCountUtils.getObjectCount(list), list);\n  list.forEach((p, index) => {\n    fnLog.log(\n      'storage initialize list item=',\n      objectCountUtils.getObjectCount(p),\n      'index=',\n      index,\n      'p=',\n      p,\n      'isproxy=',\n      isProxy(p),\n    );\n  });\n}\n\nfunction printDraft() {\n  const fnLog = fileLog.sub(false, 'printDraft_fn');\n  fnLog.pause = true;\n  fnLog.log('storage initialize draft=', objectCountUtils.getObjectCount(draft), draft);\n  draft.forEach((p, index) => {\n    fnLog.log(\n      'storage initialize draft item=',\n      objectCountUtils.getObjectCount(p),\n      'index=',\n      index,\n      'p=',\n      p,\n      'isproxy=',\n      isProxy(p),\n    );\n  });\n}\n\nfunction init() {\n  const fnLog = fileLog.sub(false, 'storage_init_fn');\n  fnLog.pause = true;\n  watchUpdates(list, () => {\n    s.write(listName, list, true);\n    fnLog.log('list changed', list);\n    printList();\n  });\n  watchUpdates(draft, () => {\n    proxyUtils.runPauseProxyFn(() => {\n      s.write(draftName, draft, true);\n      fnLog.log('draft changed', draft);\n    });\n    printDraft();\n  });\n  //  projectSettingsMap  watchUpdates\n  fnLog.log('projectSettingsMap init fn data', projectSettingsMap, JSON.stringify(projectSettingsMap))\n  watchUpdates(projectSettingsMap, function(){\n    fnLog.log('projectSettingsMap updates', projectSettingsMap)\n    fnLog.log('projectSettingsMap updates2', ...arguments)\n    s.write(projectSettingsMapName, projectSettingsMap, true)\n  })\n  \n  fnLog.log('project-v2 store init', list);\n  fnLog.log('project-v2 store init', draft);\n}\n\nfunction saveProject(project: IProject) {\n  const fnLog = fileLog.sub(false, 'saveProject_fn');\n  // fnLog.pause = true;\n  const copy = _.cloneDeep(project);\n  let index = list.findIndex(p => p.ulid === copy.ulid);\n\n  fnLog.log('[saveProject]  project, ulid=', copy.ulid);\n  fnLog.log('[saveProject]  index=', index);\n\n  if (index === -1) {\n    //  project\n    fnLog.log('[saveProject]  project, ulid=', copy.ulid);\n    index = list.length;\n  } else {\n    //  project\n    const existingProject = list[index];\n    fnLog.log('[saveProject]  project, ulid=', copy.ulid);\n    fnLog.log('[saveProject]  project uuid=', existingProject.uuid);\n    fnLog.log('[saveProject]  project uuid=', copy.uuid);\n\n    //  uuid\n    if (copy.uuid) {\n      fnLog.log('[saveProject]  uuid');\n      fnLog.log('[saveProject]  existingProject:', JSON.stringify({\n        ulid: existingProject.ulid,\n        uuid: existingProject.uuid,\n        title: existingProject.title,\n        childrenLength: existingProject.children?.length\n      }));\n      fnLog.log('[saveProject]  copy:', JSON.stringify({\n        ulid: copy.ulid,\n        uuid: copy.uuid,\n        title: copy.title,\n        childrenLength: copy.children?.length\n      }));\n\n      syncProject(existingProject, copy);\n\n      fnLog.log('[saveProject]  existingProject:', JSON.stringify({\n        ulid: existingProject.ulid,\n        uuid: existingProject.uuid,\n        title: existingProject.title,\n        childrenLength: existingProject.children?.length\n      }));\n      fnLog.log('[saveProject] ');\n      return;\n    }\n  }\n\n  list[index] = copy;\n  fnLog.log('[saveProject] , list.length=', list.length);\n}\n\nfunction findSavedProject(ulid: string) {\n  return list.find(p => p.ulid === ulid);\n}\n\nfunction findProject(ulid: string) {\n  return list.find(p => p.ulid === ulid) || draft.find(p => p.ulid === ulid);\n}\n\nfunction findDraftOrSavedProject(ulid: string) {\n  return draft.find(p => p.ulid === ulid) || list.find(p => p.ulid === ulid);\n}\n\n/**\n * uuid\n *  project.uuid === uuid  project.originUuid === uuid\n * @param uuid uuidoriginUuid\n * @returns undefined\n */\nfunction findProjectByUuid(uuid: string): IProject | undefined {\n  const fnLog = fileLog.sub(false, 'findProjectByUuid_fn');\n  fnLog.log('[findProjectByUuid] , uuid=', uuid);\n  \n  // list\n  let found = list.find(p => p.uuid === uuid || p.originUuid === uuid);\n  if (found) {\n    fnLog.log('[findProjectByUuid] list, ulid=', found.ulid);\n    return found;\n  }\n  \n  // draft\n  found = draft.find(p => p.uuid === uuid || p.originUuid === uuid);\n  if (found) {\n    fnLog.log('[findProjectByUuid] draft, ulid=', found.ulid);\n    return found;\n  }\n  \n  fnLog.log('[findProjectByUuid] ');\n  return undefined;\n}\n\nfunction removeProject(ulid: string) {\n  const fnLog = fileLog.sub(false, 'removeProject_fn');\n  fnLog.pause = true;\n  let index = list.findIndex(p => p.ulid === ulid);\n  if (index !== -1) {\n    list.splice(index, 1);\n    removeProjectSettings(ulid)\n    s.write(listName, list, true);\n    fnLog.log('project removed', ulid, list);\n  }\n  removeDraft(ulid);\n}\n\nfunction addDraft(project: IProject): IProject {\n  const fnLog = fileLog.sub(false, 'addDraft_fn');\n  fnLog.pause = true;\n  const p = proxyUtils.runPauseProxyFn(() => {\n    return _.cloneDeep(project);\n  });\n  let index = draft.findIndex(p => p.ulid === project.ulid);\n  if (index === -1) index = draft.length;\n  draft[index] = p;\n  addProjectSettings(project.ulid)\n  fnLog.log('draft added', project, draft);\n  return draft[index];\n}\n\nfunction getDraft(ulid: string) {\n  return draft.find(p => p.ulid === ulid);\n}\n\nfunction removeDraft(ulid: string) {\n  const fnLog = fileLog.sub(false, 'deleteDraft_fn');\n  fnLog.pause = true;\n  let index = draft.findIndex(p => p.ulid === ulid);\n  if (index !== -1) {\n    draft.splice(index, 1);\n    s.write(draftName, draft, true);\n    removeProjectSettings(ulid)\n    fnLog.log('draft deleted', ulid, draft);\n  }\n}\n\nfunction getListCopy() {\n  return [...list];\n}\n\nfunction getDraftCopy() {\n  return [...draft];\n}\n\nfunction getProjectSettings(ulid:string):IProjectSettings | undefined{\n  const fnLog = fileLog.sub(false, \"getProjectSettings_fn\");\n  // fnLog.pause = true;\n  let settings = projectSettingsMap[ulid];\n  fnLog.log('settings=', ulid, settings)\n  if(!settings){\n    fnLog.log('!settings', projectSettingsMap, JSON.stringify(projectSettingsMap))\n    // setting\n    if(getDraft(ulid)){\n      addProjectSettings(ulid)\n    }\n  }\n  return settings\n}\nfunction addProjectSettings(ulid:string):IProjectSettings{\n  const fnLog = fileLog.sub(false, 'addProjectSettings_fn')\n  // fnLog.pause = true;\n  const old = projectSettingsMap[ulid];\n  fnLog.log('old key=', ulid, 'value = ', JSON.stringify(old), old, `${!old ? 'projectSettingMap= ' + JSON.stringify(projectSettingsMap) : ''}`)\n  if(old)return old;\n  const newSettings = createDefaultProjectSettings();\n\n  //  projectSettingsMap \n  projectSettingsMap[ulid] = newSettings;\n  return newSettings\n}\nfunction removeProjectSettings(ulid:string):boolean{\n  const fnLog = fileLog.sub(false, 'removeProjectSettings_fn');\n  fnLog.pause = true;\n\n  if (!(ulid in projectSettingsMap)) {\n    fnLog.log('[removeProjectSettings] ulid  projectSettingsMap:', ulid);\n    return true;\n  }\n\n  fnLog.log('[removeProjectSettings]  projectSettings, ulid:', ulid);\n  const result = delete projectSettingsMap[ulid];\n  fnLog.log('[removeProjectSettings] :', result);\n\n  return result;\n}\n\n// .\nfunction cleanStorage(){\n  list.length = 0;\n  draft.length = 0;\n}\nexport const projectStore = {\n  list,\n  draft,\n  init,\n  saveProject,\n  findSavedProject,\n  findProject,\n  findDraftOrSavedProject,\n  findProjectByUuid,\n  removeProject,\n  addDraft,\n  getDraft,\n  deleteDraft: removeDraft,\n  getListCopy,\n  getDraftCopy,\n  getProjectSettings,\n  cleanStorage\n};\n\nif (typeof window !== 'undefined') {\n  (window as any).getProjectStore = function () {\n    fileLog.log('[DEBUG] getProjectStore() called');\n    return projectStore;\n  };\n  init();\n  fileLog.log('[DEBUG] projectStore initialized');\n}\n","import { projectStore } from '../storage/storage';\nimport { ITrigger } from '../entities/ITrigger';\n\n/**\n * \n * @param createDefaultTrigger V2 \n * @returns onSelect \n */\nexport function createTriggerHandler(\n  createDefaultTrigger: () => any\n) {\n  return function onSelect({query}: {query: any}) {\n    // 1.  Store  ULID  TriggerGroup\n    const triggerGroup = projectStore.triggerGroupMap?.[query.triggerGroupUlid];\n    if (!triggerGroup) {\n      throw new Error(`TriggerGroup not found: ${query.triggerGroupUlid}`);\n    }\n\n    // 2. V2 \n    const trigger = createDefaultTrigger() as ITrigger;\n\n    // 3. childrenlist\n    if (!triggerGroup.children) {\n      triggerGroup.children = [];\n    }\n    triggerGroup.children.push(trigger);\n\n    // 4.  Store\n    projectStore.triggerMap[trigger.ulid] = trigger;\n\n    // 6. \n    window.history.back();\n  };\n}\n","import { projectStore } from '../storage/storage';\nimport { IAction } from '../entities/IAction';\n\n/**\n * \n * @param createDefaultAction V2 \n * @returns onSelect \n */\nexport function createActionHandler(\n  createDefaultAction: () => any\n) {\n  return function onSelect({query}: {query: any}) {\n    // 1.  Store  ULID  ActionGroup\n    const actionGroup = projectStore.actionGroupMap?.[query.actionGroupUlid];\n    if (!actionGroup) {\n      throw new Error(`ActionGroup not found: ${query.actionGroupUlid}`);\n    }\n\n    // 2. V2 \n    const action = createDefaultAction() as IAction;\n\n    // 3. childrenlist\n    if (!actionGroup.children) {\n      actionGroup.children = [];\n    }\n    actionGroup.children.push(action);\n\n    // 4.  Store\n    projectStore.actionMap[action.ulid] = action;\n\n    // 6. \n    window.history.back();\n  };\n}\n","export enum ProjectMemberType {\r\n    project = \"project\",\r\n    trigger = \"trigger\",\r\n    action = \"action\",\r\n    webConfig = \"webConfig\",\r\n    javaData = \"javaData\",\r\n    triggerAction = \"triggerAction\",\r\n    actionGroup = \"actionGroup\",\r\n    triggerGroup = \"triggerGroup\",\r\n    triggerActionGroup = \"triggerActionGroup\",\r\n}\r\n","import { IActionOrTriggerListPageParams } from \"@app/static\"\r\nimport { ParsedUrlQueryInput } from \"querystring\"\r\nimport { IAction } from \"../entities/IAction\"\r\nimport { IActionGroup } from \"../entities/IActionGroup\"\r\nimport { IProject } from \"../entities/IProject\"\r\nimport { ITrigger } from \"../entities/ITrigger\"\r\nimport { ITriggerGroup } from \"../entities/ITriggerGroup\"\r\nimport { ITriggerAction } from \"../entities/ITriggerAction\"\r\nimport { ITriggerActionGroup } from \"../entities/ITriggerActionGroup\"\r\nimport { projectStore } from \"../storage/storage\"\r\nimport { Log } from \"@fanfanlo\"\r\n\r\nconst fileLog = new Log(false, 'trigger-list-action-list-intf_f')\r\nfileLog.pause = true\r\nfileLog.childrenPaused = true\r\n\r\nexport enum ActionListFromEnum {\r\n    project = 'project',\r\n}\r\n\r\nexport enum TriggerOrActionListTypeEnum {\r\n    addAction = 'add',\r\n    updateAction = 'update',\r\n}\r\n\r\nexport interface ITriggerOrActionListPageParams extends ParsedUrlQueryInput {\r\n    backPath?: string\r\n    type: TriggerOrActionListTypeEnum\r\n    projectUlid: string\r\n    triggerActionGroupUlid: string\r\n    triggerActionUlid: string\r\n    actionGroupUlid?: string\r\n    triggerGroupUlid?: string\r\n    actionUlid?: string\r\n    triggerUlid?: string\r\n    actionType?: string\r\n    triggerType?: string\r\n}\r\n\r\nexport interface ITriggerOrActionListParamsData {\r\n    project?: IProject\r\n    triggerActionGroup?: ITriggerActionGroup\r\n    triggerAction?: ITriggerAction\r\n    actionGroup?: IActionGroup\r\n    triggerGroup?: ITriggerGroup\r\n    action?: IAction\r\n    trigger?: ITrigger\r\n}\r\n\r\nexport interface ITriggerOrActionListPageParsedResult {\r\n    params: IActionOrTriggerListPageParams\r\n    data: ITriggerOrActionListParamsData\r\n}\r\n\r\nexport function getTriggerOrActionListPageParams(params: IActionOrTriggerListPageParams): ITriggerOrActionListPageParsedResult {\r\n    const fnLog = fileLog.sub(false, 'getTriggerOrActionListPageParams_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[getTriggerOrActionListPageParams] params=', JSON.stringify(params))\r\n\r\n    const project = projectStore.findDraftOrSavedProject(params.projectUlid)\r\n    const data: ITriggerOrActionListParamsData = {}\r\n    const res = { data, params }\r\n\r\n    if (!project) {\r\n        fnLog.log('[getTriggerOrActionListPageParams] project not found, projectUlid=', params.projectUlid)\r\n        return res\r\n    }\r\n    fnLog.log('[getTriggerOrActionListPageParams] project found, ulid=', project.ulid)\r\n    data.project = project\r\n\r\n    if (!project.children || project.children.length === 0) {\r\n        fnLog.log('[getTriggerOrActionListPageParams] project.children is empty')\r\n        return res\r\n    }\r\n    fnLog.log('[getTriggerOrActionListPageParams] project.children.length=', project.children.length)\r\n\r\n    //  children  triggerActionGroup\r\n    const foundTriggerActionGroup = project.children.find(\r\n        child => child.ulid === params.triggerActionGroupUlid\r\n    )\r\n    if (!foundTriggerActionGroup) {\r\n        fnLog.log('[getTriggerOrActionListPageParams] triggerActionGroup not found in children, expected=', params.triggerActionGroupUlid)\r\n        return res\r\n    }\r\n    data.triggerActionGroup = foundTriggerActionGroup\r\n    fnLog.log('[getTriggerOrActionListPageParams] triggerActionGroup found, ulid=', data.triggerActionGroup.ulid)\r\n\r\n    if (!params.triggerActionUlid) {\r\n        fnLog.log('[getTriggerOrActionListPageParams] triggerActionUlid is undefined')\r\n        return res\r\n    }\r\n\r\n    // list  ulid children \r\n    //  children  triggerAction \r\n    fnLog.log('[getTriggerOrActionListPageParams] triggerActionGroup.list=', JSON.stringify(data.triggerActionGroup.list))\r\n    fnLog.log('[getTriggerOrActionListPageParams] triggerActionGroup.children.length=', data.triggerActionGroup.children?.length)\r\n    const triggerAction = data.triggerActionGroup.children?.find(item => item.ulid === params.triggerActionUlid)\r\n    if (!triggerAction) {\r\n        fnLog.log('[getTriggerOrActionListPageParams] triggerAction not found in children, ulid=', params.triggerActionUlid)\r\n        return res\r\n    }\r\n    data.triggerAction = triggerAction\r\n    fnLog.log('[getTriggerOrActionListPageParams] triggerAction found, ulid=', triggerAction.ulid)\r\n\r\n    parseAction(data, params, triggerAction)\r\n    parseTrigger(data, params, triggerAction)\r\n\r\n    fnLog.log('[getTriggerOrActionListPageParams] result data=', JSON.stringify(data))\r\n    return res\r\n}\r\n\r\nfunction parseAction(data: ITriggerOrActionListParamsData, params: IActionOrTriggerListPageParams, triggerAction: ITriggerAction) {\r\n    const fnLog = fileLog.sub(false, 'parseAction_fn')\r\n    fnLog.pause = true\r\n\r\n    if (!params.actionGroupUlid) {\r\n        fnLog.log('[parseAction] actionGroupUlid is undefined')\r\n        return\r\n    }\r\n    if (!triggerAction.actionGroup) {\r\n        fnLog.log('[parseAction] triggerAction.actionGroup is undefined')\r\n        return\r\n    }\r\n    if (params.actionGroupUlid !== triggerAction.actionGroup.ulid) {\r\n        fnLog.log('[parseAction] actionGroup ulid mismatch, expected=', params.actionGroupUlid, 'actual=', triggerAction.actionGroup.ulid)\r\n        return\r\n    }\r\n    data.actionGroup = triggerAction.actionGroup\r\n    fnLog.log('[parseAction] actionGroup found, ulid=', data.actionGroup.ulid)\r\n\r\n    if (!params.actionUlid) {\r\n        fnLog.log('[parseAction] actionUlid is undefined')\r\n        return\r\n    }\r\n    // : list  ULID children \r\n    const action = triggerAction.actionGroup.children?.find(item => item.ulid === params.actionUlid)\r\n    if (!action) {\r\n        fnLog.log('[parseAction] action not found in children, ulid=', params.actionUlid)\r\n        return\r\n    }\r\n    data.action = action\r\n    fnLog.log('[parseAction] action found, ulid=', action.ulid)\r\n}\r\n\r\nfunction parseTrigger(data: ITriggerOrActionListParamsData, params: IActionOrTriggerListPageParams, triggerAction: ITriggerAction) {\r\n    const fnLog = fileLog.sub(false, 'parseTrigger_fn')\r\n    fnLog.pause = true\r\n\r\n    if (!params.triggerGroupUlid) {\r\n        fnLog.log('[parseTrigger] triggerGroupUlid is undefined')\r\n        return\r\n    }\r\n    if (!triggerAction.triggerGroup) {\r\n        fnLog.log('[parseTrigger] triggerAction.triggerGroup is undefined')\r\n        return\r\n    }\r\n    if (params.triggerGroupUlid !== triggerAction.triggerGroup.ulid) {\r\n        fnLog.log('[parseTrigger] triggerGroup ulid mismatch, expected=', params.triggerGroupUlid, 'actual=', triggerAction.triggerGroup.ulid)\r\n        return\r\n    }\r\n    data.triggerGroup = triggerAction.triggerGroup\r\n    fnLog.log('[parseTrigger] triggerGroup found, ulid=', data.triggerGroup.ulid)\r\n\r\n    if (!params.triggerUlid) {\r\n        fnLog.log('[parseTrigger] triggerUlid is undefined')\r\n        return\r\n    }\r\n    // : list  ULID children \r\n    const trigger = triggerAction.triggerGroup.children?.find(item => item.ulid === params.triggerUlid)\r\n    if (!trigger) {\r\n        fnLog.log('[parseTrigger] trigger not found in children, ulid=', params.triggerUlid)\r\n        return\r\n    }\r\n    data.trigger = trigger\r\n    fnLog.log('[parseTrigger] trigger found, ulid=', trigger.ulid)\r\n}\r\n","\r\nexport function throwTraceError(msg:string, ...rest:any[]){\r\n    console.error(msg, rest);\r\n    console.trace(msg);\r\n    throw new Error(msg);\r\n}","import { Dispatcher, throwTraceError, Log } from '@fanfanlo';\r\nimport { ITriggerOrActionListPageParsedResult, ITriggerOrActionListParamsData } from './trigger-list-action-list-intf';\r\nimport { ProjectMemberType } from './projectMemberType';\r\nimport _ from 'lodash';\r\nimport { IAction } from '../entities/IAction';\r\nimport { ITrigger } from '../entities/ITrigger';\r\n\r\nconst fileLog = new Log(false, 'projectEventUtils_f')\r\nfileLog.pause = true\r\nfileLog.childrenPaused = true\r\n\r\nconst dispatcher = new Dispatcher()\r\n\r\nenum EditType {\r\n    add = \"add\",\r\n    updateJavaData = \"updateJavaData\",\r\n    updateWebConfig = \"updateWebConfig\",\r\n}\r\n\r\nexport interface IProjectEditEvent<T> {\r\n    editType?: EditType\r\n    projectMemberType: ProjectMemberType\r\n    classType?: string\r\n    info?: ITriggerOrActionListPageParsedResult\r\n    data: T\r\n    projectInfo?: ITriggerOrActionListParamsData\r\n}\r\n\r\nfunction dispatchEditEvent<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'dispatchEditEvent_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[dispatchEditEvent] editType=', editType, 'event=', JSON.stringify(event))\r\n    dispatcher.dispatch(editType, event)\r\n}\r\n\r\nfunction onEditJavaData<T>(event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onEditJavaData_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[onEditJavaData] event=', JSON.stringify(event))\r\n\r\n    switch (event.projectMemberType) {\r\n        case ProjectMemberType.action:\r\n            onActionEdit(EditType.updateJavaData, event);\r\n            break;\r\n        case ProjectMemberType.trigger:\r\n            onTriggerEdit(EditType.updateJavaData, event);\r\n            break;\r\n        default: {\r\n            const msg = `[onEditJavaData] unknown projectMemberType: ${event.projectMemberType}`\r\n            fnLog.error(msg, event)\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onEditWebConfig<T>(event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onEditWebConfig_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[onEditWebConfig] event=', JSON.stringify(event))\r\n\r\n    switch (event.projectMemberType) {\r\n        case ProjectMemberType.action:\r\n            onActionEdit(EditType.updateWebConfig, event);\r\n            break;\r\n        case ProjectMemberType.trigger:\r\n            onTriggerEdit(EditType.updateWebConfig, event);\r\n            break;\r\n        default: {\r\n            const msg = `[onEditWebConfig] unknown projectMemberType: ${event.projectMemberType}`\r\n            fnLog.error(msg, event)\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onTriggerEdit<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onTriggerEdit_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[onTriggerEdit] editType=', editType)\r\n\r\n    const trigger = event.projectInfo?.trigger;\r\n    if (!trigger) {\r\n        const msg = `[onTriggerEdit] no trigger when editing trigger`\r\n        fnLog.error(msg, event)\r\n        return throwTraceError(msg, event)\r\n    }\r\n    fnLog.log('[onTriggerEdit] before merge, trigger.javaData=', JSON.stringify(trigger.javaData))\r\n    fnLog.log('[onTriggerEdit] before merge, trigger.webConfig=', JSON.stringify(trigger.webConfig))\r\n\r\n    switch (editType) {\r\n        case EditType.updateJavaData:\r\n            _.merge(trigger.javaData, event.data);\r\n            fnLog.log('[onTriggerEdit] after merge javaData=', JSON.stringify(trigger.javaData))\r\n            break;\r\n        case EditType.updateWebConfig:\r\n            _.merge(trigger.webConfig, event.data)\r\n            fnLog.log('[onTriggerEdit] after merge webConfig=', JSON.stringify(trigger.webConfig))\r\n            break;\r\n        default: {\r\n            const msg = `[onTriggerEdit] unknown editType: ${editType}`\r\n            fnLog.error(msg, event)\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onActionEdit<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onActionEdit_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[onActionEdit] editType=', editType)\r\n\r\n    const action = event.projectInfo?.action;\r\n    if (!action) {\r\n        const msg = `[onActionEdit] no action when editing action`\r\n        fnLog.error(msg, event)\r\n        return throwTraceError(msg, event)\r\n    }\r\n    fnLog.log('[onActionEdit] before merge, action.javaData=', JSON.stringify(action.javaData))\r\n    fnLog.log('[onActionEdit] before merge, action.webConfig=', JSON.stringify(action.webConfig))\r\n\r\n    switch (editType) {\r\n        case EditType.updateJavaData:\r\n            _.merge(action.javaData, event.data);\r\n            fnLog.log('[onActionEdit] after merge javaData=', JSON.stringify(action.javaData))\r\n            break;\r\n        case EditType.updateWebConfig:\r\n            _.merge(action.webConfig, event.data)\r\n            fnLog.log('[onActionEdit] after merge webConfig=', JSON.stringify(action.webConfig))\r\n            break;\r\n        default: {\r\n            const msg = `[onActionEdit] unknown editType: ${editType}`\r\n            fnLog.error(msg, event)\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onAdd<T>(event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onAdd_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[onAdd] event=', JSON.stringify(event))\r\n\r\n    switch (event.projectMemberType) {\r\n        case ProjectMemberType.actionGroup:\r\n            onActionGroupAdd(event);\r\n            break;\r\n        case ProjectMemberType.triggerGroup:\r\n            onTriggerGroupAdd(event);\r\n            break;\r\n        default: {\r\n            const msg = `[onAdd] unknown projectMemberType: ${event.projectMemberType}`\r\n            fnLog.error(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onTriggerGroupAdd<T>(event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onTriggerGroupAdd_fn')\r\n    fnLog.pause = true\r\n\r\n    const group = event.projectInfo?.triggerGroup\r\n    if (!group) {\r\n        const msg = `[onTriggerGroupAdd] no triggerGroup when adding trigger`\r\n        fnLog.error(msg, event)\r\n        return throwTraceError(msg, event)\r\n    }\r\n\r\n    const trigger = event.data as ITrigger\r\n\r\n    // v2childrenlist\r\n    if (!group.children) {\r\n        group.children = []\r\n        fnLog.log('[onTriggerGroupAdd] initialized empty children for triggerGroup')\r\n    }\r\n\r\n    fnLog.log('[onTriggerGroupAdd] before push, children.length=', group.children.length)\r\n\r\n    // childrenlist\r\n    group.children.push(trigger)\r\n\r\n    fnLog.log('[onTriggerGroupAdd] after push, children.length=', group.children.length)\r\n    fnLog.log('[onTriggerGroupAdd] new trigger ulid=', trigger.ulid, 'trigger=', JSON.stringify(trigger))\r\n}\r\n\r\nfunction onActionGroupAdd<T>(event: IProjectEditEvent<T>) {\r\n    const fnLog = fileLog.sub(false, 'onActionGroupAdd_fn')\r\n    fnLog.pause = true\r\n\r\n    const group = event.projectInfo?.actionGroup\r\n    if (!group) {\r\n        const msg = `[onActionGroupAdd] no actionGroup when adding action`\r\n        fnLog.error(msg, event)\r\n        return throwTraceError(msg, event)\r\n    }\r\n\r\n    const action = event.data as IAction\r\n\r\n    // v2childrenlist\r\n    if (!group.children) {\r\n        group.children = []\r\n        fnLog.log('[onActionGroupAdd] initialized empty children for actionGroup')\r\n    }\r\n\r\n    fnLog.log('[onActionGroupAdd] before push, children.length=', group.children.length)\r\n\r\n    // childrenlist\r\n    group.children.push(action)\r\n\r\n    fnLog.log('[onActionGroupAdd] after push, children.length=', group.children.length)\r\n    fnLog.log('[onActionGroupAdd] new action ulid=', action.ulid, 'action=', JSON.stringify(action))\r\n}\r\n\r\nfunction init() {\r\n    const fnLog = fileLog.sub(false, 'init_fn')\r\n    fnLog.pause = true\r\n    fnLog.log('[init] registering event listeners')\r\n    dispatcher.addListener(EditType.updateJavaData, onEditJavaData)\r\n    dispatcher.addListener(EditType.updateWebConfig, onEditWebConfig)\r\n    dispatcher.addListener(EditType.add, onAdd)\r\n    fnLog.log('[init] event listeners registered')\r\n}\r\n\r\nexport const projectEventUtils = {\r\n    init,\r\n    dispatcher,\r\n    dispatchEditEvent,\r\n    EditType,\r\n}\r\n","export * from './projectMemberType';\r\nexport * from './trigger-list-action-list-intf';\r\nexport * from './projectEventUtils';\r\n","/**\n * React Contexts\n * UI\n */\nimport { createContext } from \"react\";\nimport { IProject } from '../entities/IProject';\nimport { IActionGroup } from '../entities/IActionGroup';\nimport { ITriggerGroup } from '../entities/ITriggerGroup';\nimport { ITriggerAction } from '../entities/ITriggerAction';\nimport { ITriggerActionGroup } from '../entities/ITriggerActionGroup';\nimport { IAction } from '../entities/IAction';\nimport { ITrigger } from '../entities/ITrigger';\nimport { GroupCheckList1, GroupCheckList2 } from '../types/tree';\n\n// === Project Context ===\nexport const ProjectContext = createContext<IProject>({} as IProject)\n\n// === TriggerAction Contexts ===\nexport const TriggerActionGroupContext = createContext<ITriggerActionGroup>({} as ITriggerActionGroup)\nexport const TriggerActionContext = createContext<ITriggerAction>({} as ITriggerAction)\n\n// === Trigger Contexts ===\nexport const TriggerGroupContext = createContext<ITriggerGroup>({} as ITriggerGroup)\nexport const TriggerListContext = createContext<ITrigger[]>([] as ITrigger[])\nexport const TriggerContext = createContext<ITrigger>({} as ITrigger)\n\n// === Action Contexts ===\nexport const ActionGroupContext = createContext<IActionGroup>({} as IActionGroup)\nexport const ActionListContext = createContext<IAction[]>([] as IAction[])\nexport const ActionContext = createContext<IAction>({} as IAction)\n\n// === GroupCheck Contexts ===\nexport const GroupCheckList1Context = createContext<GroupCheckList1>([] as GroupCheckList1)\nexport const GroupCheckList2Context = createContext<GroupCheckList2>([] as GroupCheckList2)\n","export * from './project-contexts'\n","/**\r\n * childToProjectData \r\n * ID\r\n */\r\nimport { getParent, ExtractedObjectTypeValues } from \"@fanfanlo\";\r\nimport { ITrigger } from '../entities/ITrigger'\r\nimport { ITriggerGroup } from '../entities/ITriggerGroup'\r\nimport { IAction } from '../entities/IAction'\r\nimport { IActionGroup } from '../entities/IActionGroup'\r\nimport { IProject } from '../entities/IProject'\r\nimport { ITriggerAction } from '../entities/ITriggerAction'\r\nimport { ITriggerActionGroup } from '../entities/ITriggerActionGroup'\r\n\r\nexport interface IChildToProjectData {\r\n    action?: IAction\r\n    actionList?: IAction[]\r\n    actionGroup?: IActionGroup\r\n\r\n    trigger?: ITrigger\r\n    triggerList?: ITrigger[]\r\n    triggerGroup?: ITriggerGroup\r\n\r\n    triggerAction?: ITriggerAction\r\n    triggerActionList?: ITriggerAction[]\r\n    triggerActionGroup?: ITriggerActionGroup\r\n\r\n    project?: IProject\r\n}\r\n\r\nexport function projectDataToUniqueId(data: IChildToProjectData): string {\r\n    let s = ``\r\n    function add(name: string, id?: string) { if (id) s += `|${name}:${id}` }\r\n    add('project', data.project?.ulid);\r\n    add('trigger-action-group', data.triggerActionGroup?.ulid);\r\n    add('trigger-action', data.triggerAction?.ulid);\r\n\r\n    add('trigger-group', data.triggerGroup?.ulid);\r\n    add('trigger', data.trigger?.ulid);\r\n    add('trigger-java-data', data.trigger?.javaData?.ulid)\r\n\r\n    add('action-group', data.actionGroup?.ulid);\r\n    add('action', data.action?.ulid);\r\n    add('action-java-data', data.action?.javaData?.ulid)\r\n    return s;\r\n}\r\n\r\n// project\r\nfunction getProjectByProp<T extends IProject = IProject>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData): T | undefined {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData) {\r\n        projectData.project = data\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getProjectElementByProp<T extends IProject = IProject>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getProjectByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n\r\n// trigger action group\r\nfunction getTriggerActionGroupByProp<T extends ITriggerActionGroup = ITriggerActionGroup>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.triggerActionGroup = data\r\n        getProjectByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getTriggerActionGroupElementByProp<T extends ITriggerActionGroup = ITriggerActionGroup>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerActionGroupByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n\r\nfunction getTriggerActionGroupElement(triggerActionGroup: ITriggerActionGroup, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    projectData.triggerActionGroup = triggerActionGroup\r\n    getTriggerActionGroupByProp(triggerActionGroup.checks, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// trigger action list\r\nfunction getTriggerActionListByProp<T extends ITriggerAction = ITriggerAction>(prop: T, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T[]>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.triggerActionList = data\r\n        getTriggerActionGroupByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getTriggerActionListElementByProp<T extends ITriggerAction = ITriggerAction>(prop: T, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerActionListByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// trigger action\r\nfunction getTriggerActionByProp<T extends ITriggerAction = ITriggerAction>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.triggerAction = data\r\n        getTriggerActionListByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getTriggerActionElementByProp<T extends ITriggerAction = ITriggerAction>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerActionByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// trigger group\r\nfunction getTriggerGroupByProp<T extends ITriggerGroup = ITriggerGroup>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.triggerGroup = data\r\n        getTriggerActionByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getTriggerGroupElementByProp<T extends ITriggerGroup = ITriggerGroup>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerGroupByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\nfunction getTriggerGroupElement(triggerGroup: ITriggerGroup, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    projectData.triggerGroup = triggerGroup\r\n    getTriggerGroupByProp(triggerGroup.list, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// trigger list\r\nexport function getTriggerListByProp<T extends ITrigger = ITrigger>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T[]>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.triggerList = data\r\n        getTriggerGroupByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nexport function getTriggerListElementByProp<T extends ITrigger = ITrigger>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerListByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// trigger\r\nexport function getTriggerByProp<T extends ITrigger = ITrigger>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.trigger = data\r\n        getTriggerListByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nexport function getTriggerElementByProp<T extends ITrigger = ITrigger>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getTriggerByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// action group\r\nexport function getActionGroupByProp<T extends IActionGroup = IActionGroup>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.actionGroup = data\r\n        getTriggerActionByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nexport function getActionGroupElementByProp<T extends IActionGroup = IActionGroup>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getActionGroupByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\nexport function getActionGroupElement(actionGroup: IActionGroup, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    projectData.actionGroup = actionGroup\r\n    getTriggerActionByProp(actionGroup, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// action list\r\nexport function getActionListByProp<T extends IAction = IAction>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T[]>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.actionList = data\r\n        getActionGroupByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getActionListElementByProp<T extends IAction = IAction>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getActionListByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\n// action\r\nfunction getActionByProp<T extends IAction = IAction>(prop: ExtractedObjectTypeValues<T>, projectData?: IChildToProjectData) {\r\n    const data = prop ? getParent<T>(prop) : undefined\r\n    if (projectData && data) {\r\n        projectData.action = data\r\n        getActionListByProp(data, projectData)\r\n    }\r\n    return data\r\n}\r\n\r\nfunction getActionElementIdByProp<T extends IAction = IAction>(prop: ExtractedObjectTypeValues<T>, prefix: string = '', suffix: string = '', projectData: IChildToProjectData = {}) {\r\n    getActionByProp(prop, projectData)\r\n    return getProjectElementsId(projectData, prefix, suffix)\r\n}\r\n\r\nfunction getProjectElementsId(childData: IChildToProjectData, prefix: string = '', suffix: string = '') {\r\n    return {\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-project-ulid${suffix ? '-' + suffix : ''}`]: childData.project?.ulid,\r\n        [`data-project-ulid`]: childData.project?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-trigger-action-group-ulid${suffix ? '-' + suffix : ''}`]: childData.triggerActionGroup?.ulid,\r\n        [`data-trigger-action-group-ulid`]: childData.triggerActionGroup?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-trigger-action-ulid${suffix ? '-' + suffix : ''}`]: childData.triggerAction?.ulid,\r\n        [`data-trigger-action-ulid`]: childData.triggerAction?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-trigger-group-ulid${suffix ? '-' + suffix : ''}`]: childData.triggerGroup?.ulid,\r\n        [`data-trigger-group-ulid`]: childData.triggerGroup?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-trigger-ulid${suffix ? '-' + suffix : ''}`]: childData.trigger?.ulid,\r\n        [`data-trigger-ulid`]: childData.trigger?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-action-group-ulid${suffix ? '-' + suffix : ''}`]: childData.actionGroup?.ulid,\r\n        [`data-action-group-ulid`]: childData.actionGroup?.ulid,\r\n\r\n        [`data-groupof${prefix ? '-' + prefix : ''}-action-ulid${suffix ? '-' + suffix : ''}`]: childData.action?.ulid,\r\n        [`data-action-ulid`]: childData.action?.ulid\r\n    }\r\n}\r\n\r\nexport const childToProjectDataUtils = {\r\n    project: {\r\n        getProjectByProp,\r\n        getProjectElementByProp\r\n    },\r\n    triggerActionGroup: {\r\n        getTriggerActionGroupByProp,\r\n        getTriggerActionGroupElementByProp,\r\n        getTriggerActionGroupElement,\r\n    },\r\n    triggerActionList: {\r\n        getTriggerActionListByProp,\r\n        getTriggerActionListElementByProp,\r\n    },\r\n    triggerAction: {\r\n        getTriggerActionByProp,\r\n        getTriggerActionElementByProp,\r\n    },\r\n    triggerGroup: {\r\n        getTriggerGroupByProp,\r\n        getTriggerGroupElementByProp,\r\n        getTriggerGroupElement\r\n    },\r\n    trigger: {\r\n        getTriggerByProp,\r\n        getTriggerElementByProp,\r\n    },\r\n    triggerList: {\r\n        getTriggerListByProp,\r\n        getTriggerListElementByProp,\r\n    },\r\n    actionGroup: {\r\n        getActionGroupByProp,\r\n        getActionGroupElementByProp,\r\n        getActionGroupElement,\r\n    },\r\n    actionList: {\r\n        getActionListByProp,\r\n        getActionListElementByProp,\r\n    },\r\n    action: {\r\n        getActionByProp,\r\n        getActionElementIdByProp\r\n    },\r\n    getProjectElementsId\r\n}\r\n","/**\n * \n *  project/src/history/projectsHistoryMap.ts\n */\nimport { IProject } from '../entities/IProject';\nimport { getProxyTarget, proxyUtils } from \"@fanfanlo\";\nimport _ from \"lodash\";\n\nexport interface IProjectHistory {\n  index: number\n  project: IProject\n  date: string\n}\n\nexport const projectsHistoryMap = new Map<string, IProjectHistory[]>()\n\nexport function addProjectHistory(history: IProjectHistory) {\n  proxyUtils.runPauseProxyFn(() => {\n    history.project = _.cloneDeep(getProxyTarget(history.project))\n  })\n  const p = history\n  const projectId = history.project.ulid\n  const list = projectsHistoryMap.get(projectId)\n  if (!list) {\n    projectsHistoryMap.set(projectId, [p])\n    return\n  }\n  list.push(p)\n}\n\nexport function getProjectHistory(projectId: string) {\n  const result = projectsHistoryMap.get(projectId) || []\n  return result\n}\n\nexport function removeProjectHistory(projectId: string) {\n  projectsHistoryMap.delete(projectId)\n}\n\nexport function getProjectLastHistory(projectId: string) {\n  const list = getProjectHistory(projectId)\n  const result = list[list.length - 1]\n  return result\n}\n\nexport function takeProjectSnapshoot(project: IProject): boolean {\n  const last = getProjectLastHistory(project.ulid)\n  if (last && _.isEqual(last.project, project)) {\n    return false\n  }\n  const newIndex = last ? last.index + 1 : 0\n  addProjectHistory({\n    index: newIndex,\n    project,\n    date: new Date().toISOString()\n  })\n  return true\n}\n\nexport function projectHistoryIsChanged(project: IProject): boolean {\n  const last = getProjectLastHistory(project.ulid)\n  const isChanged = !last || !_.isEqual(last.project, project)\n  return isChanged\n}\n\nexport function isSameProjectHistoryId(id: number, projectId: string): boolean {\n  const last = getProjectLastHistory(projectId)\n  const isSame = last?.index === id\n  return isSame\n}\n","import { Log } from \"@fanfanlo\";\n\nconst fileLog = new Log(false, 'description_utils_validateUrl');\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\n/**\n * URL\n * @param url URL\n * @returns \n */\nexport function validateUrl(url: string): boolean {\n    const fnLog = fileLog.sub(false, 'validateUrl_fn');\n    fnLog.pause = true;\n\n    fnLog.log('URL:', url);\n\n    if (!url) {\n        fnLog.log('URL');\n        return false;\n    }\n\n    if (typeof url !== 'string') {\n        fnLog.log('URLstring:', typeof url);\n        return false;\n    }\n\n    const trimmedUrl = url.trim();\n    fnLog.log('URL:', trimmedUrl);\n\n    if (trimmedUrl.length === 0) {\n        fnLog.log('URL');\n        return false;\n    }\n\n    // httphttps\n    const hasHttpProtocol = trimmedUrl.startsWith('http://');\n    const hasHttpsProtocol = trimmedUrl.startsWith('https://');\n    fnLog.log('http:', hasHttpProtocol, 'https:', hasHttpsProtocol);\n\n    if (!hasHttpProtocol && !hasHttpsProtocol) {\n        fnLog.log('URLhttphttps');\n        return false;\n    }\n\n    // URL API\n    let urlObj: URL | null = null;\n    try {\n        urlObj = new URL(trimmedUrl);\n        fnLog.log('URL:', urlObj.href);\n    } catch (e) {\n        fnLog.error('URL:', e);\n        return false;\n    }\n\n    if (urlObj === null) {\n        fnLog.log('URLnull');\n        return false;\n    }\n\n    // \n    const protocol = urlObj.protocol;\n    fnLog.log('URL:', protocol);\n\n    const isValid = protocol === 'http:' || protocol === 'https:';\n    fnLog.log('URL:', isValid);\n\n    return isValid;\n}\n","import { Log } from \"@fanfanlo\";\nimport { IProject } from \"../entities/IProject\";\nimport { ITriggerActionGroup } from \"../entities/ITriggerActionGroup\";\nimport { ITriggerAction } from \"../entities/ITriggerAction\";\nimport { IActionGroup } from \"../entities/IActionGroup\";\nimport { ITriggerGroup } from \"../entities/ITriggerGroup\";\nimport { IAction } from \"../entities/IAction\";\nimport { ITrigger } from \"../entities/ITrigger\";\n\nconst fileLog = new Log(false, 'description_entityFinder');\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\n/**\n * \n * v2  clientId  ulid v1  client_id  id\n */\nexport interface IEntityFinderParams {\n    projectClientId?: string\n    triggerActionGroupUlid?: string\n    triggerActionUlid?: string\n    actionGroupUlid?: string\n    actionUlid?: string\n    triggerGroupUlid?: string\n    triggerUlid?: string\n}\n\n/**\n * \n */\nexport type EntityType =\n    | 'project'\n    | 'triggerActionGroup'\n    | 'triggerAction'\n    | 'actionGroup'\n    | 'action'\n    | 'triggerGroup'\n    | 'trigger';\n\n/**\n * \n */\nexport interface IEntityFinderResult {\n    entity: any\n    type: EntityType\n}\n\n/**\n * TriggerActionGroupTriggerAction\n */\nfunction findInTriggerActionGroup(\n    group: ITriggerActionGroup,\n    ulid: string\n): ITriggerAction | null {\n    const fnLog = fileLog.sub(false, 'findInTriggerActionGroup_fn');\n    fnLog.pause = true;\n\n    fnLog.log('TriggerAction, group:', group, 'ulid:', ulid);\n\n    if (!group) {\n        fnLog.log('groupnull');\n        return null;\n    }\n\n    if (!group.children) {\n        fnLog.log('group.childrennull');\n        return null;\n    }\n\n    if (!Array.isArray(group.children)) {\n        fnLog.log('group.children');\n        return null;\n    }\n\n    const result = group.children.find(ta => ta.ulid === ulid) || null;\n    fnLog.log(':', result);\n\n    return result;\n}\n\n/**\n * ActionGroupAction\n */\nfunction findInActionGroup(\n    group: IActionGroup,\n    ulid: string\n): IAction | null {\n    const fnLog = fileLog.sub(false, 'findInActionGroup_fn');\n    fnLog.pause = true;\n\n    fnLog.log('Action, group:', group, 'ulid:', ulid);\n\n    if (!group) {\n        fnLog.log('groupnull');\n        return null;\n    }\n\n    if (!group.list) {\n        fnLog.log('group.listnull');\n        return null;\n    }\n\n    if (!Array.isArray(group.list)) {\n        fnLog.log('group.list');\n        return null;\n    }\n\n    const result = group.list.find(a => a.ulid === ulid) || null;\n    fnLog.log(':', result);\n\n    return result;\n}\n\n/**\n * TriggerGroupTrigger\n */\nfunction findInTriggerGroup(\n    group: ITriggerGroup,\n    ulid: string\n): ITrigger | null {\n    const fnLog = fileLog.sub(false, 'findInTriggerGroup_fn');\n    fnLog.pause = true;\n\n    fnLog.log('Trigger, group:', group, 'ulid:', ulid);\n\n    if (!group) {\n        fnLog.log('groupnull');\n        return null;\n    }\n\n    if (!group.list) {\n        fnLog.log('group.listnull');\n        return null;\n    }\n\n    if (!Array.isArray(group.list)) {\n        fnLog.log('group.list');\n        return null;\n    }\n\n    const result = group.list.find(t => t.ulid === ulid) || null;\n    fnLog.log(':', result);\n\n    return result;\n}\n\n/**\n * project\n */\nfunction findEntityInProject(\n    project: IProject,\n    params: IEntityFinderParams\n): IEntityFinderResult | null {\n    const fnLog = fileLog.sub(false, 'findEntityInProject_fn');\n    fnLog.pause = true;\n\n    fnLog.log('project, project:', project, 'params:', params);\n\n    const {\n        triggerActionGroupUlid,\n        triggerActionUlid,\n        actionGroupUlid,\n        actionUlid,\n        triggerGroupUlid,\n        triggerUlid\n    } = params;\n\n    if (!project) {\n        fnLog.log('projectnull');\n        return null;\n    }\n\n    if (triggerActionGroupUlid) {\n        fnLog.log('triggerActionGroup, ulid:', triggerActionGroupUlid);\n\n        if (!project.children || project.children.length === 0) {\n            fnLog.log('project.children');\n            return null;\n        }\n\n        const triggerActionGroup = project.children.find(\n            child => child.ulid === triggerActionGroupUlid\n        );\n\n        if (triggerActionGroup) {\n            fnLog.log('triggerActionGroup');\n            return {\n                entity: triggerActionGroup,\n                type: 'triggerActionGroup'\n            };\n        } else {\n            fnLog.log('triggerActionGroup');\n        }\n    }\n\n    if (triggerActionUlid) {\n        fnLog.log('triggerAction, ulid:', triggerActionUlid);\n\n        if (!project.children || project.children.length === 0) {\n            fnLog.log('project.children');\n            return null;\n        }\n\n        for (const triggerActionGroup of project.children) {\n            const triggerAction = findInTriggerActionGroup(\n                triggerActionGroup,\n                triggerActionUlid\n            );\n\n            if (triggerAction) {\n                fnLog.log('triggerAction');\n\n                if (actionGroupUlid || actionUlid) {\n                    const actionGroup = triggerAction.actionGroup;\n                    fnLog.log('actionGroupaction');\n\n                    if (actionGroupUlid && actionGroup && actionGroup.ulid === actionGroupUlid) {\n                        fnLog.log('actionGroup');\n                        return {\n                            entity: actionGroup,\n                            type: 'actionGroup'\n                        };\n                    }\n\n                    if (actionUlid && actionGroup) {\n                        const action = findInActionGroup(actionGroup, actionUlid);\n                        if (action) {\n                            fnLog.log('action');\n                            return {\n                                entity: action,\n                                type: 'action'\n                            };\n                        } else {\n                            fnLog.log('action');\n                        }\n                    }\n                }\n\n                if (triggerGroupUlid || triggerUlid) {\n                    const triggerGroup = triggerAction.triggerGroup;\n                    fnLog.log('triggerGrouptrigger');\n\n                    if (triggerGroupUlid && triggerGroup && triggerGroup.ulid === triggerGroupUlid) {\n                        fnLog.log('triggerGroup');\n                        return {\n                            entity: triggerGroup,\n                            type: 'triggerGroup'\n                        };\n                    }\n\n                    if (triggerUlid && triggerGroup) {\n                        const trigger = findInTriggerGroup(triggerGroup, triggerUlid);\n                        if (trigger) {\n                            fnLog.log('trigger');\n                            return {\n                                entity: trigger,\n                                type: 'trigger'\n                            };\n                        } else {\n                            fnLog.log('trigger');\n                        }\n                    }\n                }\n\n                fnLog.log('triggerAction');\n                return {\n                    entity: triggerAction,\n                    type: 'triggerAction'\n                };\n            }\n        }\n\n        fnLog.log('triggerAction');\n    }\n\n    fnLog.log('project');\n    return {\n        entity: project,\n        type: 'project'\n    };\n}\n\n/**\n * projects\n */\nexport function findEntityAcrossProjects(\n    allProjects: IProject[],\n    params: IEntityFinderParams\n): IEntityFinderResult | null {\n    const fnLog = fileLog.sub(false, 'findEntityAcrossProjects_fn');\n    fnLog.pause = true;\n\n    fnLog.log('projects, projects:', allProjects.length, 'params:', params);\n\n    if (!allProjects) {\n        fnLog.log('allProjectsnull');\n        return null;\n    }\n\n    if (!Array.isArray(allProjects)) {\n        fnLog.log('allProjects');\n        return null;\n    }\n\n    const { projectClientId } = params;\n\n    if (projectClientId) {\n        fnLog.log('project, clientId:', projectClientId);\n        const project = allProjects.find(p => p.clientId === projectClientId);\n\n        if (!project) {\n            fnLog.log('project');\n            return null;\n        }\n\n        fnLog.log('project, project');\n        const result = findEntityInProject(project, params);\n        return result;\n    }\n\n    fnLog.log('projectClientId, projects');\n\n    for (let i = 0; i < allProjects.length; i++) {\n        const project = allProjects[i];\n        fnLog.log('project, index:', i, 'clientId:', project.clientId);\n\n        const result = findEntityInProject(project, params);\n        if (result) {\n            fnLog.log(', type:', result.type);\n            return result;\n        }\n    }\n\n    fnLog.log('');\n    return null;\n}\n","export * from './childToProjectData'\nexport * from './triggerActionUtils'\nexport * from './mergeToDefaultData'\nexport * from './projectHistory'\nexport * from './descriptionUtils'\nexport * from './entityFinder'\n","import { Log } from \"@fanfanlo\";\r\n\r\nconst fileLog = new Log(false, 'sfdata_f');\r\nfileLog.pause = true;\r\nfileLog.childrenPaused = true;\r\n\r\nexport class SFCond{\r\n    type!:string\r\n    next?:SFCond\r\n}\r\nexport class SFCondId extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Id\"\r\n    value!:string\r\n}\r\nexport class SFCondText extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Text\"\r\n    value!:string\r\n}\r\n\r\nexport class SFCondMatchText extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.MatchText\"\r\n    value!:string\r\n}\r\n\r\nexport class SFCondDesc extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Desc\"\r\n    value!:string\r\n}\r\n\r\nexport class SFCondClickable extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Clickable\"\r\n    value!:boolean\r\n}\r\n\r\nexport class ISFCondfType extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Type\"\r\n    value!:string\r\n}\r\n\r\nexport class SFCondIds extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Ids\"\r\n    value!:string[]\r\n}\r\n\r\nexport class SFCondDescs extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Descs\"\r\n    value!:string[]\r\n}\r\n\r\nexport class SFCondTexts extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Texts\"\r\n    value!:string[]\r\n}\r\n\r\nexport class SFCondRoot extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SFRoot\"\r\n    pn!:string\r\n    an?:string[]\r\n    cn!:string\r\n    // anpnan\r\n    // triggerpnpnantrueeventevent\r\n    // true\r\n    back:boolean = false\r\n\r\n    getData(){\r\n        return JSON.parse(JSON.stringify(this))\r\n    }\r\n    getCondRoot(){\r\n        return {\r\n            type:\"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SFRootCond\",\r\n            pn:this.pn,\r\n            an:this.an,\r\n            cn:this.cn\r\n        }\r\n    }\r\n}\r\nexport class SFCondTypes extends SFCond{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SFTypes\"\r\n    value!:string[]\r\n}\r\nexport interface IA11yNodeSFData {\r\n    click:false\r\n    postTest:\"\",\r\n    longClick:false,\r\n    scrollUp:false\r\n    scrollDown:false\r\n    scrollLeft:false\r\n    scrollRight:false\r\n}\r\n\r\n\r\n\r\nexport class SFAction{\r\n    type!:string\r\n    get data(){\r\n        return {type:this.type}\r\n    }\r\n}\r\n\r\nexport class SFActionFocus extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Focus\"\r\n}\r\nexport class SFActionLearFocus extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.ClearFocus\"\r\n}\r\nexport class SFActionClick extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Click\"\r\n}\r\nexport class SFActionTryClick extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.TryClick\"\r\n}\r\nexport class SFActionLongClick extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.LongClick\"\r\n}\r\nexport class SFActionGlobalClick extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.GlobalClick\"\r\n}\r\nexport class SFActionSetText extends SFAction{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SetText\"\r\n    get data(){\r\n        const fnLog = fileLog.sub(false, 'SFActionSetText_data_fn');\r\n        fnLog.log('set text');\r\n        return {type:this.type, value:this.value}\r\n    }\r\n    value!:string\r\n}\r\n\r\nexport class SFWait{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SFWait\"\r\n    time = 0\r\n    interval = 0\r\n    invisible = false\r\n}\r\nexport class SFData{\r\n    type = \"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SFData\"\r\n    // type = \"SFData\"\r\n    root?:SFCondRoot\r\n    action?:SFAction\r\n    wait?:SFWait\r\n    get data(){\r\n        return JSON.parse(JSON.stringify(this))\r\n    }\r\n}\r\n","import { Log } from \"@fanfanlo\";\r\nimport {\r\n    SFActionClick, SFActionGlobalClick,\r\n    SFActionLongClick,\r\n    SFActionSetText,\r\n    SFActionTryClick\r\n} from \"./sfdata\";\r\n\r\nconst fileLog = new Log(false, 'A11yNode_f');\r\nfileLog.pause = true;\r\nfileLog.childrenPaused = true;\r\n\r\nexport enum a11yNodeProperyEnum {\r\n\r\n    viewIdResourceName=\"viewIdResourceName\",\r\n    contentDescription=\"contentDescription\",\r\n    hintText=\"hintText\",\r\n    text=\"text\",\r\n    className=\"className\",\r\n\r\n    availableExtraData=\"availableExtraData\",\r\n    boundsInScreen=\"boundsInScreen\",\r\n    children=\"children\",\r\n    isAccessibilityDataSensitive=\"isAccessibilityDataSensitive\",\r\n    isAccessibilityFocused=\"isAccessibilityFocused\",\r\n    isCheckable=\"isCheckable\",\r\n    isChecked=\"isChecked\",\r\n    isClickable=\"isClickable\",\r\n    isContentInvalid=\"isContentInvalid\",\r\n    isContextClickable=\"isContextClickable\",\r\n    isDismissable=\"isDismissable\",\r\n    isEditable=\"isEditable\",\r\n    isEnabled=\"isEnabled\",\r\n    isFocusable=\"isFocusable\",\r\n    isFocused=\"isFocused\",\r\n    isHeading=\"isHeading\",\r\n    isImportantForAccessibility=\"isImportantForAccessibility\",\r\n    isLongClickable=\"isLongClickable\",\r\n    isMultiLine=\"isMultiLine\",\r\n    isPassword=\"isPassword\",\r\n    isScreenReaderFocusable=\"isScreenReaderFocusable\",\r\n    isScrollable=\"isScrollable\",\r\n    isSelected=\"isSelected\",\r\n    isShowingHintText=\"isShowingHintText\",\r\n    isTextEntryKey=\"isTextEntryKey\",\r\n    isTextSelectable=\"isTextSelectable\",\r\n    isVisibleToUser=\"isVisibleToUser\",\r\n    index=\"index\",\r\n    listIndex=\"listIndex\"\r\n}\r\nexport interface IA11yNode {\r\n\r\n    [a11yNodeProperyEnum.viewIdResourceName]?:string,\r\n    [a11yNodeProperyEnum.contentDescription]?:string,\r\n    [a11yNodeProperyEnum.hintText]?:string,\r\n    [a11yNodeProperyEnum.text]?: string,\r\n    [a11yNodeProperyEnum.className]?: string,\r\n\r\n    [a11yNodeProperyEnum.availableExtraData]?: string[],\r\n    [a11yNodeProperyEnum.boundsInScreen]?: IA11yNodeBoundsInScreen,\r\n    [a11yNodeProperyEnum.children]?: [],\r\n    [a11yNodeProperyEnum.isAccessibilityDataSensitive]: boolean,\r\n    [a11yNodeProperyEnum.isAccessibilityFocused]: boolean,\r\n    [a11yNodeProperyEnum.isCheckable]: boolean,\r\n    [a11yNodeProperyEnum.isChecked]: boolean,\r\n    [a11yNodeProperyEnum.isClickable]: boolean,\r\n    [a11yNodeProperyEnum.isContentInvalid]: boolean,\r\n    [a11yNodeProperyEnum.isContextClickable]: boolean,\r\n    [a11yNodeProperyEnum.isDismissable]: boolean,\r\n    [a11yNodeProperyEnum.isEditable]: boolean,\r\n    [a11yNodeProperyEnum.isEnabled]: boolean,\r\n    [a11yNodeProperyEnum.isFocusable]: boolean,\r\n    [a11yNodeProperyEnum.isFocused]: boolean,\r\n    [a11yNodeProperyEnum.isHeading]: boolean,\r\n    [a11yNodeProperyEnum.isImportantForAccessibility]: boolean,\r\n    [a11yNodeProperyEnum.isLongClickable]: boolean,\r\n    [a11yNodeProperyEnum.isMultiLine]: boolean,\r\n    [a11yNodeProperyEnum.isPassword]: boolean,\r\n    [a11yNodeProperyEnum.isScreenReaderFocusable]: boolean,\r\n    [a11yNodeProperyEnum.isScrollable]: boolean,\r\n    [a11yNodeProperyEnum.isSelected]: boolean,\r\n    [a11yNodeProperyEnum.isShowingHintText]: boolean,\r\n    [a11yNodeProperyEnum.isTextEntryKey]: boolean,\r\n    [a11yNodeProperyEnum.isTextSelectable]: boolean,\r\n    [a11yNodeProperyEnum.isVisibleToUser]: boolean,\r\n    [a11yNodeProperyEnum.index]: number,\r\n    [a11yNodeProperyEnum.listIndex]: number\r\n}\r\nexport interface IA11yNodeBoundsInScreen{\r\n    bottom: number\r\n    left: number\r\n    right: number\r\n    top: number\r\n}\r\nexport type a11yNodePropertyKeys = keyof IA11yNode\r\n// contentDescriptionhintTexttext \r\nexport class A11yNode implements IA11yNode{\r\n\r\n    viewIdResourceName?:string|undefined\r\n    contentDescription?:string|undefined\r\n    hintText?:string|undefined\r\n    text?: string|undefined\r\n    boundsInScreen?: IA11yNodeBoundsInScreen\r\n    children?: []\r\n    className?:string\r\n    availableExtraData?: string[]\r\n\r\n    index!: number\r\n    listIndex!: number\r\n\r\n    isAccessibilityDataSensitive= false\r\n    isAccessibilityFocused= false\r\n    isCheckable= false\r\n    isChecked= false\r\n    isClickable= false\r\n    isContentInvalid= false\r\n    isContextClickable= false\r\n    isDismissable= false\r\n    isEditable= false\r\n    isEnabled = true\r\n    isFocusable= false\r\n    isFocused= false\r\n    isHeading= false\r\n    isImportantForAccessibility= false\r\n    isLongClickable= false\r\n    isMultiLine= false\r\n    isPassword= false\r\n    isScreenReaderFocusable= false\r\n    isScrollable= false\r\n    isSelected= false\r\n    isShowingHintText= false\r\n    isTextEntryKey= false\r\n    isTextSelectable= false\r\n    isVisibleToUser = true\r\n}\r\n\r\n\r\nexport enum A11yNodePropertyType{\r\n    bl = 'bl',\r\n    text = 'text',\r\n    num = 'num',\r\n    arr = 'arr',\r\n    rect = 'rect'\r\n}\r\nexport class A11yNodePropertyInfo{\r\n    constructor(public readonly name:a11yNodePropertyKeys, public readonly type:A11yNodePropertyType) {\r\n    }\r\n}\r\nexport const a11yNodeProperties:Record<a11yNodePropertyKeys, A11yNodePropertyInfo> = {\r\n    viewIdResourceName:  new A11yNodePropertyInfo(a11yNodeProperyEnum.viewIdResourceName, A11yNodePropertyType.text),\r\n    text: new A11yNodePropertyInfo(a11yNodeProperyEnum.text, A11yNodePropertyType.text),\r\n    contentDescription:  new A11yNodePropertyInfo(a11yNodeProperyEnum.contentDescription, A11yNodePropertyType.text),\r\n    isClickable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isClickable, A11yNodePropertyType.bl),\r\n    index: new A11yNodePropertyInfo(a11yNodeProperyEnum.index, A11yNodePropertyType.num),\r\n    isAccessibilityDataSensitive: new A11yNodePropertyInfo(a11yNodeProperyEnum.isAccessibilityDataSensitive, A11yNodePropertyType.bl),\r\n    isAccessibilityFocused: new A11yNodePropertyInfo(a11yNodeProperyEnum.isAccessibilityFocused, A11yNodePropertyType.bl),\r\n    isCheckable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isCheckable, A11yNodePropertyType.bl),\r\n    isChecked: new A11yNodePropertyInfo(a11yNodeProperyEnum.isChecked, A11yNodePropertyType.bl),\r\n    isContentInvalid: new A11yNodePropertyInfo(a11yNodeProperyEnum.isContentInvalid, A11yNodePropertyType.bl),\r\n    isContextClickable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isContextClickable, A11yNodePropertyType.bl),\r\n    isDismissable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isDismissable, A11yNodePropertyType.bl),\r\n    isEditable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isEditable, A11yNodePropertyType.bl),\r\n    isEnabled: new A11yNodePropertyInfo(a11yNodeProperyEnum.isEnabled, A11yNodePropertyType.bl),\r\n    isFocusable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isFocusable, A11yNodePropertyType.bl),\r\n    isFocused: new A11yNodePropertyInfo(a11yNodeProperyEnum.isFocused, A11yNodePropertyType.bl),\r\n    isHeading: new A11yNodePropertyInfo(a11yNodeProperyEnum.isHeading, A11yNodePropertyType.bl),\r\n    isImportantForAccessibility: new A11yNodePropertyInfo(a11yNodeProperyEnum.isImportantForAccessibility, A11yNodePropertyType.bl),\r\n    isLongClickable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isLongClickable, A11yNodePropertyType.bl),\r\n    isMultiLine: new A11yNodePropertyInfo(a11yNodeProperyEnum.isMultiLine, A11yNodePropertyType.bl),\r\n    isPassword: new A11yNodePropertyInfo(a11yNodeProperyEnum.isPassword, A11yNodePropertyType.bl),\r\n    isScreenReaderFocusable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isScreenReaderFocusable, A11yNodePropertyType.bl),\r\n    isScrollable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isScrollable, A11yNodePropertyType.bl),\r\n    isSelected: new A11yNodePropertyInfo(a11yNodeProperyEnum.isSelected, A11yNodePropertyType.bl),\r\n    isShowingHintText: new A11yNodePropertyInfo(a11yNodeProperyEnum.isShowingHintText, A11yNodePropertyType.bl),\r\n    isTextEntryKey: new A11yNodePropertyInfo(a11yNodeProperyEnum.isTextEntryKey, A11yNodePropertyType.bl),\r\n    isTextSelectable: new A11yNodePropertyInfo(a11yNodeProperyEnum.isTextSelectable, A11yNodePropertyType.bl),\r\n    isVisibleToUser: new A11yNodePropertyInfo(a11yNodeProperyEnum.isVisibleToUser, A11yNodePropertyType.bl),\r\n    listIndex: new A11yNodePropertyInfo(a11yNodeProperyEnum.listIndex, A11yNodePropertyType.num),\r\n\r\n    className:  new A11yNodePropertyInfo(a11yNodeProperyEnum.className, A11yNodePropertyType.text),\r\n    hintText:  new A11yNodePropertyInfo(a11yNodeProperyEnum.hintText, A11yNodePropertyType.text),\r\n    children:  new A11yNodePropertyInfo(a11yNodeProperyEnum.children, A11yNodePropertyType.arr),\r\n    boundsInScreen:  new A11yNodePropertyInfo(a11yNodeProperyEnum.boundsInScreen, A11yNodePropertyType.rect),\r\n    availableExtraData:  new A11yNodePropertyInfo(a11yNodeProperyEnum.availableExtraData, A11yNodePropertyType.arr)\r\n}\r\nexport const a11yNodeRealizedKeys:a11yNodePropertyKeys[] = [\r\n    a11yNodeProperyEnum.viewIdResourceName,\r\n    a11yNodeProperyEnum.text,\r\n    a11yNodeProperyEnum.contentDescription,\r\n    a11yNodeProperyEnum.isClickable,\r\n]\r\nexport interface IA11yNodeInfo{\r\n    node:A11yNode\r\n    pn:string\r\n    cn?:string\r\n    activeActivity:string\r\n}\r\n\r\nexport interface NodeAction{\r\n    clazz:any,\r\n    name:string,\r\n    value:string,\r\n    hasInput:boolean\r\n}\r\nexport enum NodeActionKeys {\r\n    click = \"click\",\r\n    longClick = \"longClick\",\r\n    setText = \"setText\",\r\n    tryClick = \"tryClick\",\r\n    globalClick = \"globalClick\"\r\n}\r\nexport const nodeActions:Record<string, NodeAction> = {\r\n    [NodeActionKeys.click]:{\r\n        clazz:SFActionClick,\r\n        name:NodeActionKeys.click,\r\n        value:NodeActionKeys.click,\r\n        hasInput:false,\r\n    },\r\n    [NodeActionKeys.longClick]: {\r\n        clazz: SFActionLongClick,\r\n        name: NodeActionKeys.longClick,\r\n        value: NodeActionKeys.longClick,\r\n        hasInput: false\r\n    },\r\n    [NodeActionKeys.setText]: {\r\n        clazz: SFActionSetText,\r\n        name: NodeActionKeys.setText,\r\n        value: NodeActionKeys.setText,\r\n        hasInput: true\r\n    },\r\n    [NodeActionKeys.tryClick]: {\r\n        clazz: SFActionTryClick,\r\n        name: NodeActionKeys.tryClick,\r\n        value: NodeActionKeys.tryClick,\r\n        hasInput: false\r\n    },\r\n    [NodeActionKeys.globalClick]: {\r\n        clazz: SFActionGlobalClick,\r\n        name: NodeActionKeys.globalClick,\r\n        value: NodeActionKeys.globalClick,\r\n        hasInput: false\r\n    }\r\n}\r\n","import { Box, FormControl, FormControlLabel, FormLabel, Grid2, Input, Radio, RadioGroup } from \"@mui/material\";\nimport { Log, useTranslation } from \"@fanfanlo\";\nimport { NodeAction, nodeActions, NodeActionKeys } from \"./A11yNode\";\n\nconst fileLog = new Log(false, 'NodeActionUI_f');\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\nexport interface INodeActionUIParams{\n    nodeAction:NodeAction\n    setNodeAction:(nodeAction:NodeAction)=>void\n    text:string\n    setText:(text:string)=>void\n}\nexport function NodeActionUI({nodeAction, setNodeAction, text, setText}: INodeActionUIParams) {\n    const uiLog = fileLog.sub(false, 'NodeActionUI_ui');\n    uiLog.pause = true;\n\n    const { t } = useTranslation(\"droid-project-v2-interface/a11y/content\")\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const fnLog = uiLog.sub(false, 'handleChange_fn');\n        fnLog.log('handleChange, value=', event.target.value);\n        setNodeAction(nodeActions[event.target.value])\n      };\n\n    return (\n        <>\n            <Box sx={{ width: \"100%\" }}>\n\n                <FormControl>\n                    <FormLabel id=\"demo-radio-buttons-group-label\">{t(\"NodeActionUI.title\")}</FormLabel>\n                    <RadioGroup\n                        aria-labelledby=\"demo-radio-buttons-group-label\"\n                        value={nodeAction.value}\n                        name=\"radio-buttons-group\"\n                        onChange={handleChange}\n                    >\n                        <FormControlLabel value={NodeActionKeys.click} control={<Radio />} label={t(\"NodeActionUI.click\")} />\n                        <FormControlLabel value={NodeActionKeys.longClick} control={<Radio />} label={t(\"NodeActionUI.longClick\")} />\n                        <Grid2 direction=\"row\" spacing={2} container>\n                            <Grid2 size=\"auto\">\n                                <FormControlLabel value={NodeActionKeys.setText} control={<Radio />} label={t(\"NodeActionUI.setText\")} />\n                            </Grid2>\n                            <Grid2 size=\"grow\">\n                                <Input value={text} onChange={(e) => setText(e.target.value)} />\n                            </Grid2>\n                        </Grid2>\n                        <FormControlLabel value={NodeActionKeys.tryClick} control={<Radio />} label={t(\"NodeActionUI.tryClick\")} />\n                        <FormControlLabel value={NodeActionKeys.globalClick} control={<Radio />} label={t(\"NodeActionUI.globalClick\")} />\n                    </RadioGroup>\n                </FormControl>\n            </Box>\n        </>\n    )\n}\n","export * from \"./A11yNode\"\nexport * from \"./NodeActionUI\"\nexport * from \"./sfdata\"\n","import { Log } from \"@fanfanlo\";\nimport { II18nValueConf } from \"@fanfanlo\";\nimport { googleGeminiIntersectionLocale } from '@0xff336699/js-i18n-lngs';\n\nconst fileLog = new Log(false, 'IEntityDescription_f');\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\n/**\n * \n */\nexport enum DescriptionContentType {\n    TEXT = 'text',\n    URL = 'url',\n    HTML = 'html'\n}\n\n/**\n * TEXTHTML\n */\nexport type BriefDescriptionType =\n    | DescriptionContentType.TEXT\n    | DescriptionContentType.HTML;\n\n/**\n * \n */\nexport interface IDescriptionContent {\n    type: DescriptionContentType\n    content: string\n    i18n?: II18nValueConf  // UI\n}\n\n/**\n * \n */\nexport interface IBriefDescription {\n    type: BriefDescriptionType\n    content: string\n}\n\n/**\n *  googleGeminiIntersectionLocale  key\n */\nexport type SourceLanguage = keyof typeof googleGeminiIntersectionLocale;\n\n/**\n * \n *  INameContainer\n */\nexport interface IEntityDescription {\n    // ===  ===\n    // name\n    name?: string\n    description?: string  // \n    i18n?: II18nValueConf\n\n    // ===  ===\n    // \n    // \n    sourceLang?: SourceLanguage\n\n    //  - HTMLURL\n    briefDescription?: IBriefDescription\n\n    //  - URLHTML\n    summary?: IDescriptionContent\n\n    //  - URLHTML\n    fullIntroduction?: IDescriptionContent\n}\n","export * from './IEntityDescription'\n","\r\nimport { toProxy } from \"../watcher\";\r\nimport { TranslationGlobalConfig } from \"./types\";\r\nimport { Log } from \"../log\";\r\n\r\n// log\r\nconst fileLog = new Log(false, 'TranslationGlobalData_file');\r\nfileLog.pause = true;\r\n\r\n/**\r\n * \r\n * toProxy\r\n */\r\nexport const translationGlobalConfig = toProxy<TranslationGlobalConfig>({\r\n  auto: true,\r\n});\r\n\r\n// log\r\nconst initLog = fileLog.sub(false, 'init_fn');\r\ninitLog.pause = true;\r\ninitLog.log('translationGlobalConfig created', translationGlobalConfig);\r\n","\r\nimport { indexedDbUtils } from \"../storage/indexed-db-utils\";\r\nimport { TranslationCacheItem } from \"./types\";\r\nimport { Log } from \"../log\";\r\n\r\n// log\r\nconst fileLog = new Log(false, 'translationCache_file');\r\n// fileLog.pause = true;\r\n\r\nconst CACHE_NAMESPACE = 'translation_cache';\r\nlet cacheStore: Awaited<ReturnType<typeof indexedDbUtils.getIndexedDbStore<Record<string, TranslationCacheItem>>>> | null = null;\r\n\r\n/**\r\n * \r\n */\r\nasync function initCache() {\r\n  const fnLog = fileLog.sub(false, 'initCache_fn');\r\n  fnLog.pause = true;\r\n\r\n  if (cacheStore) {\r\n    fnLog.log('cache already initialized');\r\n    return cacheStore;\r\n  }\r\n\r\n  fnLog.log('initializing cache');\r\n  cacheStore = await indexedDbUtils.getIndexedDbStore<Record<string, TranslationCacheItem>>(\r\n    CACHE_NAMESPACE,\r\n    {\r\n      defData: {},\r\n      mergeDefData: false,\r\n    }\r\n  );\r\n\r\n  fnLog.log('cache initialized', cacheStore);\r\n  return cacheStore;\r\n}\r\n\r\n/**\r\n * key\r\n */\r\nfunction generateCacheKey(originalText: string, sourceLang: string, targetLang: string): string {\r\n  const fnLog = fileLog.sub(false, 'generateCacheKey_fn');\r\n  fnLog.pause = true;\r\n\r\n  // hash\r\n  const hash = Array.from(originalText).reduce((hash, char) => {\r\n    return ((hash << 5) - hash) + char.charCodeAt(0);\r\n  }, 0);\r\n\r\n  const key = `${sourceLang}_${targetLang}_${hash}`;\r\n  fnLog.log('generated cache key', { originalText, sourceLang, targetLang, key });\r\n  return key;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nasync function getFromCache(\r\n  originalText: string,\r\n  sourceLang: string,\r\n  targetLang: string\r\n): Promise<TranslationCacheItem | null> {\r\n  const fnLog = fileLog.sub(false, 'getFromCache_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log('get from cache', { originalText, sourceLang, targetLang });\r\n\r\n  const store = await initCache();\r\n  const key = generateCacheKey(originalText, sourceLang, targetLang);\r\n\r\n  const cached = store.store.read<TranslationCacheItem>(key);\r\n\r\n  if (cached) {\r\n    fnLog.log('cache hit', cached);\r\n    return cached;\r\n  } else {\r\n    fnLog.log('cache miss');\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nasync function saveToCache(\r\n  originalText: string,\r\n  translatedText: string,\r\n  sourceLang: string,\r\n  targetLang: string\r\n): Promise<void> {\r\n  const fnLog = fileLog.sub(false, 'saveToCache_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log('save to cache', { originalText, translatedText, sourceLang, targetLang });\r\n\r\n  const store = await initCache();\r\n  const key = generateCacheKey(originalText, sourceLang, targetLang);\r\n\r\n  const cacheItem: TranslationCacheItem = {\r\n    originalText,\r\n    translatedText,\r\n    sourceLang,\r\n    targetLang,\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  store.store.write(key, cacheItem);\r\n  fnLog.log('saved to cache', { key, cacheItem });\r\n}\r\n\r\n/**\r\n * \r\n */\r\nasync function clearCache(): Promise<void> {\r\n  const fnLog = fileLog.sub(false, 'clearCache_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log('clearing all cache');\r\n\r\n  const store = await initCache();\r\n  store.store.clearAll();\r\n\r\n  fnLog.log('cache cleared');\r\n}\r\n\r\nexport const translationCache = {\r\n  getFromCache,\r\n  saveToCache,\r\n  clearCache,\r\n};\r\n","\r\nimport translate from 'google-translate-api-x';\r\nimport { TranslationResult } from \"./types\";\r\nimport { translationCache } from \"./translationCache\";\r\nimport { Log } from \"../log\";\r\n\r\n// log\r\nconst fileLog = new Log(false, 'translationService_file');\r\n// fileLog.pause = true;\r\n\r\n/**\r\n * \r\n */\r\nasync function translateText(\r\n  text: string,\r\n  sourceLang: string = 'auto',\r\n  targetLang: string,\r\n  isHtml: boolean = false\r\n): Promise<TranslationResult> {\r\n  const fnLog = fileLog.sub(false, 'translateText_fn');\r\n  fnLog.pause = true;\r\n\r\n  fnLog.log('translate text start', { text, sourceLang, targetLang, isHtml });\r\n\r\n  // \r\n  const cached = await translationCache.getFromCache(text, sourceLang, targetLang);\r\n\r\n  if (cached) {\r\n    fnLog.log('using cached translation', cached);\r\n    return {\r\n      text: cached.translatedText,\r\n      from: cached.sourceLang,\r\n      to: cached.targetLang,\r\n    };\r\n  } else {\r\n    fnLog.log('cache miss, calling translation API');\r\n  }\r\n\r\n  try {\r\n    // API\r\n    const result = await translate(text, {\r\n      from: sourceLang,\r\n      to: targetLang,\r\n      // google-translate-api-x HTML\r\n      // format\r\n    });\r\n\r\n    fnLog.log('translation API result', result);\r\n\r\n    const translatedText = result.text;\r\n    const detectedSourceLang = result.from?.language?.iso || sourceLang;\r\n\r\n    // \r\n    await translationCache.saveToCache(text, translatedText, detectedSourceLang, targetLang);\r\n\r\n    fnLog.log('translation complete', { translatedText, detectedSourceLang, targetLang });\r\n\r\n    return {\r\n      text: translatedText,\r\n      from: detectedSourceLang,\r\n      to: targetLang,\r\n    };\r\n  } catch (error) {\r\n    fnLog.error('translation failed', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport const translationService = {\r\n  translateText,\r\n};\r\n","\r\nimport React, { useEffect, useState } from 'react';\r\nimport { TranslationComponentProps } from './types';\r\nimport { translationGlobalConfig } from './TranslationGlobalData';\r\nimport { translationService } from './translationService';\r\nimport { fanfanloI18n } from '../i18n/fanfanloI18n';\r\nimport { useProxyWatch } from '../watcher';\r\nimport { useTranslation } from '../i18n';\r\nimport { Log } from '../log';\r\nimport { Box } from '@mui/material';\r\n\r\n// log\r\nconst fileLog = new Log(false, 'TranslationComponent_file');\r\nfileLog.pause = true;\r\n\r\n/**\r\n * \r\n * - translationGlobalConfig.auto\r\n * - /\r\n * - HTML\r\n */\r\nexport function TranslationComponent(props: TranslationComponentProps) {\r\n  const uiLog = fileLog.sub(false, 'TranslationComponent_ui');\r\n  uiLog.pause = true;\r\n\r\n  const { children, sourceLang = 'auto', isHtml = false, className = '' } = props;\r\n\r\n  // auto\r\n  const [auto] = useProxyWatch(translationGlobalConfig, 'auto', translationGlobalConfig.auto);\r\n\r\n  // i18n\r\n  const { t } = useTranslation('fanfanlo/translation/content');\r\n\r\n  // \r\n  const [originalText, setOriginalText] = useState<string>('');\r\n  const [translatedText, setTranslatedText] = useState<string>('');\r\n  const [showTranslation, setShowTranslation] = useState<boolean>(false);\r\n  const [isTranslating, setIsTranslating] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // \r\n  useEffect(() => {\r\n    const effectLog = uiLog.sub(false, 'effect_extractText_fn');\r\n    effectLog.pause = true;\r\n\r\n    let textContent = '';\r\n\r\n    if (typeof children === 'string') {\r\n      textContent = children;\r\n      effectLog.log('extracted text from string', textContent);\r\n    } else if (React.isValidElement(children)) {\r\n      if (isHtml) {\r\n        //  isHtml=true ,ReactHTML\r\n        textContent = reactElementToHtml(children);\r\n        effectLog.log('converted react element to html', textContent);\r\n      } else {\r\n        // \r\n        textContent = extractTextFromReactNode(children);\r\n        effectLog.log('extracted text from react element', textContent);\r\n      }\r\n    } else if (Array.isArray(children)) {\r\n      if (isHtml) {\r\n        // React\r\n        textContent = children.map(child => {\r\n          if (React.isValidElement(child)) {\r\n            return reactElementToHtml(child);\r\n          } else {\r\n            return String(child);\r\n          }\r\n        }).join('');\r\n        effectLog.log('converted react element array to html', textContent);\r\n      } else {\r\n        textContent = children.map(child => {\r\n          if (React.isValidElement(child)) {\r\n            return extractTextFromReactNode(child);\r\n          } else {\r\n            return String(child);\r\n          }\r\n        }).join('');\r\n        effectLog.log('extracted text from array', textContent);\r\n      }\r\n    } else {\r\n      textContent = String(children);\r\n      effectLog.log('converted to string', textContent);\r\n    }\r\n\r\n    effectLog.log('final extracted text', textContent);\r\n    setOriginalText(textContent);\r\n  }, [children, isHtml]);\r\n\r\n  // \r\n  useEffect(() => {\r\n    const effectLog = uiLog.sub(false, 'effect_autoTranslate_fn');\r\n    effectLog.pause = true;\r\n\r\n    effectLog.log('auto translate check', { auto, originalText });\r\n\r\n    if (!auto) {\r\n      effectLog.log('auto is false, reset translation state');\r\n      // ,\r\n      setShowTranslation(false);\r\n      setIsTranslating(false);\r\n      setError(null);\r\n      return;\r\n    }\r\n\r\n    if (!originalText) {\r\n      effectLog.log('no original text, skip translation');\r\n      return;\r\n    }\r\n\r\n    const targetLang = fanfanloI18n.language;\r\n    effectLog.log('target language', targetLang);\r\n\r\n    // ,\r\n    if (sourceLang !== 'auto' && sourceLang === targetLang) {\r\n      effectLog.log('source and target language are the same, skip translation');\r\n      return;\r\n    }\r\n\r\n    // \r\n    performTranslation();\r\n\r\n    async function performTranslation() {\r\n      const fnLog = effectLog.sub(false, 'performTranslation_fn');\r\n      fnLog.pause = true;\r\n\r\n      fnLog.log('start translation', { originalText, sourceLang, targetLang });\r\n      setIsTranslating(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const result = await translationService.translateText(\r\n          originalText,\r\n          sourceLang,\r\n          targetLang,\r\n          isHtml\r\n        );\r\n\r\n        fnLog.log('translation result', result);\r\n\r\n        // ,\r\n        if (result.from === result.to) {\r\n          fnLog.log('detected source language equals target language, skip translation');\r\n          setShowTranslation(false);\r\n        } else {\r\n          setTranslatedText(result.text);\r\n          setShowTranslation(true);\r\n        }\r\n      } catch (err) {\r\n        fnLog.error('translation error', err);\r\n        setError(err instanceof Error ? err.message : 'Translation failed');\r\n      } finally {\r\n        setIsTranslating(false);\r\n      }\r\n    }\r\n  }, [auto, originalText, sourceLang, isHtml]);\r\n\r\n  // /\r\n  const handleClick = () => {\r\n    const fnLog = uiLog.sub(false, 'handleClick_fn');\r\n    fnLog.pause = true;\r\n\r\n    if (!translatedText) {\r\n      fnLog.log('no translated text, skip toggle');\r\n      return;\r\n    }\r\n\r\n    const newShowTranslation = !showTranslation;\r\n    fnLog.log('toggle show translation', { from: showTranslation, to: newShowTranslation });\r\n    setShowTranslation(newShowTranslation);\r\n  };\r\n\r\n  // \r\n  const displayText = showTranslation ? translatedText : originalText;\r\n\r\n  uiLog.log('render', { displayText, showTranslation, isTranslating, error });\r\n\r\n  return (\r\n    <Box\r\n      data-testid=\"TranslationComponent__clickBox__01JFXYZAQ6Q7R8S9T0U1V2W3\"\r\n      className={className}\r\n      onClick={handleClick}\r\n      sx={{\r\n        cursor: translatedText ? 'pointer' : 'default',\r\n        position: 'relative',\r\n      }}\r\n    >\r\n      {isHtml ? (\r\n        <div dangerouslySetInnerHTML={{ __html: displayText }} />\r\n      ) : (\r\n        <span>{displayText}</span>\r\n      )}\r\n\r\n      {isTranslating && (\r\n        <span style={{ marginLeft: '8px', fontSize: '0.8em', color: '#999' }}>\r\n          {t('TranslationComponent.translating')}\r\n        </span>\r\n      )}\r\n\r\n      {error && (\r\n        <span style={{ marginLeft: '8px', fontSize: '0.8em', color: 'red' }}>\r\n          {t('TranslationComponent.translationFailed')}\r\n        </span>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\n/**\r\n * React\r\n */\r\nfunction extractTextFromReactNode(node: React.ReactNode): string {\r\n  const fnLog = fileLog.sub(false, 'extractTextFromReactNode_fn');\r\n  fnLog.pause = true;\r\n\r\n  if (typeof node === 'string') {\r\n    return node;\r\n  }\r\n\r\n  if (typeof node === 'number') {\r\n    return String(node);\r\n  }\r\n\r\n  if (React.isValidElement(node)) {\r\n    if (node.props.children) {\r\n      if (Array.isArray(node.props.children)) {\r\n        return node.props.children.map(extractTextFromReactNode).join('');\r\n      } else {\r\n        return extractTextFromReactNode(node.props.children);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (Array.isArray(node)) {\r\n    return node.map(extractTextFromReactNode).join('');\r\n  }\r\n\r\n  fnLog.log('unknown node type', node);\r\n  return '';\r\n}\r\n\r\n/**\r\n * ReactHTML\r\n */\r\nfunction reactElementToHtml(element: React.ReactElement): string {\r\n  const fnLog = fileLog.sub(false, 'reactElementToHtml_fn');\r\n  fnLog.pause = true;\r\n\r\n  if (!React.isValidElement(element)) {\r\n    fnLog.log('not a valid react element');\r\n    return String(element);\r\n  }\r\n\r\n  const type = element.type;\r\n  const props = element.props;\r\n  const children = props.children;\r\n\r\n  fnLog.log('converting element', { type, props });\r\n\r\n  //  ( 'div', 'h1', 'p' )\r\n  if (typeof type === 'string') {\r\n    const tagName = type;\r\n    const attributes: string[] = [];\r\n\r\n    // \r\n    for (const [key, value] of Object.entries(props)) {\r\n      if (key === 'children') {\r\n        continue;\r\n      }\r\n\r\n      if (key === 'className') {\r\n        attributes.push(`class=\"${value}\"`);\r\n      } else if (key === 'htmlFor') {\r\n        attributes.push(`for=\"${value}\"`);\r\n      } else if (typeof value === 'string') {\r\n        attributes.push(`${key}=\"${value}\"`);\r\n      } else if (typeof value === 'number') {\r\n        attributes.push(`${key}=\"${value}\"`);\r\n      } else if (typeof value === 'boolean' && value) {\r\n        attributes.push(key);\r\n      }\r\n    }\r\n\r\n    const attrsString = attributes.length > 0 ? ' ' + attributes.join(' ') : '';\r\n\r\n    // \r\n    const selfClosingTags = ['img', 'br', 'hr', 'input', 'meta', 'link'];\r\n    if (selfClosingTags.includes(tagName)) {\r\n      return `<${tagName}${attrsString} />`;\r\n    }\r\n\r\n    // \r\n    let childrenHtml = '';\r\n    if (children !== undefined && children !== null) {\r\n      if (Array.isArray(children)) {\r\n        childrenHtml = children.map(child => {\r\n          if (React.isValidElement(child)) {\r\n            return reactElementToHtml(child);\r\n          } else if (typeof child === 'string') {\r\n            return child;\r\n          } else if (typeof child === 'number') {\r\n            return String(child);\r\n          } else {\r\n            return '';\r\n          }\r\n        }).join('');\r\n      } else if (React.isValidElement(children)) {\r\n        childrenHtml = reactElementToHtml(children);\r\n      } else if (typeof children === 'string') {\r\n        childrenHtml = children;\r\n      } else if (typeof children === 'number') {\r\n        childrenHtml = String(children);\r\n      }\r\n    }\r\n\r\n    const html = `<${tagName}${attrsString}>${childrenHtml}</${tagName}>`;\r\n    fnLog.log('generated html', html);\r\n    return html;\r\n  } else {\r\n    //  ()\r\n    fnLog.log('component type, extracting children');\r\n    if (children) {\r\n      if (Array.isArray(children)) {\r\n        return children.map(child => {\r\n          if (React.isValidElement(child)) {\r\n            return reactElementToHtml(child);\r\n          } else {\r\n            return String(child);\r\n          }\r\n        }).join('');\r\n      } else if (React.isValidElement(children)) {\r\n        return reactElementToHtml(children);\r\n      } else {\r\n        return String(children);\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n}\r\n","import React from 'react';\nimport { Box, Typography } from '@mui/material';\nimport { Log, useTranslation } from \"@fanfanlo\";\nimport { TranslationComponent } from '@fanfanlo/translation';\nimport { DescriptionContentType, IDescriptionContent, SourceLanguage } from '../../common/IEntityDescription';\nimport { validateUrl } from '../../utils/descriptionUtils';\n\nconst fileLog = new Log(false, 'DescriptionContentRenderer_ui');\nfileLog.pause = true;\nfileLog.childrenPaused = true;\n\nexport interface DescriptionContentRendererProps {\n    data?: IDescriptionContent\n    sourceLang?: SourceLanguage\n    className?: string\n}\n\nexport function DescriptionContentRenderer(props: DescriptionContentRendererProps) {\n    const uiLog = fileLog.sub(false, 'DescriptionContentRenderer_ui');\n    uiLog.pause = true;\n\n    const { t } = useTranslation('droid/project-v2-interface/components/description-renderer/content');\n\n    const { data, sourceLang = 'auto', className } = props;\n\n    uiLog.log('DescriptionContentRenderer, data:', data, 'sourceLang:', sourceLang);\n\n    if (!data) {\n        uiLog.log('datanull, ');\n        return null;\n    }\n\n    if (!data.content) {\n        uiLog.log('data.content, ');\n        return null;\n    }\n\n    const contentType = data.type;\n    const content = data.content;\n\n    uiLog.log('contentType:', contentType, 'content:', content);\n\n    if (contentType === DescriptionContentType.TEXT) {\n        uiLog.log('TEXT, TranslationComponent');\n        return (\n            <Box className={className}>\n                <TranslationComponent sourceLang={sourceLang}>\n                    <Typography>\n                        {content}\n                    </Typography>\n                </TranslationComponent>\n            </Box>\n        );\n    }\n\n    if (contentType === DescriptionContentType.HTML) {\n        uiLog.log('HTML, TranslationComponent isHtml');\n        return (\n            <Box className={className}>\n                <TranslationComponent sourceLang={sourceLang} isHtml={true}>\n                    {content}\n                </TranslationComponent>\n            </Box>\n        );\n    }\n\n    if (contentType === DescriptionContentType.URL) {\n        uiLog.log('URL');\n\n        const isValid = validateUrl(content);\n        uiLog.log('URL:', isValid);\n\n        if (!isValid) {\n            uiLog.error('URL:', content);\n            return (\n                <Box className={className}>\n                    <Typography color=\"error\">\n                        {t('DescriptionContentRenderer.invalidUrl', { url: content })}\n                    </Typography>\n                </Box>\n            );\n        }\n\n        return (\n            <Box className={className}>\n                <iframe\n                    sandbox=\"allow-scripts\"\n                    src={content}\n                    style={{\n                        width: '100%',\n                        minHeight: '400px',\n                        border: '1px solid #e0e0e0',\n                        borderRadius: '4px'\n                    }}\n                    title=\"URL Content\"\n                />\n            </Box>\n        );\n    }\n\n    uiLog.error('contentType:', contentType);\n    return (\n        <Box className={className}>\n            <Typography color=\"error\">\n                {t('DescriptionContentRenderer.unknownType', { type: contentType })}\n            </Typography>\n        </Box>\n    );\n}\n","export * from './description-renderer/DescriptionContentRenderer'\n","/**\n * \n *\n *  javaLib  openApp.java.js  addScriptExitListener\n */\nexport const scriptExitMechanismCode = `// ====================  ====================\n\nlet isScriptRunnable = true;\nlet scriptExitListeners = [];\n\nfunction addScriptExitListener(f){\n    console.log('[addScriptExitListener] ');\n    removeScriptExitListener(f);\n    scriptExitListeners.push(f);\n    console.log('[addScriptExitListener] :', scriptExitListeners.length);\n}\n\nfunction removeScriptExitListener(f){\n    console.log('[removeScriptExitListener] ');\n    let index = scriptExitListeners.indexOf(f);\n    if(index == -1){\n        console.log('[removeScriptExitListener] ');\n        return;\n    }\n    scriptExitListeners.splice(index, 1);\n    console.log('[removeScriptExitListener] , :', scriptExitListeners.length);\n}\n\nfunction onJavaCallTerminate(){\n    console.log('[onJavaCallTerminate] Java ');\n    callScriptExit();\n    return true;\n}\n\nfunction callJavaExit(){\n    console.log('[callJavaExit]  Java ');\n\n    // javaRunner\n    const javaRunnerExists = typeof javaRunner !== 'undefined';\n    console.log('[callJavaExit] javaRunner:', javaRunnerExists);\n\n    if (!javaRunnerExists) {\n        console.log('[callJavaExit] javaRunner,Java');\n        return;\n    }\n\n    // onJsCallStoped\n    const methodExists = typeof javaRunner.onJsCallStoped === 'function';\n    console.log('[callJavaExit] onJsCallStoped:', methodExists);\n\n    if (!methodExists) {\n        console.log('[callJavaExit] javaRunner.onJsCallStoped');\n        return;\n    }\n\n    // Java\n    console.log('[callJavaExit] javaRunner.onJsCallStoped');\n    try {\n        javaRunner.onJsCallStoped();\n        console.log('[callJavaExit] ');\n    } catch (e) {\n        console.log('[callJavaExit] ');\n        console.log('[callJavaExit] :', e.message);\n        console.log('[callJavaExit] :', e.stack);\n    }\n}\n\nfunction jsCallComplete(){\n    console.log('[jsCallComplete] ');\n    callScriptExit();\n    callJavaExit();\n}\n\nfunction jsCallFailed(){\n    console.log('[jsCallFailed] ');\n    callScriptExit();\n    callJavaExit();\n}\n\nfunction callScriptExit(){\n    console.log('[callScriptExit] ');\n    isScriptRunnable = false;\n    console.log('[callScriptExit] :', scriptExitListeners.length);\n\n    scriptExitListeners.forEach((f)=>{\n        console.log('[callScriptExit] ');\n        f();\n    });\n\n    console.log('[callScriptExit] ');\n}\n\n/**\n * Project\n * Java\n * @param {string} reason \n * @returns {boolean} \n */\nfunction requestProjectForceExit(reason) {\n    console.log('[requestProjectForceExit] ');\n    console.log('[requestProjectForceExit] reason:', reason);\n\n    const javaRunnerExists = typeof javaRunner !== 'undefined';\n    console.log('[requestProjectForceExit] javaRunner:', javaRunnerExists);\n\n    if (!javaRunnerExists) {\n        console.log('[requestProjectForceExit] javaRunner,');\n        return false;\n    }\n\n    const methodExists = typeof javaRunner.onJsCallForceExit === 'function';\n    console.log('[requestProjectForceExit] onJsCallForceExit:', methodExists);\n\n    if (!methodExists) {\n        console.log('[requestProjectForceExit] javaRunner.onJsCallForceExit');\n        return false;\n    }\n\n    console.log('[requestProjectForceExit] javaRunner.onJsCallForceExit');\n    try {\n        javaRunner.onJsCallForceExit();\n        console.log('[requestProjectForceExit] ');\n        return true;\n    } catch (e) {\n        console.log('[requestProjectForceExit] ');\n        console.log('[requestProjectForceExit] :', e.message);\n        console.log('[requestProjectForceExit] :', e.stack);\n        return false;\n    }\n}\n`\n\n/**\n * projectRunner2.js \n *\n *  IProjectData  Rhino JavaScript \n *\n *  scriptExitMechanismCode \n */\nexport const projectRunner2Text = `\n// ====================  ====================\n\n/**\n *  JSON \n *  Java  Gson  JavaScript  JSON.stringify\n */\nfunction toJsonString(obj) {\n    try {\n        return com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(obj);\n    } catch (e) {\n        try {\n            return JSON.stringify(obj);\n        } catch (e2) {\n            return String(obj);\n        }\n    }\n}\n\n// ====================  javaLib  ====================\n\nconsole.log(\"[projectRunner2]  javaLib  createEventDispatcher\");\nvar createEventDispatcher = javaLib['fanfanlo/javajs/v1/event/createEventDispatcher'].createEventDispatcher;\nconsole.log(\"[projectRunner2] createEventDispatcher :\", typeof createEventDispatcher);\n\nconsole.log(\"[projectRunner2]  javaLib  createGetterSetter\");\nvar createGetterSetter = javaLib['fanfanlo/javajs/v1/utils/createGetterSetter'].createGetterSetter;\nconsole.log(\"[projectRunner2] createGetterSetter :\", typeof createGetterSetter);\n\n// ====================  ====================\n\nlet baseInternalIndex = 0;\n\nlet eventTypeComplete = \"eventTypeComplete\";\nlet eventTypeFailed = \"eventTypeFailed\";\nlet eventTypeSuccess = \"eventTypeSuccess\";\nlet eventTypeError = \"eventTypeError\";\nlet eventTypeExit = \"eventTypeExit\";\nlet eventTypeTriggerConditionsOn = \"eventTypeTriggerConditionsOn\";\nlet eventTypeTriggerConditionsOff = \"eventTypeTriggerConditionsOff\";\n\nlet baseType = {\n    trigger: \"trigger\",\n    action: \"action\",\n    project: \"project\",\n    triggerActionGroup: \"triggerActionGroup\",\n    triggerAction: \"triggerAction\",\n    triggerGroup: \"triggerGroup\",\n    actionGroup: \"actionGroup\"\n};\n\nlet projectInitData;\n\n// ====================  ====================\n\nfunction callProjectMemberListExit(list){\n    console.log(\"[callProjectMemberListExit] \", \":\", list.length);\n    for (var i = 0; i < list.length; i++) {\n        try{\n            console.log(\"[callProjectMemberListExit] \", i, list[i].id);\n            list[i].exit();\n        }catch(e){\n            console.log(\"[callProjectMemberListExit] \", e.message);\n        }\n    }\n}\n\nfunction setChildProjectTaskAction(that, child){\n    console.log(\"[setChildProjectTaskAction] \", \"parent:\", that.baseType, \"child:\", child.baseType);\n\n    var project = that.baseType == baseType.project ? that : that.project;\n    child.project = project;\n\n    console.log(\"[setChildProjectTaskAction] child.project \", child.id);\n}\n\n// ==================== createCommonBase ====================\n\nfunction createCommonBase(that, name, type, baseTypeValue){\n    console.log(\"[createCommonBase] \", \"name:\", name, \"type:\", type, \"baseType:\", baseTypeValue);\n\n    baseInternalIndex++;\n    that = that || {};\n\n    var dispatcher = createEventDispatcher();\n    var loggerName = name || baseTypeValue || type;\n    var logger = console.subLogger(loggerName + \":\" + baseInternalIndex);\n\n    logger.log(\" name=\" + name + \", baseType=\" + baseTypeValue);\n\n    createGetterSetter(that, \"logger\", logger, {readonly:true});\n    createGetterSetter(that, \"dispatcher\", dispatcher, {readonly:true}, undefined, undefined, undefined);\n    createGetterSetter(that, \"baseType\", baseTypeValue, {readonly:true}, that.dispatcher);\n    createGetterSetter(that, \"isRunnable\", undefined, {readonly:true}, undefined, undefined, (value, that, key)=>{\n        var bl = isScriptRunnable &&\n                 (that.project ? that.project.isRunnable : true) &&\n                 (that.owner ? that.owner.isRunnable : true) &&\n                 (!that.isExited && !that.isTerminated);\n        return bl;\n    });\n    createGetterSetter(that, \"baseMsg\", undefined, {readonly:true}, undefined, undefined, (value, that, key)=>{\n        return \"base msg|baseInternalIndex=\" + that.baseInternalIndex +\n               \", baseType=\" + that.baseType + \", name=\" + that.name + \", type=\" + that.type;\n    });\n\n    createGetterSetter(that, \"data\", undefined, {}, dispatcher);\n    createGetterSetter(that, \"buildData\", undefined, {}, dispatcher);\n    createGetterSetter(that, \"owner\", undefined, {}, dispatcher);\n    createGetterSetter(that, \"isRunning\", false, {}, dispatcher);\n    createGetterSetter(that, \"isExited\", false, {}, dispatcher);\n    createGetterSetter(that, \"isTerminated\", false, {}, dispatcher);\n    createGetterSetter(that, \"name\", name || type, {}, dispatcher);\n    createGetterSetter(that, \"type\", type, {}, dispatcher);\n    createGetterSetter(that, \"baseInternalIndex\", baseInternalIndex, {readonly:true}, dispatcher);\n    createGetterSetter(that, \"project\", undefined, {}, dispatcher);\n\n    function run(owner){\n        this.owner = owner;\n        this.logger.log(\"run \", \"isRunnable:\", this.isRunnable);\n        if(!this.isRunnable){\n            this.logger.log(\"run ,\");\n            return;\n        }\n        this.isRunning = true;\n        this.logger.log(\"run  onRun\");\n        this.onRun();\n    }\n\n    function onRun(){\n        this.logger.log(\"onRun \");\n    }\n\n    function exit(){\n        this.logger.log(\"exit \", this.type);\n        if(this.isExited)return;\n        this.isExited = true;\n        this.dispatcher.dispatch(eventTypeExit);\n        this.dispatcher.removeAllListeners();\n        this.onExit();\n    }\n\n    function onExit(){\n        this.logger.log(\"onExit \");\n    }\n\n    that.run = run.bind(that);\n    that.onRun = onRun.bind(that);\n    that.exit = exit.bind(that);\n    that.onExit = onExit.bind(that);\n\n    return that;\n}\n\n// ==================== attachAbstractAct ====================\n\nfunction attachAbstractAct(that){\n    console.log(\"[attachAbstractAct] //\", that.name);\n\n    var dispatcher = that.dispatcher;\n\n    createGetterSetter(that, \"isSuccess\", false, {}, dispatcher);\n    createGetterSetter(that, \"isFailed\", false, {}, dispatcher);\n    createGetterSetter(that, \"isCompleted\", false, {}, dispatcher);\n\n    function dispatchSuccess(){\n        this.logger.log(\"dispatchSuccess \", \"isSuccess:\", this.isSuccess);\n        if(this.isSuccess)return;\n        this.isSuccess = true;\n        this.isFailed = false;\n        this.logger.log(\"dispatchSuccess \");\n        this.dispatcher.dispatchData(eventTypeSuccess, {target:this});\n        this.dispatchComplete();\n    }\n\n    function dispatchComplete(){\n        this.logger.log(\"dispatchComplete \", \"isRunning:\", this.isRunning);\n        if(!this.isRunning)return;\n        this.logger.log(\"dispatchComplete \");\n        this.isRunning = false;\n        this.isCompleted = true;\n        this.dispatcher.dispatchData(eventTypeComplete, {target:this});\n    }\n\n    function dispatchFailed(data){\n        this.logger.log(\"dispatchFailed \", \"isFailed:\", this.isFailed);\n        if(this.isFailed)return;\n        this.isSuccess = false;\n        this.isFailed = true;\n        this.logger.log(\"dispatchFailed \");\n        this.dispatcher.dispatchData(eventTypeFailed, {target:this, data:data});\n        this.dispatchComplete();\n    }\n\n    var superRun = that.run;\n    function run(owner){\n        this.logger.log(\"run \");\n        this.isSuccess = false;\n        this.isFailed = false;\n        superRun.call(this, owner);\n    }\n\n    that.dispatchSuccess = dispatchSuccess.bind(that);\n    that.dispatchComplete = dispatchComplete.bind(that);\n    that.dispatchFailed = dispatchFailed.bind(that);\n    that.run = run.bind(that);\n\n    return that;\n}\n\n// ==================== attachAbstractParent ====================\n\nfunction attachAbstractParent(that){\n    console.log(\"[attachAbstractParent] children\", that.name);\n\n    createGetterSetter(that, \"children\", [], {}, that.dispatcher);\n\n    var superOnExit = that.onExit;\n    function onExit(){\n        this.logger.log(\"onExit children\");\n        callProjectMemberListExit(this.children);\n        superOnExit.call(this);\n    }\n\n    that.onExit = onExit.bind(that);\n}\n\n// ==================== attachQueueGroup ====================\n\nfunction attachQueueGroup(that){\n    console.log(\"[attachQueueGroup] \", that.name);\n\n    attachAbstractAct(that);\n    attachAbstractParent(that);\n\n    createGetterSetter(that, \"childIndex\", 0, {}, that.dispatcher);\n\n    function onChildSuccess(event){\n        this.logger.log(\"onChildSuccess \", event.target.name);\n        this.checkDoNextOrComplete();\n    }\n\n    function checkDoNextOrComplete(){\n        if(!this.isRunnable){\n            this.logger.log(\"checkDoNextOrComplete \");\n            return;\n        }\n\n        this.logger.log(\"checkDoNextOrComplete\", \"childIndex:\", this.childIndex, \":\", this.children.length);\n\n        if(this.childIndex < this.children.length - 1){\n            this.childIndex++;\n            this.checkRunIndex();\n        }else{\n            this.logger.log(\"checkDoNextOrComplete \");\n            this.dispatchSuccess();\n        }\n    }\n\n    function onChildFailed(event){\n        this.logger.log(\"onChildFailed \", event.target.name);\n        this.dispatchFailed({target:this, data:event.data});\n    }\n\n    function onChildComplete(event){\n        this.logger.log(\"onChildComplete \", event.target.name);\n    }\n\n    var superOnRun = that.onRun;\n    function onRun(){\n        this.logger.log(\"onRun \");\n        this.checkRunIndex();\n        superOnRun.call(this);\n    }\n\n    function checkRunIndex(){\n        var child = this.children[this.childIndex];\n\n        if(child == undefined){\n            this.logger.log(\"checkRunIndex child\", this.childIndex);\n            this.dispatchFailed({err:new Error(\"child is undefined\"), index:this.childIndex});\n            return;\n        }\n\n        this.logger.log(\"checkRunIndex child\", this.childIndex, child.name);\n\n        child.dispatcher.listenData(eventTypeComplete, this.onChildComplete);\n        child.dispatcher.listenData(eventTypeFailed, this.onChildFailed);\n        child.dispatcher.listenData(eventTypeSuccess, this.onChildSuccess);\n\n        setChildProjectTaskAction(this, child);\n        child.run(this);\n    }\n\n    that.onChildSuccess = onChildSuccess.bind(that);\n    that.checkDoNextOrComplete = checkDoNextOrComplete.bind(that);\n    that.onChildFailed = onChildFailed.bind(that);\n    that.onChildComplete = onChildComplete.bind(that);\n    that.onRun = onRun.bind(that);\n    that.checkRunIndex = checkRunIndex.bind(that);\n\n    return that;\n}\n\n// ==================== attachConcurrentGroup ====================\n\nfunction attachConcurrentGroup(that){\n    console.log(\"[attachConcurrentGroup] \", that.name);\n\n    attachAbstractAct(that);\n    attachAbstractParent(that);\n\n    createGetterSetter(that, \"completeConditions\", [], {}, that.dispatcher);\n\n    function checkIsSuccess(){\n        this.logger.log(\"checkIsSuccess \", \"completeConditions:\", this.completeConditions.length);\n        this.logger.log(\"checkIsSuccess children:\", this.children.length);\n\n        if(this.completeConditions.length == 0){\n            this.logger.log(\"checkIsSuccess ,\");\n            return true;\n        }\n\n        for (var i = 0; i < this.completeConditions.length; i++) {\n            var list = this.completeConditions[i];\n            var hasFailed = false;\n\n            this.logger.log(\"checkIsSuccess \", i, \"list:\", list.length);\n\n            for (var j = 0; j < list.length; j++) {\n                var required = list[j];  //  child \n                this.logger.log(\"checkIsSuccess \", j, \"required:\", required);\n\n                if (required) {\n                    //  required  true  child\n                    var child = this.children[j];  //  j  list[j]\n\n                    if (!child) {\n                        this.logger.log(\"checkIsSuccess child\", \"index:\", j);\n                        hasFailed = true;\n                        break;\n                    }\n\n                    if (child.isSuccess == false) {\n                        this.logger.log(\"checkIsSuccess child\", j, \"child.name:\", child.name);\n                        hasFailed = true;\n                        break;\n                    }\n                }\n            }\n\n            if(!hasFailed){\n                this.logger.log(\"checkIsSuccess \", i);\n                return true;\n            }\n        }\n\n        this.logger.log(\"checkIsSuccess \");\n        return false;\n    }\n\n    function checkSuccess(){\n        if(this.isSuccess){\n            this.logger.log(\"checkSuccess \");\n            return;\n        }\n\n        if(!this.checkIsSuccess()){\n            this.logger.log(\"checkSuccess \");\n            return;\n        }\n\n        this.logger.log(\"checkSuccess \");\n        this.dispatchSuccess();\n    }\n\n    function checkComplete(){\n        if(this.isSuccess){\n            this.logger.log(\"checkComplete \");\n            return;\n        }\n\n        for (var i = 0; i < this.children.length; i++) {\n            var child = this.children[i];\n            if(!child.isExited){\n                this.logger.log(\"checkComplete child\", i);\n                return;\n            }\n        }\n\n        this.logger.log(\"checkComplete child\");\n        this.dispatchComplete();\n    }\n\n    function onChildSuccess(event){\n        this.logger.log(\"onChildSuccess \", event.target.name);\n        this.checkSuccess();\n    }\n\n    function onChildFailed(event){\n        this.logger.log(\"onChildFailed \", event.target.name);\n        this.checkSuccess();\n    }\n\n    function onChildComplete(event){\n        this.logger.log(\"onChildComplete \", event.target.name);\n        this.checkComplete();\n    }\n\n    function onRun(){\n        this.logger.log(\"onRun \", \"children:\", this.children.length);\n\n        for(var i = 0; i < this.children.length; i++){\n            var child = this.children[i];\n\n            this.logger.log(\"onRun child\", i, child.name);\n\n            child.dispatcher.listenData(eventTypeComplete, this.onChildComplete);\n            child.dispatcher.listenData(eventTypeFailed, this.onChildFailed);\n            child.dispatcher.listenData(eventTypeSuccess, this.onChildSuccess);\n\n            setChildProjectTaskAction(this, child);\n            child.run(this);\n        }\n    }\n\n    var superOnExit = that.onExit;\n    function onExit(){\n        this.logger.log(\"onExit children\");\n        callProjectMemberListExit(this.children);\n        superOnExit.call(this);\n    }\n\n    that.checkIsSuccess = checkIsSuccess.bind(that);\n    that.onChildSuccess = onChildSuccess.bind(that);\n    that.onChildFailed = onChildFailed.bind(that);\n    that.onChildComplete = onChildComplete.bind(that);\n    that.checkSuccess = checkSuccess.bind(that);\n    that.checkComplete = checkComplete.bind(that);\n    that.onRun = onRun.bind(that);\n\n    return that;\n}\n\n// ==================== createTrigger ====================\n\nfunction createTrigger(that, name, type){\n    console.log(\"[createTrigger] Trigger\", \"name:\", name, \"type:\", type);\n\n    that = createCommonBase(that, name, type, baseType.trigger);\n\n    createGetterSetter(that, \"action\", undefined, {}, that.dispatcher);\n    createGetterSetter(that, \"conditionOnTriggers\", [], {}, that.dispatcher);\n    createGetterSetter(that, \"conditionOffTriggers\", [], {}, that.dispatcher);\n    createGetterSetter(that, \"isConditionOk\", false, {}, that.dispatcher);\n\n    function dispatchConditionsOn(data){\n        if(!this.isRunnable){\n            this.logger.log(\"dispatchConditionsOn \");\n            return;\n        }\n        this.logger.log(\"dispatchConditionsOn \");\n        this.dispatcher.dispatchData(eventTypeTriggerConditionsOn, {target:this, data:data});\n    }\n\n    function dispatchConditionsOff(data){\n        if(!this.isRunnable){\n            this.logger.log(\"dispatchConditionsOff \");\n            return;\n        }\n        this.logger.log(\"dispatchConditionsOff \");\n        this.dispatcher.dispatchData(eventTypeTriggerConditionsOff, {target:this, data:data});\n    }\n\n    function onConditionsOn(event){\n        this.logger.log(\"onConditionsOn\");\n        this.isConditionOk = true;\n    }\n\n    function onConditionsOff(event){\n        this.logger.log(\"onConditionsOff\");\n        this.isConditionOk = false;\n    }\n\n    that.dispatchConditionsOn = dispatchConditionsOn.bind(that);\n    that.dispatchConditionsOff = dispatchConditionsOff.bind(that);\n    that.onConditionsOn = onConditionsOn.bind(that);\n    that.onConditionsOff = onConditionsOff.bind(that);\n\n    return that;\n}\n\n// ==================== createTriggerGroup ====================\n\nfunction createTriggerGroup(that, name, type, isSequential){\n    console.log(\"[createTriggerGroup] TriggerGroup\", \"name:\", name, \"isSequential:\", isSequential);\n\n    that = createCommonBase(that, name, type, baseType.triggerGroup);\n\n    attachAbstractAct(that);\n    attachAbstractParent(that);\n\n    // trigger\n    var triggerConditionMap = {};\n\n    createGetterSetter(that, \"completeConditions\", [], {}, that.dispatcher);\n\n    function onRun(){\n        this.logger.log(\"onRun \", \"children:\", this.children.length);\n\n        // children,\n        if(this.children.length == 0){\n            this.logger.log(\"onRun triggerGroupchildren,\");\n            this.dispatchSuccess();\n            return;\n        }\n\n        // map\n        for(var i = 0; i < this.children.length; i++){\n            var trigger = this.children[i];\n            triggerConditionMap[trigger.id] = false;\n        }\n\n        // trigger\n        for(var i = 0; i < this.children.length; i++){\n            var trigger = this.children[i];\n\n            this.logger.log(\"onRun trigger\", i, trigger.name);\n\n            trigger.dispatcher.listenData(eventTypeTriggerConditionsOn, this.onTriggerConditionsOn);\n            trigger.dispatcher.listenData(eventTypeTriggerConditionsOff, this.onTriggerConditionsOff);\n\n            setChildProjectTaskAction(this, trigger);\n            trigger.run(this);\n        }\n    }\n\n    function onTriggerConditionsOn(event){\n        this.logger.log(\"onTriggerConditionsOn \", event.target.name);\n\n        triggerConditionMap[event.target.id] = true;\n\n        this.checkTriggerGroupComplete();\n    }\n\n    function onTriggerConditionsOff(event){\n        this.logger.log(\"onTriggerConditionsOff \", event.target.name);\n\n        triggerConditionMap[event.target.id] = false;\n\n        // ====================  isSuccess  ====================\n        //  trigger  false , TriggerGroup  success \n        //  ActionGroup\n        if(this.isSuccess){\n            this.logger.log(\"onTriggerConditionsOff  isSuccess  false\");\n            this.isSuccess = false;\n        }\n        // ====================  ====================\n    }\n\n    function checkTriggerGroupComplete(){\n        this.logger.log(\"checkTriggerGroupComplete \");\n\n        // completeConditions,trigger\n        if(this.completeConditions.length == 0){\n            this.logger.log(\"checkTriggerGroupComplete trigger\");\n\n            var allTriggered = true;\n            for(var i = 0; i < this.children.length; i++){\n                var trigger = this.children[i];\n                if(!triggerConditionMap[trigger.id]){\n                    this.logger.log(\"checkTriggerGroupComplete trigger\", i);\n                    allTriggered = false;\n                    break;\n                }\n            }\n\n            if(allTriggered){\n                this.logger.log(\"checkTriggerGroupComplete trigger\");\n                this.dispatchSuccess();\n            }\n            return;\n        }\n\n        // completeConditions\n        for(var i = 0; i < this.completeConditions.length; i++){\n            var checkList = this.completeConditions[i];\n            var checkMatched = true;\n\n            this.logger.log(\"checkTriggerGroupComplete \", i);\n\n            for(var j = 0; j < checkList.length; j++){\n                var required = checkList[j];\n                var trigger = this.children[j];\n\n                if(required && !triggerConditionMap[trigger.id]){\n                    this.logger.log(\"checkTriggerGroupComplete trigger\", j);\n                    checkMatched = false;\n                    break;\n                }\n            }\n\n            if(checkMatched){\n                this.logger.log(\"checkTriggerGroupComplete \", i);\n                this.dispatchSuccess();\n                return;\n            }\n        }\n\n        this.logger.log(\"checkTriggerGroupComplete \");\n    }\n\n    var superOnExit = that.onExit;\n    function onExit(){\n        this.logger.log(\"onExit triggers\");\n        callProjectMemberListExit(this.children);\n        superOnExit.call(this);\n    }\n\n    that.onRun = onRun.bind(that);\n    that.onTriggerConditionsOn = onTriggerConditionsOn.bind(that);\n    that.onTriggerConditionsOff = onTriggerConditionsOff.bind(that);\n    that.checkTriggerGroupComplete = checkTriggerGroupComplete.bind(that);\n    that.onExit = onExit.bind(that);\n\n    return that;\n}\n\n// ==================== createActionGroup ====================\n\nfunction createActionGroup(that, name, type, isSequential){\n    console.log(\"[createActionGroup] ActionGroup\", \"name:\", name, \"isSequential:\", isSequential);\n\n    that = createCommonBase(that, name, type, baseType.actionGroup);\n\n    if(isSequential){\n        attachQueueGroup(that);\n    }else{\n        attachConcurrentGroup(that);\n    }\n\n    return that;\n}\n\n// ==================== createSingleAction ====================\n\nfunction createSingleAction(that, name, type){\n    console.log(\"[createSingleAction] SingleAction\", \"name:\", name);\n\n    that = createCommonBase(that, name, type, baseType.action);\n\n    attachAbstractAct(that);\n\n    createGetterSetter(that, \"conditionOnTriggers\", [], {}, that.dispatcher);\n    createGetterSetter(that, \"conditionOffTriggers\", [], {}, that.dispatcher);\n    createGetterSetter(that, \"onTriggerData\", undefined, {}, that.dispatcher);\n\n    // action  trigger on/off \n    createGetterSetter(that, \"isActionable\", false, {}, that.dispatcher);\n    // action \n    createGetterSetter(that, \"isActing\", false, {}, that.dispatcher);\n\n    var superRun = that.run;\n    function run(parent){\n        this.logger.log(\"run \");\n        superRun.call(this, parent);  //  run\n        this.runTriggers();            //  runTriggers  doAction\n    }\n\n    function checkDoAction(data){\n        if(!this.isRunnable){\n            this.logger.log(\"checkDoAction \");\n            return;\n        }\n        this.onTriggerData = data;\n        this.doAction();\n    }\n\n    function doAction(data){\n        this.logger.log(\"doAction \");\n        this.isActing = true;\n    }\n\n    function runTriggers(){\n        this.logger.log(\"runTriggers\", \"conditionOnTriggers:\", this.conditionOnTriggers.length);\n\n        if(!this.conditionOnTriggers || this.conditionOnTriggers.length == 0){\n            this.logger.log(\"runTriggers trigger,\");\n            //  trigger \n            this.isActionable = true;\n            this.checkDoAction(undefined);\n        }else{\n            for(var i = 0; i < this.conditionOnTriggers.length; i++){\n                var trigger = this.conditionOnTriggers[i];\n                this.runTrigger(trigger, eventTypeTriggerConditionsOn, this.onConditionsOn);\n            }\n        }\n\n        if(this.conditionOffTriggers){\n            for(var i = 0; i < this.conditionOffTriggers.length; i++){\n                var trigger = this.conditionOffTriggers[i];\n                this.runTrigger(trigger, eventTypeTriggerConditionsOff, this.onConditionsOff);\n            }\n        }\n    }\n\n    function runTrigger(trigger, eventType, cb){\n        this.logger.log(\"runTrigger\", trigger.name, eventType);\n        trigger.dispatcher.listenDomainData(eventType, this, cb);\n        setChildProjectTaskAction(this, trigger);\n        trigger.run(this);\n    }\n\n    function onConditionsOn(event){\n        this.logger.log(\"onConditionsOn action \");\n        this.isActionable = true;\n\n        //  action \n        if(!this.isActing){\n            this.logger.log(\"onConditionsOn  action\");\n            this.checkDoAction(event && event.data ? event.data : event);\n        } else {\n            //  action \n            this.logger.log(\"onConditionsOn  action\");\n            this.onActionResume(event && event.data ? event.data : event);\n        }\n    }\n\n    function onConditionsOff(event){\n        this.logger.log(\"onConditionsOff action \");\n        this.isActionable = false;\n\n        //  action \n        if(this.isActing){\n            this.logger.log(\"onConditionsOff  action\");\n            this.onActionPause(event && event.data ? event.data : event);\n        }\n    }\n\n    function onActionPause(data){\n        this.logger.log(\"onActionPause action  action \");\n        //  action \n    }\n\n    function onActionResume(data){\n        this.logger.log(\"onActionResume action  action \");\n        //  action \n    }\n\n    function onExit(){\n        this.logger.log(\"onExit\");\n        this.exitTriggers();\n    }\n\n    function exitTriggers(){\n        this.logger.log(\"exitTriggers\");\n        callProjectMemberListExit(this.conditionOnTriggers);\n        callProjectMemberListExit(this.conditionOffTriggers);\n    }\n\n    that.run = run.bind(that);\n    that.checkDoAction = checkDoAction.bind(that);\n    that.doAction = doAction.bind(that);\n    that.runTriggers = runTriggers.bind(that);\n    that.runTrigger = runTrigger.bind(that);\n    that.onExit = onExit.bind(that);\n    that.exitTriggers = exitTriggers.bind(that);\n    that.onConditionsOn = onConditionsOn.bind(that);\n    that.onConditionsOff = onConditionsOff.bind(that);\n    that.onActionPause = onActionPause.bind(that);\n    that.onActionResume = onActionResume.bind(that);\n\n    return that;\n}\n\n// ==================== createTriggerAction ====================\n\nfunction createTriggerAction(that, name, type){\n    console.log(\"[createTriggerAction] TriggerAction\", \"name:\", name);\n\n    that = createCommonBase(that, name, type, baseType.triggerAction);\n\n    attachAbstractAct(that);\n\n    createGetterSetter(that, \"triggerGroup\", undefined, {}, that.dispatcher);\n    createGetterSetter(that, \"actionGroup\", undefined, {}, that.dispatcher);\n\n    function onRun(){\n        this.logger.log(\"onRun \");\n        this.runTriggerGroup();\n    }\n\n    function runTriggerGroup(){\n        var triggerGroup = this.triggerGroup;\n\n        if(!triggerGroup){\n            this.logger.log(\"runTriggerGroup triggerGroup\");\n            this.dispatchFailed({error: \"triggerGroup not found\"});\n            return;\n        }\n\n        this.logger.log(\"runTriggerGroup \");\n\n        triggerGroup.dispatcher.listenData(eventTypeSuccess, this.onTriggerGroupSuccess);\n        triggerGroup.dispatcher.listenData(eventTypeFailed, this.onTriggerGroupFailed);\n\n        setChildProjectTaskAction(this, triggerGroup);\n\n        this.logger.log(\"runTriggerGroup \");\n        triggerGroup.run(this);\n    }\n\n    function onTriggerGroupSuccess(event){\n        this.logger.log(\"onTriggerGroupSuccess TriggerGroup\");\n        this.runActionGroup();\n    }\n\n    function onTriggerGroupFailed(event){\n        this.logger.log(\"onTriggerGroupFailed TriggerGroup\");\n        this.dispatchFailed(event.data);\n    }\n\n    function runActionGroup(){\n        var actionGroup = this.actionGroup;\n\n        if(!actionGroup){\n            this.logger.log(\"runActionGroup actionGroup\");\n            this.dispatchFailed({error: \"actionGroup not found\"});\n            return;\n        }\n\n        this.logger.log(\"runActionGroup \");\n\n        actionGroup.dispatcher.listenData(eventTypeSuccess, this.onActionGroupSuccess);\n        actionGroup.dispatcher.listenData(eventTypeFailed, this.onActionGroupFailed);\n\n        setChildProjectTaskAction(this, actionGroup);\n\n        this.logger.log(\"runActionGroup \");\n        actionGroup.run(this);\n    }\n\n    function onActionGroupSuccess(event){\n        this.logger.log(\"onActionGroupSuccess ActionGroup\");\n        this.dispatchSuccess();\n    }\n\n    function onActionGroupFailed(event){\n        this.logger.log(\"onActionGroupFailed ActionGroup\");\n        this.dispatchFailed(event.data);\n    }\n\n    var superOnExit = that.onExit;\n    function onExit(){\n        this.logger.log(\"onExit\");\n        if(this.triggerGroup){\n            this.triggerGroup.exit();\n        }\n        if(this.actionGroup){\n            this.actionGroup.exit();\n        }\n        superOnExit.call(this);\n    }\n\n    that.onRun = onRun.bind(that);\n    that.runTriggerGroup = runTriggerGroup.bind(that);\n    that.onTriggerGroupSuccess = onTriggerGroupSuccess.bind(that);\n    that.onTriggerGroupFailed = onTriggerGroupFailed.bind(that);\n    that.runActionGroup = runActionGroup.bind(that);\n    that.onActionGroupSuccess = onActionGroupSuccess.bind(that);\n    that.onActionGroupFailed = onActionGroupFailed.bind(that);\n    that.onExit = onExit.bind(that);\n\n    return that;\n}\n\n// ==================== createTriggerActionGroup ====================\n\nfunction createTriggerActionGroup(that, name, type, isSequential){\n    console.log(\"[createTriggerActionGroup] TriggerActionGroup\", \"name:\", name, \"isSequential:\", isSequential);\n\n    that = createCommonBase(that, name, type, baseType.triggerActionGroup);\n\n    if(isSequential){\n        attachQueueGroup(that);\n    }else{\n        attachConcurrentGroup(that);\n    }\n\n    return that;\n}\n\n// ==================== createProject ====================\n\nfunction createProject(that, name, type){\n    console.log(\"[createProject] Project\", \"name:\", name);\n\n    that = createCommonBase(that, name, type, baseType.project);\n\n    attachQueueGroup(that);\n\n    function terminate(){\n        this.logger.log(\"terminate Project\");\n        this.isTerminated = true;\n        this.exit();\n    }\n\n    that.terminate = terminate.bind(that);\n\n    return that;\n}\n\n// ==================== Build  ====================\n\nfunction buildTrigger(triggerData, triggerGroup){\n    console.log(\"[buildTrigger] Trigger\", triggerData.id);\n\n    var trigger = createTrigger({}, triggerData.name, triggerData.type);\n\n    trigger.id = triggerData.id;\n    console.log(\"[buildTrigger]  trigger.data = triggerData.javaData\");\n    trigger.data = triggerData.javaData;\n    trigger.buildData = triggerData;\n    console.log(\"[buildTrigger] trigger.data:\", trigger.data);\n    console.log(\"[buildTrigger] trigger.buildData.id:\", trigger.buildData.id);\n    trigger.project = triggerGroup.project;\n    trigger.owner = triggerGroup;\n\n    // ====================  triggerActionContext ====================\n    console.log(\"[buildTrigger]  triggerActionContext\");\n    trigger.triggerActionContext = triggerGroup.triggerActionContext;\n    console.log(\"[buildTrigger] triggerActionContext \");\n    // ==================== triggerActionContext  ====================\n\n    if(triggerData.type){\n        var triggerStore = javaLib[\"fanfanlo/javajs/v1/project/store\"].getTrigger(triggerData.type);\n        if(triggerStore){\n            console.log(\"[buildTrigger] triggerStore :\", triggerData.type);\n            if(triggerStore.attach){\n                console.log(\"[buildTrigger] attach\", triggerData.type);\n                triggerStore.attach(trigger);\n            }else{\n                console.log(\"[buildTrigger] : triggerStore.attach \", triggerData.type);\n            }\n        }else{\n            console.log(\"[buildTrigger] :  triggerStore\", triggerData.type);\n        }\n    }else{\n        console.log(\"[buildTrigger] : triggerData.type \");\n    }\n\n    return trigger;\n}\n\nfunction buildTriggerGroup(triggerGroupData, triggerAction){\n    console.log(\"[buildTriggerGroup] TriggerGroup\", triggerGroupData.id);\n\n    var isSequential = triggerGroupData.isSequential !== undefined ? triggerGroupData.isSequential : true;\n\n    var triggerGroup = createTriggerGroup(\n        {},\n        triggerGroupData.name,\n        triggerGroupData.type,\n        isSequential\n    );\n\n    triggerGroup.id = triggerGroupData.id;\n    triggerGroup.data = triggerGroupData;\n    triggerGroup.project = triggerAction.project;\n    triggerGroup.owner = triggerAction;\n\n    // ====================  triggerActionContext ====================\n    console.log(\"[buildTriggerGroup]  triggerActionContext\");\n    triggerGroup.triggerActionContext = triggerAction.triggerActionContext;\n    console.log(\"[buildTriggerGroup] triggerActionContext \");\n    // ==================== triggerActionContext  ====================\n\n    var triggerList = triggerGroupData.children || [];\n    console.log(\"[buildTriggerGroup] Triggers\", \":\", triggerList.length);\n\n    for(var i = 0; i < triggerList.length; i++){\n        var triggerData = triggerList[i];\n        var triggerThat = buildTrigger(triggerData, triggerGroup);\n        triggerGroup.children.push(triggerThat);\n    }\n\n    if(triggerGroupData.checks){\n        console.log(\"[buildTriggerGroup] checks\");\n        triggerGroup.completeConditions = triggerGroupData.checks;\n    }\n\n    return triggerGroup;\n}\n\nfunction buildAction(actionData, actionGroup){\n    console.log(\"[buildAction] Action\", actionData.id);\n\n    var action = createSingleAction({}, actionData.name, actionData.type);\n\n    action.id = actionData.id;\n    console.log(\"[buildAction]  action.data = actionData.javaData\");\n    action.data = actionData.javaData;\n    action.buildData = actionData;\n    console.log(\"[buildAction] action.data:\", action.data);\n    console.log(\"[buildAction] action.buildData.id:\", action.buildData.id);\n    action.project = actionGroup.project;\n    action.owner = actionGroup;\n\n    // ====================  triggerActionContext ====================\n    console.log(\"[buildAction]  triggerActionContext\");\n    action.triggerActionContext = actionGroup.triggerActionContext;\n    console.log(\"[buildAction] triggerActionContext \");\n    // ==================== triggerActionContext  ====================\n\n    if(actionData.type){\n        var actionStore = javaLib[\"fanfanlo/javajs/v1/project/store\"].getAction(actionData.type);\n        if(actionStore){\n            console.log(\"[buildAction] actionStore :\", actionData.type);\n            if(actionStore.attach){\n                console.log(\"[buildAction] attach\", actionData.type);\n                actionStore.attach(action);\n            }else{\n                console.log(\"[buildAction] : actionStore.attach \", actionData.type);\n            }\n        }else{\n            console.log(\"[buildAction] :  actionStore\", actionData.type);\n        }\n    }else{\n        console.log(\"[buildAction] : actionData.type \");\n    }\n\n    return action;\n}\n\nfunction buildActionGroup(actionGroupData, triggerAction){\n    console.log(\"[buildActionGroup] ActionGroup\", actionGroupData.id);\n\n    var isSequential = actionGroupData.isSequential !== undefined ? actionGroupData.isSequential : true;\n\n    var actionGroup = createActionGroup(\n        {},\n        actionGroupData.name,\n        actionGroupData.type,\n        isSequential\n    );\n\n    actionGroup.id = actionGroupData.id;\n    actionGroup.data = actionGroupData;\n    actionGroup.project = triggerAction.project;\n    actionGroup.owner = triggerAction;\n\n    // ====================  triggerActionContext ====================\n    console.log(\"[buildActionGroup]  triggerActionContext\");\n    actionGroup.triggerActionContext = triggerAction.triggerActionContext;\n    console.log(\"[buildActionGroup] triggerActionContext \");\n    // ==================== triggerActionContext  ====================\n\n    var actionList = actionGroupData.children || [];\n    console.log(\"[buildActionGroup] Actions\", \":\", actionList.length);\n\n    for(var i = 0; i < actionList.length; i++){\n        var actionData = actionList[i];\n        var actionThat = buildAction(actionData, actionGroup);\n        actionGroup.children.push(actionThat);\n    }\n\n    if(actionGroupData.checks){\n        console.log(\"[buildActionGroup] checks\");\n        actionGroup.completeConditions = actionGroupData.checks;\n    }\n\n    return actionGroup;\n}\n\nfunction buildTriggerAction(triggerActionData, triggerActionGroup){\n    console.log(\"[buildTriggerAction] TriggerAction\", triggerActionData.id);\n\n    var triggerAction = createTriggerAction(\n        {},\n        triggerActionData.name,\n        triggerActionData.type\n    );\n\n    triggerAction.id = triggerActionData.id;\n    triggerAction.data = triggerActionData;\n    triggerAction.project = triggerActionGroup.project;\n    triggerAction.owner = triggerActionGroup;\n\n    // ====================  triggerActionContext ====================\n    console.log(\"[buildTriggerAction]  triggerActionContext\");\n    var triggerActionContext = {};\n    triggerAction.triggerActionContext = triggerActionContext;\n    console.log(\"[buildTriggerAction] triggerActionContext \");\n    // ==================== triggerActionContext  ====================\n\n    console.log(\"[buildTriggerAction] TriggerGroup\");\n    var triggerGroupThat = buildTriggerGroup(triggerActionData.triggerGroup, triggerAction);\n    triggerAction.triggerGroup = triggerGroupThat;\n\n    console.log(\"[buildTriggerAction] ActionGroup\");\n    var actionGroupThat = buildActionGroup(triggerActionData.actionGroup, triggerAction);\n    triggerAction.actionGroup = actionGroupThat;\n\n    return triggerAction;\n}\n\nfunction buildTriggerActionGroup(triggerActionGroupData, project){\n    console.log(\"[buildTriggerActionGroup] TriggerActionGroup\", triggerActionGroupData.id);\n\n    var isSequential = triggerActionGroupData.isSequential !== undefined ? triggerActionGroupData.isSequential : true;\n\n    var triggerActionGroup = createTriggerActionGroup(\n        {},\n        triggerActionGroupData.name,\n        triggerActionGroupData.type,\n        isSequential\n    );\n\n    triggerActionGroup.id = triggerActionGroupData.id;\n    triggerActionGroup.data = triggerActionGroupData;\n    triggerActionGroup.project = project;\n\n    var triggerActionList = triggerActionGroupData.children || [];\n    console.log(\"[buildTriggerActionGroup] TriggerActions\", \":\", triggerActionList.length);\n\n    for(var i = 0; i < triggerActionList.length; i++){\n        var triggerActionData = triggerActionList[i];\n        var triggerActionThat = buildTriggerAction(triggerActionData, triggerActionGroup);\n        triggerActionGroup.children.push(triggerActionThat);\n    }\n\n    if(triggerActionGroupData.checks){\n        console.log(\"[buildTriggerActionGroup] checks\");\n        triggerActionGroup.completeConditions = triggerActionGroupData.checks;\n    }\n\n    return triggerActionGroup;\n}\n\nfunction buildProject(projectData){\n    console.log(\"[buildProject] ========== Project ==========\", projectData.ulid || projectData.client_id);\n\n    var project = createProject({}, projectData.name, projectData.type);\n\n    project.data = projectData;\n\n    console.log(\"[buildProject] TriggerActionGroup\");\n\n    //  V2 projectData.children  TriggerActionGroup \n    var triggerActionGroupList = projectData.children || [];\n    console.log(\"[buildProject] triggerActionGroupList :\", triggerActionGroupList.length);\n\n    //  triggerActionGroup \n    if (projectData.triggerActionGroup) {\n        console.log(\"[buildProject]  triggerActionGroup \");\n        if (triggerActionGroupList.length === 0) {\n            console.log(\"[buildProject]  triggerActionGroup\");\n            triggerActionGroupList = [projectData.triggerActionGroup];\n        } else {\n            console.log(\"[buildProject] :  children  triggerActionGroup children\");\n        }\n    }\n\n    project.children = [];\n    for (var i = 0; i < triggerActionGroupList.length; i++) {\n        console.log(\"[buildProject]  TriggerActionGroup\", i);\n        var triggerActionGroupThat = buildTriggerActionGroup(triggerActionGroupList[i], project);\n        project.children.push(triggerActionGroupThat);\n    }\n\n    console.log(\"[buildProject] Project, children:\", project.children.length);\n    return project;\n}\n\n// ==================== projectBuilder ====================\n\nfunction projectBuilder(initData){\n    try{\n        console.log(\"[projectBuilder] ==========  ==========\");\n\n        // : \n        projectInitData = initData.projectInitData || initData;\n        console.log(\"[projectBuilder] projectInitData:\", projectInitData.client_id, projectInitData.name);\n\n        var project = buildProject(projectInitData);\n\n        function onScriptCallExit(){\n            console.log(\"[projectBuilder] \");\n            if(project.isTerminated || project.isExited || project.isSuccess || project.isFailed){\n                console.log(\"[projectBuilder] Project,\");\n                return;\n            }\n            project.isTerminated = true;\n            project.exit();\n            project.dispatchComplete();\n        }\n\n        addScriptExitListener(onScriptCallExit);\n\n        // ==================== keepAlive  ====================\n        const keepAlive = projectInitData.keepAlive;\n        console.log(\"[projectBuilder] keepAlive:\", String(keepAlive));\n        console.log(\"[projectBuilder] keepAlive type:\", typeof keepAlive);\n\n        const shouldKeepAlive = keepAlive === true;\n        console.log(\"[projectBuilder] shouldKeepAlive:\", shouldKeepAlive);\n        // ==================== keepAlive  ====================\n\n        //  keepAlive  Complete/Failed \n        if (!shouldKeepAlive) {\n            console.log(\"[projectBuilder]  keepAlive , Complete/Failed \");\n\n            project.dispatcher.listenData(eventTypeComplete, function(event){\n                console.log(\"[projectBuilder] ========== Project ==========\");\n                console.log(\"[projectBuilder] keepAlive:\", shouldKeepAlive, \" project.exit()\");\n                project.exit();\n            });\n\n            project.dispatcher.listenData(eventTypeFailed, function(event){\n                console.log(\"[projectBuilder] ========== Project ==========\");\n                console.log(\"[projectBuilder] keepAlive:\", shouldKeepAlive, \" project.exit()\");\n                project.exit();\n            });\n        } else {\n            console.log(\"[projectBuilder] keepAlive , Complete/Failed \");\n            console.log(\"[projectBuilder] Project ,\");\n        }\n\n        // Exit ,\n        project.dispatcher.listenData(eventTypeExit, function(event){\n            console.log(\"[projectBuilder] ========== Project ==========\");\n            console.log(\"[projectBuilder]  jsCallComplete()\");\n            jsCallComplete();\n        });\n\n        console.log(\"[projectBuilder] Project\");\n        project.run();\n\n    }catch(e){\n        console.log(\"[projectBuilder] \", e.message, e.stack);\n    }\n}\n\n// ====================  ====================`;\n","export var javaLib = {\"fanfanlo/javajs/v1/a11y/a11yUtils\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get Types(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/node/ICondition\\\"].Types;\\n            }\\n            ,\\n            get Action(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/node/ICondition\\\"].Action;\\n            }\\n            ,\\n            get Wait(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/node/ICondition\\\"].Wait;\\n            }\\n            }){\\n            \\r\\n\\r\\nfunction checkIsPackageActivities(pn, activities){\\r\\n    let packageName = a11yModel.lastFullScreenPackage;\\r\\n    let activityName = a11yModel.lastFullScreenActivity;\\r\\n    let pnMatched = pn == packageName;\\r\\n    let anMatched = activities.some(an=>an==activityName);\\r\\n    console.log(\\\"aaaaaaaaaaaaaapppppppppp\\\", pnMatched, anMatched)\\r\\n    return pnMatched && anMatched;\\r\\n}\\r\\n\\r\\nfunction checkNodesOnShow(pn, conditions, checkList, callback){\\r\\n    function cb(nodes){\\r\\n        if(!isScriptRunnable)return;\\r\\n        if(!nodes){\\r\\n            callback(undefined, false, undefined, undefined)\\r\\n            return;\\r\\n        }\\r\\n        if(!checkList){\\r\\n            callback(nodes, true, undefined, undefined)\\r\\n            return;\\r\\n        }\\r\\n        for (let i = 0; i < checkList.length; i++) {\\r\\n            let list = checkList[i];\\r\\n            let isOk = list.every((data)=>nodes[data.index] != null);\\r\\n            if(isOk){\\r\\n                callback(nodes, isOk, undefined, list);\\r\\n                return;\\r\\n            }\\r\\n        }\\r\\n        callback(nodes, false, undefined, undefined)\\r\\n    }\\r\\n    function onError(err){\\r\\n        callback(undefined, false, err, undefined)\\r\\n    }\\r\\n    let proxy = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SfProxy();\\r\\n    let job = proxy.find(a11yModel, pn, conditions, cb, onError);\\r\\n    return job;\\r\\n}\\r\\nfunction conditionJsonToData(data){\\r\\n    let s = JSON.stringify(data);\\r\\n    // return com.fanfanlo.droidlib.auto.command.objectmapper.projectObjectMapper.stringToSfRoot(s)\\r\\n    return com.fanfanlo.droidlib.auto.command.objectmapper.projectObjectMapper.stringToSfCond(s)\\r\\n}\\r\\nfunction createCheckNodesOnShow(data, callback, logger){\\r\\n    if(logger) logger = logger.createSub(`checkNodesOnShowFn-${data.name}`)\\r\\n    let nodeConditions = JSON.parse(JSON.stringify(data.nodeConditions))\\r\\n    let conditions = nodeConditions.map(cond=>{\\r\\n        let root = cond;\\r\\n        while(cond){\\r\\n            cond.type = Types[cond.type];\\r\\n            if(cond.action){\\r\\n                cond.action.type = Action[cond.action.type]\\r\\n            }\\r\\n            if(cond.wait){\\r\\n                cond.wait.type = Wait[cond.wait.type]\\r\\n            }\\r\\n            cond = cond.next;\\r\\n        }\\r\\n        return conditionJsonToData(root)\\r\\n    })\\r\\n    data.conditions = conditions;\\r\\n    let lastCheckNodesIntervalTime = 0;\\r\\n    let lastJob = undefined;\\r\\n    function check(){\\r\\n        let now = Date.now();\\r\\n        if(lastJob){\\r\\n            let checkNodesCancelPrevJobMaxIntervalTime = data.checkNodesCancelPrevJobMaxIntervalTime || 1000 * 1;\\r\\n            let diff = now - lastCheckNodesIntervalTime;\\r\\n            if(diff < checkNodesCancelPrevJobMaxIntervalTime){\\r\\n                lastJob.cancel();\\r\\n            }\\r\\n        }\\r\\n        function cb(nodes, isOk, err, matchedCheckList){\\r\\n            logger.log(\\\"1on1 cb\\\", isOk, err)\\r\\n            if(!isOk){\\r\\n                logger.log(`1on1 cb not ok`, conditions)\\r\\n            }\\r\\n            lastCheckNodesIntervalTime = now;\\r\\n            callback(nodes, isOk, err, matchedCheckList);\\r\\n        }\\r\\n        lastJob = checkNodesOnShow(data.packageName, conditions, data.nodeCheckList, cb)\\r\\n        return lastJob;\\r\\n    }\\r\\n    return {check}\\r\\n}\\r\\n\\r\\nfunction keyboardIsOpen(){\\r\\n    return com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.checkKeyboardIsOpened(a11yModel.service);\\r\\n}\\r\\nlet prevGlobalBackKeyTime = 0;\\r\\nlet globalBackKeyInterval = 100 * 25;\\r\\n// imeimetrue\\r\\n// false\\r\\nfunction hideIme(){\\r\\n    // if(!checkCanGlobalActionBack())return false;\\r\\n    let isIme = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.checkKeyboardIsOpened(a11yModel.service);\\r\\n    console.log(\\\"iiiiiiiiiiiis ime\\\", isIme);\\r\\n    if(isIme){\\r\\n        let bl = com.fanfanlo.lib.utils.KeyboardUtils.hideKeyboard();\\r\\n        console.log(\\\"hide ime222\\\", bl);\\r\\n        return bl\\r\\n    }\\r\\n    return false;\\r\\n}\\r\\n\\r\\nfunction globalActionBack(globalBackActionIntervalTime){\\r\\n    console.log(\\\"globalActionBack1\\\")\\r\\n    if(!checkCanGlobalActionBack(globalBackActionIntervalTime))return false;\\r\\n    let bl = a11yModel.globalActionBack();\\r\\n    if(bl){\\r\\n        prevGlobalBackKeyTime = Date.now();\\r\\n    }\\r\\n    console.log(\\\"globalActionBack2\\\", bl)\\r\\n    return bl;\\r\\n}\\r\\nfunction checkCanGlobalActionBack(globalBackActionIntervalTime){\\r\\n    let now = Date.now();\\r\\n    let diff = now - prevGlobalBackKeyTime;\\r\\n    let time = globalBackActionIntervalTime == undefined || globalBackActionIntervalTime <= 0 ? globalBackKeyInterval : globalBackActionIntervalTime\\r\\n    let bl =  diff > time;\\r\\n    console.log(\\\"1checkCanGlobalActionBack1 back\\\", bl, diff, now, prevGlobalBackKeyTime);\\r\\n    return bl;\\r\\n}\\r\\n// packageimeopenimetrue\\r\\n// false\\r\\nfunction hideImeIfPackageOpened(pn){\\r\\n    let win = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.getWindowByPackageName(a11yModel.service, pn, false, -1);\\r\\n    console.log(\\\"hideImeIfPackageOpened1 win!=null\\\", win != null, pn)\\r\\n    if(!win)return false;\\r\\n    return hideIme();\\r\\n}\\r\\n\\r\\nfunction createNodeAction(actionConf){\\r\\n    let type = actionConf.type;\\r\\n    let nodeAction;\\r\\n    switch (type){\\r\\n        case \\\"Click\\\":\\r\\n            nodeAction = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Click();\\r\\n            break;\\r\\n        case \\\"LongClick\\\":\\r\\n            nodeAction = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.LongClick();\\r\\n            break;\\r\\n        case \\\"TryClick\\\":\\r\\n            nodeAction = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.TryClick();\\r\\n            break;\\r\\n        case \\\"TryLongClick\\\":\\r\\n            nodeAction = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.TryLongClick();\\r\\n            break;\\r\\n        case \\\"SetText\\\":\\r\\n            nodeAction = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SetText(actionConf.value);\\r\\n            break;\\r\\n        default:\\r\\n            let msg = `no action matched, ${type}`\\r\\n            console.log(`createNodeAction1`, actionConf)\\r\\n            throw new Error(msg)\\r\\n    }\\r\\n    return nodeAction\\r\\n}\\r\\nreturn {checkIsPackageActivities, checkNodesOnShow, createCheckNodesOnShow, hideIme, hideImeIfPackageOpened, checkCanGlobalActionBack, globalActionBack, keyboardIsOpen, createNodeAction}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/a11y/a11yUtils.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/a11y/node/ICondition\",\"properties\":[\"Types\",\" Action\",\" Wait\"]}]},\"fanfanlo/javajs/v1/event/createEventDispatcher\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            \\r\\nfunction createEventDispatcher(){\\r\\n    return new com.fanfanlo.lib.event.EventDispatcher()\\r\\n}\\r\\n\\r\\nreturn {createEventDispatcher}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/event/createEventDispatcher.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/project/store\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            let projectMap = {};\\r\\nlet taskMap = {};\\r\\nlet actionMap = {\\r\\n    \\\"fanfanlo/javajs/v1/project/components/action/app/openApp\\\":{\\r\\n        type:\\\"fanfanlo/javajs/v1/project/components/action/app/openApp\\\",\\r\\n        attach:undefined\\r\\n    }\\r\\n};\\r\\nlet triggerMap = {\\r\\n    \\\"fanfanlo/javajs/v1/project/components/trigger/time/later\\\":{\\r\\n        type:\\\"fanfanlo/javajs/v1/project/components/trigger/time/later\\\",\\r\\n        attach:undefined\\r\\n    }\\r\\n};\\r\\nfunction getFromMap(map, type, mapName){\\r\\n    if(map[type] == undefined){\\r\\n        throw new Error(mapName + \\\" no type registered \\\" + type )\\r\\n    }\\r\\n    return map[type];\\r\\n}\\r\\n\\r\\nfunction getProject(type){\\r\\n    return getFromMap(projectMap, type, \\\"project\\\")\\r\\n}\\r\\nfunction getTask(type){\\r\\n    return getFromMap(taskMap, type, \\\"task\\\")\\r\\n}\\r\\nfunction getAction(type){\\r\\n    return getFromMap(actionMap, type, \\\"action\\\")\\r\\n}\\r\\nfunction getTrigger(type){\\r\\n    return getFromMap(triggerMap, type, \\\"trigger\\\")\\r\\n}\\r\\nfunction regProject(type, attach){\\r\\n    regToMap(projectMap, type, attach, \\\"project\\\")\\r\\n}\\r\\nfunction regTask(type, attach){\\r\\n    regToMap(taskMap, type, attach, \\\"task\\\")\\r\\n}\\r\\nfunction regAction(type, attach){\\r\\n    regToMap(actionMap, type, attach, \\\"action\\\")\\r\\n}\\r\\nfunction regTrigger(type, attach){\\r\\n    regToMap(triggerMap, type, attach, \\\"trigger\\\")\\r\\n}\\r\\nfunction regToMap(map, type, attach, mapName){\\r\\n    // if(map[type] != undefined){\\r\\n    //     throw new Error(mapName + ` type already registerd, type is ` + type)\\r\\n    // }\\r\\n    // if(!type || type.length == 0){\\r\\n    //     throw new Error(mapName + ` type is undefined or empty ` + type);\\r\\n    // }\\r\\n    map[type] = {\\r\\n        type, attach\\r\\n    }\\r\\n    projectStoreLogger.log(`store register ${type}`)\\r\\n}\\r\\nreturn {projectMap, taskMap, actionMap, triggerMap,\\r\\n    regProject, regTask,  regAction, regTrigger,\\r\\n    getProject, getTask, getAction, getTrigger\\r\\n}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/store.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/utils/createGetterSetter\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            \\r\\nfunction createGetterSetter(that, key, value, conf, dispatcher, setFn, getFn){\\r\\n    Object.defineProperty(that, key, {\\r\\n        get(){\\r\\n            let v = getFn ? getFn(value, that, key) : value;\\r\\n            if(conf && conf.setter){\\r\\n                let s = conf.setter;\\r\\n                if(s.logger){\\r\\n                    s.logger(that, key).log(v);\\r\\n                }\\r\\n                if(s.stack){\\r\\n                    try {\\r\\n                        throw new Error(key);\\r\\n                    }catch (e) {\\r\\n                        console.log(v, e.stack)\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            return v;\\r\\n        },\\r\\n        set(v){\\r\\n            if(conf.readonly){\\r\\n                return;\\r\\n            }\\r\\n            let old = value;\\r\\n            value = setFn ? setFn(v, that, key) : v;\\r\\n            if(conf && conf.getter){\\r\\n                let s = conf.getter;\\r\\n                if(s.logger){\\r\\n                    s.logger(that, key).log(v)\\r\\n                }\\r\\n                if(s.stack){\\r\\n                    try {\\r\\n                        throw new Error(key);\\r\\n                    }catch (e) {\\r\\n                        let log = s.logger ? s.logger(that, key).log : console.log;\\r\\n                        log(key, \\\"setter old value is\\\", old);\\r\\n                        log(key, \\\"setter now value is\\\", value)\\r\\n                        log(key, \\\"setter\\\", e.stack)\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n\\r\\n            if(dispatcher){\\r\\n                dispatcher.dispatchData(`${key}Changed`,{old, now:value})\\r\\n            }\\r\\n        }\\r\\n    })\\r\\n}\\r\\n\\r\\nreturn {createGetterSetter}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/utils/createGetterSetter.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/utils/ExitHandler\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\r\\n\\r\\nfunction createExitHandler(exitOrCompleteDispatcher, dispatchers, logger){\\r\\n    if(logger)logger = logger.createSub(\\\"exitHandler\\\");\\r\\n    let eventDispatchers = dispatchers || [];\\r\\n    let cleanList = [];\\r\\n    let domain = {};\\r\\n    function onScriptCallExit(){\\r\\n        if(logger) logger.log(\\\"onScriptCallExit1\\\");\\r\\n        onExit();\\r\\n    }\\r\\n    addScriptExitListener(onScriptCallExit);\\r\\n    exitOrCompleteDispatcher.listenData(eventTypeExit, onExit);\\r\\n    exitOrCompleteDispatcher.listenData(eventTypeComplete, onExit);\\r\\n    function onExit(e){\\r\\n        if(logger) logger.log(\\\"onExit1\\\");\\r\\n        clean();\\r\\n    }\\r\\n    function clean(){\\r\\n        if(logger) logger.log(\\\"clean1\\\");\\r\\n        eventDispatchers.forEach(dispatcher=>{\\r\\n            if(!dispatcher)return;\\r\\n            dispatcher.removeDomain(domain);\\r\\n        })\\r\\n        cleanList.forEach(fn=>fn())\\r\\n        removeScriptExitListener(onScriptCallExit);\\r\\n    }\\r\\n    function addExitFn(fn){\\r\\n        let index = cleanList.indexOf(fn);\\r\\n        if(index > -1)return;\\r\\n        cleanList.push(fn);\\r\\n    }\\r\\n    function removeExitFn(fn){\\r\\n        let index = cleanList.indexOf(fn);\\r\\n        if(index == -1)return;\\r\\n        cleanList.splice(index, 1);\\r\\n    }\\r\\n    function addEventDispatcher(dispatcher){\\r\\n        eventDispatchers.push(dispatcher);\\r\\n    }\\r\\n\\r\\n    return {domain, addEventDispatcher, addExitFn, removeExitFn, logger}\\r\\n}\\r\\n\\r\\nreturn {createExitHandler}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/utils/ExitHandler.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]}]},\"fanfanlo/javajs/v1/utils/IntervalCheck\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get clearTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].clearTimeout;\\n            }\\n            }){\\n            \\r\\n\\r\\nfunction createIntervalChecker(interval, fn, logger){\\r\\n    if(logger)logger = logger.createSub(\\\"intervalChecker\\\")\\r\\n    let last = 0;\\r\\n    let timeoutId = undefined;\\r\\n    let exited = false;\\r\\n    let paused = false;\\r\\n    function checkCanRun(){\\r\\n        let now = Date.now();\\r\\n        let diff = now - last;\\r\\n        let canRun = diff > interval;\\r\\n        return canRun;\\r\\n    }\\r\\n    function exit(){\\r\\n        exited = true;\\r\\n        clearTimeoutId();\\r\\n    }\\r\\n    function pause(){\\r\\n        if(logger)logger.log(\\\"pause IntervalChecker\\\");\\r\\n        paused = true;\\r\\n        clearTimeoutId();\\r\\n    }\\r\\n    function resume(){\\r\\n        if(logger)logger.log(\\\"resume IntervalChecker\\\");\\r\\n        paused = false;\\r\\n        // \\r\\n        checkRun();\\r\\n    }\\r\\n    function callLater(){\\r\\n        if(timeoutId != undefined)return;\\r\\n        timeoutId = setTimeout(laterRun, interval);\\r\\n        return timeoutId;\\r\\n    }\\r\\n    function clearTimeoutId(){\\r\\n        let id = timeoutId;\\r\\n        if(!id)return;\\r\\n        timeoutId = undefined;\\r\\n        clearTimeout(id);\\r\\n    }\\r\\n    function checkRun(){\\r\\n        if(exited || paused)return;\\r\\n        let canRun = checkCanRun();\\r\\n        if(!canRun){\\r\\n            callLater();\\r\\n            return false;\\r\\n        }\\r\\n        run();\\r\\n        return true;\\r\\n    }\\r\\n    function setNow(){\\r\\n        last = Date.now();\\r\\n    }\\r\\n    function laterRun(){\\r\\n        timeoutId = undefined;\\r\\n        run();\\r\\n    }\\r\\n    function run(){\\r\\n        if(exited || paused)return;\\r\\n        setNow();\\r\\n        if(fn != undefined)fn();\\r\\n    }\\r\\n    return {checkRun, exit, check: checkCanRun, setNow, clearTimeoutId, pause, resume};\\r\\n}\\r\\n\\r\\nreturn {createIntervalChecker}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/utils/IntervalCheck.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\",\" clearTimeout\"]}]},\"fanfanlo/javajs/v1/utils/setTimeout\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            \\r\\n\\r\\nfunction setTimeout(fn, delay){\\r\\n    var conf = com.fanfanlo.lib.utils.coroutine.CoroutineUtils.Companion.later(delay, fn);\\r\\n    return conf;\\r\\n}\\r\\n\\r\\nfunction clearTimeout(conf){\\r\\n    // console.log(\\\"clearTimeout1\\\", 1)\\r\\n    if(!conf)return;\\r\\n    // console.log(\\\"clearTimeout1\\\", 2)\\r\\n    var job = conf.job || conf.deferred\\r\\n    // console.log(\\\"clearTimeout1\\\", 3)\\r\\n    if(!job)return;\\r\\n    // console.log(\\\"clearTimeout1\\\", 4)\\r\\n    if(job.isCancelled || job.isCompleted)return;\\r\\n    // console.log(\\\"clearTimeout1\\\", 5)\\r\\n    job.cancel();\\r\\n    console.log(\\\"clearTimeout1\\\", 6)\\r\\n}\\r\\n\\r\\nfunction setInterval(fn, delay, times){\\r\\n    if(!times){\\r\\n        times = 1000000000000\\r\\n    }\\r\\n    var conf = com.fanfanlo.lib.utils.coroutine.CoroutineUtils.Companion.repeat(times, delay, fn);\\r\\n    return conf;\\r\\n}\\r\\n\\r\\nfunction clearInterval(conf){\\r\\n    clearTimeout(conf)\\r\\n}\\r\\nreturn {setTimeout, clearTimeout, setInterval, clearInterval}\\r\\n;\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/utils/setTimeout.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/a11y/node/ICondition\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            \\r\\nlet path = \\\"com.fanfanlo.droidlib.auto.service.accessibility.krosxx.\\\"\\r\\nlet Types = {\\r\\n    get Id(){\\r\\n        return `${path}Id`;\\r\\n    },\\r\\n    get Text(){\\r\\n        return `${path}Text`;\\r\\n    },\\r\\n    get MatchText(){\\r\\n        return `${path}MatchText`;\\r\\n    },\\r\\n    get Desc(){\\r\\n        return `${path}Desc`;\\r\\n    },\\r\\n    get Clickable(){\\r\\n        return `${path}Clickable`;\\r\\n    },\\r\\n    get Type(){\\r\\n        return `${path}Type`;\\r\\n    },\\r\\n    get Ids(){\\r\\n        return `${path}Ids`;\\r\\n    },\\r\\n    get Descs(){\\r\\n        return `${path}Descs`;\\r\\n    },\\r\\n    get Texts(){\\r\\n        return `${path}Texts`;\\r\\n    },\\r\\n    get Root(){\\r\\n        return `${path}SFRoot`;\\r\\n    },\\r\\n\\r\\n}\\r\\n\\r\\nlet Action = {\\r\\n    get Focus(){\\r\\n        return `${path}Focus`;\\r\\n    },\\r\\n    get ClearFocus(){\\r\\n        return `${path}ClearFocus`;\\r\\n    },\\r\\n    get Click(){\\r\\n        return `${path}Click`;\\r\\n    },\\r\\n    get TryClick(){\\r\\n        return `${path}TryClick`;\\r\\n    },\\r\\n    get LongClick(){\\r\\n        return `${path}LongClick`;\\r\\n    },\\r\\n    get GlobalClick(){\\r\\n        return `${path}GlobalClick`;\\r\\n    },\\r\\n    get SetText(){\\r\\n        return `${path}SetText`;\\r\\n    },\\r\\n}\\r\\n\\r\\nlet Wait = {\\r\\n    get Wait(){\\r\\n        return `${path}SFWait`;\\r\\n    },\\r\\n}\\r\\n\\r\\nlet Data = {\\r\\n    get Data(){\\r\\n        return `${path}SFData`;\\r\\n    },\\r\\n}\\r\\n\\r\\nreturn {Types, Action, Wait, Data}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/a11y/node/ICondition.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/project/base/projectEventTypes\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({}){\\n            console.log(\\\"[projectEventTypes] \\\");\\n\\nlet eventTypeComplete = \\\"eventTypeComplete\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeComplete:\\\", eventTypeComplete);\\n\\nlet eventTypeFailed = \\\"eventTypeFailed\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeFailed:\\\", eventTypeFailed);\\n\\nlet eventTypeSuccess = \\\"eventTypeSuccess\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeSuccess:\\\", eventTypeSuccess);\\n\\nlet eventTypeError = \\\"eventTypeError\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeError:\\\", eventTypeError);\\n\\nlet eventTypeExit = \\\"eventTypeExit\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeExit:\\\", eventTypeExit);\\n\\nlet eventTypeTriggerCondistionsOn = \\\"eventTypeTriggerCondistionsOn\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeTriggerCondistionsOn:\\\", eventTypeTriggerCondistionsOn);\\n\\nlet eventTypeTriggerCondistionsOff = \\\"eventTypeTriggerCondistionsOff\\\";\\nconsole.log(\\\"[projectEventTypes] eventTypeTriggerCondistionsOff:\\\", eventTypeTriggerCondistionsOff);\\n\\nconsole.log(\\\"[projectEventTypes] \\\");\\nreturn {\\n    eventTypeComplete,\\n    eventTypeFailed,\\n    eventTypeSuccess,\\n    eventTypeError,\\n    eventTypeExit,\\n    eventTypeTriggerCondistionsOn,\\n    eventTypeTriggerCondistionsOff\\n}\\n\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/base/projectEventTypes.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[]},\"fanfanlo/javajs/v1/project/components/actions/a11y/A11yOperator\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get runNodeOperator(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/components/action/a11y/NodeOperator\\\"].runNodeOperator;\\n            }\\n            }){\\n            \\r\\n\\r\\n/**\\r\\n *\\r\\n * @param operateConf\\r\\n * @param logger\\r\\n * @param that that is project's action, has properties and methods [dispatchSuccess, isRunnable] will be used.\\r\\n * @returns {{createOperator: createOperator, runOperator: runOperator}}\\r\\n */\\r\\nfunction createA11yOperator(operateConf, l, that){\\r\\n    let logger = l.subLogger(`createA11yOperatorFn`);\\r\\n    logger.log(\\\"hiiiiiiiiiiiiiii\\\")\\r\\n    let nodesChecker;\\r\\n\\r\\n    function createA11yOperator(operateConf){\\r\\n        // nodesChecker = createNodeChecker(operateConf, logger, that)\\r\\n        nodesChecker = runNodeOperator(operateConf, logger, that)\\r\\n    }\\r\\n    function createNodeOperator(operateConf){\\r\\n        // nodesChecker =  createNodeChecker(operateConf, logger, that);\\r\\n        nodesChecker =  runNodeOperator(operateConf, logger, that);\\r\\n    }\\r\\n    function createOperator(operateConf){\\r\\n        switch (operateConf.type){\\r\\n            case \\\"node\\\":\\r\\n                createNodeOperator(operateConf);\\r\\n                break;\\r\\n            case \\\"a11y\\\":\\r\\n                createA11yOperator(operateConf);\\r\\n                break;\\r\\n            default:\\r\\n                throw new Error(\\\"no operate conf\\\")\\r\\n        }\\r\\n    }\\r\\n    function runOperator(){\\r\\n        createOperator(operateConf);\\r\\n        try {\\r\\n            nodesChecker.doAction();\\r\\n        }catch (e) {\\r\\n            logger.log(`runOperatoreeeeeeeeror`, e.message, e.stack)\\r\\n        }\\r\\n    }\\r\\n    return {createOperator, runOperator}\\r\\n}\\r\\n\\r\\nreturn {createA11yOperator}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/a11y/A11yOperator.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/components/action/a11y/NodeOperator\",\"properties\":[\"runNodeOperator\"]}]},\"fanfanlo/javajs/v1/project/components/actions/a11y/node-action\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regAction;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            ,\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get clearTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].clearTimeout;\\n            }\\n            }){\\n            \\n\\nlet type = \\\"fanfanlo/javajs/v1/project/components/actions/a11y/node-action\\\";\\nonLibReady(()=>{\\n    regAction(type, attach)\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/actions/a11y/node-action.java.js`)\\n\\nfunction attach(that){\\n    let superDoAction = that.doAction;\\n    let logger = that.logger;\\n    let domain = {};\\n    let actionConfig = that.data;\\n\\n    let continuousClickTimerId = null;\\n    let isContinuousClicking = false;\\n\\n    logger.log('NodeAction.attach called, actionConfig:', actionConfig)\\n\\n    function onScriptCallExit(){\\n        logger.log(\\\"NodeAction.onScriptCallExit\\\", that.baseMsg)\\n        onExit();\\n    }\\n\\n    addScriptExitListener(onScriptCallExit);\\n    that.dispatcher.listenData(eventTypeExit, onExit);\\n    that.dispatcher.listenData(eventTypeComplete, onExit);\\n\\n    function onExit(e){\\n        logger.log(\\\"NodeAction.onExit\\\")\\n        stopContinuousClick();\\n        clean();\\n    }\\n\\n    function clean(){\\n        logger.log('NodeAction.clean')\\n        a11yModel.removeDomain(domain);\\n        removeScriptExitListener(onScriptCallExit);\\n    }\\n\\n    that.doAction = doAction.bind(that);\\n    function doAction() {\\n        superDoAction();\\n        logger.log('NodeAction.doAction called, actionType:', actionConfig.actionType)\\n        executeAction();\\n    }\\n\\n    function executeAction(){\\n        let actionType = actionConfig.actionType;\\n        logger.log('NodeAction.executeAction, actionType:', actionType)\\n\\n        if(!actionType){\\n            logger.error('NodeAction.executeAction - actionType missing')\\n            that.dispatchFailed({reason: 'actionType is missing'});\\n            return;\\n        }\\n\\n        switch(actionType){\\n            case 'click':\\n                performClick();\\n                break;\\n            case 'longClick':\\n                performLongClick();\\n                break;\\n            case 'scroll':\\n                performScroll();\\n                break;\\n            case 'setText':\\n                performSetText();\\n                break;\\n            case 'focus':\\n                performFocus();\\n                break;\\n            default:\\n                logger.error('NodeAction.executeAction - unknown actionType:', actionType)\\n                that.dispatchFailed({reason: 'unknown actionType: ' + actionType});\\n                break;\\n        }\\n    }\\n\\n    function performClick(){\\n        logger.log('NodeAction.performClick called')\\n\\n        let clickConfig = actionConfig.clickConfig || {useGlobalClick: false};\\n        let continuousConfig = clickConfig.continuousClickConfig;\\n\\n        if(continuousConfig && continuousConfig.enableContinuousClick){\\n            logger.log('NodeAction.performClick - continuous mode')\\n            performContinuousClick();\\n            return;\\n        }\\n\\n        logger.log('NodeAction.performClick - single mode')\\n        performSingleClick();\\n    }\\n\\n    function performSingleClick(){\\n        logger.log('NodeAction.performSingleClick called')\\n\\n        let clickConfig = actionConfig.clickConfig || {useGlobalClick: false};\\n        let useGlobalClick = clickConfig.useGlobalClick || false;\\n        logger.log('useGlobalClick:', useGlobalClick)\\n\\n        let node = findTargetNode();\\n        if(!node){\\n            logger.log('NodeAction.performSingleClick - node not found')\\n            that.dispatchFailed({reason: 'target node not found'});\\n            return;\\n        }\\n\\n        try{\\n            if(useGlobalClick){\\n                logger.log('NodeAction.performSingleClick - using clickByItemRect')\\n\\n                let service = a11yModel.service\\n                if(!service){\\n                    logger.error('NodeAction.performSingleClick - service not available')\\n                    that.dispatchFailed({reason: 'a11yModel.service not available'});\\n                    return;\\n                }\\n\\n                let nodeInfo = node.unwrap()\\n                if(!nodeInfo){\\n                    logger.error('NodeAction.performSingleClick - node.unwrap() null')\\n                    that.dispatchFailed({reason: 'node.unwrap() returned null'});\\n                    return;\\n                }\\n\\n                let randomDistance = 5.0\\n                let success = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.clickByItemRect(nodeInfo, service, randomDistance)\\n                logger.log('NodeAction.performSingleClick - clickByItemRect result:', success)\\n\\n                if(!success){\\n                    that.dispatchFailed({reason: 'clickByItemRect failed'});\\n                    return;\\n                }\\n            }else{\\n                logger.log('NodeAction.performSingleClick - using node.click()')\\n                let actionObj = createClickAction();\\n                let success = a11yModel.doAction(node, actionObj);\\n                logger.log('NodeAction.performSingleClick - click result:', success)\\n\\n                if(!success){\\n                    that.dispatchFailed({reason: 'node click failed'});\\n                    return;\\n                }\\n            }\\n\\n            recycleFoundNode(node);\\n\\n            setTimeout(()=>{\\n                logger.log('NodeAction.performSingleClick - success')\\n                that.dispatchSuccess();\\n            }, 200);\\n\\n        }catch(e){\\n            logger.error('NodeAction.performSingleClick - error:', e)\\n            that.dispatchFailed({reason: 'click error: ' + e.toString()});\\n        }\\n    }\\n\\n    function performContinuousClick(){\\n        logger.log('NodeAction.performContinuousClick called')\\n        isContinuousClicking = true;\\n        executeContinuousClickCycle();\\n    }\\n\\n    function executeContinuousClickCycle(){\\n        logger.log('NodeAction.executeContinuousClickCycle called')\\n\\n        if(!isContinuousClicking){\\n            logger.log('NodeAction.executeContinuousClickCycle - stopped by flag')\\n            return;\\n        }\\n\\n        if(!that.isRunnable){\\n            logger.log('NodeAction.executeContinuousClickCycle - not runnable')\\n            stopContinuousClick();\\n            return;\\n        }\\n\\n        let node = findTargetNode();\\n        if(!isNodeValid(node)){\\n            logger.log('NodeAction.executeContinuousClickCycle - node invalid')\\n            stopContinuousClick();\\n            return;\\n        }\\n\\n        try{\\n            let clickConfig = actionConfig.clickConfig;\\n            let useGlobalClick = clickConfig.useGlobalClick || false;\\n            logger.log('useGlobalClick:', useGlobalClick)\\n\\n            if(useGlobalClick){\\n                logger.log('NodeAction.executeContinuousClickCycle - global click')\\n                let service = a11yModel.service;\\n                if(!service){\\n                    logger.error('NodeAction.executeContinuousClickCycle - service not available')\\n                    stopContinuousClick();\\n                    return;\\n                }\\n\\n                let nodeInfo = node.unwrap();\\n                if(!nodeInfo){\\n                    logger.error('NodeAction.executeContinuousClickCycle - nodeInfo null')\\n                    stopContinuousClick();\\n                    return;\\n                }\\n\\n                let randomDistance = 5.0;\\n                let success = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.clickByItemRect(nodeInfo, service, randomDistance);\\n                logger.log('NodeAction.executeContinuousClickCycle - click result:', success)\\n\\n                if(!success){\\n                    logger.log('NodeAction.executeContinuousClickCycle - click failed')\\n                    stopContinuousClick();\\n                    return;\\n                }\\n            }else{\\n                logger.log('NodeAction.executeContinuousClickCycle - node click')\\n                let actionObj = createClickAction();\\n                let success = a11yModel.doAction(node, actionObj);\\n                logger.log('NodeAction.executeContinuousClickCycle - click result:', success)\\n\\n                if(!success){\\n                    logger.log('NodeAction.executeContinuousClickCycle - click failed')\\n                    stopContinuousClick();\\n                    return;\\n                }\\n            }\\n\\n            let continuousConfig = actionConfig.clickConfig.continuousClickConfig;\\n            let baseInterval = continuousConfig.baseInterval;\\n            let intervalVariation = continuousConfig.intervalVariation;\\n\\n            let randomOffset = Math.random() * (intervalVariation * 2) - intervalVariation;\\n            let nextInterval = baseInterval + randomOffset;\\n            logger.log('nextInterval:', nextInterval)\\n\\n            continuousClickTimerId = setTimeout(() => {\\n                logger.log('NodeAction - timer fired')\\n                executeContinuousClickCycle();\\n            }, nextInterval);\\n\\n        }catch(e){\\n            logger.error('NodeAction.executeContinuousClickCycle - error:', e)\\n            stopContinuousClick();\\n        }\\n    }\\n\\n    function stopContinuousClick(){\\n        logger.log('NodeAction.stopContinuousClick called')\\n        isContinuousClicking = false;\\n\\n        if(continuousClickTimerId){\\n            logger.log('NodeAction.stopContinuousClick - clearing timer')\\n            clearTimeout(continuousClickTimerId);\\n            continuousClickTimerId = null;\\n        }\\n    }\\n\\n    function isNodeValid(node){\\n        if(!node){\\n            logger.log('NodeAction.isNodeValid - node null')\\n            return false;\\n        }\\n\\n        try{\\n            let nodeInfo = node.unwrap();\\n            if(!nodeInfo){\\n                logger.log('NodeAction.isNodeValid - nodeInfo null')\\n                return false;\\n            }\\n            logger.log('NodeAction.isNodeValid - valid')\\n            return true;\\n        }catch(e){\\n            logger.error('NodeAction.isNodeValid - error:', e)\\n            return false;\\n        }\\n    }\\n\\n    function performLongClick(){\\n        logger.log('NodeAction.performLongClick')\\n\\n        let node = findTargetNode();\\n        if(!node){\\n            logger.log('NodeAction.performLongClick - target node not found')\\n            that.dispatchFailed({reason: 'target node not found'});\\n            return;\\n        }\\n\\n        try{\\n            logger.log('NodeAction.performLongClick - executing long click on node')\\n            let actionObj = createLongClickAction();\\n            let success = a11yModel.doAction(node, actionObj);\\n            logger.log('NodeAction.performLongClick - result:', success)\\n\\n            if(!success){\\n                that.dispatchFailed({reason: 'long click failed'});\\n                return;\\n            }\\n\\n            // ==================== recycle foundNode ====================\\n            recycleFoundNode(node);\\n            // ==================== recycle  ====================\\n\\n            // \\n            setTimeout(()=>{\\n                logger.log('NodeAction.performLongClick - dispatching success')\\n                that.dispatchSuccess();\\n            }, 200);\\n\\n        }catch(e){\\n            logger.error('NodeAction.performLongClick - error:', e)\\n            that.dispatchFailed({reason: 'long click error: ' + e.toString()});\\n        }\\n    }\\n\\n    function performScroll(){\\n        let scrollConfig = actionConfig.scrollConfig || {direction: 'forward'};\\n        let direction = scrollConfig.direction || 'forward';\\n        logger.log('NodeAction.performScroll, direction:', direction)\\n\\n        let node = findTargetNode();\\n        if(!node){\\n            logger.log('NodeAction.performScroll - target node not found')\\n            that.dispatchFailed({reason: 'target node not found'});\\n            return;\\n        }\\n\\n        try{\\n            logger.log('NodeAction.performScroll - executing scroll on node')\\n\\n            let actionObj;\\n            if(direction === 'forward'){\\n                actionObj = createScrollForwardAction();\\n            }else if(direction === 'backward'){\\n                actionObj = createScrollBackwardAction();\\n            }else{\\n                logger.error('NodeAction.performScroll - unknown direction:', direction)\\n                that.dispatchFailed({reason: 'unknown scroll direction: ' + direction});\\n                return;\\n            }\\n\\n            let success = a11yModel.doAction(node, actionObj);\\n            logger.log('NodeAction.performScroll - result:', success)\\n\\n            if(!success){\\n                that.dispatchFailed({reason: 'scroll failed'});\\n                return;\\n            }\\n\\n            // ==================== recycle foundNode ====================\\n            recycleFoundNode(node);\\n            // ==================== recycle  ====================\\n\\n            // \\n            setTimeout(()=>{\\n                logger.log('NodeAction.performScroll - dispatching success')\\n                that.dispatchSuccess();\\n            }, 200);\\n\\n        }catch(e){\\n            logger.error('NodeAction.performScroll - error:', e)\\n            that.dispatchFailed({reason: 'scroll error: ' + e.toString()});\\n        }\\n    }\\n\\n    function performSetText(){\\n        let textConfig = actionConfig.textConfig || {text: ''};\\n        let text = textConfig.text || '';\\n        logger.log('NodeAction.performSetText, text:', text)\\n\\n        let node = findTargetNode();\\n        if(!node){\\n            logger.log('NodeAction.performSetText - target node not found')\\n            that.dispatchFailed({reason: 'target node not found'});\\n            return;\\n        }\\n\\n        try{\\n            logger.log('NodeAction.performSetText - executing setText on node')\\n\\n            // ,\\n            let focusAction = createFocusAction();\\n            a11yModel.doAction(node, focusAction);\\n            logger.log('NodeAction.performSetText - focus executed')\\n\\n            // \\n            setTimeout(()=>{\\n                let textAction = createSetTextAction(text);\\n                let success = a11yModel.doAction(node, textAction);\\n                logger.log('NodeAction.performSetText - setText result:', success)\\n\\n                if(!success){\\n                    that.dispatchFailed({reason: 'setText failed'});\\n                    return;\\n                }\\n\\n                // ==================== recycle foundNode ====================\\n                recycleFoundNode(node);\\n                // ==================== recycle  ====================\\n\\n                // \\n                setTimeout(()=>{\\n                    logger.log('NodeAction.performSetText - dispatching success')\\n                    that.dispatchSuccess();\\n                }, 100);\\n\\n            }, 100);\\n\\n        }catch(e){\\n            logger.error('NodeAction.performSetText - error:', e)\\n            that.dispatchFailed({reason: 'setText error: ' + e.toString()});\\n        }\\n    }\\n\\n    function performFocus(){\\n        logger.log('NodeAction.performFocus')\\n\\n        let node = findTargetNode();\\n        if(!node){\\n            logger.log('NodeAction.performFocus - target node not found')\\n            that.dispatchFailed({reason: 'target node not found'});\\n            return;\\n        }\\n\\n        try{\\n            logger.log('NodeAction.performFocus - executing focus on node')\\n            let actionObj = createFocusAction();\\n            let success = a11yModel.doAction(node, actionObj);\\n            logger.log('NodeAction.performFocus - result:', success)\\n\\n            if(!success){\\n                that.dispatchFailed({reason: 'focus failed'});\\n                return;\\n            }\\n\\n            // ==================== recycle foundNode ====================\\n            recycleFoundNode(node);\\n            // ==================== recycle  ====================\\n\\n            // \\n            setTimeout(()=>{\\n                logger.log('NodeAction.performFocus - dispatching success')\\n                that.dispatchSuccess();\\n            }, 100);\\n\\n        }catch(e){\\n            logger.error('NodeAction.performFocus - error:', e)\\n            that.dispatchFailed({reason: 'focus error: ' + e.toString()});\\n        }\\n    }\\n\\n    function findTargetNode(){\\n        logger.log('NodeAction.findTargetNode called')\\n\\n        if(that.triggerActionContext && that.triggerActionContext.foundNode){\\n            logger.log('NodeAction.findTargetNode - found in context')\\n            return that.triggerActionContext.foundNode\\n        }\\n\\n        logger.error('NodeAction.findTargetNode - no node available')\\n        return null\\n    }\\n\\n    function recycleFoundNode(node){\\n        logger.log('NodeAction.recycleFoundNode called')\\n\\n        if(!node){\\n            return\\n        }\\n\\n        if(that.triggerActionContext && that.triggerActionContext.foundNode === node){\\n            logger.log('NodeAction.recycleFoundNode - recycling')\\n            that.triggerActionContext.foundNode = undefined\\n        }\\n    }\\n\\n    function createClickAction(){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Click();\\n    }\\n\\n    function createLongClickAction(){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.LongClick();\\n    }\\n\\n    function createScrollForwardAction(){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.ScrollForward();\\n    }\\n\\n    function createScrollBackwardAction(){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.ScrollBackward();\\n    }\\n\\n    function createSetTextAction(text){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SetText(text);\\n    }\\n\\n    function createFocusAction(){\\n        return new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.Focus();\\n    }\\n}\\n\\nreturn {type}\\n\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/a11y/node-action.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regAction\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]},{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\",\" clearTimeout\"]}]},\"fanfanlo/javajs/v1/project/components/actions/a11y/NodeOperator\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get createExitHandler(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/ExitHandler\\\"].createExitHandler;\\n            }\\n            ,\\n            get createCheckNodesOnShow(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].createCheckNodesOnShow;\\n            }\\n            ,\\n            get createNodeAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].createNodeAction;\\n            }\\n            ,\\n            get globalActionBack(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].globalActionBack;\\n            }\\n            ,\\n            get hideIme(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideIme;\\n            }\\n            ,\\n            get keyboardIsOpen(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].keyboardIsOpen;\\n            }\\n            ,\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get clearTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].clearTimeout;\\n            }\\n            ,\\n            get createIntervalChecker(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/IntervalCheck\\\"].createIntervalChecker;\\n            }\\n            ,\\n            get createA11yOperator(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\\\"].createA11yOperator;\\n            }\\n            }){\\n            \\r\\n\\r\\n\\r\\nlet runningConf = undefined;\\r\\nfunction runNodeOperator(operateConf, logger, that){\\r\\n    runningConf = operateConf;\\r\\n    let shortMsg = `operateConf short info ${operateConf.name ? operateConf.name : JSON.stringify(operateConf)}`\\r\\n    let backToPnAn = !!operateConf.backToPackageActivity\\r\\n    logger.log(\\\"iiiiiiiiiimmmmmmmmmmmmmm logger\\\")\\r\\n    let l  = logger.subLogger(`runNodeOperatorFn22`);\\r\\n    l.log(\\\"iiiiiiiiiiimmmmmmmmmmm l\\\")\\r\\n    logger = l\\r\\n    logger.log(`operateConfIs1`, shortMsg, operateConf);\\r\\n    let exitHandler = createExitHandler(that.dispatcher, [a11yModel], logger);\\r\\n    exitHandler.addExitFn(onExit);\\r\\n    let domain = exitHandler.domain;\\r\\n    let isComplete = false;\\r\\n    function setComplete(){\\r\\n        if(isComplete)return;\\r\\n        let l = logger.subLogger(`setCompleteFn-${operateConf.name}`);\\r\\n        l.log(`complete11 operate conf`, operateConf);\\r\\n        isComplete = true;\\r\\n        onExit();\\r\\n    }\\r\\n    function onExit() {\\r\\n        let l = logger.subLogger(`onExitFn-${operateConf.name}`);\\r\\n        l.log(`onExit1245`, operateConf);\\r\\n        removeListener();\\r\\n    }\\r\\n    function removeListener(){\\r\\n        tryRemoveContentChangeListener();\\r\\n        tryRemovePackageActivityChangeListener()\\r\\n        tryClearLastCheckNodesChanceTimer();\\r\\n    }\\r\\n    let contentChangeListenData = undefined;\\r\\n    function tryRemoveContentChangeListener() {\\r\\n        let data = contentChangeListenData;\\r\\n        contentChangeListenData = undefined;\\r\\n        if (data == undefined) return;\\r\\n        a11yModel.removeListener(data);\\r\\n    }\\r\\n    let packageActivityChangeData = undefined;\\r\\n    function tryRemovePackageActivityChangeListener(){\\r\\n        let data = packageActivityChangeData;\\r\\n        packageActivityChangeData = undefined;\\r\\n        if(data == undefined)return;\\r\\n        a11yModel.removeListener(data);\\r\\n    }\\r\\n\\r\\n    let nodesCheckCompleted = false;\\r\\n    function canRun(){\\r\\n        return !isComplete && !nodesCheckCompleted && runningConf == operateConf;\\r\\n    }\\r\\n    function listenPnAn(){\\r\\n        let l = logger.subLogger(`listenPnAnFn-${operateConf.name}`);\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        if (packageActivityChangeData == undefined) {\\r\\n            packageActivityChangeData = a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastFullScreenPackageActivityChanged, domain, onPackageOrActivityChange);\\r\\n        }\\r\\n    }\\r\\n    function onPackageOrActivityChange(e){\\r\\n        checkPnAnLater();\\r\\n    }\\r\\n    let intervalCheckPnAn = undefined;\\r\\n    function checkPnAnLater(){\\r\\n        if(intervalCheckPnAn == undefined){\\r\\n            intervalCheckPnAn = createIntervalChecker(operateConf.globalBackActionConf.interval, checkPnAn, logger);\\r\\n        }\\r\\n        intervalCheckPnAn.checkRun();\\r\\n    }\\r\\n    let laterCheckNodesCheckTimeOver;\\r\\n    let prevActivity = undefined\\r\\n    function listenPnAnAndCheckLater(){\\r\\n        listenPnAn();\\r\\n        checkPnAnLater();\\r\\n    }\\r\\n    function checkPnAn(){\\r\\n        let l = logger.subLogger(`checkPnAnFn-${operateConf.name}`);\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n\\r\\n        let pn = a11yModel.lastFullScreenPackage;\\r\\n        if (pn != operateConf.packageName) {\\r\\n            l.log(`error error a11yModel.lastFullScreenPackage != operateConf.packageName, a11yModel.lastFullScreenPackage: ${a11yModel.lastFullScreenPackage}, operateConf.packageName:${operateConf.packageName}`);\\r\\n            // packagenode\\r\\n            tryRemoveContentChangeListener();\\r\\n            dispatchFailed({reason:`package not match`, keyboardIsOpen:keyboardIsOpen()})\\r\\n            return;\\r\\n        }\\r\\n        let nowActivity = a11yModel.lastFullScreenActivity;\\r\\n        let isActivityMatch = operateConf.activities.some(an => an == nowActivity);\\r\\n        l.log(\\\"isMathActivity22\\\", isActivityMatch, nowActivity, keyboardIsOpen())\\r\\n\\r\\n        if(!isActivityMatch){\\r\\n            tryRemoveContentChangeListener();\\r\\n            if(!operateConf.globalBackActionConf){\\r\\n                dispatchFailed({nowActivity,activities:operateConf.activities, reason:\\\"activity not match\\\"});\\r\\n                return;\\r\\n            }\\r\\n            let interval = operateConf.globalBackActionConf.interval;\\r\\n            if(keyboardIsOpen()){\\r\\n                interval = 10;\\r\\n            }else if(prevActivity != nowActivity){\\r\\n                interval = 10;\\r\\n            }\\r\\n            prevActivity = nowActivity\\r\\n            let bl = globalActionBack(interval);\\r\\n            l.log(`global2 action back ${bl}`);\\r\\n            listenPnAnAndCheckLater();\\r\\n            return;\\r\\n        }\\r\\n        if(operateConf.nodeConditions){\\r\\n            tryRemovePackageActivityChangeListener();\\r\\n            checkNodesLater();\\r\\n        }else{\\r\\n            dispatchSuccess({from:\\\"checkPnAn\\\"});\\r\\n        }\\r\\n    }\\r\\n    function runLaterCheckNodesCheckTimeOver(){\\r\\n        if(laterCheckNodesCheckTimeOver != undefined)return;\\r\\n        laterCheckNodesCheckTimeOver = setTimeout(onLaterCheckNodesCheckTimeOver, operateConf.nodesLastCheckTime)\\r\\n    }\\r\\n    function tryClearLastCheckNodesChanceTimer(){\\r\\n        let id = laterCheckNodesCheckTimeOver;\\r\\n        laterCheckNodesCheckTimeOver = undefined;\\r\\n        clearTimeout(id);\\r\\n    }\\r\\n    function onLaterCheckNodesCheckTimeOver(){\\r\\n        dispatchFailed({reason:`nodesLastCheckTime time over ${operateConf.nodesLastCheckTime}`})\\r\\n    }\\r\\n    let intervalCheckLaterCheckNodes = undefined;\\r\\n    function checkNodesLater(){\\r\\n        let l = logger.subLogger(`checkNodesLaterFn-${operateConf.name}`);\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        // runLaterCheckNodes();\\r\\n        if(intervalCheckLaterCheckNodes == undefined){\\r\\n            intervalCheckLaterCheckNodes = createIntervalChecker(operateConf.nodesCheckInterval, checkNodes, l);\\r\\n        }\\r\\n        l.log(`run2 intervalCheckLaterCheckNodes.checkRun`);\\r\\n        intervalCheckLaterCheckNodes.checkRun();\\r\\n    }\\r\\n    let nodesChecker = undefined;\\r\\n    function checkNodes(){\\r\\n        let l = logger.subLogger(`checkNodesFn-${operateConf.name}`);\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        runLaterCheckNodesCheckTimeOver();\\r\\n        if(nodesChecker == undefined){\\r\\n            nodesChecker = createCheckNodesOnShow(operateConf, onCheckNodesBack, l)\\r\\n        }\\r\\n        l.log(`nodesChecker.check22`);\\r\\n        nodesChecker.check();\\r\\n    }\\r\\n    function onCheckNodesBack(nodes, isOk, err, matchedCheckList){\\r\\n        let l = logger.subLogger(`onCheckNodesBack2-${operateConf.name}`);\\r\\n        l.log(`1onCheckNodesBack isRunnable=${that.isRunnable}, canrun=${canRun()}`)\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        if(isOk){\\r\\n            setComplete();\\r\\n        }\\r\\n        l.log(\\\"1params\\\", nodes ? nodes.size() : \\\"no nodes result\\\", isOk, err)\\r\\n        l.log('1matchedCheckList', matchedCheckList)\\r\\n        l.log('1conditions', operateConf.conditions)\\r\\n        l.log('1Nodeconditions', operateConf.nodeConditions)\\r\\n        if (isOk) {\\r\\n            nodesCheckCompleted = true;\\r\\n            removeListener();\\r\\n            checkNodesAction(nodes, matchedCheckList);\\r\\n        }else{\\r\\n            l.log(`bbbbbbbbbbbbbbbackonCheckNodesBack isRunnable ${that.isRunnable}, canrun ${canRun()}`)\\r\\n            onNodesNotMatch();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function onNodesNotMatch(){\\r\\n        if(isInPnAn()){\\r\\n            listenContentChange();\\r\\n        }else if(keyboardIsOpen()){\\r\\n            // hideIme();\\r\\n            globalActionBack(operateConf.globalBackActionConf.interval)\\r\\n            // pn animeimepn ancheckNodesLater.\\r\\n            setTimeout(checkNodesLater, 100 * 10);\\r\\n        }else{\\r\\n            checkPnAn();\\r\\n        }\\r\\n    }\\r\\n    function isInPnAn(){\\r\\n        let pn = a11yModel.lastFullScreenPackage;\\r\\n        if(pn != operateConf.packageName)return false;\\r\\n        let activity = a11yModel.lastFullScreenActivity;\\r\\n        let bl = operateConf.activities.some(an => an == activity);\\r\\n        return bl;\\r\\n    }\\r\\n    function listenContentChange() {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        if(contentChangeListenData != undefined)return;\\r\\n        tryRemoveContentChangeListener();\\r\\n        let typeId = android.view.accessibility.AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED\\r\\n        let type = com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.getAccessibilityEventType(typeId);\\r\\n        contentChangeListenData = a11yModel.listenDomainData(type, domain, onContentChange)\\r\\n        checkNodes();\\r\\n    }\\r\\n\\r\\n    function onContentChange(e) {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        checkNodes();\\r\\n    }\\r\\n\\r\\n    function checkNodesAction(nodes, matchedCheckList){\\r\\n        if (!that.isRunnable) return;\\r\\n        let l = logger.subLogger(`checkNodesAction-${operateConf.name}`);\\r\\n        l.log(`2node size ${nodes.size()}`)\\r\\n        l.log(`2matchedCheckList ${matchedCheckList}`)\\r\\n        if((!nodes || nodes.size() == 0) && (!matchedCheckList || matchedCheckList.length == 0)){\\r\\n            dispatchFailed({reason:`no nodes=${(!nodes || nodes.size() == 0)}, no matchedCheckList=${(!matchedCheckList || matchedCheckList.length == 0)}`})\\r\\n            return;\\r\\n        }\\r\\n        let nodeConditions = operateConf.nodeConditions;\\r\\n        for (let i = 0; i < matchedCheckList.length; i++) {\\r\\n            let matchConf = matchedCheckList[i];\\r\\n            l.log(\\\"doaction1\\\", matchConf)\\r\\n            if(!matchConf.doAction)continue;\\r\\n            let nodeConf = nodeConditions[matchedCheckList[i].index];\\r\\n            l.log(`1nodeConf is`, nodeConf);\\r\\n            let node = nodes[matchedCheckList[i].index];\\r\\n            let actionConf = nodeConf.action;\\r\\n            l.log(`1actionConf1`, actionConf)\\r\\n            let nodeAction = createNodeAction(actionConf);\\r\\n            let beforeActionDelay = 1;\\r\\n            let afterActionDelay = 1;\\r\\n            if(nodeAction.type == \\\"SetText\\\"){\\r\\n                beforeActionDelay = actionConf.beforeSetTextDelay || 100 * 1;\\r\\n                afterActionDelay = actionConf.afterSetTextDelay || 100 * 2;\\r\\n                l.log(\\\"beforeSetTextDelay333\\\", beforeActionDelay, afterActionDelay)\\r\\n            }\\r\\n            setTimeout(()=>{\\r\\n                l.log(`nodeAction1`, nodeAction.type)\\r\\n                l.log(`nodeAction2`, nodeAction)\\r\\n                let bl = a11yModel.doAction(node, nodeAction);\\r\\n                l.log(\\\"1bbbbbbbbbbbbbbbbbbbbbb2234\\\", bl, nodeAction.type, \\\"bltypeis\\\",typeof bl);\\r\\n                if(bl){\\r\\n                    setTimeout(()=>{\\r\\n                        l.log(\\\"bbbbbbbbbbbllllllll\\\")\\r\\n                        checkNodesActionNext(actionConf)\\r\\n                    }, afterActionDelay)\\r\\n                    return;\\r\\n                }else{\\r\\n                    // matchnodechecklistindex\\r\\n                }\\r\\n            }, beforeActionDelay)\\r\\n            return\\r\\n        }\\r\\n        l.log(\\\"dddddddddddddispach success\\\")\\r\\n        // success without actionConf.doAction\\r\\n        dispatchSuccess({checkNodesAction:\\\"no action need to do\\\"});\\r\\n    }\\r\\n    function checkNodesActionNext(actionConf){\\r\\n        if (!that.isRunnable) return;\\r\\n        let l = logger.subLogger(`checkNodesActionNext-${operateConf.name}`);\\r\\n        l.log('actionConf1is', actionConf)\\r\\n        if(!actionConf.nextOperateConf){\\r\\n            l.log('dispatchSuccess23')\\r\\n            dispatchSuccess({checkNodesActionNext:\\\"all operator complete\\\"});\\r\\n        }else{\\r\\n            l.log('5createa11yoperator5')\\r\\n            createA11yOperator(actionConf.nextOperateConf, l, that).runOperator();\\r\\n        }\\r\\n    }\\r\\n    function dispatchSuccess(data){\\r\\n        let l = logger.subLogger(`dispatchSuccessFn-${operateConf.name}`);\\r\\n        if(!canRun())return;\\r\\n        setComplete();\\r\\n        l.log(`success2 data`, data);\\r\\n        if(operateConf.dispatchSuccess){\\r\\n            l.log('nodeOperator.dispatchSuccess2')\\r\\n            that.dispatchSuccess();\\r\\n        }\\r\\n    }\\r\\n    function dispatchFailed(data){\\r\\n        let l = logger.subLogger(`dispatchFailedFn-${operateConf.name}`);\\r\\n        if(!canRun())return;\\r\\n        setComplete();\\r\\n        l.log(`failed reason`, data);\\r\\n        if(operateConf.dispatchFailed){\\r\\n            l.log('nodeOperator.dispatchFailed2')\\r\\n            that.dispatchFailed(data);\\r\\n        }\\r\\n    }\\r\\n    function checkOvertime() {\\r\\n        let l = logger.subLogger(`checkOvertime-${operateConf.name}`);\\r\\n        let overtime = operateConf.overtime;\\r\\n        l.log(`1overtime1 is ${overtime}`);\\r\\n        if (overtime == undefined || overtime <= 0) return;\\r\\n        setTimeout(() => {\\r\\n            l.log(`isRunnable is ${that.isRunnable}, canrun is ${canRun()}`);\\r\\n            if (that.isRunnable && !isComplete) {\\r\\n                l.log(`call project terminate msg=${operateConf.terminateMsg}`, operateConf);\\r\\n                that.project.terminate();\\r\\n            }\\r\\n        }, overtime)\\r\\n    }\\r\\n    function doAction(){\\r\\n        checkOvertime();\\r\\n        checkPnAn();\\r\\n    }\\r\\n    return {doAction}\\r\\n}\\r\\n\\r\\nreturn {runNodeOperator}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/a11y/NodeOperator.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/utils/ExitHandler\",\"properties\":[\"createExitHandler\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"createCheckNodesOnShow\",\"\\r\\n    createNodeAction\",\"\\r\\n    globalActionBack\",\" hideIme\",\" keyboardIsOpen\"]},{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\",\" clearTimeout\"]},{\"path\":\"fanfanlo/javajs/v1/utils/IntervalCheck\",\"properties\":[\"createIntervalChecker\"]},{\"path\":\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\",\"properties\":[\"createA11yOperator\"]}]},\"fanfanlo/javajs/v1/project/components/actions/a11y/NodesChecker\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get createCheckNodesOnShow(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].createCheckNodesOnShow;\\n            }\\n            ,\\n            get createNodeAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].createNodeAction;\\n            }\\n            ,\\n            get globalActionBack(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].globalActionBack;\\n            }\\n            ,\\n            get hideImeIfPackageOpened(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideImeIfPackageOpened;\\n            }\\n            ,\\n            get keyboardIsOpen(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].keyboardIsOpen;\\n            }\\n            ,\\n            get createIntervalChecker(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/IntervalCheck\\\"].createIntervalChecker;\\n            }\\n            ,\\n            get createExitHandler(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/ExitHandler\\\"].createExitHandler;\\n            }\\n            ,\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get clearTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].clearTimeout;\\n            }\\n            ,\\n            get createA11yOperator(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\\\"].createA11yOperator;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet runningOerateConf = undefined;\\r\\n//@permission android.permission.BIND_ACCESSIBILITY_SERVICE\\r\\nfunction createNodeChecker(operateConf, logger, that) {\\r\\n    runningOerateConf = operateConf;\\r\\n    logger = logger.createSub(\\\"createNodeChecker\\\");\\r\\n    logger.log('createNodeCheckeroperateConf', operateConf)\\r\\n    let exitHandler = createExitHandler(that.dispatcher, [a11yModel], logger);\\r\\n    exitHandler.addExitFn(onExit);\\r\\n    let domain = exitHandler.domain;\\r\\n    let isComplete = false;\\r\\n    function setComplete(){\\r\\n        isComplete = true;\\r\\n        onExit();\\r\\n    }\\r\\n    let nodeDelayChecker = createIntervalChecker(operateConf.nodesCheckInterval, nodesCheckerCheck, logger)\\r\\n    let checkFnChecker = createIntervalChecker(operateConf.nodesCheckInterval, check, logger);\\r\\n\\r\\n    let isCheckNodesLastChance = false;\\r\\n    let checkNodesLastSetTimeoutID = undefined;\\r\\n\\r\\n    function resetCheckNodesLastChance(){\\r\\n        isCheckNodesLastChance = false;\\r\\n        clearCheckNodesLastSetTimeout();\\r\\n    }\\r\\n    function clearCheckNodesLastSetTimeout(){\\r\\n        let id = checkNodesLastSetTimeoutID;\\r\\n        checkNodesLastSetTimeoutID = undefined;\\r\\n        if(!id)return;\\r\\n        clearTimeout(id)\\r\\n    }\\r\\n    function runCheckNodesLastSetTimeout(){\\r\\n        if(checkNodesLastSetTimeoutID != undefined)return;\\r\\n        let delay = operateConf.nodesLastCheckTime == undefined || operateConf.nodesLastCheckTime <=0 ? 100 * 15 : operateConf.nodesLastCheckTime\\r\\n        checkNodesLastSetTimeoutID = setTimeout(runNodesLastCheck, delay)\\r\\n    }\\r\\n    function runNodesLastCheck(){\\r\\n        let l = logger.subLogger(`runNodesLastCheck`);\\r\\n        l.log(\\\"1lastNodesCheck\\\")\\r\\n        clearCheckNodesLastSetTimeout();\\r\\n        isCheckNodesLastChance = true;\\r\\n        nodesCheckerCheck();\\r\\n\\r\\n    }\\r\\n    let checkDoActionCount = 0;\\r\\n    let nodesCheckCompleted = false;\\r\\n    function canRun(){\\r\\n        return !nodesCheckCompleted &&  !isComplete && operateConf == runningOerateConf && that.isActionable;\\r\\n    }\\r\\n    function onExit() {\\r\\n        let l = logger.subLogger(`onExit`);\\r\\n        l.log('eeeeeeeeeeeeexit NodesChecker', operateConf);\\r\\n        checkFnChecker.exit();\\r\\n        nodeDelayChecker.exit();\\r\\n        removeListener();\\r\\n    }\\r\\n    function removeListener(){\\r\\n        tryRemoveContentChangeListener();\\r\\n        tryRemovePackageActivityChangeListener()\\r\\n    }\\r\\n    function checkDoAction() {\\r\\n        let l = logger.subLogger(`checkDoAction`);\\r\\n        if (keyboardIsOpen()) {\\r\\n            l.log(`keyboard is open`);\\r\\n            // ime\\r\\n            // \\r\\n            if(!operateConf.globalBackActionConf){\\r\\n                l.log(`globalbackactionconf not set`, operateConf)\\r\\n                that.dispatchFailed({msg:\\\"ime is open, globalBackActionConf not set\\\"});\\r\\n                return;\\r\\n            }\\r\\n            if (++checkDoActionCount > 5) {\\r\\n                l.log(`checkDoActionCount more then 5`)\\r\\n                that.dispatchFailed({msg:\\\"checkDoActionCount more then 5\\\"});\\r\\n                return;\\r\\n            }\\r\\n            let bl = hideImeIfPackageOpened(operateConf.packageName);\\r\\n            l.log(`hideImeIfPackageOpened return bl = ${bl}`);\\r\\n            if (bl) {\\r\\n                listenPackageActivity();\\r\\n            }\\r\\n\\r\\n            l.log(`hideImeIfPackageOpened wait settimeout`);\\r\\n            setTimeout(() => {\\r\\n                l.log(`hideImeIfPackageOpened settimeout checkDoAction`);\\r\\n                checkDoAction();\\r\\n            }, 100 * 15)\\r\\n        } else {\\r\\n            act();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function doAction() {\\r\\n        logger.log(\\\"doaction\\\")\\r\\n        checkOvertime();\\r\\n        // that.exitTriggers();\\r\\n        checkDoAction();\\r\\n\\r\\n    }\\r\\n\\r\\n\\r\\n    that.doAction = doAction.bind(that);\\r\\n\\r\\n    let contentChangeListenData = undefined;\\r\\n\\r\\n    function tryRemoveContentChangeListener() {\\r\\n        let data = contentChangeListenData;\\r\\n        contentChangeListenData = undefined;\\r\\n        if (data == undefined) return;\\r\\n        a11yModel.removeListener(data);\\r\\n    }\\r\\n\\r\\n    function act() {\\r\\n        logger.log(`act1`);\\r\\n        listenPackageActivity();\\r\\n        checkFnChecker.checkRun();\\r\\n    }\\r\\n\\r\\n    let packageActivityChangeData = undefined;\\r\\n\\r\\n    function tryRemovePackageActivityChangeListener(){\\r\\n        let data = packageActivityChangeData;\\r\\n        packageActivityChangeData = undefined;\\r\\n        if(data == undefined)return;\\r\\n        a11yModel.removeListener(data);\\r\\n    }\\r\\n    function listenPackageActivity() {\\r\\n        let l = logger.subLogger(`listenPackageActivity`);\\r\\n        // l.log(\\\"listenpackageactivity1\\\")\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        if (packageActivityChangeData == undefined) {\\r\\n            l.log(\\\"listenpackageactivity1 create\\\")\\r\\n            packageActivityChangeData = a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastFullScreenPackageActivityChanged, domain, onPackageOrActivityChange);\\r\\n        }\\r\\n        listenContentChange();\\r\\n    }\\r\\n\\r\\n    function onPackageOrActivityChange(e) {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        resetCheckNodesLastChance();\\r\\n        checkFnChecker.checkRun();\\r\\n    }\\r\\n\\r\\n    function check() {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        let l = logger.subLogger(`1check`);\\r\\n        if (a11yModel.lastFullScreenPackage != operateConf.packageName) {\\r\\n            l.log(`error error a11yModel.lastFullScreenPackage != operateConf.packageName, a11yModel.lastFullScreenPackage: ${a11yModel.lastFullScreenPackage}, operateConf.packageName:${operateConf.packageName}`);\\r\\n            tryRemoveContentChangeListener();\\r\\n            //\\r\\n            return;\\r\\n        }\\r\\n        let nowActivity = a11yModel.lastFullScreenActivity;\\r\\n        let isMathActivity = operateConf.activities.some(an => an == nowActivity);\\r\\n        l.log(\\\"isMathActivity\\\", isMathActivity, nowActivity)\\r\\n        if (!isMathActivity && operateConf.globalBackActionConf) {\\r\\n            l.log(`isMatchActivity=false`);\\r\\n            let bl = globalActionBack(operateConf.globalBackActionConf.interval);\\r\\n            checkFnChecker.checkRun();\\r\\n        } else if (operateConf.nodeConditions) {\\r\\n            l.log(`has nodeConditions1`);\\r\\n            checkNodes();\\r\\n        } else {\\r\\n            l.log(`dispatchSuccess2`);\\r\\n            that.dispatchSuccess();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function listenContentChange() {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        tryRemoveContentChangeListener();\\r\\n        let typeId = android.view.accessibility.AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED\\r\\n        let type = com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.getAccessibilityEventType(typeId);\\r\\n        contentChangeListenData = a11yModel.listenDomainData(type, domain, onContentChange)\\r\\n    }\\r\\n\\r\\n    function onContentChange(e) {\\r\\n        let l = logger.subLogger(`onContentChange`);\\r\\n        // l.log(`ccccccccccontentchange isRunnable ${that.isRunnable}, canrun is  ${canRun()}`)\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        runCheckNodesLastSetTimeout()\\r\\n        checkFnChecker.checkRun();\\r\\n    }\\r\\n\\r\\n    let nodesChecker = undefined;\\r\\n\\r\\n    function checkNodes() {\\r\\n        let l = logger.subLogger(`checkNodes`);\\r\\n        // l.log(\\\"tttttt isRunnable, canRun\\\", that.isRunnable, canRun());\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        nodeDelayChecker.checkRun();\\r\\n    }\\r\\n\\r\\n    function nodesCheckerCheck() {\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        let l = logger.subLogger(`1nodesCheckerCheck`);\\r\\n        // l.log(`nnnnnnnnodesCheckerCheck isRunnable=${that.isRunnable}, canrun=${canRun()}`)\\r\\n        if (!nodesChecker) {\\r\\n            l.log('create nodesChecker')\\r\\n            nodesChecker = createCheckNodesOnShow(operateConf, onCheckNodesBack, logger)\\r\\n        }\\r\\n        // l.log(`run nodesChecker.check223 ${that.isRunnable}, ${canRun()}`)\\r\\n        nodesChecker.check();\\r\\n    }\\r\\n\\r\\n    function onCheckNodesBack(nodes, isOk, err, matchedCheckList) {\\r\\n        let l = logger.subLogger(`onCheckNodesBack`);\\r\\n        l.log(`ccccccccconCheckNodesBack isRunnable=${that.isRunnable}, canrun=${canRun()}`)\\r\\n        if (!that.isRunnable || !canRun()) return;\\r\\n        if(isOk){\\r\\n            setComplete();\\r\\n        }\\r\\n        l.log(\\\"1params\\\", nodes ? nodes.size() : \\\"no nodes result\\\", isOk, err)\\r\\n        l.log('1matchedCheckList is', matchedCheckList)\\r\\n        l.log('1conditions are', operateConf.conditions)\\r\\n        l.log('1Nodeconditions are', operateConf.nodeConditions)\\r\\n        if (isOk) {\\r\\n            resetCheckNodesLastChance();\\r\\n            nodesCheckCompleted = true;\\r\\n            removeListener();\\r\\n            checkNodesAction(nodes, matchedCheckList);\\r\\n        } else if(!isComplete && isCheckNodesLastChance && !nodesCheckCompleted && operateConf.globalBackActionConf) {\\r\\n            l.log(`1isCheckNodesLastChance=${isCheckNodesLastChance}, 1nodesCheckCompleted=${nodesCheckCompleted}`)\\r\\n            resetCheckNodesLastChance();\\r\\n            let bl = globalActionBack(operateConf.globalBackActionConf.interval);\\r\\n            l.log(`12globalActionback2 bl=${bl}`, operateConf);\\r\\n        }else{\\r\\n            l.log(`bbbbbbbbbbbbbbbackonCheckNodesBack isRunnable ${that.isRunnable}, canrun ${canRun()}`)\\r\\n            nodesCheckerCheck();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function checkNodesAction(nodes, matchedCheckList){\\r\\n        if (!that.isRunnable) return;\\r\\n        let l = logger.subLogger(`checkNodesAction`);\\r\\n        l.log(`2node size ${nodes.size()}`)\\r\\n        l.log(`2matchedCheckList ${matchedCheckList}`)\\r\\n        if((!nodes || nodes.size() == 0) && (!matchedCheckList || matchedCheckList.length == 0))return;\\r\\n        let nodeConditions = operateConf.nodeConditions;\\r\\n        for (let i = 0; i < matchedCheckList.length; i++) {\\r\\n            let matchConf = matchedCheckList[i];\\r\\n            l.log(\\\"doaction1\\\", matchConf.doAction)\\r\\n            if(!matchConf.doAction)continue;\\r\\n            let nodeConf = nodeConditions[matchedCheckList[i].index];\\r\\n            l.log(`1nodeConf is`, nodeConf);\\r\\n            let node = nodes[matchedCheckList[i].index];\\r\\n            let actionConf = nodeConf.action;\\r\\n            l.log(`1actionConf1`, actionConf)\\r\\n            let nodeAction = createNodeAction(actionConf);\\r\\n            l.log(`nodeAction1`, nodeAction.type)\\r\\n            l.log(`nodeAction2`, nodeAction)\\r\\n            let bl = a11yModel.doAction(node, nodeAction);\\r\\n            l.log(\\\"1bbbbbbbbbbbbbbbbbbbbbb2234\\\", bl, nodeAction.type, \\\"bltypeis\\\",typeof bl);\\r\\n            if(bl){\\r\\n                l.log(\\\"bbbbbbbbbbbllllllll\\\")\\r\\n                checkNodesActionNext(actionConf)\\r\\n                return;\\r\\n            }\\r\\n        }\\r\\n        l.log(\\\"dddddddddddddispach success\\\")\\r\\n        // success without actionConf.doAction\\r\\n        that.dispatchSuccess();\\r\\n    }\\r\\n    function checkNodesActionNext(actionConf){\\r\\n        if (!that.isRunnable) return;\\r\\n        let l = logger.subLogger(`checkNodesActionNext`);\\r\\n        l.log('actionConf1is', actionConf)\\r\\n        if(!actionConf.nextOperateConf){\\r\\n            l.log('dispatchSuccess23')\\r\\n            that.dispatchSuccess();\\r\\n        }else{\\r\\n            l.log('5createa11yoperator5')\\r\\n            createA11yOperator(actionConf.nextOperateConf, logger, that).runOperator();\\r\\n        }\\r\\n    }\\r\\n    function checkOvertime() {\\r\\n        let l = logger.subLogger(`checkOvertime`);\\r\\n        let overtime = operateConf.overtime;\\r\\n        l.log(`1overtime1 is ${overtime}`);\\r\\n        if (overtime == undefined || overtime <= 0) return;\\r\\n        setTimeout(() => {\\r\\n            l.log(`isRunnable is ${that.isRunnable}, canrun is ${canRun()}`);\\r\\n            if (that.isRunnable && !isComplete) {\\r\\n                l.log(`call project terminate msg=${operateConf.terminateMsg}`, operateConf);\\r\\n                that.project.terminate();\\r\\n            }\\r\\n        }, overtime)\\r\\n    }\\r\\n\\r\\n    //  onActionPause\\r\\n    that.onActionPause = function(){\\r\\n        let l = logger.subLogger(`onActionPause`);\\r\\n        l.log(\\\"NodesChecker \\\");\\r\\n        // \\r\\n        removeListener();\\r\\n        // \\r\\n        if(checkFnChecker){\\r\\n            checkFnChecker.pause();\\r\\n        }\\r\\n        if(nodeDelayChecker){\\r\\n            nodeDelayChecker.pause();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    //  onActionResume\\r\\n    that.onActionResume = function(){\\r\\n        let l = logger.subLogger(`onActionResume`);\\r\\n        l.log(\\\"NodesChecker \\\");\\r\\n        // \\r\\n        listenPackageActivity();\\r\\n        // \\r\\n        if(checkFnChecker){\\r\\n            checkFnChecker.resume();\\r\\n        }\\r\\n        if(nodeDelayChecker){\\r\\n            nodeDelayChecker.resume();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    return {doAction}\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\nreturn {createNodeChecker}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/a11y/NodesChecker.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"createCheckNodesOnShow\",\" createNodeAction\",\"\\r\\n    globalActionBack\",\" hideImeIfPackageOpened\",\"\\r\\n    keyboardIsOpen\"]},{\"path\":\"fanfanlo/javajs/v1/utils/IntervalCheck\",\"properties\":[\"createIntervalChecker\"]},{\"path\":\"fanfanlo/javajs/v1/utils/ExitHandler\",\"properties\":[\"createExitHandler\"]},{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\",\" clearTimeout\"]},{\"path\":\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\",\"properties\":[\"createA11yOperator\"]}]},\"fanfanlo/javajs/v1/project/components/actions/a11y/TryBackToMain\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regAction;\\n            }\\n            ,\\n            get createCheckNodesOnShow(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].createCheckNodesOnShow;\\n            }\\n            ,\\n            get globalActionBack(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].globalActionBack;\\n            }\\n            ,\\n            get hideImeIfPackageOpened(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideImeIfPackageOpened;\\n            }\\n            ,\\n            get keyboardIsOpen(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].keyboardIsOpen;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            ,\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get createIntervalChecker(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/IntervalCheck\\\"].createIntervalChecker;\\n            }\\n            ,\\n            get createExitHandler(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/ExitHandler\\\"].createExitHandler;\\n            }\\n            ,\\n            get createA11yOperator(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\\\"].createA11yOperator;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/actions/a11y/TryBackToMain\\\"\\r\\n\\r\\nonLibReady(()=>{\\r\\n    regAction(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/action/a11y/TryBackToMain.java.js`);\\r\\n\\r\\nfunction attach(that){\\r\\n    let superDoAction = that.doAction;\\r\\n    let logger = that.logger.createSub(\\\"TryBackToMainClazz\\\");\\r\\n    console.log(\\\"tyr back to main running\\\")\\r\\n    function doAction(){\\r\\n        superDoAction();\\r\\n        that.exitTriggers();\\r\\n        createA11yOperator(that.data, logger, that).runOperator();\\r\\n        checkOvertime();\\r\\n    }\\r\\n    function checkOvertime(){\\r\\n        let l = logger.subLogger(`TryBackToMainClazz.checkOvertimeFn`);\\r\\n        let overtime = that.data.overtime;\\r\\n        l.log(`try back to main overtime is ${overtime}`);\\r\\n        if(overtime == undefined || overtime <=0)return;\\r\\n        setTimeout(()=>{\\r\\n            l.log(`isRunnable is ${that.isRunnable}`);\\r\\n            if(that.isRunnable){\\r\\n                l.log(`call project terminate`);\\r\\n                that.project.terminate();\\r\\n            }\\r\\n        }, overtime)\\r\\n    }\\r\\n    that.doAction = doAction.bind(that);\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/a11y/TryBackToMain.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regAction\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"createCheckNodesOnShow\",\"\\r\\n    globalActionBack\",\" hideImeIfPackageOpened\",\"\\r\\n    keyboardIsOpen\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]},{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\"]},{\"path\":\"fanfanlo/javajs/v1/utils/IntervalCheck\",\"properties\":[\"createIntervalChecker\"]},{\"path\":\"fanfanlo/javajs/v1/utils/ExitHandler\",\"properties\":[\"createExitHandler\"]},{\"path\":\"fanfanlo/javajs/v1/project/components/action/a11y/A11yOperator\",\"properties\":[\"createA11yOperator\"]}]},\"fanfanlo/javajs/v1/project/components/actions/app/openApp\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regAction;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/actions/app/openApp\\\";\\r\\n\\r\\n//  JSON \\r\\nfunction toJsonString(obj) {\\r\\n    try {\\r\\n        return com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(obj);\\r\\n    } catch (e) {\\r\\n        try {\\r\\n            return JSON.stringify(obj);\\r\\n        } catch (e2) {\\r\\n            return String(obj);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nonLibReady(()=>{\\r\\n    regAction(type, attach)\\r\\n}, `src.droid.java_js.fanfanlo.javajs.v1.project.components.action.app.openApp.java.js`)\\r\\nfunction attach(that){\\r\\n    let superDoAction = that.doAction;\\r\\n    let logger = that.logger;\\r\\n    let domain = {};\\r\\n\\r\\n    logger.log(\\\"[attach]  attach openApp action\\\");\\r\\n    logger.log(\\\"[attach] that.id:\\\", that.id);\\r\\n    logger.log(\\\"[attach] that.data:\\\", toJsonString(that.data));\\r\\n\\r\\n    function onScriptCallExit(){\\r\\n        logger.log(\\\"onScriptCallExit\\\", that.baseMsg)\\r\\n        onExit();\\r\\n    }\\r\\n    addScriptExitListener(onScriptCallExit);\\r\\n    that.dispatcher.listenData(eventTypeExit, onExit);\\r\\n    that.dispatcher.listenData(eventTypeComplete, onExit);\\r\\n    function onExit(e){\\r\\n        logger.log(\\\"OpenAppOnExit\\\")\\r\\n        clean();\\r\\n    }\\r\\n    function clean(){\\r\\n        logger.log(\\\"[clean] \\\");\\r\\n        a11yModel.removeDomain(domain);\\r\\n        removeScriptExitListener(onScriptCallExit);\\r\\n        logger.log(\\\"[clean] \\\");\\r\\n    }\\r\\n\\r\\n    that.doAction = doAction.bind(that);\\r\\n    function doAction() {\\r\\n        logger.log(\\\"[doAction] \\\");\\r\\n        logger.log(\\\"[doAction] that.data.packageName:\\\", that.data.packageName);\\r\\n        superDoAction();\\r\\n        logger.log(\\\"[doAction] superDoAction \\\");\\r\\n        check();\\r\\n        logger.log(\\\"[doAction] check \\\");\\r\\n    }\\r\\n\\r\\n    function check(){\\r\\n        logger.log(\\\"[check] \\\");\\r\\n        logger.log(\\\"[check] that.data.packageName:\\\", that.data.packageName);\\r\\n        logger.log(\\\"[check] a11yModel.lastFullScreenPackage:\\\", a11yModel.lastFullScreenPackage);\\r\\n        logger.log(\\\"[check] a11yModel.lastPackage:\\\", a11yModel.lastPackage);\\r\\n\\r\\n        if(trySuccess()){\\r\\n            logger.log(\\\"[check] trySuccess  true\\\");\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        logger.log(\\\"[check] trySuccess  false app\\\");\\r\\n\\r\\n        // \\r\\n        logger.log(\\\"[check]  eventLastFullScreenPackageChanged \\\");\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastFullScreenPackageChanged, domain, onFullScreenPackageChange);\\r\\n\\r\\n        logger.log(\\\"[check]  eventLastPackageChanged \\\");\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastPackageChanged, domain, onPackageChange);\\r\\n\\r\\n        logger.log(\\\"[check]  openAppWithSelfFirst, packageName:\\\", that.data.packageName);\\r\\n        com.fanfanlo.lib.intent.Funcs.openAppWithSelfFirst(that.data.packageName);\\r\\n        logger.log(\\\"[check] openAppWithSelfFirst \\\");\\r\\n    }\\r\\n\\r\\n    function onFullScreenPackageChange(e){\\r\\n        logger.log(\\\"[onFullScreenPackageChange] \\\");\\r\\n        logger.log(\\\"[onFullScreenPackageChange] event:\\\", toJsonString(e));\\r\\n        logger.log(\\\"[onFullScreenPackageChange] a11yModel.lastFullScreenPackage:\\\", a11yModel.lastFullScreenPackage);\\r\\n        trySuccess();\\r\\n    }\\r\\n\\r\\n    function onPackageChange(e){\\r\\n        logger.log(\\\"[onPackageChange] \\\");\\r\\n        logger.log(\\\"[onPackageChange] event:\\\", toJsonString(e));\\r\\n        logger.log(\\\"[onPackageChange] a11yModel.lastPackage:\\\", a11yModel.lastPackage);\\r\\n        logger.log(\\\"[onPackageChange] a11yModel.lastFullScreenPackage:\\\", a11yModel.lastFullScreenPackage);\\r\\n        trySuccess();\\r\\n    }\\r\\n\\r\\n    function trySuccess(){\\r\\n        logger.log(\\\"[trySuccess] \\\");\\r\\n        logger.log(\\\"[trySuccess] a11yModel.lastFullScreenPackage:\\\", a11yModel.lastFullScreenPackage);\\r\\n        logger.log(\\\"[trySuccess] that.data.packageName:\\\", that.data.packageName);\\r\\n\\r\\n        var currentPackage = a11yModel.lastFullScreenPackage;\\r\\n        var targetPackage = that.data.packageName;\\r\\n        var isMatch = currentPackage == targetPackage;\\r\\n\\r\\n        logger.log(\\\"[trySuccess] :\\\", isMatch);\\r\\n\\r\\n        if(!isMatch){\\r\\n            logger.log(\\\"[trySuccess]  false\\\");\\r\\n            return false;\\r\\n        }\\r\\n\\r\\n        logger.log(\\\"[trySuccess]  dispatchSuccess\\\");\\r\\n        that.dispatchSuccess();\\r\\n        logger.log(\\\"[trySuccess] dispatchSuccess \\\");\\r\\n        return true;\\r\\n    }\\r\\n}\\r\\n\\r\\nreturn {type}\\r\\n\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/app/openApp.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regAction\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]}]},\"fanfanlo/javajs/v1/project/components/actions/floatwindow/showFloatWindow\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regAction(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regAction;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/actions/floatwindow/showFloatWindow\\\";\\r\\n\\r\\nonLibReady(()=>{\\r\\n    console.log('[showFloatWindow] onLibReady called, registering action type:', type);\\r\\n    regAction(type, attach)\\r\\n}, `src.droid.java_js.fanfanlo.javajs.v1.project.components.actions.floatwindow.showFloatWindow.java.js`)\\r\\n\\r\\nfunction attach(that){\\r\\n    console.log('[showFloatWindow.attach] called, that:', that);\\r\\n    let superDoAction = that.doAction;\\r\\n    let logger = that.logger;\\r\\n    logger.log('[showFloatWindow.attach] initializing action');\\r\\n\\r\\n    // \\r\\n    let exitListener = null;\\r\\n    let completeListener = null;\\r\\n    let dismissListener = null;\\r\\n\\r\\n    // \\r\\n    function onScriptCallExit(){\\r\\n        logger.log(\\\"[showFloatWindow.onScriptCallExit]\\\", that.baseMsg);\\r\\n        onExit();\\r\\n    }\\r\\n    addScriptExitListener(onScriptCallExit);\\r\\n\\r\\n    // \\r\\n    exitListener = that.dispatcher.listenData(eventTypeExit, onExit);\\r\\n    completeListener = that.dispatcher.listenData(eventTypeComplete, onExit);\\r\\n\\r\\n    function onExit(e){\\r\\n        logger.log(\\\"[showFloatWindow.onExit] called\\\");\\r\\n        clean();\\r\\n    }\\r\\n\\r\\n    function clean(){\\r\\n        logger.log('[showFloatWindow.clean] cleaning up resources');\\r\\n\\r\\n        if (exitListener) {\\r\\n            logger.log('[showFloatWindow.clean] removing exit listener');\\r\\n            exitListener.removeListener();\\r\\n            exitListener = null;\\r\\n        }\\r\\n\\r\\n        if (completeListener) {\\r\\n            logger.log('[showFloatWindow.clean] removing complete listener');\\r\\n            completeListener.removeListener();\\r\\n            completeListener = null;\\r\\n        }\\r\\n\\r\\n        if (dismissListener) {\\r\\n            logger.log('[showFloatWindow.clean] removing dismiss listener');\\r\\n            dismissListener.removeListener();\\r\\n            dismissListener = null;\\r\\n        }\\r\\n        com.fanfanlo.lib.components.floatview.floatwindow.Window.exitById(that.data.windowConf.windowId)\\r\\n        removeScriptExitListener(onScriptCallExit);\\r\\n    }\\r\\n\\r\\n    that.doAction = doAction.bind(that);\\r\\n\\r\\n    function doAction() {\\r\\n        logger.log('[showFloatWindow.doAction] called');\\r\\n        superDoAction();\\r\\n\\r\\n        const windowConf = that.data.windowConf;\\r\\n        logger.log('[showFloatWindow.doAction] windowConf:', windowConf);\\r\\n\\r\\n        if (!windowConf) {\\r\\n            logger.log('[showFloatWindow.doAction] ERROR: windowConf is undefined');\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        const windowId = windowConf.windowId;\\r\\n        logger.log('[showFloatWindow.doAction] windowId:', windowId);\\r\\n\\r\\n        if (!windowId) {\\r\\n            logger.log('[showFloatWindow.doAction] ERROR: windowId is undefined');\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        // \\r\\n        openFloatWindow(windowConf);\\r\\n    }\\r\\n\\r\\n    function openFloatWindow(windowConf) {\\r\\n        logger.log('[showFloatWindow.openFloatWindow] opening float window, windowId:', windowConf.windowId);\\r\\n\\r\\n        const windowId = windowConf.windowId;\\r\\n\\r\\n        //  dismiss \\r\\n        const dismissEventType = com.fanfanlo.lib.components.floatview.floatwindow.Window.getDismissEventType(windowId);\\r\\n        logger.log('[showFloatWindow.openFloatWindow] dismissEventType:', dismissEventType);\\r\\n\\r\\n        // \\r\\n        function onDismiss() {\\r\\n            logger.log('[showFloatWindow.onDismiss] float window dismissed, windowId:', windowId);\\r\\n            clean();\\r\\n            // \\r\\n            logger.log('[showFloatWindow.onDismiss] calling jsCallComplete()');\\r\\n            jsCallComplete();\\r\\n        }\\r\\n\\r\\n        logger.log('[showFloatWindow.openFloatWindow] adding dismiss event listener');\\r\\n        dismissListener = com.fanfanlo.lib.jvmstatic.JvmStaticObject.dispatcher.listenData(dismissEventType, onDismiss);\\r\\n\\r\\n        // \\r\\n        const confString = JSON.stringify(windowConf);\\r\\n        logger.log('[showFloatWindow.openFloatWindow] creating window with conf:', confString);\\r\\n\\r\\n        try {\\r\\n            logger.log('[showFloatWindow.openFloatWindow] calling WindowBuilder.build()');\\r\\n            com.fanfanlo.lib.components.floatview.floatwindow.WindowBuilder.build(confString);\\r\\n            logger.log('[showFloatWindow.openFloatWindow] window created successfully');\\r\\n        } catch (error) {\\r\\n            logger.log('[showFloatWindow.openFloatWindow] ERROR:', error.message, error.stack);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nreturn {type}\\r\\n\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/actions/floatwindow/showFloatWindow.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regAction\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/a11y/ActivityInOut\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            ,\\n            get hideImeIfPackageOpened(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideImeIfPackageOpened;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/triggers/a11y/activityInOut\\\";\\r\\n\\r\\nlet data = {\\r\\n    packageName:\\\"packageA\\\", // *\\r\\n    activities:[\\\"activityA\\\", \\\"activityB\\\"], // *\\r\\n    hideIme:true,\\r\\n}\\r\\nonLibReady(()=>{\\r\\n    regTrigger(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/trigger/a11y/activityInOut.js`)\\r\\n\\r\\n\\r\\nfunction attach(that){\\r\\n    let domain = {};\\r\\n    function clean(){\\r\\n        a11yModel.removeDomain(that);\\r\\n        that.removeDomain(domain)\\r\\n    }\\r\\n    function onExitComplete(e){\\r\\n        clean();\\r\\n    }\\r\\n    let superOnRun = that.onRun;\\r\\n    that.onRun = onRun.bind(that);\\r\\n    function onRun() {\\r\\n        superOnRun();\\r\\n        addListener();\\r\\n    }\\r\\n    function addListener(){\\r\\n        that.dispatcher.listenDomain(eventTypeExit, domain, onExitComplete);\\r\\n        that.dispatcher.listenDomain(eventTypeComplete, domain, onExitComplete);\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastPackageChanged, this, onPackageOrActivityChange);\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastActivityInfoChanged, this, onPackageOrActivityChange);\\r\\n    }\\r\\n    let isOn = false;\\r\\n    function onPackageOrActivityChange(event){\\r\\n        check();\\r\\n    }\\r\\n    function check(){\\r\\n        if(!that.isRunnable){\\r\\n            clean();\\r\\n            return;\\r\\n        }\\r\\n        let pn = that.data.packageName;\\r\\n        if(that.data.hideIme && hideImeIfPackageOpened(pn)){\\r\\n            return;\\r\\n        }\\r\\n        let packageName = a11yModel.lastFullScreenPackage;\\r\\n        let activityName = a11yModel.lastFullScreenActivity;\\r\\n        let data = {packageName, activityName}\\r\\n        let activities = that.data.activities;\\r\\n        if(activities.indexOf(activityName) == -1){\\r\\n            return triggerOff(data);\\r\\n        }\\r\\n        triggerOn(data);\\r\\n    }\\r\\n    function triggerOff(data){\\r\\n        if(!isOn)return;\\r\\n        isOn = false;\\r\\n        that.dispatchConditionsOff({data})\\r\\n    }\\r\\n    function triggerOn(data){\\r\\n        if(isOn)return;\\r\\n        isOn = true;\\r\\n        that.dispatchConditionsOn({data})\\r\\n    }\\r\\n    let superOnExit = that.onExit;\\r\\n\\r\\n    function onExit(){\\r\\n        superOnExit();\\r\\n        a11yModel.removeDomain(this);\\r\\n    }\\r\\n    that.onExit = onExit.bind(that);\\r\\n\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/a11y/ActivityInOut.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"hideImeIfPackageOpened\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/a11y/node-trigger\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\n\\nlet type = `fanfanlo/javajs/v1/project/components/triggers/a11y/node-trigger`;\\n\\nonLibReady(()=>{\\n    regTrigger(type, attach)\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/triggers/a11y/node-trigger.java.js`)\\n\\nfunction attach(that){\\n    let domain = {};\\n    let logger = that.logger;\\n\\n    logger.log('NodeTrigger.attach called');\\n    // logger.puased = true;\\n\\n    // \\n    let contentChangeListenData = undefined;\\n\\n    addScriptExitListener(onScriptCallExit);\\n\\n    function onScriptCallExit(){\\n        logger.log(\\\"script call NodeTrigger exit\\\", that.baseMsg)\\n        onExit();\\n    }\\n\\n    function onExit(e){\\n        clean();\\n    }\\n\\n    function clean(){\\n        removeListener();\\n        removeContentChangeListener();\\n        removeScriptExitListener(onScriptCallExit);\\n    }\\n\\n    function onExitOrComplete(e){\\n        clean();\\n    }\\n\\n    let superOnRun = that.onRun;\\n    that.onRun = onRun.bind(that);\\n\\n    function onRun() {\\n        superOnRun();\\n        logger.log('NodeTrigger.onRun called');\\n        addListener();\\n        check();\\n    }\\n\\n    function addListener(){\\n        logger.log('NodeTrigger.addListener - listening for pn/an changes')\\n\\n        that.dispatcher.listenDomain(eventTypeExit, domain, onExitOrComplete);\\n        that.dispatcher.listenDomain(eventTypeComplete, domain, onExitOrComplete);\\n\\n        //  pn+an \\n        a11yModel.listenDomainData(\\n            com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastFullScreenPackageActivityChanged,\\n            domain,\\n            onPackageActivityChanged\\n        );\\n    }\\n\\n    function removeListener(){\\n        logger.log('NodeTrigger.removeListener')\\n        a11yModel.removeDomain(domain);\\n        that.dispatcher.removeDomain(domain)\\n    }\\n\\n    function removeContentChangeListener(){\\n        logger.log('NodeTrigger.removeContentChangeListener')\\n        let data = contentChangeListenData;\\n        contentChangeListenData = undefined;\\n        if(data == undefined)return;\\n        a11yModel.removeListener(data);\\n    }\\n\\n    function addContentChangeListener(){\\n        logger.log('NodeTrigger.addContentChangeListener - adding listener for node changes')\\n        if(contentChangeListenData != undefined){\\n            logger.log('NodeTrigger.addContentChangeListener - already listening')\\n            return;\\n        }\\n        let typeId = android.view.accessibility.AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED;\\n        let type = com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.getAccessibilityEventType(typeId);\\n        contentChangeListenData = a11yModel.listenDomainData(type, domain, onContentChange);\\n        logger.log('NodeTrigger.addContentChangeListener - listener added')\\n    }\\n\\n    function onContentChange(event){\\n        logger.log('NodeTrigger.onContentChange - content changed, rechecking nodes')\\n        if(!that.isRunnable){\\n            logger.log('NodeTrigger.onContentChange - not runnable, removing listener')\\n            removeContentChangeListener();\\n            return;\\n        }\\n        checkNodes();\\n    }\\n\\n    function onPackageActivityChanged(event){\\n        logger.log('NodeTrigger.onPackageActivityChanged - rechecking')\\n        check();\\n    }\\n\\n    function check(){\\n        if(!that.isRunnable){\\n            logger.log('NodeTrigger.check - not runnable, cleaning up')\\n            clean();\\n            return;\\n        }\\n\\n        let currentPn = a11yModel.lastFullScreenPackage;\\n        let currentAn = a11yModel.lastFullScreenActivity;\\n\\n        logger.log('NodeTrigger.check - current:', String(currentPn), '/', String(currentAn), ', expected:', String(that.data.pn), '/', String(that.data.an), '/', String(that.data.cn));\\n\\n        //  pn+an \\n        let isPnMatch = currentPn == that.data.pn;\\n        let isAnMatch = currentAn == that.data.an;\\n\\n        logger.log('NodeTrigger.check - isPnMatch:', isPnMatch, ', isAnMatch:', isAnMatch);\\n\\n        if(!isPnMatch || !isAnMatch){\\n            logger.log('NodeTrigger.check - not match, removing listener')\\n            // pn/an \\n            removeContentChangeListener();\\n            //  conditions off \\n            that.dispatchConditionsOff({target:that})\\n            return;\\n        }\\n\\n        // pn+an ,\\n        logger.log('NodeTrigger.check - matched, checking nodes')\\n        checkNodes();\\n    }\\n\\n    function checkNodes(){\\n        logger.log('NodeTrigger.checkNodes called')\\n\\n        if(!that.isRunnable){\\n            logger.log('NodeTrigger.checkNodes - not runnable')\\n            return;\\n        }\\n\\n        let selectorChain = that.data.selectorChain;\\n        logger.log('NodeTrigger.checkNodes - selectorChain:', JSON.stringify(selectorChain))\\n\\n        if(!selectorChain || !selectorChain.operations || selectorChain.operations.length == 0){\\n            logger.log('NodeTrigger.checkNodes - no operations, conditions on')\\n            that.dispatchConditionsOn({target:that})\\n            removeContentChangeListener();\\n            return;\\n        }\\n\\n        try{\\n            let foundNode = findNodeBySelectorChain(selectorChain);\\n            logger.log('NodeTrigger.checkNodes - foundNode:', foundNode ? 'found' : 'not found')\\n\\n            if(foundNode){\\n                // ====================  foundNode  triggerActionContext ====================\\n                if(that.triggerActionContext){\\n                    logger.log('NodeTrigger.checkNodes - saving foundNode')\\n                    that.triggerActionContext.foundNode = foundNode\\n                }else{\\n                    logger.warn('NodeTrigger.checkNodes - triggerActionContext not available')\\n                }\\n                // ==================== foundNode  ====================\\n\\n                that.dispatchConditionsOn({target:that})\\n                removeContentChangeListener();\\n            }else{\\n                logger.log('NodeTrigger.checkNodes - waiting for node')\\n                addContentChangeListener();\\n                that.dispatchConditionsOff({target:that})\\n            }\\n        }catch(e){\\n            logger.error('NodeTrigger.checkNodes - error:', e, String(e.message))\\n            logger.error('NodeTrigger.checkNodes - stack:', String(e.stack))\\n            addContentChangeListener();\\n            that.dispatchConditionsOff({target:that})\\n        }\\n    }\\n\\n    /**\\n     * DroidSelector\\n     * @param {object} selectorChain - operations\\n     * @returns {object|null} - DroidNodenull\\n     */\\n    function findNodeBySelectorChain(selectorChain){\\n        logger.log('NodeTrigger.findNodeBySelectorChain called, operations:', selectorChain.operations ? selectorChain.operations.length : 0)\\n\\n        if (!selectorChain.operations) {\\n            logger.log('NodeTrigger.findNodeBySelectorChain - no operations')\\n            return null\\n        }\\n\\n        try{\\n            let selector = new com.fanfanlo.droidlib.auto.selector.DroidSelector(a11yModel);\\n            logger.log('NodeTrigger.findNodeBySelectorChain - DroidSelector created')\\n\\n            let operations = selectorChain.operations;\\n            for(let i = 0; i < operations.length; i++){\\n                let operation = operations[i];\\n                let method = operation.method;\\n                let value = operation.value;\\n\\n                logger.log('NodeTrigger.findNodeBySelectorChain - operation[' + i + ']:', method, '=', value)\\n\\n                // selector\\n                if(method == 'text'){\\n                    selector = selector.text(value);\\n                }else if(method == 'textContains'){\\n                    selector = selector.textContains(value);\\n                }else if(method == 'textStartsWith'){\\n                    selector = selector.textStartsWith(value);\\n                }else if(method == 'textEndsWith'){\\n                    selector = selector.textEndsWith(value);\\n                }else if(method == 'textMatches'){\\n                    selector = selector.textMatches(value);\\n                }else if(method == 'id'){\\n                    selector = selector.id(value);\\n                }else if(method == 'idContains'){\\n                    selector = selector.idContains(value);\\n                }else if(method == 'idStartsWith'){\\n                    selector = selector.idStartsWith(value);\\n                }else if(method == 'idEndsWith'){\\n                    selector = selector.idEndsWith(value);\\n                }else if(method == 'idMatches'){\\n                    selector = selector.idMatches(value);\\n                }else if(method == 'className'){\\n                    selector = selector.className(value);\\n                }else if(method == 'classNameContains'){\\n                    selector = selector.classNameContains(value);\\n                }else if(method == 'classNameStartsWith'){\\n                    selector = selector.classNameStartsWith(value);\\n                }else if(method == 'classNameEndsWith'){\\n                    selector = selector.classNameEndsWith(value);\\n                }else if(method == 'classNameMatches'){\\n                    selector = selector.classNameMatches(value);\\n                }else if(method == 'desc'){\\n                    selector = selector.desc(value);\\n                }else if(method == 'descContains'){\\n                    selector = selector.descContains(value);\\n                }else if(method == 'descStartsWith'){\\n                    selector = selector.descStartsWith(value);\\n                }else if(method == 'descEndsWith'){\\n                    selector = selector.descEndsWith(value);\\n                }else if(method == 'descMatches'){\\n                    selector = selector.descMatches(value);\\n                }else if(method == 'packageName'){\\n                    selector = selector.packageName(value);\\n                }else if(method == 'packageNameContains'){\\n                    selector = selector.packageNameContains(value);\\n                }else if(method == 'packageNameStartsWith'){\\n                    selector = selector.packageNameStartsWith(value);\\n                }else if(method == 'packageNameEndsWith'){\\n                    selector = selector.packageNameEndsWith(value);\\n                }else if(method == 'packageNameMatches'){\\n                    selector = selector.packageNameMatches(value);\\n                }else if(method == 'clickable'){\\n                    selector = selector.clickable(value);\\n                }else if(method == 'longClickable'){\\n                    selector = selector.longClickable(value);\\n                }else if(method == 'scrollable'){\\n                    selector = selector.scrollable(value);\\n                }else if(method == 'enabled'){\\n                    selector = selector.enabled(value);\\n                }else if(method == 'checkable'){\\n                    selector = selector.checkable(value);\\n                }else if(method == 'checked'){\\n                    selector = selector.checked(value);\\n                }else if(method == 'focusable'){\\n                    selector = selector.focusable(value);\\n                }else if(method == 'focused'){\\n                    selector = selector.focused(value);\\n                }else if(method == 'visibleToUser'){\\n                    selector = selector.visibleToUser(value);\\n                }else if(method == 'selected'){\\n                    selector = selector.selected(value);\\n                }else if(method == 'password'){\\n                    selector = selector.password(value);\\n                }else if(method == 'depth'){\\n                    selector = selector.depth(value);\\n                }else if(method == 'indexInParent'){\\n                    selector = selector.indexInParent(value);\\n                }else if(method == 'childCount'){\\n                    selector = selector.childCount(value);\\n                }else if(method == 'bounds'){\\n                    selector = selector.bounds(value.left, value.top, value.right, value.bottom);\\n                }else if(method == 'boundsInside'){\\n                    selector = selector.boundsInside(value.left, value.top, value.right, value.bottom);\\n                }else if(method == 'boundsContains'){\\n                    selector = selector.boundsContains(value.left, value.top, value.right, value.bottom);\\n                }else if(method == 'algorithm'){\\n                    selector = selector.algorithm(value);\\n                }else{\\n                    logger.warn('NodeTrigger.findNodeBySelectorChain - unknown method:', method)\\n                }\\n            }\\n\\n            logger.log('NodeTrigger.findNodeBySelectorChain - calling findOne()')\\n            let result = selector.findOne();\\n            logger.log('NodeTrigger.findNodeBySelectorChain - result:', result ? 'found' : 'null')\\n\\n            return result;\\n        }catch(e){\\n            logger.error('NodeTrigger.findNodeBySelectorChain - error:', e, e.stack)\\n            return null;\\n        }\\n    }\\n}\\n\\nreturn {type}\\n\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/a11y/node-trigger.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/a11y/NodesInOut\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            ,\\n            get Types(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/node/ICondition\\\"].Types;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            }){\\n            \\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/triggers/a11y/NodesInOut\\\";\\r\\nonLibReady(()=>{\\r\\n    regTrigger(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/trigger/a11y/NodesInOut.java.js`)\\r\\nfunction attach(that){\\r\\n    let logger = console.subLogger(`${Date.now()}`)\\r\\n    function onScriptCallExit(){\\r\\n        onExit();\\r\\n    }\\r\\n    addScriptExitListener(onScriptCallExit);\\r\\n    that.dispatcher.listenData(eventTypeExit, onExit);\\r\\n    function onExit(e){\\r\\n        tryRemoveContentChangeListener();\\r\\n        a11yModeRemoveThis()\\r\\n        removeScriptExitListener(onScriptCallExit);\\r\\n    }\\r\\n\\r\\n    function a11yModeRemoveThis(){\\r\\n        a11yModel.removeDomain(that);\\r\\n    }\\r\\n\\r\\n    var pnAnMatched = false;\\r\\n    var lastJob = undefined;\\r\\n    var contentChangeListener = undefined;\\r\\n    let superOnRun = that.onRun;\\r\\n    that.onRun = onRun.bind(that);\\r\\n    function onRun() {\\r\\n        prepareConditions()\\r\\n        superOnRun();\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastPackageChanged, this, onPackageOrActivityChange);\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastActivityInfoChanged, this, onPackageOrActivityChange);\\r\\n        check();\\r\\n    }\\r\\n    function prepareConditions(){\\r\\n        // nodeConditionSFRootSFData\\r\\n        that.data.conditions = that.data.nodeConditions.map((cond)=>{\\r\\n            let root = {\\r\\n                type:\\\"Root\\\",\\r\\n                next:cond\\r\\n            }\\r\\n            cond = root;\\r\\n            while(cond){\\r\\n                cond.type = Types[cond.type];\\r\\n                cond = cond.next;\\r\\n            }\\r\\n            let data = conditionJsonToData(root);\\r\\n            return data.next;\\r\\n        })\\r\\n    }\\r\\n    function conditionJsonToData(data){\\r\\n        let s = JSON.stringify(data);\\r\\n        return com.fanfanlo.droidlib.auto.command.objectmapper.projectObjectMapper.stringToSfRoot(s)\\r\\n    }\\r\\n    let isOn = false;\\r\\n    function onPackageOrActivityChange(event){\\r\\n        if(!isScriptRunnable){\\r\\n            return a11yModeRemoveThis();\\r\\n        }\\r\\n        check();\\r\\n    }\\r\\n    function check(){\\r\\n        var checkDomain = {}\\r\\n        let packageName = a11yModel.lastFullScreenPackage;\\r\\n        let activityName = a11yModel.lastFullScreenActivity;\\r\\n        let data = {packageName, activityName, nodes:undefined}\\r\\n        if(!checkIsPackageActivity()){\\r\\n            tryRemoveContentChangeListener()\\r\\n            return triggerOff(data)\\r\\n        }\\r\\n        if(!pnAnMatched){\\r\\n            pnAnMatched = true;\\r\\n            listenContentChange();\\r\\n        }\\r\\n        checkNodes();\\r\\n        function checkIsPackageActivity(){\\r\\n            return packageName == that.data.packageName && that.data.activities.some(name=>name==activityName);\\r\\n          return packageName == that.data.packageName && that.data.activities.indexOf(activityName) > -1\\r\\n        }\\r\\n\\r\\n        function listenContentChange(){\\r\\n            tryRemoveContentChangeListener();\\r\\n            let typeId = android.view.accessibility.AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED\\r\\n            let type = com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.getAccessibilityEventType(typeId);\\r\\n            contentChangeListener = a11yModel.listenData(type, onContentChange)\\r\\n        }\\r\\n        function onContentChange(e){\\r\\n            if(isScriptExited())return;\\r\\n            if(!pnAnMatched){\\r\\n                tryRemoveContentChangeListener();\\r\\n                return;\\r\\n            }\\r\\n            checkNodes()\\r\\n        }\\r\\n        var job = undefined;\\r\\n        function checkNodes(){\\r\\n            if(lastJob && (!job || job == lastJob)){\\r\\n                tryCancelJob(lastJob);\\r\\n                lastJob = undefined;\\r\\n            }\\r\\n            let proxy = new com.fanfanlo.droidlib.auto.service.accessibility.krosxx.SfProxy();\\r\\n           job = lastJob = proxy.find(a11yModel, packageName, that.data.conditions, callback, onError);\\r\\n        }\\r\\n        function callback(nodes){\\r\\n            if(isScriptExited())return;\\r\\n            if(job != lastJob)return;\\r\\n            if(!nodes){\\r\\n                // javamodel.getRootByPackageName(pn)null\\r\\n                // console.log(\\\"cccccccccno nodes is null\\\")\\r\\n                return;\\r\\n            }\\r\\n            for (let i = 0; i < that.data.nodeCheckList.length; i++) {\\r\\n                let list = that.data.nodeCheckList[i];\\r\\n                let isOk = list.every((index)=>nodes[index] != null);\\r\\n                if(isOk){\\r\\n                    data.nodes = nodes\\r\\n                    triggerOn(data)\\r\\n                    return;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        function onError(err){\\r\\n            console.log(\\\"cccccccccno on error\\\", err)\\r\\n            if(isScriptExited())return;\\r\\n            if(job != lastJob)return;\\r\\n        }\\r\\n        function triggerOff(data){\\r\\n            if(pnAnMatched){\\r\\n                pnAnMatched = false;\\r\\n            }\\r\\n            if(!isOn)return;\\r\\n            isOn = false;\\r\\n            that.dispatchConditionsOff({data})\\r\\n        }\\r\\n        function triggerOn(data){\\r\\n            if(isOn)return;\\r\\n            isOn = true;\\r\\n            console.log(\\\"triggerOntriggerOn\\\", data);\\r\\n            that.dispatchConditionsOn(data)\\r\\n        }\\r\\n        function tryCancelJob(job){\\r\\n            if(job && !job.isCompleted && !job.isCancelled){\\r\\n                job.cancel();\\r\\n            }\\r\\n        }\\r\\n        function checkComplete(){\\r\\n            a11yModel.removeDomain(checkDomain);\\r\\n            tryCancelJob(job);\\r\\n        }\\r\\n\\r\\n        function isScriptExited(){\\r\\n            if(isScriptRunnable)return false;\\r\\n            tryRemoveContentChangeListener();\\r\\n            a11yModeRemoveThis();\\r\\n            return true;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function tryRemoveContentChangeListener(){\\r\\n        if(!contentChangeListener)return;\\r\\n        a11yModel.removeListener(contentChangeListener);\\r\\n        contentChangeListener = undefined;\\r\\n    }\\r\\n    let superOnExit = that.onExit;\\r\\n\\r\\n    function onExit(){\\r\\n        superOnExit();\\r\\n        a11yModel.removeDomain(this);\\r\\n    }\\r\\n    that.onExit = onExit.bind(that);\\r\\n\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/a11y/NodesInOut.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/node/ICondition\",\"properties\":[\"Types\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeExit\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/a11y/PackageIn\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            ,\\n            get hideImeIfPackageOpened(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideImeIfPackageOpened;\\n            }\\n            }){\\n            \\r\\n\\r\\nlet type = `fanfanlo/javajs/v1/project/components/triggers/a11y/PackageIn`;\\r\\nonLibReady(()=>{\\r\\n    regTrigger(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/trigger/a11y/PackageIn.java.js`)\\r\\n\\r\\nfunction attach(that){\\r\\n    let domain = {};\\r\\n    let logger = that.logger;\\r\\n    addScriptExitListener(onScriptCallExit);\\r\\n    function onScriptCallExit(){\\r\\n        logger.log(\\\"script call PackageIn exit\\\", that.baseMsg)\\r\\n        onExit();\\r\\n    }\\r\\n    function onExit(e){\\r\\n        clean();\\r\\n    }\\r\\n    function clean(){\\r\\n        removeListener();\\r\\n        removeScriptExitListener(onScriptCallExit);\\r\\n    }\\r\\n    function onExitOrComplete(e){\\r\\n        clean();\\r\\n    }\\r\\n\\r\\n    let superOnRun = that.onRun;\\r\\n    that.onRun = onRun.bind(that);\\r\\n    function onRun() {\\r\\n        superOnRun();\\r\\n        addListener();\\r\\n        check();\\r\\n    }\\r\\n    function addListener(){\\r\\n        that.dispatcher.listenDomain(eventTypeExit, domain, onExitOrComplete);\\r\\n        that.dispatcher.listenDomain(eventTypeComplete, domain, onExitOrComplete);\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastPackageChanged, domain, onChange);\\r\\n    }\\r\\n    function removeListener(){\\r\\n        a11yModel.removeDomain(domain);\\r\\n        that.dispatcher.removeDomain(domain)\\r\\n    }\\r\\n    function onChange(event){\\r\\n        check();\\r\\n    }\\r\\n\\r\\n\\r\\n    function check(){\\r\\n        if(!that.isRunnable){\\r\\n            clean();\\r\\n            return;\\r\\n        }\\r\\n        let isOk = a11yModel.lastFullScreenPackage == that.data.packageName\\r\\n        logger.log(`equals lastpackage ${isOk}, lastFullScreenPackage=${a11yModel.lastFullScreenPackage}, packageName=${that.data.packageName}`);\\r\\n        if(isOk){\\r\\n            logger.log(`check isok dispatch conditions on`);\\r\\n            that.dispatchConditionsOn({target:that})\\r\\n        }else if(that.data.hideIme){\\r\\n            logger.log(`check isnotok hide ime`);\\r\\n            hideImeIfPackageOpened(that.data.packageName);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/a11y/PackageIn.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"hideImeIfPackageOpened\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/a11y/PackageInOut\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            ,\\n            get eventTypeComplete(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeComplete;\\n            }\\n            ,\\n            get eventTypeExit(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/base/projectEventTypes\\\"].eventTypeExit;\\n            }\\n            ,\\n            get hideImeIfPackageOpened(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/a11y/a11yUtils\\\"].hideImeIfPackageOpened;\\n            }\\n            }){\\n            \\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/triggers/a11y/PackageInOut\\\";\\r\\nonLibReady(()=>{\\r\\n    regTrigger(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/trigger/a11y/packageInOut.js`)\\r\\nfunction attach(that){\\r\\n    let domain = {};\\r\\n    let logger = that.logger.subLogger('PackageInOut_f')\\r\\n    function clean(){\\r\\n        a11yModel.removeDomain(that);\\r\\n        that.removeDomain(domain)\\r\\n    }\\r\\n    function onExitOrComplete(e){\\r\\n        clean();\\r\\n    }\\r\\n\\r\\n    let superOnRun = that.onRun;\\r\\n    that.onRun = onRun.bind(that);\\r\\n    function onRun() {\\r\\n        superOnRun();\\r\\n        addListener();\\r\\n        check();\\r\\n    }\\r\\n    function addListener(){\\r\\n        that.dispatcher.listenDomain(eventTypeExit, domain, onExitOrComplete);\\r\\n        that.dispatcher.listenDomain(eventTypeComplete, domain, onExitOrComplete);\\r\\n        a11yModel.listenDomainData(com.fanfanlo.droidlib.auto.service.accessibility.A11yModel.Companion.eventLastPackageChanged, this, onPackageChange);\\r\\n    }\\r\\n    function onPackageChange(event){\\r\\n        check();\\r\\n    }\\r\\n\\r\\n    function check(){\\r\\n        logger.log(\\\"check_fn\\\", that.isRunnable)\\r\\n        if(!that.isRunnable){\\r\\n            clean();\\r\\n            return;\\r\\n        }\\r\\n        let pn = that.data.packageName;\\r\\n        if(that.data.hideIme && hideImeIfPackageOpened(pn)){\\r\\n            return;\\r\\n        }\\r\\n        if(a11yModel.lastFullScreenPackage == that.data.packageName){\\r\\n            that.dispatchConditionsOn({packageName:a11yModel.lastFullScreenPackage})\\r\\n        }else{\\r\\n            that.dispatchConditionsOff({packageName:a11yModel.lastFullScreenPackage})\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/a11y/PackageInOut.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]},{\"path\":\"fanfanlo/javajs/v1/project/base/projectEventTypes\",\"properties\":[\"eventTypeComplete\",\" eventTypeExit\"]},{\"path\":\"fanfanlo/javajs/v1/a11y/a11yUtils\",\"properties\":[\"hideImeIfPackageOpened\"]}]},\"fanfanlo/javajs/v1/project/components/triggers/time/timeout\":{\"content\":\"\\n    (()=>{\\n    try{\\n        // @ts-ignore\\n        with({\\n            get setTimeout(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/utils/setTimeout\\\"].setTimeout;\\n            }\\n            ,\\n            get regTrigger(){\\n                return javaLib[\\\"fanfanlo/javajs/v1/project/store\\\"].regTrigger;\\n            }\\n            }){\\n            \\r\\n\\r\\n\\r\\nlet type = \\\"fanfanlo/javajs/v1/project/components/triggers/time/timeout\\\";\\r\\n\\r\\nonLibReady(()=>{\\r\\n    regTrigger(type, attach)\\r\\n}, `src/droid/java_js/fanfanlo/javajs/v1/project/components/trigger/time/timeout.java.js`)\\r\\nfunction attach(that){\\r\\n    let thatOnRun = that.onRun;\\r\\n    that.onRun = onRun.bind(that);    \\r\\n\\r\\n    function onRun() {\\r\\n        //\\r\\n        if(!isScriptRunnable)return;\\r\\n        setTimeout(()=>{\\r\\n            //\\r\\n            if(!isScriptRunnable)return;\\r\\n            thatOnRun();\\r\\n            that.dispatchConditionsOn({data:that.data});\\r\\n        }, that.data.time)\\r\\n    }\\r\\n}\\r\\n\\r\\nreturn {type}\\n        }\\n    }catch(e){\\n        console.log(\\\"init error key is fanfanlo/javajs/v1/project/components/triggers/time/timeout.java.js\\\", e);\\n    }\\n    })()\\n    \",\"dependencies\":[{\"path\":\"fanfanlo/javajs/v1/utils/setTimeout\",\"properties\":[\"setTimeout\"]},{\"path\":\"fanfanlo/javajs/v1/project/store\",\"properties\":[\"regTrigger\"]}]}}","\r\nimport { javaLib } from './javaLibDataMap'\r\nimport { Log } from '@fanfanlo'\r\nimport { IProject } from '../entities/IProject'\r\n\r\nexport type LibPathKey = keyof typeof javaLib\r\n\r\nconst fileLog = new Log(false, 'extractDependencies_f')\r\n// fileLog.pause = true;\r\n// fileLog.childrenPaused = true;\r\n/**\r\n *  IProject  Trigger  Action  type\r\n *\r\n * @param projectData - Project \r\n * @returns \r\n *\r\n * @example\r\n * const types = extractUsedTypes(projectData)\r\n * // types: Set { \"fanfanlo/triggers/time/timeout\", \"fanfanlo/actions/app/openApp\" }\r\n */\r\nexport function extractUsedTypes(projectData: IProject): Set<string> {\r\n    fileLog.log('[extractUsedTypes] ')\r\n    const types = new Set<string>()\r\n\r\n    fileLog.log('projectData=', JSON.stringify(projectData))\r\n\r\n    //  children TriggerActionGroup\r\n    const triggerActionGroups = projectData.children || []\r\n    fileLog.log('[extractUsedTypes] triggerActionGroups :', triggerActionGroups.length)\r\n\r\n    for (let i = 0; i < triggerActionGroups.length; i++) {\r\n        const triggerActionGroup = triggerActionGroups[i]\r\n        fileLog.log('[extractUsedTypes]  TriggerActionGroup', i, triggerActionGroup.ulid)\r\n\r\n        //  TriggerAction\r\n        const triggerActions = triggerActionGroup.children || []\r\n        fileLog.log('[extractUsedTypes] triggerActions :', triggerActions.length)\r\n\r\n        for (let j = 0; j < triggerActions.length; j++) {\r\n            const triggerAction = triggerActions[j]\r\n            fileLog.log('[extractUsedTypes]  TriggerAction', j, triggerAction.ulid)\r\n\r\n            //  Triggers\r\n            const triggers = triggerAction.triggerGroup?.children || []\r\n            fileLog.log('[extractUsedTypes] triggers :', triggers.length)\r\n            for (let k = 0; k < triggers.length; k++) {\r\n                const trigger = triggers[k]\r\n                fileLog.log('[extractUsedTypes]  Trigger', k, 'type:', trigger.type)\r\n                if (trigger.type) {\r\n                    types.add(trigger.type)\r\n                    fileLog.log('[extractUsedTypes]  Trigger type:', trigger.type)\r\n                } else {\r\n                    fileLog.log('[extractUsedTypes] Trigger type ', k)\r\n                }\r\n            }\r\n\r\n            //  Actions\r\n            const actions = triggerAction.actionGroup?.children || []\r\n            fileLog.log('[extractUsedTypes] actions :', actions.length)\r\n            for (let k = 0; k < actions.length; k++) {\r\n                const action = actions[k]\r\n                fileLog.log('[extractUsedTypes]  Action', k, 'type:', action.type)\r\n                if (action.type) {\r\n                    types.add(action.type)\r\n                    fileLog.log('[extractUsedTypes]  Action type:', action.type)\r\n                } else {\r\n                    fileLog.log('[extractUsedTypes] Action type ', k)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    fileLog.log('[extractUsedTypes] , :', types.size)\r\n    fileLog.log('[extractUsedTypes] :', Array.from(types))\r\n    return types\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param dependencies - \r\n * @param impSet - \r\n * @param impList - \r\n * @returns \r\n */\r\nfunction prepareDependencies(\r\n    dependencies: LibPathKey[],\r\n    impSet: Set<LibPathKey> = new Set<LibPathKey>(),\r\n    impList: string[] = []\r\n): string[] {\r\n    fileLog.log('[prepareDependencies] :', dependencies.length)\r\n\r\n    for (let i = 0; i < dependencies.length; i++) {\r\n        const path = dependencies[i]\r\n        fileLog.log('[prepareDependencies] ', i, 'path:', path)\r\n\r\n        if (impSet.has(path)) {\r\n            fileLog.log('[prepareDependencies] ,:', path)\r\n            continue\r\n        }\r\n\r\n        const file = javaLib[path]\r\n        if (!file) {\r\n            fileLog.log('[prepareDependencies] : :', path)\r\n            fileLog.log('[prepareDependencies]  javaLib keys:', Object.keys(javaLib))\r\n            throw new Error(`no path in javaLib, path is ${path}`)\r\n        }\r\n\r\n        fileLog.log('[prepareDependencies] :', path)\r\n        impSet.add(path)\r\n        impList.push(`\"${path}\":${file.content}`)\r\n\r\n        if (file.dependencies && file.dependencies.length > 0) {\r\n            fileLog.log('[prepareDependencies] ,:', file.dependencies.length)\r\n            const list = file.dependencies.map(d => d.path) as LibPathKey[]\r\n            prepareDependencies(list, impSet, impList)\r\n        } else {\r\n            fileLog.log('[prepareDependencies] ')\r\n        }\r\n    }\r\n\r\n    fileLog.log('[prepareDependencies] , :', impList.length)\r\n    return impList\r\n}\r\n\r\n/**\r\n *  javaLib \r\n *\r\n * @param dependencies - \r\n * @returns javaLib  JavaScript \r\n *\r\n * @example\r\n * const script = createLibScript(['fanfanlo/triggers/time/timeout'])\r\n * // script: \"let javaLib = { ... }\"\r\n */\r\nexport function createLibScript(dependencies: LibPathKey[]): string {\r\n    fileLog.log('[createLibScript]  javaLib ')\r\n    fileLog.log('[createLibScript] :', dependencies.length)\r\n\r\n    // \r\n    const storePath = 'fanfanlo/javajs/v1/project/store' as LibPathKey\r\n    const createEventDispatcherPath = 'fanfanlo/javajs/v1/event/createEventDispatcher' as LibPathKey\r\n    const createGetterSetterPath = 'fanfanlo/javajs/v1/utils/createGetterSetter' as LibPathKey\r\n\r\n    fileLog.log('[createLibScript]  - store:', storePath)\r\n    fileLog.log('[createLibScript]  - createEventDispatcher:', createEventDispatcherPath)\r\n    fileLog.log('[createLibScript]  - createGetterSetter:', createGetterSetterPath)\r\n\r\n    //  + \r\n    const allDeps = [\r\n        storePath,\r\n        createEventDispatcherPath,\r\n        createGetterSetterPath,\r\n        ...dependencies\r\n    ]\r\n    fileLog.log('[createLibScript] ():', allDeps.length)\r\n    fileLog.log('[createLibScript] : 3 (store, createEventDispatcher, createGetterSetter)')\r\n    fileLog.log('[createLibScript] :', dependencies.length)\r\n\r\n    const list = prepareDependencies(allDeps)\r\n    fileLog.log('[createLibScript] :', list.length)\r\n\r\n    const content = `let javaLib = {\r\n        ${list.join(\",\")}\r\n    }`\r\n\r\n    fileLog.log('[createLibScript] javaLib ')\r\n    fileLog.log('[createLibScript] :', content.length)\r\n\r\n    return content\r\n}\r\n","import { projectRunner2Text, scriptExitMechanismCode } from './projectRunner2.script'\r\nimport { extractUsedTypes, createLibScript, LibPathKey } from './extractDependencies'\r\nimport { Log } from '@fanfanlo'\r\nimport { IProject } from '../entities/IProject'\r\n\r\nconst fileLog = new Log(false, 'assembleProjectScript')\r\n// fileLog.pause = true;\r\n// fileLog.childrenPaused = true;\r\n/**\r\n * Logger \r\n */\r\nconst libLoggerCode = `\r\nconsole.paused = false;\r\nlet javaLibInitLogger = console.subLogger(\"lib9\");\r\nlet projectStoreLogger = javaLibInitLogger.subLogger(\"store9\");\r\nlet projectEventLogger = console.subLogger(\"event9\");\r\nlet projectFailedLogger = console.subLogger(\"failed9\");\r\nlet projectFlowLogger = console.subLogger(\"flow9\");\r\nprojectFlowLogger.paused = false;\r\nprojectStoreLogger.paused = false;\r\n`\r\n\r\n/**\r\n * onLibReady \r\n */\r\nconst libHeaderCode = `\r\nconst onLibReadyInitFuncs = [];\r\nfunction onLibReady(f, info){\r\n    console.log('reg onLiReady', info);\r\n    onLibReadyInitFuncs.push({f, info});\r\n}\r\n`\r\n\r\n/**\r\n *  onLibReady \r\n */\r\nconst libFooterCode = `\r\nfor(let i = 0; i < onLibReadyInitFuncs.length; i++){\r\n    let data = onLibReadyInitFuncs[i];\r\n    try{\r\n        data.f();\r\n    }catch(e){\r\n        console.log(\"on lib ready init fun error\", data.info, e);\r\n    }\r\n}\r\n`\r\n\r\n/**\r\n *  Project \r\n *\r\n *  projectRunner2.js javaLib  IProject \r\n *\r\n * @param projectData - Project \r\n * @returns  JavaScript \r\n *\r\n * @example\r\n * const script = assembleProjectScript(myProject)\r\n * // script  Rhino \r\n */\r\nexport function assembleProjectScript(projectData: IProject): string {\r\n    fileLog.log('[assembleProjectScript] ==========  ==========')\r\n    fileLog.log('[assembleProjectScript] projectData.ulid:', projectData.ulid)\r\n    fileLog.log('[assembleProjectScript] projectData.name:', projectData.name)\r\n\r\n    // 1.  Trigger  Action types\r\n    fileLog.log('[assembleProjectScript]  1: ')\r\n    const usedTypes = extractUsedTypes(projectData)\r\n    fileLog.log('[assembleProjectScript] :', usedTypes.size)\r\n    fileLog.log('[assembleProjectScript] :', Array.from(usedTypes))\r\n\r\n    if (usedTypes.size === 0) {\r\n        fileLog.log('[assembleProjectScript] :  Trigger  Action ')\r\n    }\r\n\r\n    // 2.  javaLib \r\n    fileLog.log('[assembleProjectScript]  2:  javaLib ')\r\n    const javaLibScript = createLibScript(Array.from(usedTypes) as LibPathKey[])\r\n    fileLog.log('[assembleProjectScript] javaLib :', javaLibScript.length)\r\n\r\n    // 3. \r\n    fileLog.log('[assembleProjectScript]  3: ')\r\n    const script = `\r\n${libLoggerCode}\r\n;\r\n${libHeaderCode}\r\n;\r\n${scriptExitMechanismCode}\r\n;\r\n${javaLibScript}\r\n;\r\n${libFooterCode}\r\n;\r\n${projectRunner2Text}\r\n;\r\n// ========================================\r\n// \r\n// ========================================\r\nvar initData = ${JSON.stringify(projectData, null, 2)};\r\nprojectBuilder(initData);\r\n`\r\n    fileLog.log('[assembleProjectScript] ')\r\n    fileLog.log('[assembleProjectScript] :', script.length)\r\n    fileLog.log('[assembleProjectScript] ==========  ==========')\r\n\r\n    return script\r\n}\r\n","import { IPermissionData } from '../types/permission'\r\nimport { IProject } from '../entities/IProject'\r\nimport { IRhinoRunnerConf, IAssembleRhinoRunnerOptions } from './IRhinoRunnerConf'\r\nimport { assembleProjectScript } from './assembleProjectScript'\r\nimport { ulid } from 'ulid'\r\nimport { Log } from '@fanfanlo'\r\n\r\nconst fileLog = new Log(false, 'assembleRhinoRunner_f')\r\n// fileLog.pause = true;\r\n// fileLog.childrenPaused = true;\r\n/**\r\n *  RhinoRunner \r\n *\r\n *  IProject  RhinoRunner ,:\r\n * - \r\n * - \r\n * - \r\n * - \r\n *\r\n * @param projectData - Project \r\n * @param permissions - \r\n * @param options - \r\n * @returns  RhinoRunner \r\n *\r\n * @example\r\n * const permissions = getProjectPermissionsData(projectData)\r\n * const conf = assembleRhinoRunner(projectData, permissions, {\r\n *     foregroundText: '...',\r\n *     onlyRunSingle: true\r\n * })\r\n * await autoWebViewJs.runProject(conf)\r\n */\r\nexport function assembleRhinoRunner(\r\n    projectData: IProject,\r\n    permissions: IPermissionData[],\r\n    options?: IAssembleRhinoRunnerOptions\r\n): IRhinoRunnerConf {\r\n    const fnLog = fileLog.sub(false, 'assembleRhinoRunner_fn')\r\n    // fnLog.pause = true;\r\n    fnLog.log('projectData=', JSON.stringify(projectData))\r\n    // \r\n    const script = assembleProjectScript(projectData)\r\n\r\n    // \r\n    const conf: IRhinoRunnerConf = {\r\n        // \r\n        bridgeId: options?.bridgeId ?? ulid(),\r\n        scriptId: options?.scriptId ?? projectData.ulid ?? ulid(),\r\n        script,\r\n\r\n        // \r\n        onlyRunSingle: options?.onlyRunSingle ?? true,\r\n        stopPrevIfOnlyRunSingle: options?.stopPrevIfOnlyRunSingle ?? true,\r\n        forceStopTime: options?.forceStopTime ?? 0,\r\n\r\n        // \r\n        foregroundText: options?.foregroundText ?? `: ${projectData.name}`,\r\n\r\n        // \r\n        permissions,\r\n\r\n        // \r\n        injects: options?.injects,\r\n        params: options?.params,\r\n        languageVersion: options?.languageVersion ?? 200, // ES5+\r\n        optimizationLevel: options?.optimizationLevel ?? -1, // \r\n        printScript: options?.printScript ?? false\r\n    }\r\n\r\n    return conf\r\n}\r\n","/**\n * Rhino \n *  Android \n */\n\nimport { loadI18nValue } from '@fanfanlo';\n\n/**\n * WebView JS \n * : com.fanfanlo.lib.components.webview.WebViewJsInjectKeys\n */\nconst WebViewJsInjectKeysConst = {\n    Window: \"Window\",\n    WindowUtils: \"WindowUtils\",\n    webViewJs: \"webViewJs\",\n    console: \"console\",\n    UIThreadUtil: \"UIThreadUtil\",\n} as const;\n\n/**\n * Rhino \n * : com.fanfanlo.droidlib.auto.rhino.InjectNames\n */\nconst RhinoInjectNamesConst = {\n    dispatcher: \"dispatcher\",\n    quicker: \"quicker\",\n    javaRunner: \"javaRunner\",\n    proxy: \"proxy\",\n    a11yProxy: \"a11yProxy\",\n    a11yModel: \"a11yModel\",\n    WebViewJsDispatcher: \"WebViewJsDispatcher\",\n} as const;\n\n/**\n * \n */\nexport const AllInjectKeys = {\n    ...WebViewJsInjectKeysConst,\n    ...RhinoInjectNamesConst,\n} as const;\n\n/**\n * \n */\nexport type InjectKey = keyof typeof AllInjectKeys;\n\n/**\n * \n */\nexport type InjectKeyValue = (typeof AllInjectKeys)[InjectKey];\n\n/**\n * :  WebViewJsInjectKeys (enumconst)\n * : WebViewJsInjectKeys.Window\n */\nexport const WebViewJsInjectKeys = WebViewJsInjectKeysConst;\n\n/**\n * :  RhinoInjectNames (enumconst)\n * : RhinoInjectNames.dispatcher\n */\nexport const RhinoInjectNames = RhinoInjectNamesConst;\n\n/**\n * : \n */\nexport type InjectKeyType = InjectKey;\n\n/**\n *  -  select  UI \n *  i18n key\n */\nexport const InjectKeyOptions = [\n    ...Object.keys(WebViewJsInjectKeysConst).map(key => ({\n        group: 'WebViewJsInjectKeys' as const,\n        key: key as keyof typeof WebViewJsInjectKeysConst,\n        value: WebViewJsInjectKeysConst[key as keyof typeof WebViewJsInjectKeysConst],\n        i18nKey: `WebViewJsInjectKeys.${key}`,\n    })),\n    ...Object.keys(RhinoInjectNamesConst).map(key => ({\n        group: 'RhinoInjectNames' as const,\n        key: key as keyof typeof RhinoInjectNamesConst,\n        value: RhinoInjectNamesConst[key as keyof typeof RhinoInjectNamesConst],\n        i18nKey: `RhinoInjectNames.${key}`,\n    })),\n] as const;\n\n/**\n * \n */\nexport function getAllInjectKeys(): string[] {\n    return Object.keys(AllInjectKeys);\n}\n\n/**\n * \n */\nexport function isValidInjectKey(key: string): boolean {\n    return getAllInjectKeys().includes(key);\n}\n\n/**\n * \n * @param i18nKey i18n, \"WebViewJsInjectKeys.Window\"  \"RhinoInjectNames.dispatcher\"\n * @returns \n * @example\n * const desc = await getInjectKeyDescription('WebViewJsInjectKeys.Window');\n * // : \"Window,window\"\n */\nexport async function getInjectKeyDescription(i18nKey: string): Promise<string> {\n    console.log(`getInjectKeyDescription: i18nKey=\"${i18nKey}\"`);\n    const namespace = 'app-static/project/content';\n    console.log(`getInjectKeyDescription: namespace=\"${namespace}\"`);\n    const fullI18nKey = `RhinoInjectKeys.${i18nKey}`;\n    console.log(`getInjectKeyDescription: fullI18nKey=\"${fullI18nKey}\"`);\n    const description = await loadI18nValue(namespace, fullI18nKey);\n    console.log(`getInjectKeyDescription: description=\"${description}\"`);\n    return description;\n}\n\n/**\n *  InjectKey \n * @param key , \"Window\", \"dispatcher\"\n * @returns \n * @example\n * const desc = await getInjectKeyDescriptionByKey('Window');\n * // : \"Window,window\"\n */\nexport async function getInjectKeyDescriptionByKey(key: InjectKey): Promise<string> {\n    console.log(`getInjectKeyDescriptionByKey: key=\"${key}\"`);\n    const option = InjectKeyOptions.find(opt => opt.key === key);\n    console.log(`getInjectKeyDescriptionByKey: option=${JSON.stringify(option)}`);\n    if (!option) {\n        console.error(`getInjectKeyDescriptionByKey error: key=\"${key}\" not found in InjectKeyOptions`);\n        return '';\n    }\n    const description = await getInjectKeyDescription(option.i18nKey);\n    console.log(`getInjectKeyDescriptionByKey: description=\"${description}\"`);\n    return description;\n}\n","export * from './IRhinoRunnerConf'\r\nexport * from './assembleProjectScript'\r\nexport * from './assembleRhinoRunner'\r\nexport * from './RhinoInjectKeys'\r\nexport * from './extractDependencies'\r\n","// Constants\nexport * from './constants';\n\n// \nexport * from './types/base';\nexport * from './types/ownership';\nexport * from './types/visibility';\nexport * from './types/fork';\nexport * from './types/version';\nexport * from './types/tree';\nexport * from './types/ProjectCategory';\nexport * from './types/permission';\nexport * from './types/IProjectSettings';\n\n// \nexport * from './entities/ITrigger';\nexport * from './entities/ITriggerGroup';\nexport * from './entities/IAction';\nexport * from './entities/IActionGroup';\nexport * from './entities/ITriggerAction';\nexport * from './entities/ITriggerActionGroup';\nexport * from './entities/IProject';\n\n// Storage\nexport { projectStore, s } from './storage/storage';\n\n// Trigger/Action Handlers\nexport * from './trigger-action-handlers/createTriggerHandler';\nexport * from './trigger-action-handlers/createActionHandler';\n// Events\nexport * from './events';\n\n// Contexts\nexport * from './contexts';\n\n// Utils\nexport * from './utils';\n\n// A11y\nexport * from './a11y';\n\n// Common\nexport * from './common';\n\n// Components\nexport * from './components';\nexport * from './runner';\n"],"names":["projectNamespace","Log","fileLog","pause","ProjectCategory","PROJECT_CATEGORY_CONFIGS","category","labelKey","descriptionKey","icon","uiConfig","showTrigger","showActionList","allowAddGroup","forceScriptAction","getProjectCategoryConfig","log","resolvedCategory","config","JSON","stringify","RemoteSyncStatus","createDefaultProjectSettings","syncToServer","_","mergeToDefaultData","createDefaultData","data","mergeDataWith","dist","src","mergeWith","a","b","isArray","createMergeToDefaultData","ulid","triggerType","createDefaultTrigger","uuid","type","ownerUuid","currentVersion","permissions","injects","createdAt","Date","now","updatedAt","authorUuid","triggerBaseUtils","mergeDataToDefaultData","childrenPaused","triggerGroupType","createDefaultTriggerGroup","list","children","checks","isSequential","triggerGroupUtils","TriggerUtilsMap","registerTriggerUtils","key","utils","Error","Object","keys","getTriggerUtils","createTriggerUtils","init","UI","res","create","triggerGroup","trigger","assign","push","length","update","actionType","createDefaultAction","actionBaseUtils","actionGroupType","createDefaultActionGroup","actionGroupUtils","ActionUtilsMap","registerActionUtils","getActionUtils","createActionUtils","actionGroup","action","createTriggerActionUtils","triggerActionType","createDefaultTriggerAction","triggerActionUlid","triggerGroupUuid","triggerGroupUlid","actionGroupUuid","actionGroupUlid","triggerActionUtils","triggerActionGroupType","createDefaultTriggerActionGroup","triggerAction","triggerActionGroupUlid","mergeTriggerActionGroupToDefaultData","result","projectType","ProjectVisibility","createDefaultProject","triggerActionGroup","visibility","childrenVersion","createProjectByCategory","project","projectUtils","MergeStrategy","getMergeStrategy","fnLog","sub","strategy","window","__PROJECT_MERGE_STRATEGY__","process","env","NEXT_PUBLIC_PROJECT_MERGE_STRATEGY","replaceProject","localProject","backendProject","mergeProject","mergeBackendFields","mergeBusinessFields","mergeChildren","parentLog","backendFields","forEach","field","oldValue","newValue","businessFields","i","backendChild","localChild","mergeChild","backendGrandChild","localGrandChild","mergeTriggerAction","localTriggerAction","backendTriggerAction","syncProject","isProxy","objectCountUtils","proxyUtils","storeUtils","toParentWatchProxy","toProxy","watchUpdates","s","namespace","listName","draftName","projectSettingsMapName","loadProjectList","read","prepareProjectList","loadDraft","loadProjectSettingsMap","map","isMap","isObject","p","merged","merge","draft","_projectSettingsMap","console","projectSettingsMap","printList","getObjectCount","index","printDraft","write","runPauseProxyFn","arguments","saveProject","copy","cloneDeep","findIndex","existingProject","title","childrenLength","findSavedProject","find","findProject","findDraftOrSavedProject","findProjectByUuid","found","originUuid","undefined","removeProject","splice","removeProjectSettings","removeDraft","addDraft","addProjectSettings","getDraft","getListCopy","getDraftCopy","getProjectSettings","settings","old","newSettings","cleanStorage","projectStore","deleteDraft","getProjectStore","createTriggerHandler","onSelect","query","triggerGroupMap","triggerMap","history","back","createActionHandler","actionGroupMap","actionMap","ProjectMemberType","ActionListFromEnum","TriggerOrActionListTypeEnum","getTriggerOrActionListPageParams","params","projectUlid","foundTriggerActionGroup","child","item","parseAction","parseTrigger","actionUlid","triggerUlid","throwTraceError","msg","rest","error","trace","Dispatcher","dispatcher","EditType","dispatchEditEvent","editType","event","dispatch","onEditJavaData","projectMemberType","onActionEdit","onTriggerEdit","onEditWebConfig","projectInfo","javaData","webConfig","onAdd","onActionGroupAdd","onTriggerGroupAdd","group","addListener","projectEventUtils","createContext","ProjectContext","TriggerActionGroupContext","TriggerActionContext","TriggerGroupContext","TriggerListContext","TriggerContext","ActionGroupContext","ActionListContext","ActionContext","GroupCheckList1Context","GroupCheckList2Context","getParent","projectDataToUniqueId","add","name","id","getProjectByProp","prop","projectData","getProjectElementByProp","prefix","suffix","getProjectElementsId","getTriggerActionGroupByProp","getTriggerActionGroupElementByProp","getTriggerActionGroupElement","getTriggerActionListByProp","triggerActionList","getTriggerActionListElementByProp","getTriggerActionByProp","getTriggerActionElementByProp","getTriggerGroupByProp","getTriggerGroupElementByProp","getTriggerGroupElement","getTriggerListByProp","triggerList","getTriggerListElementByProp","getTriggerByProp","getTriggerElementByProp","getActionGroupByProp","getActionGroupElementByProp","getActionGroupElement","getActionListByProp","actionList","getActionListElementByProp","getActionByProp","getActionElementIdByProp","childData","childToProjectDataUtils","getProxyTarget","projectsHistoryMap","Map","addProjectHistory","projectId","get","set","getProjectHistory","removeProjectHistory","delete","getProjectLastHistory","takeProjectSnapshoot","last","isEqual","newIndex","date","toISOString","projectHistoryIsChanged","isChanged","isSameProjectHistoryId","isSame","validateUrl","url","trimmedUrl","trim","hasHttpProtocol","startsWith","hasHttpsProtocol","urlObj","URL","href","e","protocol","isValid","findInTriggerActionGroup","Array","ta","findInActionGroup","findInTriggerGroup","t","findEntityInProject","entity","findEntityAcrossProjects","allProjects","projectClientId","clientId","SFCond","SFCondId","SFCondText","SFCondMatchText","SFCondDesc","SFCondClickable","ISFCondfType","SFCondIds","SFCondDescs","SFCondTexts","SFCondRoot","getData","parse","getCondRoot","pn","an","cn","SFCondTypes","SFAction","SFActionFocus","SFActionLearFocus","SFActionClick","SFActionTryClick","SFActionLongClick","SFActionGlobalClick","SFActionSetText","value","SFWait","time","interval","invisible","SFData","a11yNodeProperyEnum","A11yNode","isAccessibilityDataSensitive","isAccessibilityFocused","isCheckable","isChecked","isClickable","isContentInvalid","isContextClickable","isDismissable","isEditable","isEnabled","isFocusable","isFocused","isHeading","isImportantForAccessibility","isLongClickable","isMultiLine","isPassword","isScreenReaderFocusable","isScrollable","isSelected","isShowingHintText","isTextEntryKey","isTextSelectable","isVisibleToUser","A11yNodePropertyType","A11yNodePropertyInfo","constructor","a11yNodeProperties","viewIdResourceName","text","contentDescription","listIndex","className","hintText","boundsInScreen","availableExtraData","a11yNodeRealizedKeys","NodeActionKeys","nodeActions","clazz","hasInput","Box","FormControl","FormControlLabel","FormLabel","Grid2","Input","Radio","RadioGroup","useTranslation","NodeActionUI","nodeAction","setNodeAction","setText","uiLog","handleChange","target","sx","width","aria-labelledby","onChange","click","control","label","longClick","direction","spacing","container","size","tryClick","globalClick","DescriptionContentType","translationGlobalConfig","auto","initLog","indexedDbUtils","CACHE_NAMESPACE","cacheStore","initCache","getIndexedDbStore","defData","mergeDefData","generateCacheKey","originalText","sourceLang","targetLang","hash","from","reduce","char","charCodeAt","getFromCache","store","cached","saveToCache","translatedText","cacheItem","timestamp","clearCache","clearAll","translationCache","translate","translateText","isHtml","to","detectedSourceLang","language","iso","translationService","React","useEffect","useState","fanfanloI18n","useProxyWatch","TranslationComponent","props","setOriginalText","setTranslatedText","showTranslation","setShowTranslation","isTranslating","setIsTranslating","setError","effectLog","textContent","isValidElement","reactElementToHtml","extractTextFromReactNode","String","join","performTranslation","err","message","handleClick","newShowTranslation","displayText","data-testid","onClick","cursor","position","div","dangerouslySetInnerHTML","__html","span","style","marginLeft","fontSize","color","node","element","tagName","attributes","entries","attrsString","selfClosingTags","includes","childrenHtml","html","Typography","DescriptionContentRenderer","content","contentType","TEXT","HTML","iframe","sandbox","minHeight","border","borderRadius","scriptExitMechanismCode","projectRunner2Text","javaLib","extractUsedTypes","types","Set","triggerActionGroups","triggerActions","j","triggers","k","actions","prepareDependencies","dependencies","impSet","impList","path","has","file","d","createLibScript","storePath","createEventDispatcherPath","createGetterSetterPath","allDeps","libLoggerCode","libHeaderCode","libFooterCode","assembleProjectScript","usedTypes","javaLibScript","script","assembleRhinoRunner","options","conf","bridgeId","scriptId","onlyRunSingle","stopPrevIfOnlyRunSingle","forceStopTime","foregroundText","languageVersion","optimizationLevel","printScript","loadI18nValue","WebViewJsInjectKeysConst","Window","WindowUtils","webViewJs","UIThreadUtil","RhinoInjectNamesConst","quicker","javaRunner","proxy","a11yProxy","a11yModel","WebViewJsDispatcher","AllInjectKeys","WebViewJsInjectKeys","RhinoInjectNames","InjectKeyOptions","i18nKey","getAllInjectKeys","isValidInjectKey","getInjectKeyDescription","fullI18nKey","description","getInjectKeyDescriptionByKey","option","opt"],"sourceRoot":"","ignoreList":[]}