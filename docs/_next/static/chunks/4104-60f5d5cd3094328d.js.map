{"version":3,"file":"static/chunks/4104-60f5d5cd3094328d.js","mappings":"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","sources":["webpack://_N_E/../../libs/app/model/src/remote/emc/inviteContacts.ts","webpack://_N_E/../../libs/app/model/src/remote/emc/tmsEmcGetContactTypes.ts","webpack://_N_E/./src/components/dialogs/InviteContactDialog.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_pending_received_invitations.ts","webpack://_N_E/./src/components/PendingInvitationsList/PendingInvitationsList.tsx","webpack://_N_E/../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js","webpack://_N_E/./src/components/pre-alarm-config2/index.tsx","webpack://_N_E/./src/components/privacies/PrivacyDialogAuto.tsx","webpack://_N_E/./src/components/privacies/ListenShowPrivacyContent.tsx","webpack://_N_E/./src/components/test/TestEmergencyCall.tsx","webpack://_N_E/./src/components/emergency-audio-control/stopAllHandler.ts","webpack://_N_E/./src/components/emergency-audio-control/EmergencyStopButton.tsx","webpack://_N_E/./src/components/emergency-tts-settings/EmergencyTTSSettings.tsx","webpack://_N_E/./src/components/emergency-tts-settings/index.ts","webpack://_N_E/./src/components/permission-status/PermissionStatusPanel.tsx","webpack://_N_E/./src/components/permission-status/index.ts","webpack://_N_E/./src/components/sensor-monitor/SensorMonitor.tsx","webpack://_N_E/./src/pages/home/index.tsx","webpack://_N_E/./src/components/report/ReportButton/index.tsx","webpack://_N_E/../../libs/app/model/src/remote/report/submit.ts","webpack://_N_E/./src/components/report/ReportSubmitModal/index.tsx","webpack://_N_E/./src/components/navbar/NavBar.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_all_invitations.ts","webpack://_N_E/./src/components/privacies/PrivacyDialogDisplay.tsx","webpack://_N_E/../../libs/app/ui/src/components/tabbar/Tabbar.tsx"],"sourcesContent":["import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description \n */\nexport interface IEmcContactIdentity {\n    identity: string;\n    identityType: 'email' | 'mobile';\n}\n\n/**\n * @description \n */\nexport interface IEmcInviteContactsParams extends IRequestParams {\n    contacts: IEmcContactIdentity[];\n    remark?: string;\n    type: string;\n    message?: string;\n    matrix_access_token: string; //  Matrix  Token\n}\n\n/**\n * @description \n */\nexport interface IEmcInviteResultItem {\n    identity: string;\n    result_code: string; //  ResultCode \n    msg: string;\n}\n\n/**\n * @description \n */\n// export interface IEmcInviteContactsResult extends IResultContent {\n//     data: {\n//         data: {\n//             results: IEmcInviteResultItem[];\n//             msg?: string;\n//         };\n//         msg?: string;\n//     };\n//     results?: IEmcInviteResultItem[]; // \n// }\n\nexport interface IEmcInviteContactsResult extends IResultContent {\n    data: {\n        is_ok:boolean;\n        results: IEmcInviteResultItem[];\n        msg?: string;\n    };\n}\n\n/**\n * @description \n * @param opts  params, gateway, handler \n */\nexport async function tmsEmcInviteContacts(opts: IRequestOptions<IEmcInviteContactsParams>) {\n    const res = await request<IEmcInviteContactsResult>(tms.TEmc, tms.MEmcInviteContacts, opts.params, opts.gateway, opts.handler);\n    return res;\n}","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description \n */\nexport interface IEmcGetContactTypesParams extends IRequestParams {\n    // \n}\n\n/**\n * @description \n */\nexport interface IEmcContactTypeItem {\n    id: string;\n    name: string;\n    //  icon, description \n}\n\n/**\n * @description \n */\nexport interface IEmcGetContactTypesResult extends IResultContent {\n    data: {\n        types: Array<{\n            uuid: string;\n            name: string;\n            is_system: boolean;\n        }>;\n    };\n}\n\n/**\n * @description \n * @param opts  params, gateway, handler \n */\nexport async function tmsEmcGetContactTypes(opts: IRequestOptions<IEmcGetContactTypesParams>) {\n    const res = await request<IEmcGetContactTypesResult>(tms.TEmc, tms.MEmcGetContactTypes, opts.params, opts.gateway, opts.handler);\n    return res;\n}\n","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Box,\n    CircularProgress,\n    Autocomplete,\n} from '@mui/material';\nimport { useState, useCallback, useEffect, useRef, SyntheticEvent } from 'react';\nimport { \n    IEmcInviteContactsParams, \n    tmsEmcInviteContacts, \n    IEmcContactIdentity, \n    user, \n    tmsEmcGetContactTypes,\n    IEmcGetContactTypesResult,\n    IEmcContactTypeItem,\n    IEmcInviteResultItem,\n} from '@app/model';\nimport toast from 'react-hot-toast';\nimport { matrixUser } from '@im/matrix';\nimport { authService } from '@src/services/authService';\nimport { Log, useProxyWatch,\n    IRequestResult } from '@fanfanlo';\nconst fileLogger = new Log(false, 'InviteContactDialog.tsx');\n\nconst isValidIdentity = (text: string) => /(^\\d{11}$)|(^[a-zA-Z0-9]{32}$)/.test(text);\nconst is11DigitNumber = (text: string) => /^\\d{11}$/.test(text);\n\ninterface InviteContactDialogProps {\n    open: boolean;\n    onClose: () => void;\n    onInviteSent?: () => void;\n}\n\nexport function InviteContactDialog({ open, onClose, onInviteSent }: InviteContactDialogProps) {\n    const uiLogger = fileLogger.sub(false, 'InviteContactDialog_ui');\n\n    const [contacts, setContacts] = useState('');\n    const [remark, setRemark] = useState('');\n    const [callType, setCallType] = useState<string | null>(null);\n    const [availableCallTypes, setAvailableCallTypes] = useState<readonly IEmcContactTypeItem[]>([]);\n    \n    // Debug effect to log availableCallTypes changes\n    useEffect(() => {\n        console.log('availableCallTypes updated:', availableCallTypes);\n    }, [availableCallTypes]);\n    \n    // Debug effect to log callType changes\n    useEffect(() => {\n        console.log('callType updated:', callType);\n    }, [callType]);\n    const [message, setMessage] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isTypesLoading, setIsTypesLoading] = useState(false);\n\n    const [pendingParams, setPendingParams] = useState<Omit<IEmcInviteContactsParams, 'matrix_access_token'> | null>(null);\n    const executionLock = useRef(false);\n    const [accessToken] = useProxyWatch(matrixUser.userData.userInfo, 'loginResponse.access_token', matrixUser.userData.userInfo.loginResponse?.access_token);\n    const [isUserLoggedIn] = useProxyWatch(user.data.sessionData, 'global_user_info', !!user.data.sessionData.global_user_info);\n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    useEffect(() => {\n        if (accessToken && pendingParams && !executionLock.current) {\n            executionLock.current = true;\n            const finalParams: IEmcInviteContactsParams = {\n                ...pendingParams,\n                matrix_access_token: accessToken,\n                contacts: pendingParams?.contacts || [],\n                type: pendingParams?.type || ''\n            };\n            executeApiCall(finalParams);\n        }\n    }, [accessToken, pendingParams]);\n\n    const executeApiCall = useCallback(async (params: IEmcInviteContactsParams) => {\n        if (!params.contacts || !params.type) {\n            toast.error('');\n            return;\n        }\n\n        setIsLoading(true);\n        \n        try {\n            const res = await tmsEmcInviteContacts({\n                params,\n                handler: { printLog: true }\n            });\n\n            console.log('Invite response:', res);\n\n            // \n            if (res.err || !res.shellIsOk || !res.dataIsOk) {\n                const errorMessage = res.err?.message || '';\n                toast.error(errorMessage);\n                return;\n            }\n\n            // \n            const responseData = res.data;\n            if (!responseData?.data?.results) {\n                const errorMessage = responseData?.data?.msg || res.data?.msg || '';\n                toast.error(errorMessage);\n                return;\n            }\n            \n            const results: IEmcInviteResultItem[] = responseData.data.results;\n\n            // \n            const successResults = results.filter(r => r.result_code === 'SUCCESS');\n            const infoResults = results.filter(r => r.result_code === 'INVITE_ALREADY_SENT' || r.result_code === 'ALREADY_A_CONTACT');\n            const errorResults = results.filter(r => r.result_code !== 'SUCCESS' && r.result_code !== 'INVITE_ALREADY_SENT' && r.result_code !== 'ALREADY_A_CONTACT');\n\n            if (successResults.length > 0) {\n                toast.success(` ${successResults.length} `);\n                onInviteSent?.();\n            }\n            \n            if (infoResults.length > 0) {\n                const infoMessages = infoResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (infoMessages) {\n                    //  toast  toast.info\n                    toast(infoMessages);\n                }\n            }\n            \n            if (errorResults.length > 0) {\n                const errorMessages = errorResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (errorMessages) {\n                    toast.error(`\\n${errorMessages}`);\n                }\n            }\n        } catch (error) {\n            console.error('Error in executeApiCall:', error);\n            toast.error('');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [onInviteSent]);\n\n    const fetchCallTypes = useCallback(async () => {\n        const logger = uiLogger.sub(false, 'fetchCallTypes_fn');\n        logger.log('Fetching call types...');\n        setIsTypesLoading(true);\n        const res: IRequestResult<IEmcGetContactTypesResult, any> = await tmsEmcGetContactTypes({ params: {}, handler: { printLog: true } });\n        logger.log('Call types response:', JSON.stringify(res));\n        setIsTypesLoading(false);\n\n        if (res.err || !res.shellIsOk || !res.dataIsOk) {\n            const errorMessage = res.err?.message || '';\n            toast.error(errorMessage);\n            setAvailableCallTypes([]);\n            logger.error('Failed to load call types:', errorMessage);\n        } else {\n            //  res.data.data.types \n            const types = res.data?.data?.types || [];\n            logger.log('Setting availableCallTypes:', JSON.stringify(types));\n            \n            //  IEmcContactTypeItem[] \n            const formattedTypes = types.map(type => ({\n                id: type.uuid,\n                name: type.name,\n                is_system: type.is_system\n            }));\n            \n            setAvailableCallTypes(formattedTypes);\n            \n            //  callType \n            if (formattedTypes.length > 0 && !callType) {\n                const defaultType = formattedTypes[0].name;\n                logger.log('Setting default call type:', defaultType);\n                setCallType(defaultType);\n            } else if (formattedTypes.length === 0) {\n                logger.warn('No call types available');\n            }\n        }\n    }, []); //  callType \n\n    useEffect(() => {\n        if (open) {\n            fetchCallTypes();\n        } else {\n            setContacts('');\n            setRemark('');\n            setCallType(null);\n            setAvailableCallTypes([]);\n            setMessage('');\n            setIsLoading(false);\n            setPendingParams(null);\n            executionLock.current = false;\n        }\n    }, [open, fetchCallTypes]);\n\n    const handleSendInvitation = useCallback(async () => {\n        const contactInputs = contacts.split('\\n').map(c => c.trim()).filter(c => c);\n        if (contactInputs.length === 0) {\n            toast.error('');\n            return;\n        }\n\n        const contactIdentities: IEmcContactIdentity[] = [];\n        for (const input of contactInputs) {\n            if (isValidIdentity(input)) {\n                const type = is11DigitNumber(input) ? 'mobile' : 'email';\n                contactIdentities.push({ identity: input, identityType: type });\n            } else {\n                toast.error(`: ${input}1132`);\n                return;\n            }\n        }\n\n        if (!callType || callType.trim() === '') {\n            toast.error('');\n            return;\n        }\n\n        setIsLoading(true);\n\n        if (!userToken) {\n            const appLoggedIn = await authService.showLoginDialog();\n            if (!appLoggedIn) {\n                setIsLoading(false);\n                return; \n            }\n        }\n\n        const currentAccessToken = matrixUser.userData.userInfo.loginResponse?.access_token;\n        const params: Omit<IEmcInviteContactsParams, 'matrix_access_token'> = {\n            contacts: contactIdentities,\n            type: callType.trim(),\n            remark: remark.trim(),\n            message: message.trim(),\n        };\n\n        if (currentAccessToken) {\n            executionLock.current = true;\n            const apiParams: IEmcInviteContactsParams = {\n                ...params,\n                matrix_access_token: currentAccessToken,\n                contacts: params.contacts || [],\n                type: params.type || ''\n            };\n            executeApiCall(apiParams);\n        } else {\n            toast('...');\n            setPendingParams(params);\n        }\n\n    }, [contacts, remark, callType, message, executeApiCall, isUserLoggedIn]);\n\n    return (\n        <Dialog open={open} onClose={() => onClose()} maxWidth=\"sm\" fullWidth>\n            <DialogTitle></DialogTitle>\n            <DialogContent>\n                <Box component=\"form\" sx={{ mt: 2 }}>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"contacts\"\n                        label=\" (11)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={4}\n                        variant=\"outlined\"\n                        placeholder=\"13800138000\"\n                        value={contacts}\n                        onChange={(e) => setContacts(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"remark\"\n                        label=\" ()\"\n                        type=\"text\"\n                        fullWidth\n                        variant=\"outlined\"\n                        value={remark}\n                        onChange={(e) => setRemark(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <Autocomplete\n                        freeSolo\n                        id=\"call-type-autocomplete\"\n                        options={availableCallTypes.map((option) => option.name)}\n                        value={callType || ''}\n                        onChange={(event: SyntheticEvent, newValue: string | null) => {\n                            console.log('Call type changed to:', newValue);\n                            setCallType(newValue);\n                        }}\n                        inputValue={callType || ''}\n                        onInputChange={(event, newInputValue, reason) => {\n                            // Only update when the user is typing, not when an option is selected\n                            if (reason === 'input') {\n                                console.log('Input value changed to:', newInputValue);\n                                setCallType(newInputValue);\n                            }\n                        }}\n                        disablePortal\n                        disableClearable\n                        forcePopupIcon={!isTypesLoading}\n                        sx={{ mt: 1, mb: 1, width: '100%' }}\n                        renderInput={(params) => (\n                            <TextField\n                                {...params}\n                                label=\"\"\n                                variant=\"outlined\"\n                                fullWidth\n                                InputProps={{\n                                    ...params.InputProps,\n                                    endAdornment: (\n                                        <>\n                                            {isTypesLoading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                                            {params.InputProps.endAdornment}\n                                        </>\n                                    ),\n                                }}\n                            />\n                        )}\n                        ListboxProps={{\n                            style: {\n                                maxHeight: '200px',\n                                overflow: 'auto',\n                            },\n                        }}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"message\"\n                        label=\" ()\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={3}\n                        variant=\"outlined\"\n                        placeholder=\"\"\n                        value={message}\n                        onChange={(e) => setMessage(e.target.value)}\n                        disabled={isLoading}\n                    />\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => onClose()} disabled={isLoading}></Button>\n                <Button onClick={handleSendInvitation} variant=\"contained\" disabled={isLoading}>\n                    {isLoading ? <CircularProgress size={24} /> : ''}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { request } from \"@fanfanlo\";\n\n/**\n * \n */\nexport interface IParamsListPendingReceivedInvitations {\n  // \n  page?: number;\n  page_size?: number;\n}\n\n/**\n * \n */\nexport interface IPendingInvitationInfo {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: 'pending';\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * \n */\nexport interface IResultListPendingReceivedInvitations {\n  is_ok: boolean;\n  msg?: string;\n  invitations: IPendingInvitationInfo[];\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallListPendingReceivedInvitations(\n  opts: IRequestOptions<IParamsListPendingReceivedInvitations>\n) {\n  return request<IResultListPendingReceivedInvitations, IParamsListPendingReceivedInvitations>(\n    tms.TEmc,\n    tms.MEmcListPendingReceivedInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// \nexport const emergencyCallPendingInvitationService = {\n  listPendingReceivedInvitations: tmsEmergencyCallListPendingReceivedInvitations,\n};\n\nexport default emergencyCallPendingInvitationService;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardActions,\n  CircularProgress,\n  Avatar,\n  Chip,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport {\n  Check as CheckIcon,\n  Close as CloseIcon,\n  AccessTime as AccessTimeIcon,\n  Person as PersonIcon,\n  Notifications as NotificationsIcon,\n} from '@mui/icons-material';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { \n  emergencyCallPendingInvitationService,\n  emergencyCallInvitationService,\n  IPendingInvitationInfo,\n  user,\n  AppModelEvent,\n  appModel\n} from '@app/model';\nimport { useProxyWatch } from '@fanfanlo';\nimport { matrixClient } from '@im/matrix';\n\n// \nfunction PendingInvitationCard({ \n  invitation,\n  onRespond,\n  isProcessing = false,\n}: { \n  invitation: IPendingInvitationInfo;\n  onRespond?: (action: 'accept' | 'decline') => Promise<void>;\n  isProcessing?: boolean;\n}) {\n  const [isProcessingAction, setIsProcessingAction] = useState(false);\n\n  const handleRespond = async (action: 'accept' | 'decline') => {\n    if (!onRespond) return;\n    \n    try {\n      setIsProcessingAction(true);\n      await onRespond(action);\n    } finally {\n      setIsProcessingAction(false);\n    }\n  };\n\n  const isExpired = new Date(invitation.expires_at * 1000) < new Date();\n\n  return (\n    <Card variant=\"outlined\" sx={{ mb: 2, opacity: isProcessing ? 0.7 : 1 }}>\n      <CardContent>\n        <Box display=\"flex\" alignItems=\"center\" mb={2}>\n          <Avatar \n            src={invitation.user_info.avatar_url} \n            alt={invitation.user_info.display_name}\n            sx={{ width: 50, height: 50, mr: 2 }}\n          >\n            {invitation.user_info.display_name?.[0]?.toUpperCase() || '?'}\n          </Avatar>\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\">\n              {invitation.user_info.display_name || ''}\n            </Typography>\n            {/* <Typography variant=\"body2\" color=\"text.secondary\">\n              ID: {invitation.user_info.user_id}\n            </Typography> */}\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              {formatDistanceToNow(invitation.created_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}\n            </Typography>\n          </Box>\n          <Box textAlign=\"right\">\n            <Chip \n              size=\"small\"\n              icon={<AccessTimeIcon fontSize=\"small\" />}\n              label={isExpired ? '' : `${formatDistanceToNow(invitation.expires_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}`}\n              color={isExpired ? 'error' : 'primary'}\n              variant=\"outlined\"\n            />\n          </Box>\n        </Box>\n        \n        {invitation.message && (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, mb: 1 }}>\n            : {invitation.message}\n          </Typography>\n        )}\n\n        <Typography variant=\"body2\" color=\"primary\" sx={{ fontWeight: 'medium' }}>\n          \n        </Typography>\n      </CardContent>\n      \n      {!isExpired && (\n        <CardActions sx={{ justifyContent: 'flex-end', pt: 0 }}>\n          <Button \n            size=\"small\" \n            color=\"error\"\n            startIcon={<CloseIcon />}\n            onClick={() => handleRespond('decline')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            \n          </Button>\n          <Button \n            size=\"small\" \n            color=\"primary\"\n            variant=\"contained\"\n            startIcon={<CheckIcon />}\n            onClick={() => handleRespond('accept')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            \n          </Button>\n        </CardActions>\n      )}\n    </Card>\n  );\n}\n\nconst PendingInvitationsList: React.FC = () => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [invitations, setInvitations] = useState<IPendingInvitationInfo[]>([]);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // \n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n\n  // \n  const loadPendingInvitations = useCallback(async () => {\n    if (!userToken) {\n      setInvitations([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const res = await emergencyCallPendingInvitationService.listPendingReceivedInvitations({\n        params: {},\n      } as any);\n      \n      if (res.shellIsOk && res.dataIsOk && res.data?.is_ok) {\n        setInvitations(res.data.invitations || []);\n      } else {\n        setError(res.data?.msg || '');\n      }\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userToken]); // userToken\n\n  // \n  const handleRespondToInvite = useCallback(async (invitationId: string, action: 'accept' | 'decline'): Promise<void> => {\n    try {\n      setIsProcessing(true);\n\n      const res = await emergencyCallInvitationService.respondToInvite({\n        params: { invitation_id: invitationId, action },\n      } as any);\n\n      if (!res.shellIsOk || !res.dataIsOk || !res.data?.is_ok) {\n        throw new Error(res.data?.msg || '');\n      }\n      \n      // \n      setInvitations(prev => prev.filter(invite => invite.invitation_id !== invitationId));\n      \n      // \n      appModel.dispatcher.emit(AppModelEvent.InviteListUpdated);\n      \n    } catch (err) {\n      console.error(':', err);\n      setError(err instanceof Error ? err.message : '');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, []);\n\n  // \n  useEffect(() => {\n    if (userToken) {\n      // \n      loadPendingInvitations();\n    } else {\n      // \n      setInvitations([]);\n    }\n  }, [userToken]); // userToken\n\n  // \n  useEffect(() => {\n    const unsubscribe = appModel.dispatcher.addListener(AppModelEvent.InviteListUpdated, () => {\n      console.log('AppModelEvent.InviteListUpdated - ');\n      loadPendingInvitations();\n    });\n\n    return unsubscribe;\n  }, [loadPendingInvitations]); // loadPendingInvitations\n\n  useEffect(()=>{\n    const unsub = matrixClient.imDispatcher.addListener(matrixClient.ImDispatcherEventTypes.INVITE, ()=>{\n      if(!userToken)return;\n      loadPendingInvitations();\n    });\n    return unsub;\n  }, [])\n  // \n  if (!userToken) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" p={2}>\n        {/* <CircularProgress size={24} />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          ...\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box p={2}>\n        <Alert severity=\"error\">\n          {error}\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (invitations.length === 0) {\n    return (\n      <Box \n        display=\"flex\" \n        flexDirection=\"column\" \n        alignItems=\"center\" \n        p={2}\n        textAlign=\"center\"\n      >\n        {/* <NotificationsIcon color=\"disabled\" sx={{ fontSize: 48, mb: 1 }} />\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          \n        </Typography> */}\n      </Box>\n    );\n  }\n\n  return (\n    <Box p={2}>\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\n        <NotificationsIcon color=\"primary\" sx={{ mr: 1 }} />\n        <Typography variant=\"h6\" color=\"primary\">\n           ({invitations.length})\n        </Typography>\n      </Box>\n\n      <Stack spacing={2}>\n        {invitations.map((invitation) => (\n          <PendingInvitationCard\n            key={invitation.invitation_id}\n            invitation={invitation}\n            onRespond={(action) => handleRespondToInvite(invitation.invitation_id, action)}\n            isProcessing={isProcessing}\n          />\n        ))}\n      </Stack>\n    </Box>\n  );\n};\n\nexport default PendingInvitationsList;","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\lodash@4.17.21\\\\node_modules\\\\lodash\\\\lodash.js\"","import React, { useState, useCallback } from 'react';\nimport {\n    Box,\n    Switch,\n    Button,\n    Typography,\n    Paper,\n    Collapse,\n    Divider,\n    IconButton,\n    TextField,\n    FormControlLabel,\n    Tooltip,\n    Stack,\n    FormControl,\n    MenuItem,\n    InputLabel,\n    Select,\n} from '@mui/material';\nimport {\n    DragIndicator as DragIndicatorIcon,\n    ExpandLess,\n    Settings,\n    Delete,\n    PlayArrow,\n    Stop,\n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon\n} from '@mui/icons-material';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { debounce } from 'lodash';\nimport { autoJsStoreUtils } from '@droid/android';\n\nconst PRE_ALARM_CONFIG_KEY = 'PRE_ALARM_ACTIONS_CONFIG';\n\ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\ninterface PreAlarmConfig {\n    enabled: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n}\n\nconst defaultSoundResources = [\n    { id: 'beep_short', name: '' },\n    { id: 'siren_gentle', name: '' },\n    { id: 'alarm_clock', name: '' },\n];\n\nconst SortableActionItem: React.FC<{\n    action: PreAlarmAction;\n    isPlaying: boolean;\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n    onRemove: (id: string) => void;\n    onPreview: (resourceId?: string) => void;\n    onStopPreview: () => void;\n}> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview }) => {\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: isDragging ? 1 : 'auto',\n    };\n\n    return (\n        <Paper\n            ref={setNodeRef}\n            style={style}\n            elevation={isDragging ? 3 : 1}\n            sx={{\n                p: 2,\n                mb: 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                userSelect: 'none',\n            }}\n        >\n            <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                <DragIndicatorIcon />\n            </Box>\n            \n            <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                    <Typography variant=\"subtitle2\">\n                        {action.type === 'sound' ? '' : ''}\n                    </Typography>\n                    <TextField\n                        size=\"small\"\n                        type=\"number\"\n                        label=\" (ms)\"\n                        value={action.duration}\n                        onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\n                        sx={{ width: '100%' }}\n                    />\n                    \n                    {action.type === 'sound' && (\n                        <FormControl size=\"small\" sx={{ width: '100%' }}>\n                            <InputLabel></InputLabel>\n                            <Select\n                                value={action.resourceId || ''}\n                                label=\"\"\n                                onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                startAdornment={\n                                    <Tooltip title={isPlaying ? \"\" : \"\"}>\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                            sx={{ mr: 1 }}\n                                        >\n                                            {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                        </IconButton>\n                                    </Tooltip>\n                                }\n                            >\n                                {defaultSoundResources.map((sound) => (\n                                    <MenuItem key={sound.id} value={sound.id}>\n                                        {sound.name}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    )}\n                </Box>\n            </Box>\n            \n            <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\">\n                <Delete />\n            </IconButton>\n        </Paper>\n    );\n};\n\nconst PreAlarmConfig2: React.FC = () => {\n    const [config, setConfig] = useState<PreAlarmConfig | null>(null);\n    const [expanded, setExpanded] = useState(false);\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n\n    const debouncedWrite = useCallback(\n        debounce((newConfig: PreAlarmConfig) => {\n            autoJsStoreUtils.write(PRE_ALARM_CONFIG_KEY, newConfig);\n        }, 500),\n        []\n    );\n\n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    React.useEffect(() => {\n        const loadConfig = async () => {\n            const storedConfig = await autoJsStoreUtils.read<PreAlarmConfig>(PRE_ALARM_CONFIG_KEY);\n            if (storedConfig) {\n                const actionsWithIds = storedConfig.actions.map((action) => ({\n                    ...action,\n                    id: action.id || `action-${Math.random().toString(36).substr(2, 9)}`,\n                }));\n                setConfig({\n                    ...storedConfig,\n                    actions: actionsWithIds,\n                });\n            } else {\n                setConfig({\n                    enabled: true,\n                    actions: [],\n                    maxWaitDuration: 30000,\n                });\n            }\n        };\n        loadConfig();\n    }, []);\n\n    const updateConfig = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                const newConfig = { ...prev, ...updates };\n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    const handleToggleEnabled = (event: React.ChangeEvent<HTMLInputElement>) => {\n        updateConfig({ enabled: event.target.checked });\n    };\n\n    const handleAddAction = (type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: 8000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfig({\n            actions: [...(config?.actions || []), newAction],\n        });\n    };\n\n    const handleUpdateAction = (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    };\n\n    const handleRemoveAction = (id: string) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!config || !over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfig({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    };\n\n    const handlePreviewSound = (resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound();\n        \n        console.log(`[WebView] Attempting to preview sound. resourceId: ${resourceId}`);\n\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager JavascriptInterface is not available.');\n        }\n    };\n\n    const handleStopSound = () => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    };\n\n    if (!config) {\n        return <Box sx={{ p: 2, textAlign: 'center' }}>...</Box>;\n    }\n\n    return (\n        <Box sx={{ mb: 3 }}>\n            <Paper \n                elevation={1} \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    borderRadius: 1,\n                }}\n            >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"subtitle1\"></Typography>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={config.enabled}\n                                onChange={handleToggleEnabled}\n                                color=\"primary\"\n                            />\n                        }\n                        label={config.enabled ? '' : ''}\n                    />\n                </Box>\n                \n                <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={expanded ? <ExpandLess /> : <Settings />}\n                    onClick={() => setExpanded(!expanded)}\n                >\n                    {expanded ? '' : ''}\n                </Button>\n            </Paper>\n\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        mt: 1, \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                             ()\n                        </Typography>\n                        <TextField\n                            fullWidth\n                            type=\"number\"\n                            value={config.maxWaitDuration}\n                            onChange={(e) =>\n                                updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })\n                            }\n                            size=\"small\"\n                            InputProps={{\n                                endAdornment: (\n                                    <Typography variant=\"body2\" sx={{ ml: 1 }}>\n                                        \n                                    </Typography>\n                                ),\n                            }}\n                        />\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Box sx={{ mb: 2 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\">\n                                 ({config.actions.length})\n                            </Typography>\n                            <Stack direction=\"row\" spacing={1}>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VolumeUpIcon />}\n                                    onClick={() => handleAddAction('sound')}\n                                >\n                                    \n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VibrationIcon />}\n                                    onClick={() => handleAddAction('vibration')}\n                                >\n                                    \n                                </Button>\n                            </Stack>\n                        </Box>\n\n                        {config.actions.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography></Typography>\n                            </Paper>\n                        ) : (\n                            <DndContext\n                                sensors={sensors}\n                                collisionDetection={closestCenter}\n                                onDragEnd={handleDragEnd}\n                            >\n                                <SortableContext\n                                    items={config.actions.map((a) => a.id)}\n                                    strategy={verticalListSortingStrategy}\n                                >\n                                    {config.actions.map((action) => (\n                                        <SortableActionItem\n                                            key={action.id}\n                                            action={action}\n                                            isPlaying={playingSoundId === action.resourceId}\n                                            onUpdate={handleUpdateAction}\n                                            onRemove={handleRemoveAction}\n                                            onPreview={handlePreviewSound}\n                                            onStopPreview={handleStopSound}\n                                        />\n                                    ))}\n                                </SortableContext>\n                            </DndContext>\n                        )}\n                    </Box>\n                </Paper>\n            </Collapse>\n        </Box>\n    );\n};\n\nexport default PreAlarmConfig2;\n","import { useEffect } from 'react';\nimport { autoJsStoreUtils, isRealInAndroid } from '@droid/android';\nimport { PrivacyDialogDisplay } from './PrivacyDialogDisplay';\nimport { useState } from 'react';\n\ninterface PrivacyDialogAutoProps {\n  type: string;\n  area: string;\n}\n\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\n\nlet autoOpened = false; // \n/**\n *  - \n * 35-49\n */\nexport function PrivacyDialogAuto({ type, area }: PrivacyDialogAutoProps) {\n  const [open, setOpen] = useState(false);\n  // const [autoOpened, setAutoOpened] = useState(false);\n\n  const handleClose = () => {\n    autoOpened = true; // \n    setOpen(false);\n    // setAutoOpened(true);\n  };\n\n  //  (35-49)\n  useEffect(() => {\n    const def: IPrivacyInfo = { agree: false, disagreeTime: 0 };\n    const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_${type}`, def);\n    const value: IPrivacyInfo = res && 'agree' in res ? res : def;\n    if(autoOpened){\n      //\n      return;\n    }\n    // Android\n    if (!isRealInAndroid) {\n      return;\n    }\n    \n    // \n    if (value.agree) {\n      return;\n    }\n    \n    // 3\n    if (value.disagreeTime && value.disagreeTime != 0 && value.disagreeTime + 3 * 24 * 60 * 60 * 1000 > Date.now()) {\n      return;\n    }\n    \n    // \n    setOpen(true);\n  }, [type]);\n\n  return (\n    <PrivacyDialogDisplay\n      open={open }\n      onClose={handleClose}\n      type={type}\n      area={area}\n    />\n  );\n}","import { useEffect, useState } from \"react\";\r\nimport { PrivacyDialogAuto } from \"./PrivacyDialogAuto\";\r\nimport { autoJsStoreUtils } from \"@droid/android\";\r\n\r\n\r\nexport function ListenShowPrivacyContent({type}:{type:string}){\r\n\r\n    const [open, setOpen] = useState(false);\r\n    function onClose() {\r\n        setOpen(false);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const value = autoJsStoreUtils.read(`privacy_${type}`, false)\r\n    }, [])\r\n    return(\r\n        <PrivacyDialogAuto type={type} area=\"zh-cn\" />\r\n    )\r\n}","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Box, Button } from \"@mui/material\";\r\n\r\n\r\nexport function TestEmergencyCall() {\r\n    function onClick(){\r\n        // const script = `\r\n//         var instance = com.fanfanlo.emergencycall.service\r\n// .SensorMonitoringService.callFallDetection();\r\n//         `\r\n        const script = `\r\n        com.fanfanlo.emergencycall.manager.EmergencyCallJSInterface.startFallDetectionCall()`\r\n        const res = autoWebViewJs.callScript(script);\r\n        console.log(\"TestEmergencyCall res=\", res);\r\n    }\r\n    return(\r\n        <Box >\r\n            <Button  variant=\"contained\" onClick={onClick}>\r\n                \r\n            </Button>\r\n        </Box>  \r\n    )\r\n}","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Log } from \"@fanfanlo\";\r\n\r\nconst fileLog = new Log(false, 'stopAllHandler_f');\r\n\r\nexport function stopAllHandler() {\r\n\r\n    try {\r\n      fileLog.log('...');\r\n\r\n      // EmergencyAudioControl.tsx\r\n      const stopEmergencyMethods = [\r\n        // \r\n        // `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`,\r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stop();\r\n          com.fanfanlo.emergencycall.manager.AlarmSoundManager.stop();\r\n          com.fanfanlo.emergencycall.v2.core.EmergencySystemV2.forceStopHelpSound();\r\n        } catch(e) {\r\n          console.log(':', e);\r\n        }\r\n        `,\r\n        \r\n        // \r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stopEmergencyAlarm();\r\n          \r\n          // WebViewActivityAndroid\r\n          if(typeof Android !== 'undefined' && typeof Android.stopAlarm === 'function') {\r\n            Android.stopAlarm();\r\n          }\r\n        } catch(e) {\r\n          console.log(':', e);\r\n        }\r\n        `\r\n      ];\r\n\r\n      for (const script of stopEmergencyMethods) {\r\n        try {\r\n          fileLog.log(`: ${script.trim()}`);\r\n          autoWebViewJs.callScript(script);\r\n        } catch (methodError) {\r\n          fileLog.warn(`:`, methodError);\r\n          // \r\n        }\r\n      }\r\n\r\n      fileLog.log('');\r\n      return true;\r\n    //   setMessage({\r\n    //     type: 'success',\r\n    //     text: ''\r\n    //   });\r\n    } catch (error) {\r\n      fileLog.error(':', error);\r\n    //   setMessage({\r\n    //     type: 'error',\r\n    //     text: `: ${error instanceof Error ? error.message : ''}`\r\n    //   });\r\n    return false;\r\n    } finally {\r\n    //   setLoading(false);\r\n    }\r\n    \r\n}","import React, { useState } from 'react';\nimport {\n  Button,\n  Snackbar,\n  Alert,\n  Fab,\n  Tooltip\n} from '@mui/material';\nimport {\n  Stop as StopIcon,\n  VolumeOff as VolumeOffIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\nimport { stopAllHandler } from './stopAllHandler';\n\nconst fileLog = new Log(false, 'EmergencyStopButton');\n\ninterface EmergencyStopButtonProps {\n  variant?: 'button' | 'fab';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n}\n\n/**\n * \n * \n */\nconst EmergencyStopButton: React.FC<EmergencyStopButtonProps> = ({ \n  variant = 'button',\n  size = 'medium',\n  fullWidth = false\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  /**\n   * Android WebView\n   */\n  const isAndroidWebView = (): boolean => {\n    try {\n      return !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n    } catch (e) {\n      fileLog.error('WebView:', e);\n      return false;\n    }\n  };\n\n  /**\n   * \n   */\n  const handleStopAllEmergencyAudio = async (): Promise<void> => {\n    setLoading(true);\n    setMessage(null);\n\n    const bl = stopAllHandler();\n    if (bl){\n      \n      setMessage({\n        type: 'success',\n        text: ''\n      });\n    }else{\n      \n      setMessage({\n        type: 'error',\n        text: ``\n      });\n    }\n    setLoading(false);\n  };\n\n  /**\n   * \n   */\n  const handleCloseMessage = () => {\n    setMessage(null);\n  };\n\n  // \n  if (variant === 'fab') {\n    return (\n      <>\n        <Tooltip title=\"\" placement=\"left\">\n          <Fab\n            color=\"error\"\n            onClick={handleStopAllEmergencyAudio}\n            disabled={loading}\n            size={size}\n            sx={{\n              position: 'fixed',\n              bottom: 80,\n              right: 16,\n              zIndex: 1000\n            }}\n          >\n            {loading ? <VolumeOffIcon /> : <StopIcon />}\n          </Fab>\n        </Tooltip>\n\n        <Snackbar\n          open={!!message}\n          autoHideDuration={4000}\n          onClose={handleCloseMessage}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert \n            onClose={handleCloseMessage} \n            severity={message?.type || 'info'}\n            sx={{ width: '100%' }}\n          >\n            {message?.text}\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  // \n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"error\"\n        size={size}\n        fullWidth={fullWidth}\n        startIcon={loading ? <VolumeOffIcon /> : <StopIcon />}\n        onClick={handleStopAllEmergencyAudio}\n        disabled={loading}\n        sx={{ mb: 1 }}\n      >\n         \n      </Button>\n\n      <Snackbar\n        open={!!message}\n        autoHideDuration={4000}\n        onClose={handleCloseMessage}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert \n          onClose={handleCloseMessage} \n          severity={message?.type || 'info'}\n          sx={{ width: '100%' }}\n        >\n          {message?.text}\n        </Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default EmergencyStopButton;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Switch,\n  TextField,\n  Paper,\n  Button,\n  FormControlLabel,\n  Slider,\n  Divider,\n  Alert,\n  Snackbar,\n  Collapse,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton,\n  Chip,\n  LinearProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  CircularProgress,\n} from '@mui/material';\nimport { \n  PlayArrow, \n  Stop, \n  VolumeUp, \n  Settings, \n  ExpandLess, \n  Mic,\n  Save,\n  Share,\n  Delete,\n  Refresh,\n  Star,\n  StarBorder,\n  MusicNote,\n  CloudUpload,\n  AudioFile,\n  InsertDriveFile,\n} from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { user } from '@app/model';\nimport { authService } from '@src/services/authService';\nimport { ReportButton } from '../report/ReportButton';\n\n// TTS\ninterface EmergencyTTSSettings {\n  enabled: boolean;\n  message: string;\n  repeatInterval: number;\n  voiceSpeed: number;\n  voicePitch: number;\n  useCustomAudio: boolean;        // \n  medicalEmergencyAudioPath?: string; // \n  lastUpdated: number;\n}\n\n// TTS\ninterface TTSFileInfo {\n  fileName: string;\n  filePath: string;\n  fileSize: number;\n  createTime: number;\n  type: 'general' | 'medical' | 'security' | 'custom';\n  source: 'recorded' | 'uploaded';  // \n  isDefault?: boolean;\n  duration?: number;  // \n  format?: string;    // \n  mimeType?: string;  // MIME\n}\n\n// \ninterface TTSRecordResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n}\n\n// \ninterface VoiceEmergencyConfig {\n  medicalDefault?: string;\n  securityDefault?: string;\n  lastUpdated: number;\n}\n\n// \ninterface FileSelectResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: SelectedFileInfo;\n}\n\ninterface SelectedFileInfo {\n  filePath: string;\n  fileName: string;\n  fileSize: number;\n  mimeType: string;\n  duration?: number;\n}\n\ninterface FileUploadResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: TTSFileInfo;\n}\n\ninterface FileValidationResult {\n  isValid: boolean;\n  message: string;\n  fileSize: number;\n  duration: number;\n  format: string;\n  warnings: string[];\n}\n\ninterface SupportedFormats {\n  formats: string[];\n  maxFileSizeMB: number;\n  maxDurationSeconds: number;\n  recommendedDurationSeconds: number;\n}\n\n// \nconst DEFAULT_SETTINGS: EmergencyTTSSettings = {\n  enabled: false,\n  message: '',\n  repeatInterval: 3000,\n  voiceSpeed: 1.0,\n  voicePitch: 1.0,\n  useCustomAudio: false,\n  lastUpdated: Date.now(),\n};\n\nconst DEFAULT_VOICE_CONFIG: VoiceEmergencyConfig = {\n  lastUpdated: Date.now(),\n};\n\nconst TTS_SETTINGS_KEY = 'emergencyTTSSettings';\nconst VOICE_CONFIG_KEY = 'voiceEmergencyConfig';\n\nexport const EmergencyTTSSettings: React.FC = () => {\n  const [settings, setSettings] = useState<EmergencyTTSSettings>(DEFAULT_SETTINGS);\n  const [voiceConfig, setVoiceConfig] = useState<VoiceEmergencyConfig>(DEFAULT_VOICE_CONFIG);\n  const [fileList, setFileList] = useState<TTSFileInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [testing, setTesting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const [activeTab, setActiveTab] = useState(0);\n  \n  // \n  const [isRecording, setIsRecording] = useState(false);\n  const [playingFile, setPlayingFile] = useState<string | null>(null);\n  const [recordText, setRecordText] = useState(DEFAULT_SETTINGS.message);\n  const [recordSpeed, setRecordSpeed] = useState(1.0);\n  const [recordPitch, setRecordPitch] = useState(1.0);\n  const [showRecordDialog, setShowRecordDialog] = useState(false);\n  const [ttsAvailable, setTtsAvailable] = useState<boolean | null>(null);\n  \n  // \n  const [isUploading, setIsUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<SelectedFileInfo | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [supportedFormats, setSupportedFormats] = useState<SupportedFormats | null>(null);\n\n  async function onRecordClick(){\n    if(user.data.storeData.user_token){\n      setShowRecordDialog(true)\n    }else{\n      // \n\n      const appLoggedIn = await authService.showLoginDialog();\n      if(appLoggedIn){\n        setShowRecordDialog(true);\n      }\n    }\n  }\n  // \n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // TTS\n        const savedSettings = await autoJsStoreUtils.read<EmergencyTTSSettings>(\n          TTS_SETTINGS_KEY, \n          DEFAULT_SETTINGS\n        );\n        setSettings(savedSettings);\n        \n        // \n        const savedConfig = await autoJsStoreUtils.read<VoiceEmergencyConfig>(\n          VOICE_CONFIG_KEY,\n          DEFAULT_VOICE_CONFIG\n        );\n        setVoiceConfig(savedConfig);\n        \n        // TTS\n        checkTTSAvailability();\n        \n        // \n        loadFileList();\n      } catch (err) {\n        console.error(':', err);\n        setError('');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // \n  useEffect(() => {\n    loadSupportedFormats();\n  }, []);\n\n  // \n  const loadSupportedFormats = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getSupportedAudioFormats();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const formats = JSON.parse(javaResultString || '{}') as SupportedFormats;\n      setSupportedFormats(formats);\n    } catch (error) {\n      console.error(':', error);\n      setSupportedFormats({\n        formats: ['mp3', 'wav', 'm4a', 'aac'],\n        maxFileSizeMB: 10,\n        maxDurationSeconds: 60,\n        recommendedDurationSeconds: 30\n      });\n    }\n  }, []);\n\n  // \n  const loadFileList = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList();\ndata;`;\n      const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n      const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n      \n      // \n      const filesWithType = files.map(file => ({\n        ...file,\n        type: (file as any).type || 'general' as const,\n        isDefault: (file as any).isDefault || false,\n      }));\n      \n      setFileList(filesWithType);\n    } catch (error) {\n      console.error(':', error);\n      setFileList([]);\n    }\n  }, []);\n\n  // \n  const handleSelectAndUploadAudioFile = useCallback(async () => {\n    if (isUploading) return;\n    \n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.selectAndUploadAudioFile();\ndata;`;\n      \n      // \n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return 90;\n          }\n          return prev + 10;\n        });\n      }, 300);\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const result = JSON.parse(javaResultString || '{}') as FileUploadResult;\n      \n      clearInterval(progressInterval);\n      setUploadProgress(100);\n      \n      if (result.success) {\n        setSuccessMessage('');\n        setShowSuccess(true);\n        loadFileList(); // \n      } else {\n        setError(result.message || '');\n      }\n    } catch (error) {\n      console.error(':', error);\n      setError('' + (error as Error).message);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  }, [isUploading, loadFileList]);\n\n  // TTS\n  const checkTTSAvailability = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.isTTSAvailable();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      setTtsAvailable(javaResultString === 'true');\n    } catch (error) {\n      console.error('TTS:', error);\n      setTtsAvailable(false);\n    }\n  }, []);\n\n  // \n  const saveSettings = async (newSettings: EmergencyTTSSettings) => {\n    try {\n      const settingsToSave = {\n        ...newSettings,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(TTS_SETTINGS_KEY, settingsToSave);\n      setSettings(settingsToSave);\n      setSuccessMessage('');\n      setShowSuccess(true);\n      setError(null);\n    } catch (err) {\n      console.error('TTS:', err);\n      setError('');\n    }\n  };\n\n  // \n  const saveVoiceConfig = async (newConfig: VoiceEmergencyConfig) => {\n    try {\n      const configToSave = {\n        ...newConfig,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(VOICE_CONFIG_KEY, configToSave);\n      setVoiceConfig(configToSave);\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    }\n  };\n\n  // TTS\n  const handleRecord = useCallback(() => {\n    if (!recordText.trim()) {\n      setError('');\n      return;\n    }\n\n    if (!ttsAvailable) {\n      setError('TTS');\n      return;\n    }\n\n    try {\n      setIsRecording(true);\n      // TTS_YYYYMMDD_HHMMSS.wav\n      const now = new Date();\n      const timestamp = now.getFullYear().toString() + \n                       (now.getMonth() + 1).toString().padStart(2, '0') + \n                       now.getDate().toString().padStart(2, '0') + '_' +\n                       now.getHours().toString().padStart(2, '0') + \n                       now.getMinutes().toString().padStart(2, '0') + \n                       now.getSeconds().toString().padStart(2, '0');\n      const fileName = `TTS_${timestamp}.wav`;\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.recordTTS(\"${recordText.replace(/\"/g, '\\\\\"')}\", \"${fileName}\", ${recordSpeed}, ${recordPitch});\ndata;`;\n      \n      // \n      setTimeout(() => {\n        try {\n          const { javaResultString: resultJson } = autoWebViewJs.callScript(script);\n          console.log(':', resultJson);\n          const result = JSON.parse(resultJson || '{}') as TTSRecordResult;\n          \n          if (result.success) {\n            setSuccessMessage('');\n            setShowSuccess(true);\n            setShowRecordDialog(false);\n            loadFileList(); // \n          } else {\n            setError(result.message || '');\n          }\n        } catch (error) {\n          console.error(':', error);\n          setError('' + (error as Error).message);\n        } finally {\n          setIsRecording(false);\n        }\n      }, 2000);\n    } catch (error) {\n      setError('' + (error as Error).message);\n      setIsRecording(false);\n    }\n  }, [recordText, recordSpeed, recordPitch, ttsAvailable, loadFileList]);\n\n  // \n  const handlePlayFile = useCallback((filePath: string) => {\n    try {\n      if (playingFile === filePath) {\n        setPlayingFile(null);\n        return;\n      }\n\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.playFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success === 'true') {\n        setPlayingFile(filePath);\n        setTimeout(() => setPlayingFile(null), 3000);\n      } else {\n        setError('');\n      }\n    } catch (error) {\n      setError('' + (error as Error).message);\n    }\n  }, [playingFile]);\n\n  // \n  const handleShareFile = useCallback((filePath: string) => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.shareFile(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success !== 'true') {\n        setError('');\n      }\n    } catch (error) {\n      setError('' + (error as Error).message);\n    }\n  }, []);\n\n  // \n  const handleDeleteFile = useCallback((filePath: string) => {\n    if (window.confirm('')) {\n      try {\n        const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.deleteFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n        const { javaResultString: success } = autoWebViewJs.callScript(script);\n        if (success === 'true') {\n          setSuccessMessage('');\n          setShowSuccess(true);\n          loadFileList();\n        } else {\n          setError('');\n        }\n      } catch (error) {\n        setError('' + (error as Error).message);\n      }\n    }\n  }, [loadFileList]);\n\n  // \n  const setAsDefaultAudio = useCallback(async (filePath: string, type: 'medical' | 'security') => {\n    try {\n      // Android\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.setFileAsDefault(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"${type}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      \n      if (success !== 'true') {\n        setError('');\n        return;\n      }\n      \n      const newConfig = { ...voiceConfig };\n      if (type === 'medical') {\n        newConfig.medicalDefault = filePath;\n        // TTS\n        const updatedSettings = {\n          ...settings,\n          medicalEmergencyAudioPath: filePath,\n          useCustomAudio: true,\n        };\n        setSettings(updatedSettings);\n        await saveSettings(updatedSettings);\n      } else {\n        newConfig.securityDefault = filePath;\n      }\n      \n      await saveVoiceConfig(newConfig);\n      \n      // \n      const updatedFiles = fileList.map(file => ({\n        ...file,\n        isDefault: file.filePath === filePath,\n      }));\n      setFileList(updatedFiles);\n      \n      setSuccessMessage(`${type === 'medical' ? '' : ''}`);\n      setShowSuccess(true);\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    }\n  }, [voiceConfig, fileList, settings, saveSettings, saveVoiceConfig]);\n\n  // \n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  // \n  const formatTime = (timestamp: number): string => {\n    return new Date(timestamp).toLocaleString();\n  };\n\n  // \n  const formatDuration = (milliseconds: number): string => {\n    if (!milliseconds || milliseconds <= 0) return '';\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${seconds}s`;\n  };\n\n  // TTS\n  const testTTS = async () => {\n    if (!settings.message.trim()) {\n      setError('');\n      return;\n    }\n\n    try {\n      setTesting(true);\n      \n      // AndroidTTS\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.testTTS(\"${settings.message}\", ${settings.voiceSpeed}, ${settings.voicePitch});\n      `;\n      \n      await new Promise(resolve => setTimeout(resolve, 500)); // \n      // TODO: \n      autoWebViewJs.callScript(script);\n      \n    } catch (err) {\n      console.error('TTS:', err);\n      setError('TTS');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  // TTS\n  const stopTest = async () => {\n    try {\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.stopTest();\n      `;\n      // TODO: \n      autoWebViewJs.callScript(script);\n      setTesting(false);\n    } catch (err) {\n      console.error('TTS:', err);\n    }\n  };\n\n  const handleSettingChange = (key: keyof EmergencyTTSSettings, value: any) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    \n    // /\n    if (key === 'enabled') {\n      saveSettings(newSettings);\n    }\n  };\n\n  const handleSave = () => {\n    if (settings.enabled && !settings.useCustomAudio && !settings.message.trim()) {\n      setError('TTS');\n      return;\n    }\n    saveSettings(settings);\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ p: 2, textAlign: 'center' }}>\n        <Typography>...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ mb: 3 }}>\n      {/*  */}\n      <Paper \n        elevation={1} \n        sx={{ \n          p: 2, \n          display: 'flex', \n          alignItems: 'center',\n          justifyContent: 'space-between',\n          borderRadius: 1,\n        }}\n      >\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          gap: { xs: 1, sm: 2 },\n          flexWrap: { xs: 'wrap', sm: 'nowrap' },\n          flex: 1,\n          minWidth: 0\n        }}>\n          <Typography \n            variant=\"subtitle1\" \n            sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: 1,\n              fontSize: { xs: '0.95rem', sm: '1.25rem' },\n              minWidth: 0,\n              flexShrink: 0\n            }}\n          >\n            <VolumeUp fontSize=\"small\" />\n            <Box component=\"span\" sx={{ \n              display: { xs: 'none', sm: 'inline' }\n            }}></Box>\n            <Box component=\"span\" sx={{ \n              display: { xs: 'inline', sm: 'none' }\n            }}></Box>\n          </Typography>\n          \n          <Box sx={{ \n            display: 'flex', \n            alignItems: 'center', \n            gap: { xs: 1, sm: 2 },\n            flexWrap: { xs: 'wrap', sm: 'nowrap' }\n          }}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.enabled}\n                  onChange={(e) => handleSettingChange('enabled', e.target.checked)}\n                  color=\"primary\"\n                  size=\"small\"\n                />\n              }\n              label={settings.enabled ? '' : ''}\n              sx={{ \n                margin: 0,\n                '& .MuiFormControlLabel-label': {\n                  fontSize: { xs: '0.8rem', sm: '0.875rem' }\n                }\n              }}\n            />\n            \n            {/*  */}\n            {/* <Chip \n              size=\"small\"\n              icon={ttsAvailable ? <VolumeUp /> : <MusicNote />}\n              label={ttsAvailable === null ? '...' : (ttsAvailable ? 'TTS' : 'TTS')}\n              color={ttsAvailable === null ? 'default' : (ttsAvailable ? 'success' : 'warning')}\n              variant=\"outlined\"\n              sx={{ \n                fontSize: { xs: '0.7rem', sm: '0.8125rem' },\n                height: { xs: '24px', sm: '32px' }\n              }}\n            /> */}\n          </Box>\n        </Box>\n        \n        <Button\n          variant=\"outlined\"\n          size=\"small\"\n          startIcon={expanded ? <ExpandLess /> : <Settings />}\n          onClick={() => setExpanded(!expanded)}\n          sx={{ \n            fontSize: { xs: '0.75rem', sm: '0.875rem' },\n            padding: { xs: '4px 8px', sm: '6px 16px' },\n            minWidth: { xs: 'auto', sm: '64px' },\n            flexShrink: 0\n          }}\n        >\n          <Box component=\"span\" sx={{ display: { xs: 'none', sm: 'inline' } }}>\n            {expanded ? '' : ''}\n          </Box>\n          <Box component=\"span\" sx={{ display: { xs: 'inline', sm: 'none' } }}>\n            {expanded ? '' : ''}\n          </Box>\n        </Button>\n      </Paper>\n\n      {/*  */}\n      <Collapse in={expanded}>\n        <Paper \n          elevation={0} \n          sx={{ \n            mt: 1, \n            p: 0,\n            border: '1px solid', \n            borderColor: 'divider',\n            borderRadius: 1,\n          }}\n        >\n          {/*  */}\n          <Tabs \n            value={activeTab} \n            onChange={(_, newValue) => setActiveTab(newValue)}\n            variant=\"fullWidth\"\n          >\n            {/* <Tab label=\"\" /> */}\n            <Tab label=\"/\" />\n            <Tab label=\"\" />\n          </Tabs>\n\n          {/*  */}\n          <Box sx={{ p: 2 }}>\n            {/*  Tab */}\n            {activeTab === -1 && (\n              <Box>\n                {/*  */}\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={3}\n                    value={settings.message}\n                    onChange={(e) => handleSettingChange('message', e.target.value)}\n                    placeholder=\"...\"\n                    disabled={!settings.enabled}\n                    helperText={`: ${settings.message.length} `}\n                    sx={{ \n                      '& .MuiInputBase-input': {\n                        fontSize: '16px',\n                        lineHeight: 1.5,\n                      }\n                    }}\n                  />\n                </Box>\n\n                {/*  */}\n                {settings.enabled && (\n                  <>\n                    <Divider sx={{ my: 3 }} />\n                    \n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                      \n                    </Typography>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.repeatInterval / 1000} \n                      </Typography>\n                      <Slider\n                        value={settings.repeatInterval}\n                        onChange={(_, value) => handleSettingChange('repeatInterval', value)}\n                        min={2000}\n                        max={10000}\n                        step={500}\n                        marks={[\n                          { value: 2000, label: '2s' },\n                          { value: 5000, label: '5s' },\n                          { value: 10000, label: '10s' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                        valueLabelFormat={(value) => `${value / 1000}s`}\n                      />\n                    </Box>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.voiceSpeed}x\n                      </Typography>\n                      <Slider\n                        value={settings.voiceSpeed}\n                        onChange={(_, value) => handleSettingChange('voiceSpeed', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '0.5x' },\n                          { value: 1.0, label: '1.0x' },\n                          { value: 2.0, label: '2.0x' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.voicePitch}x\n                      </Typography>\n                      <Slider\n                        value={settings.voicePitch}\n                        onChange={(_, value) => handleSettingChange('voicePitch', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '' },\n                          { value: 1.0, label: '' },\n                          { value: 2.0, label: '' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n                  </>\n                )}\n              </Box>\n            )}\n\n            {/*  Tab */}\n            {activeTab === 0 && (\n              <Box>\n                {/*  */}\n                <Box sx={{ mb: 4 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  \n                  {!ttsAvailable ? (\n                    <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                      TTS\n                    </Alert>\n                  ) : (\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Mic />}\n                      onClick={onRecordClick}\n                      disabled={isUploading}\n                      sx={{ mb: 3 }}\n                    >\n                      \n                    </Button>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     \"\"<br />\n                     <br />\n                     <br />\n                     \n                  </Typography>\n                </Box>\n\n                <Divider sx={{ my: 3 }} />\n\n                {/*  */}\n                <Box>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  \n                  <Button\n                    variant=\"outlined\"\n                    startIcon={isUploading ? <CircularProgress size={16} /> : <CloudUpload />}\n                    onClick={handleSelectAndUploadAudioFile}\n                    disabled={isUploading}\n                    sx={{ mb: 2 }}\n                  >\n                    {isUploading ? '...' : ''}\n                  </Button>\n                  \n                  {/*  */}\n                  {isUploading && uploadProgress > 0 && (\n                    <Box sx={{ mb: 2 }}>\n                      <LinearProgress \n                        variant=\"determinate\" \n                        value={uploadProgress} \n                        sx={{ mb: 1 }}\n                      />\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center' }}>\n                        ... {uploadProgress}%\n                      </Typography>\n                    </Box>\n                  )}\n                  \n                  {supportedFormats && supportedFormats.formats && (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                      : {supportedFormats.formats.join(', ').toUpperCase()}<br />\n                      : {supportedFormats.maxFileSizeMB}MB<br />\n                      : {supportedFormats.recommendedDurationSeconds}\n                    </Typography>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     <br />\n                    {/*  <br />\n                     <br /> */}\n                     \n                  </Typography>\n                </Box>\n              </Box>\n            )}\n\n            {/*  Tab */}\n            {activeTab === 1 && (\n              <Box>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    \n                  </Typography>\n                  <Button\n                    size=\"small\"\n                    startIcon={<Refresh />}\n                    onClick={loadFileList}\n                  >\n                    \n                  </Button>\n                </Box>\n\n                {fileList.length === 0 ? (\n                  <Typography color=\"text.secondary\" sx={{ textAlign: 'center', py: 3 }}>\n                    \n                  </Typography>\n                ) : (\n                  <List dense>\n                    {fileList.map((file, index) => (\n                      <React.Fragment key={file.filePath}>\n                        <ListItem sx={{ pl: 0 }}>\n                          <ListItemText\n                            primary={\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                  {file.source === 'uploaded' ? <InsertDriveFile fontSize=\"small\" /> : <Mic fontSize=\"small\" />}\n                                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                                    {file.fileName}\n                                  </Typography>\n                                </Box>\n                                \n                                {/*  */}\n                                <Box sx={{ display: 'flex', gap: 0.5 }}>\n                                  {file.isDefault && (\n                                    <Chip size=\"small\" label=\"\" color=\"primary\" />\n                                  )}\n                                  <Chip \n                                    size=\"small\" \n                                    label={file.source === 'uploaded' ? '' : ''} \n                                    color={file.source === 'uploaded' ? 'secondary' : 'default'}\n                                    variant=\"outlined\"\n                                  />\n                                  {file.format && (\n                                    <Chip \n                                      size=\"small\" \n                                      label={file.format.toUpperCase()} \n                                      color=\"default\" \n                                      variant=\"outlined\"\n                                    />\n                                  )}\n                                </Box>\n                              </Box>\n                            }\n                            secondary={\n                              <Box>\n                                <Typography variant=\"caption\" color=\"text.secondary\">\n                                  {formatFileSize(file.fileSize)}  {formatTime(file.createTime)}\n                                  {file.duration && file.duration > 0 && `  ${formatDuration(file.duration)}`}\n                                </Typography>\n                                {file.mimeType && (\n                                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                                    {file.mimeType}\n                                  </Typography>\n                                )}\n                              </Box>\n                            }\n                          />\n                          <ListItemSecondaryAction>\n                            <Box sx={{ display: 'flex', gap: 0.5 }}>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handlePlayFile(file.filePath)}\n                                color={playingFile === file.filePath ? \"primary\" : \"default\"}\n                              >\n                                {playingFile === file.filePath ? <Stop /> : <PlayArrow />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => setAsDefaultAudio(file.filePath, 'medical')}\n                                color={file.isDefault ? \"primary\" : \"default\"}\n                              >\n                                {file.isDefault ? <Star /> : <StarBorder />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleShareFile(file.filePath)}\n                              >\n                                <Share />\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleDeleteFile(file.filePath)}\n                                color=\"error\"\n                              >\n                                <Delete />\n                              </IconButton>\n                            </Box>\n                          </ListItemSecondaryAction>\n                        </ListItem>\n                        {index < fileList.length - 1 && <Divider />}\n                      </React.Fragment>\n                    ))}\n                  </List>\n                )}\n              </Box>\n            )}\n\n            {/*  */}\n            <Divider sx={{ my: 3 }} />\n            \n            {/* <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', mb: 2 }}>\n              <Button\n                variant=\"contained\"\n                onClick={handleSave}\n                sx={{ minWidth: 100 }}\n              >\n                \n              </Button>\n\n              {settings.enabled && settings.message.trim() && (\n                <>\n                  {!testing ? (\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<PlayArrow />}\n                      onClick={testTTS}\n                      sx={{ minWidth: 100 }}\n                    >\n                      \n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      startIcon={<Stop />}\n                      onClick={stopTest}\n                      sx={{ minWidth: 100 }}\n                    >\n                      \n                    </Button>\n                  )}\n                </>\n              )}\n            </Box> */}\n\n            {/*  */}\n            <Box sx={{ p: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                <strong>:</strong><br />\n                 1: <br />\n                 2: <br />\n                {/*  3: <br /> */}\n                 3: <br />\n                <br />\n                <strong>:</strong><br />\n                 <br />\n                 <br />\n                 <br />\n                 \n              </Typography>\n            </Box>\n          </Box>\n        </Paper>\n      </Collapse>\n\n      {/*  */}\n      <Dialog open={showRecordDialog} onClose={() => setShowRecordDialog(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle></DialogTitle>\n        <DialogContent>\n          <TextField\n            fullWidth\n            multiline\n            rows={4}\n            label=\"\"\n            value={recordText}\n            onChange={(e) => setRecordText(e.target.value)}\n            margin=\"normal\"\n            placeholder=\"...\"\n            helperText={`: ${recordText.length} `}\n          />\n          \n          {isRecording && (\n            <Box sx={{ mt: 2 }}>\n              <LinearProgress />\n              <Typography variant=\"body2\" sx={{ mt: 1, textAlign: 'center' }}>\n                ...\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ mt: 3 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              \n            </Typography>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                : {recordSpeed}x\n              </Typography>\n              <Slider\n                value={recordSpeed}\n                onChange={(_, value) => setRecordSpeed(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '' },\n                  { value: 1.0, label: '' },\n                  { value: 2.0, label: '' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                : {recordPitch}x\n              </Typography>\n              <Slider\n                value={recordPitch}\n                onChange={(_, value) => setRecordPitch(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '' },\n                  { value: 1.0, label: '' },\n                  { value: 2.0, label: '' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <ReportButton />\n          <Button \n            onClick={() => setShowRecordDialog(false)}\n            disabled={isRecording}\n          >\n            \n          </Button>\n          <Button \n            onClick={handleRecord} \n            variant=\"contained\"\n            disabled={!recordText.trim() || isRecording}\n            startIcon={isRecording ? undefined : <Mic />}\n          >\n            {isRecording ? '...' : ''}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/*  */}\n      <Snackbar\n        open={showSuccess}\n        autoHideDuration={3000}\n        onClose={() => setShowSuccess(false)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setShowSuccess(false)} severity=\"success\">\n          {successMessage || 'TTS'}\n        </Alert>\n      </Snackbar>\n\n      {/*  */}\n      <Snackbar\n        open={!!error}\n        autoHideDuration={6000}\n        onClose={() => setError(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setError(null)} severity=\"error\">\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};","export { EmergencyTTSSettings } from './EmergencyTTSSettings';","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  List,\n  ListItem,\n  Button,\n  Chip,\n  Alert,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Divider\n} from '@mui/material';\nimport {\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Help as HelpIcon,\n  Settings as SettingsIcon,\n  Refresh as RefreshIcon,\n  Security as SecurityIcon,\n  Info as InfoIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs, isRealInAndroid } from '@droid/android';\n\ninterface Permission {\n  id: string;\n  name: string;\n  type: 'runtime' | 'special' | 'vendor';\n  status: 'granted' | 'denied' | 'unknown';\n  canDetect: boolean;\n  description: string;\n  settingsAction: string;\n}\n\ninterface PermissionsData {\n  permissions: Permission[];\n  timestamp: number;\n  deviceBrand: string;\n  apiLevel: number;\n  error?: string;\n}\n\nexport const PermissionStatusPanel: React.FC = () => {\n  const [permissionsData, setPermissionsData] = useState<PermissionsData | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [infoDialogOpen, setInfoDialogOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<Permission | null>(null);\n\n  const fetchPermissions = async () => {\n    try {\n      if(!isRealInAndroid) return;\n      setLoading(true);\n      setError(null);\n      \n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.getAllPermissionsStatus();\n      `;\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      \n      if (!javaResultString) {\n        throw new Error('No response from permission interface');\n      }\n      \n      const data = JSON.parse(javaResultString) as PermissionsData;\n      \n      if (data.error) {\n        throw new Error(data.error);\n      }\n      \n      setPermissionsData(data);\n      console.log('Permissions data loaded:', data);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(errorMessage);\n      console.error('Error fetching permissions:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPermissions();\n  }, []);\n\n  const handleOpenSettings = (permission: Permission) => {\n    try {\n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.openPermissionSettings(\"${permission.id}\");\n      `;\n      autoWebViewJs.callScript(script);\n      console.log(`Opening settings for permission: ${permission.id}`);\n      \n      // JPush\n      if (permission.id === 'notification') {\n        // \n        setTimeout(() => {\n          try {\n            const jpushScript = `\n              com.fanfanlo.emergencycall.jpush.JpushManager.checkAndReinitializeIfNeeded(\n                com.fanfanlo.lib.mc.libMainModel.application\n              );\n            `;\n            autoWebViewJs.callScript(jpushScript);\n            console.log('JPush reinitialization check triggered');\n            \n            // \n            setTimeout(() => fetchPermissions(), 1000);\n          } catch (jpushErr) {\n            console.error('Error checking JPush status:', jpushErr);\n          }\n        }, 3000); // 3\n      }\n    } catch (err) {\n      console.error('Error opening permission settings:', err);\n    }\n  };\n\n  const handleConfirmLockScreenPermission = () => {\n    try {\n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.confirmLockScreenPermission();\n      `;\n      autoWebViewJs.callScript(script);\n      console.log('Confirmed lock screen permission');\n      // \n      setTimeout(() => fetchPermissions(), 500);\n    } catch (err) {\n      console.error('Error confirming lock screen permission:', err);\n    }\n  };\n\n  const handleShowPermissionInfo = (permission: Permission) => {\n    setSelectedPermission(permission);\n    setInfoDialogOpen(true);\n  };\n\n  const handleCloseInfoDialog = () => {\n    setInfoDialogOpen(false);\n    setSelectedPermission(null);\n  };\n\n  const getPermissionReason = (permission: Permission): string => {\n    const reasonMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': '',\n      'android.permission.ACCESS_COARSE_LOCATION': '',\n      'android.permission.BODY_SENSORS': '',\n      'android.permission.CAMERA': '',\n      'android.permission.RECORD_AUDIO': '',\n      'android.permission.ACTIVITY_RECOGNITION': '()',\n      'overlay': '',\n      'lock_screen_popup': '',\n      'lock_screen_display': '',\n      'desktop_shortcut': '',\n      'notification': ''\n    };\n    return reasonMap[permission.id] || '';\n  };\n\n  const getPermissionImpact = (permission: Permission): string => {\n    const impactMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': ' ',\n      'android.permission.ACCESS_COARSE_LOCATION': ' ',\n      'android.permission.BODY_SENSORS': ' ',\n      'android.permission.CAMERA': ' ',\n      'android.permission.RECORD_AUDIO': ' ',\n      'android.permission.ACTIVITY_RECOGNITION': ' ',\n      'overlay': ' ',\n      'lock_screen_popup': ' ',\n      'lock_screen_display': ' ',\n      'desktop_shortcut': ' ',\n      'notification': ' '\n    };\n    return impactMap[permission.id] || '';\n  };\n\n  const getStatusIcon = (permission: Permission) => {\n    const iconProps = { fontSize: 18 };\n    switch (permission.status) {\n      case 'granted':\n        return <CheckCircleIcon sx={{ color: 'success.main', ...iconProps }} />;\n      case 'denied':\n        return <ErrorIcon sx={{ color: 'error.main', ...iconProps }} />;\n      case 'unknown':\n        return <HelpIcon sx={{ color: 'warning.main', ...iconProps }} />;\n      default:\n        return <HelpIcon sx={{ color: 'grey.500', ...iconProps }} />;\n    }\n  };\n\n  const getStatusChip = (permission: Permission) => {\n    const statusConfig = {\n      granted: { label: '', color: 'success' as const },\n      denied: { label: '', color: 'error' as const },\n      unknown: { label: '?', color: 'warning' as const }\n    };\n\n    const config = statusConfig[permission.status];\n    return (\n      <Chip \n        label={config.label} \n        color={config.color} \n        size=\"small\"\n        sx={{ \n          minWidth: 24,\n          height: 20,\n          fontSize: '0.7rem',\n          '& .MuiChip-label': { px: 0.5 }\n        }}\n      />\n    );\n  };\n\n  const getTypeLabel = (type: string) => {\n    const typeLabels = {\n      runtime: '',\n      special: '',\n      vendor: ''\n    };\n    return typeLabels[type as keyof typeof typeLabels] || type;\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"120px\">\n        <CircularProgress size={20} />\n        <Typography variant=\"caption\" sx={{ ml: 1 }}>...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\">: {error}</Typography>\n        <Button onClick={fetchPermissions} size=\"small\" sx={{ mt: 0.5 }}>\n          \n        </Button>\n      </Alert>\n    );\n  }\n\n  if (!permissionsData) {\n    return (\n      <Alert severity=\"info\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\"></Typography>\n      </Alert>\n    );\n  }\n\n  const { permissions, deviceBrand, apiLevel } = permissionsData;\n\n  return (\n    <Paper elevation={1} sx={{ p: 1 }}>\n      {/*  */}\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <SecurityIcon sx={{ mr: 0.5, color: 'primary.main', fontSize: 18 }} />\n          <Typography variant=\"body2\" fontWeight=\"medium\"></Typography>\n        </Box>\n        <Tooltip title=\"\">\n          <IconButton onClick={fetchPermissions} size=\"small\" sx={{ p: 0.5 }}>\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      {/*  */}\n      <Alert severity=\"info\" sx={{ mb: 1, py: 0.5 }}>\n        <Typography variant=\"caption\" display=\"block\">\n            \n        </Typography>\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          {deviceBrand}  API{apiLevel}\n        </Typography>\n      </Alert>\n\n      {/*  */}\n      <List sx={{ py: 0 }}>\n        {permissions.map((permission) => (\n          <ListItem\n            key={permission.id}\n            sx={{\n              borderLeft: 2,\n              borderLeftColor: \n                permission.status === 'granted' ? 'success.main' :\n                permission.status === 'denied' ? 'error.main' : 'warning.main',\n              mb: 0.5,\n              py: 0.5,\n              px: 0.5,\n              borderRadius: 0.5,\n              bgcolor: 'grey.50',\n              display: 'block' // block\n            }}\n          >\n            {/*  +  +  +  */}\n            <Box display=\"flex\" alignItems=\"center\" mb={0.5}>\n              <Box sx={{ mr: 0.5 }}>\n                {getStatusIcon(permission)}\n              </Box>\n              <Typography \n                variant=\"body2\" \n                fontWeight=\"medium\" \n                sx={{ flex: 1, minWidth: 0 }}\n              >\n                {permission.name}\n              </Typography>\n              <Tooltip title=\"\">\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleShowPermissionInfo(permission)}\n                  sx={{ mr: 0.5, p: 0.25 }}\n                >\n                  <InfoIcon sx={{ fontSize: 16, color: 'primary.main' }} />\n                </IconButton>\n              </Tooltip>\n              {getStatusChip(permission)}\n            </Box>\n            \n            {/*  +  */}  \n            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={0.5}>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <Chip \n                  label={getTypeLabel(permission.type)} \n                  variant=\"outlined\" \n                  size=\"small\"\n                  sx={{ \n                    fontSize: '0.65rem',\n                    height: 18,\n                    '& .MuiChip-label': { px: 0.5, py: 0 }\n                  }}\n                />\n                {!permission.canDetect && (\n                  <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.65rem' }}>\n                    \n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            {/*  */}\n            <Box display=\"flex\" gap={0.5}>\n              {/* {(permission.id === 'lock_screen' || permission.id === 'lock_screen_popup' || permission.id === 'lock_screen_display') && permission.status === 'unknown' && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\" \n                  color=\"success\"\n                  onClick={handleConfirmLockScreenPermission}\n                  sx={{ \n                    fontSize: '0.65rem',\n                    minWidth: 'auto',\n                    px: 0.5,\n                    py: 0.25,\n                    height: 24\n                  }}\n                >\n                  \n                </Button>\n              )} */}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<SettingsIcon sx={{ fontSize: 12 }} />}\n                onClick={() => handleOpenSettings(permission)}\n                sx={{ \n                  fontSize: '0.65rem',\n                  minWidth: 'auto',\n                  px: 0.5,\n                  py: 0.25,\n                  height: 24\n                }}\n              >\n                \n              </Button>\n            </Box>\n          </ListItem>\n        ))}\n      </List>\n\n      {/*  */}\n      <Box mt={0.5} py={0.25} px={0.5} bgcolor=\"grey.100\" borderRadius={0.25}>\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.6rem' }}>\n          : {new Date(permissionsData.timestamp).toLocaleTimeString()}\n        </Typography>\n      </Box>\n\n      {/*  */}\n      <Dialog\n        open={infoDialogOpen}\n        onClose={handleCloseInfoDialog}\n        maxWidth=\"sm\"\n        fullWidth\n        PaperProps={{\n          sx: { mx: 1 } // \n        }}\n      >\n        <DialogTitle sx={{ pb: 1 }}>\n          <Box display=\"flex\" alignItems=\"center\">\n            <SecurityIcon sx={{ mr: 1, color: 'primary.main' }} />\n            <Box>\n              <Typography variant=\"h6\" component=\"div\">\n                {selectedPermission?.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {selectedPermission && getTypeLabel(selectedPermission.type)}\n              </Typography>\n            </Box>\n          </Box>\n        </DialogTitle>\n        \n        <DialogContent sx={{ pt: 0 }}>\n          {selectedPermission && (\n            <Box>\n              {/*  */}\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                <Typography variant=\"subtitle2\" sx={{ mr: 1 }}>:</Typography>\n                <Box display=\"flex\" alignItems=\"center\">\n                  {getStatusIcon(selectedPermission)}\n                  <Typography variant=\"body2\" sx={{ ml: 0.5 }}>\n                    {selectedPermission.status === 'granted' ? '' : \n                     selectedPermission.status === 'denied' ? '' : ''}\n                  </Typography>\n                </Box>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"primary.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionReason(selectedPermission)}\n                </Typography>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={1}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"warning.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionImpact(selectedPermission)}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        \n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button onClick={handleCloseInfoDialog} color=\"primary\">\n            \n          </Button>\n          {selectedPermission && (\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                handleOpenSettings(selectedPermission);\n                handleCloseInfoDialog();\n              }}\n              color=\"primary\"\n            >\n              \n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Paper>\n  );\n};","export { PermissionStatusPanel } from './PermissionStatusPanel';","import React, { useState, useEffect, useRef } from 'react';\nimport { Box, TextField, Button, Typography, Paper, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport { ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { PermissionStatusPanel } from '../permission-status';\nimport { authService } from '@src/services/authService';\n\nexport const SensorMonitor: React.FC = () => {\n  const [threshold, setThreshold] = useState<string>('5.0');\n  const [isMonitoring, setIsMonitoring] = useState<boolean>(false);\n\n  // \n  const [isSensorInfoDialogOpen, setSensorInfoDialogOpen] = useState(false);\n  const [isForegroundServiceDialogOpen, setForegroundServiceDialogOpen] = useState(false);\n\n  // useRefre-render\n  const sensorCallbackRef = useRef<(passed: boolean) => void>();\n  const foregroundServiceCallbackRef = useRef<(passed: boolean) => void>();\n\n\n  useEffect(() => {\n    try {\n      const script = `\n      var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\n      thresholdValue;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const thresholdValue = parseFloat(javaResultString || '5.0');\n      // console.log(\"script get threshold=\", thresholdValue, javaResultString);\n      setThreshold(thresholdValue.toString());\n    } catch (error) {\n      console.error('Error fetching initial threshold value:', error);\n    }\n  }, []);\n\n  function readIsMonitoring() {\n    try {\n      const script = `\n      var isMonitoring = com.fanfanlo.emergencycall.manager.SensorManager.isMonitoring();\n      isMonitoring;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const isMonitoring = javaResultString === \"true\";\n      // console.log(\"script get isMonitoring=\", isMonitoring, javaResultString);\n      setIsMonitoring(isMonitoring);\n    } catch (error) {\n      console.error('Error fetching initial monitoring state:', error);\n    }\n  }\n\n  useEffect(() => {\n    readIsMonitoring();\n  }, []);\n\n  const handleSetThreshold = () => {\n    const thresholdValue = parseFloat(threshold);\n    if (isNaN(thresholdValue)) {\n      alert('');\n      return;\n    }\n    try {\n      const script = `com.fanfanlo.emergencycall.manager.SensorManager.updateThreshold(${thresholdValue});`;\n      autoWebViewJs.callScript(script);\n      alert(`: ${thresholdValue}`);\n    } catch (error) {\n      console.error('Error calling updateThreshold:', error);\n      alert('');\n    }\n  };\n\n  async function handleToggleMonitoring () {\n    if (isMonitoring) {\n      // \n      try {\n        const script = `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`;\n        autoWebViewJs.callScript(script);\n        readIsMonitoring();\n      } catch (error) {\n        console.error('Error stopping monitoring:', error);\n        alert('');\n      }\n    } else {\n\n\n      const appLoggedIn = await authService.showLoginDialog();\n      if(!appLoggedIn){\n        alert(\"\")\n        return\n      }\n      // \n      checkShowInfo(passed => {\n        if (!passed) return; // \n        try {\n          const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.startMonitoring();`;\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.xx();`;\n          autoWebViewJs.callScript(script);\n          readIsMonitoring();\n        } catch (error) {\n          console.error('Error starting monitoring:', error);\n          alert('');\n        }\n      });\n    }\n  };\n\n  useEffect(()=>{\n    const id = setInterval(() => {\n      readIsMonitoring();\n    }, 3000); // 5\n    return () => clearInterval(id);\n  }, [])\n  function checkShowSensorInfo(callback: (passed: boolean) => void) {\n    interface Info {\n      passed: boolean;\n    }\n    const info = autoJsStoreUtils.read<Info>('showSensorInfo', { passed: false });\n    if (!info || !info.passed) {\n      // Dialog\n      sensorCallbackRef.current = callback;\n      // \n      setSensorInfoDialogOpen(true);\n    } else {\n      callback(true);\n    }\n  }\n\n  function checkShowInfo(callback:(passed:boolean)=>void){\n    checkShowSensorInfo(passed=>{\n      if(!passed) {\n        callback(false);\n        return;\n      };\n      checkShowForegroundServiceInfo(callback);\n    })\n  }\n\n  function checkShowForegroundServiceInfo(callback: (passed: boolean) => void) {\n    interface Info {\n      passed: boolean;\n    }\n    const info = autoJsStoreUtils.read<Info>('showForegroundServiceInfo', { passed: false });\n    if (!info || !info.passed) {\n      // Dialog\n      foregroundServiceCallbackRef.current = callback;\n      // \n      setForegroundServiceDialogOpen(true);\n    } else {\n      callback(true);\n    }\n  }\n\n  // \n  const handleSensorDialog = (passed: boolean) => {\n    autoJsStoreUtils.write('showSensorInfo', { passed });\n    setSensorInfoDialogOpen(false);\n    if (sensorCallbackRef.current) {\n      sensorCallbackRef.current(passed);\n    }\n  };\n\n  // \n  const handleForegroundServiceDialog = (passed: boolean) => {\n    autoJsStoreUtils.write('showForegroundServiceInfo', { passed });\n    setForegroundServiceDialogOpen(false);\n    if (foregroundServiceCallbackRef.current) {\n      foregroundServiceCallbackRef.current(passed);\n    }\n  };\n\n\n  return (\n    <Box>\n      {/*  */}\n      <Paper elevation={3} sx={{ padding: 2, marginBottom: 2 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          \n        </Typography>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, marginBottom: 2 }}>\n          <TextField\n            label=\"\"\n            variant=\"outlined\"\n            type=\"number\"\n            value={threshold}\n            onChange={(e) => setThreshold(e.target.value)}\n            size=\"small\"\n          />\n          <Button variant=\"contained\" onClick={handleSetThreshold}>\n            \n          </Button>\n        </Box>\n        <Button\n          variant=\"contained\"\n          color={isMonitoring ? 'error' : 'primary'}\n          onClick={handleToggleMonitoring}\n          fullWidth\n        >\n          {isMonitoring ? '' : ''}\n        </Button>\n      </Paper>\n\n      {/*  */}\n      <Accordion >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"permission-panel-content\"\n          id=\"permission-panel-header\"\n        >\n          <Typography variant=\"h6\"></Typography>\n        </AccordionSummary>\n        <AccordionDetails>\n          <PermissionStatusPanel />\n        </AccordionDetails>\n      </Accordion>\n\n      {/*  */}\n      <Dialog\n        open={isSensorInfoDialogOpen}\n        onClose={() => handleSensorDialog(false)}\n        aria-labelledby=\"sensor-dialog-title\"\n        aria-describedby=\"sensor-dialog-description\"\n      >\n        <DialogTitle id=\"sensor-dialog-title\">\n          {\"\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"sensor-dialog-description\">\n            \n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleSensorDialog(false)}></Button>\n          <Button onClick={() => handleSensorDialog(true)} autoFocus>\n            \n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/*  */}\n      <Dialog\n        open={isForegroundServiceDialogOpen}\n        onClose={() => handleForegroundServiceDialog(false)}\n        aria-labelledby=\"foreground-dialog-title\"\n        aria-describedby=\"foreground-dialog-description\"\n      >\n        <DialogTitle id=\"foreground-dialog-title\">\n          {\"\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"foreground-dialog-description\">\n            \n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleForegroundServiceDialog(false)}></Button>\n          <Button onClick={() => handleForegroundServiceDialog(true)} autoFocus>\n            \n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default SensorMonitor;\n\n\n","import { AppShell, TabbarContainer } from '@app/ui';\nimport { MeetingRoom5 } from '@im/livekit';\nimport { IMOpenPageLink } from '@im/matrix';\nimport { Box, Button, Grid2 } from '@mui/material';\nimport { InviteContactDialog } from '@src/components/dialogs/InviteContactDialog';\nimport InvitationManager from '@src/components/InvitationManager/InvitationManager';\nimport { JpushIsInitialized } from '@src/components/jpush/IsInitialized';\nimport { NavBar } from '@src/components/navbar/NavBar';\nimport PendingInvitationsList from '@src/components/PendingInvitationsList/PendingInvitationsList';\nimport PreAlarmConfig2 from '@src/components/pre-alarm-config2';\nimport ShortcutConfig from '@src/components/shortcut-config/ShortcutConfig';\nimport { ListenShowPrivacyContent } from '@src/components/privacies/ListenShowPrivacyContent';\nimport { UnifiedMonitoringControl } from '@src/components/unified-monitoring-control';\nimport { TestEmergencyCall } from '@src/components/test/TestEmergencyCall';\nimport EmergencyAudioControl from '@src/components/emergency-audio-control/EmergencyAudioControl';\nimport EmergencyStopButton from '@src/components/emergency-audio-control/EmergencyStopButton';\nimport { mainModel } from '@src/libs/mc/main/MainModel';\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport MeetingList from '@src/components/meeting-list/MeetingList';\nimport { EmergencyTTSSettings } from '@src/components/emergency-tts-settings';\nimport { TTSRecorder } from '@src/components/tts-recorder';\nimport SensorMonitor from '@src/components/sensor-monitor/SensorMonitor';\nimport { SensorPermissions } from '@src/components/android-permissions/sensor-permissions/SensorPermissions';\nimport { useRouter } from 'next/router';\n\nfunction Content() {\n  const [openInviteDialog, setOpenInviteDialog] = useState(false);\n\n  const router = useRouter()\n  return (\n    <Box sx={{ my: 2, p: 2 }}>\n      {/*  -  */}\n      {/* <EmergencyStopButton fullWidth size=\"large\" /> */}\n      \n      {/* <Box>\n        <Link href=\"/how-to-use\" style={{ textDecoration: 'none' }}>\n          </Link>\n      </Box> */}\n      <ListenShowPrivacyContent type=\"main\" />\n      {/* <InvitationManager /> */}\n      <MeetingList maxItemLength={3} />\n      <PendingInvitationsList />\n      \n      <Grid2 container spacing={2} sx={{ m: 2 }}>\n        <Grid2 size={6}>\n          <Button variant=\"contained\" onClick={() => router.push(\"/intro\")}>\n            \n          </Button>\n        </Grid2>\n        <Grid2 size={6}>\n          <Box  sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <Button fullWidth variant='contained' onClick={()=>{router.push(\"/how-to-use\")}}>\n              \n            </Button>\n          </Box>\n        </Grid2>\n      </Grid2>\n      <PreAlarmConfig2 />\n      <EmergencyTTSSettings />\n      {/* <PreAlarmConfigComponent /> */}\n\n      {/* <JpushIsInitialized /> */}\n\n      <Grid2 container sx={{mt: 2, mb: 2}}>\n        <Grid2 size={6}>\n          <TestEmergencyCall />\n        </Grid2>\n        <Grid2 size={6}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <EmergencyStopButton variant=\"button\" />\n          </Box>\n        </Grid2>\n      </Grid2>\n{/* gemini */}\n{/* <SensorPermissions /> */}\n\n      <SensorMonitor />\n      <Box>2</Box>\n{/*  */}\n      {/* <UnifiedMonitoringControl /> */}\n\n      {/*   -  */}\n      \n      <Grid2 container spacing={2} sx={{ m: 2 }}>\n        <Grid2 size={6}>\n          <Button variant=\"contained\" onClick={() => setOpenInviteDialog(true)}>\n            \n          </Button>\n        </Grid2>\n        <Grid2 size={6}>\n          <Box  sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <Button fullWidth variant='contained' onClick={()=>{router.push(\"/contacts\")}}>\n              \n            </Button>\n          </Box>\n        </Grid2>\n      </Grid2>\n      {openInviteDialog && <InviteContactDialog open={openInviteDialog} onClose={() => setOpenInviteDialog(false)} />}\n\n      {/* <MeetingRoom5\n        roomName=\"test-room\"\n        userName={`user-${Math.random().toString(36).substring(2, 8)}`}\n        livekitConfig={mainModel.appConfig.livekit}\n        // role=\"initiator\" // Add role for testing\n      />\n       */}\n\n      {/* TTS */}\n      {/* <TTSRecorder /> */}\n      {/*  */}\n      {/* <ShortcutConfig /> */}\n      \n      <Box sx={{mt: 2, mb: 2}}>\n        <Button fullWidth variant='contained' onClick={()=>{router.push(\"/shortcut\")}}>\n        {/* <Link href={\"/shortcut\"}></Link> */}\n        </Button>\n      </Box>\n      {/* <EmergencyAudioControl /> */}\n      {/*  */}\n      {/* <EmergencyStopButton variant=\"fab\" /> */}\n\n{/* <Box>\n      <Link href={\"/logs\"}></Link>\n      <IMOpenPageLink />\n</Box> */}\n\n      <Box sx={{ mt: \"2rem\" }}></Box>\n      \n    </Box>\n  );\n}\n\nexport default function Home() {\n  return (\n    <AppShell>\n      <TabbarContainer titleConf={{ ns: 'emergency-call/pages/home/content', key: 'home.title' }} navBar={<NavBar />}>\n        <Content />\n      </TabbarContainer>\n    </AppShell>\n  );\n}\n","import React, { useState } from 'react';\nimport { Button, ButtonProps } from '@mui/material';\nimport AddCommentIcon from '@mui/icons-material/AddComment';\nimport { ReportSubmitModal } from '../ReportSubmitModal';\n\n// Allow passing standard Button props to customize the button\ninterface ReportButtonProps extends Omit<ButtonProps, 'onClick'> {\n    buttonText?: string;\n}\n\n/**\n * A self-contained button component that triggers the report submission modal.\n */\nexport const ReportButton: React.FC<ReportButtonProps> = ({ buttonText = '', ...rest }) => {\n    const [modalOpen, setModalOpen] = useState(false);\n\n    const handleSuccess = () => {\n        // A snackbar could be triggered here in a real app.\n        console.log('Report submitted successfully.');\n    };\n\n    return (\n        <>\n            <Button\n                variant=\"contained\"\n                startIcon={<AddCommentIcon />}\n                onClick={() => setModalOpen(true)}\n                {...rest} // Pass down other props like color, size, etc.\n            >\n                {buttonText}\n            </Button>\n\n            <ReportSubmitModal\n                open={modalOpen}\n                onClose={() => setModalOpen(false)}\n                onSuccess={handleSuccess}\n            />\n        </>\n    );\n};\n","\nimport { request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\n\n// ---  ---\n\n/**\n * @description \n */\nexport interface ISubmitReportParams {\n    reported_mobile: string; // \n    report_type: string;\n    target_ref?: string;\n    reason: string;\n    content_snapshot?: any;\n}\n\n/**\n * @description \n */\nexport interface ISubmitReportResult {\n    is_ok: boolean;\n    msg: string;\n    report_id?: string;\n}\n\n/**\n * @description \n * @param {ISubmitReportParams} params - \n * @returns {Promise<ISubmitReportResult>}\n */\nexport async function submitReport(params: ISubmitReportParams)  {\n    return await request<ISubmitReportResult>(\n        tms.TReport,\n        tms.MReportSubmit,\n        params\n    );\n}\n","import React, { useState } from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    TextField,\n    CircularProgress,\n    Box\n} from '@mui/material';\nimport { submitReport } from '@app/model';\n\ninterface ReportSubmitModalProps {\n    open: boolean;\n    onClose: () => void;\n    onSuccess?: () => void; // Optional: callback on successful submission\n}\n\nexport const ReportSubmitModal: React.FC<ReportSubmitModalProps> = ({ open, onClose, onSuccess }) => {\n    const [mobile, setMobile] = useState('');\n    const [reason, setReason] = useState('');\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleClose = () => {\n        // Reset state on close\n        setMobile('');\n        setReason('');\n        setError('');\n        setLoading(false);\n        onClose();\n    };\n\n    const handleSubmit = async () => {\n        if (!mobile || !reason) {\n            setError('');\n            return;\n        }\n        setError('');\n        setLoading(true);\n\n        try {\n            const result = await submitReport({\n                reported_mobile: mobile,\n                reason: reason,\n                report_type: 'user_report_from_app', // or make this dynamic if needed\n            });\n\n            if (result.shellIsOk) {\n                // alert(''); // Or use a Snackbar for better UX\n                if (onSuccess) {\n                    onSuccess();\n                }\n                handleClose();\n            } else {\n                setError(result.err?.message || '');\n            }\n        } catch (e) {\n            setError('');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={open} onClose={handleClose}>\n            <DialogTitle></DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    \n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"mobile\"\n                    label=\"ID\"\n                    type=\"tel\"\n                    fullWidth\n                    variant=\"standard\"\n                    value={mobile}\n                    onChange={(e) => setMobile(e.target.value)}\n                    disabled={loading}\n                />\n                <TextField\n                    margin=\"dense\"\n                    id=\"reason\"\n                    label=\"\"\n                    type=\"text\"\n                    fullWidth\n                    multiline\n                    rows={4}\n                    variant=\"standard\"\n                    value={reason}\n                    onChange={(e) => setReason(e.target.value)}\n                    disabled={loading}\n                />\n                {error && (\n                    <Box sx={{ color: 'error.main', mt: 2 }}>\n                        {error}\n                    </Box>\n                )}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} disabled={loading}></Button>\n                <Button onClick={handleSubmit} disabled={loading}>\n                    {loading ? <CircularProgress size={24} /> : ''}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\n","import { useRouter } from \"next/router\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\n\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport ListIcon from '@mui/icons-material/List';\r\nimport { BottomNavigation, BottomNavigationAction } from \"@mui/material\";\r\ninterface TabInfoType {\r\n  label: string;\r\n  value: string;\r\n  icon: React.ReactNode;\r\n}\r\n\r\nexport function NavBar() {\r\n  const router = useRouter();\r\n  const { pathname } = router;\r\n  const { t } = useTranslation('emergency-call/components/navbar/content');\r\n  const tabInfoList: TabInfoType[] = [\r\n    { label: t('NavBar.home'), value: '/', icon: <HomeIcon /> },\r\n    // { label: t('NavBar.logs'), value: '/logs', icon: <ListIcon /> },\r\n    // { label: t('content.create'), value: '/script-creator', icon: <CreateIcon /> },\r\n    // { label: t('content.market'), value: '/market', icon: <StorefrontIcon /> },\r\n    { label: t('NavBar.settings'), value: '/settings', icon: <SettingsIcon /> },\r\n  ];\r\n  return (\r\n\r\n    <BottomNavigation showLabels value={pathname}>\r\n      {tabInfoList.map(e => (\r\n        <BottomNavigationAction\r\n          key={e.value}\r\n          label={e.label}\r\n          icon={e.icon}\r\n          data-id={`tabbar-${e.value}`}\r\n          className={pathname === e.value ? 'Mui-selected' : ''}\r\n          onClick={() => {\r\n            if (pathname === e.value) return;\r\n            router.push(e.value);\r\n          }}\r\n        />\r\n      ))}\r\n    </BottomNavigation>\r\n  );\r\n}","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { IRequestHandler, request } from \"@fanfanlo\";\n\n/**\n * \n */\nexport interface IParamsListAllInvitations {\n  // \n  page?: number;\n  page_size?: number;\n}\n\n/**\n * \n */\nexport interface IInvitationUserInfo {\n  user_id: string;\n  display_name: string;\n  avatar_url?: string;\n}\n\n// \nexport type InviteStatus = 'pending' | 'accepted' | 'declined' | 'expired' | 'cancelled';\n\n// \nexport interface IInvitationDetails {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: InviteStatus;\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * \n */\nexport interface IResultListAllInvitations {\n  is_ok: boolean;\n  msg?: string;\n  sent_invitations: IInvitationDetails[];\n  received_invitations: IInvitationDetails[];\n}\n\n/**\n * \n */\nexport interface IParamsRespondToInvite {\n  invitation_id: string;\n  action: 'accept' | 'decline' | 'cancel' | 'remove';\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallListAllInvitations(\n  opts: IRequestOptions<IParamsListAllInvitations>\n) {\n  return request<IResultListAllInvitations, IParamsListAllInvitations>(\n    tms.TEmc,\n    tms.MEmcListAllInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n/**\n * \n * @param invitationId ID\n * @param isReceived \n * @returns Promise\n */\nexport async function cancelOrRemoveInvitation(\n  invitationId: string,\n  isReceived: boolean\n) {\n  const action = isReceived ? 'remove' : 'cancel';\n  return emergencyCallInvitationService.respondToInvite({\n    params: {\n      invitation_id: invitationId,\n      action\n    }\n  } as any);\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallRespondToInvite(\n  opts: IRequestOptions<IParamsRespondToInvite>\n) {\n  return request<{ is_ok: boolean; msg?: string }, IParamsRespondToInvite>(\n    tms.TEmc,\n    tms.MEmcRespondToInvite,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// \nexport const emergencyCallInvitationService = {\n  listAllInvitations: tmsEmergencyCallListAllInvitations,\n  respondToInvite: tmsEmergencyCallRespondToInvite,\n};\n\nexport default emergencyCallInvitationService;\n","import { Dialog, DialogContent, IconButton } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\nimport React from 'react';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\n\ninterface PrivacyDialogDisplayProps {\n  open: boolean;\n  onClose: () => void;\n  type: string;\n  area: string;\n}\n\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\n\n/**\n *  - \n * /\n */\nexport function PrivacyDialogDisplay({ open, onClose, type, area }: PrivacyDialogDisplayProps) {\n  let suffix = (typeof window === \"undefined\") ? \"\" : window.location.href.indexOf(\"qiniu\") > -1 ? \".html\" : \"/\"\n  const [iframeSrc, setIframeSrc] = useState(`/privacies/${type}/${area}${suffix}`);\n  const iframeRef = React.useRef<HTMLIFrameElement>(null);\n\n  useEffect(() => {\n    setIframeSrc(`/privacies/${type}/${area}${suffix}`);\n  }, [type, area]);\n\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      // iframe\n      if (event.source !== iframeRef.current?.contentWindow) {\n        return;\n      }\n\n      const { sender, agree } = event.data;\n\n      if (sender === 'privacy_page') {\n        console.log(`Received privacy decision: ${agree ? 'Agreed' : 'Disagreed'}`);\n\n        const value: IPrivacyInfo = {\n          agree,\n          disagreeTime: agree ? 0 : Date.now()\n        };\n\n        // \n        autoJsStoreUtils.write(`privacy_${type}`, value);\n        \n        // Android\n        const script = `\n          var data = new com.fanfanlo.emergencycall.data.PrivacyData(${value.agree}, ${value.disagreeTime});\n          com.fanfanlo.emergencycall.data.PrivacyStateHolder.updateMainPrivacyByJs(data);\n        `;\n        autoWebViewJs.callScript(script);\n\n        // \n        onClose();\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n\n    return () => {\n      window.removeEventListener('message', handleMessage);\n    };\n  }, [type, onClose]);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      PaperProps={{\n        sx: {\n          width: '80%',\n          height: '80%',\n          maxWidth: 'none',\n        },\n      }}\n    >\n      <IconButton\n        aria-label=\"close\"\n        onClick={onClose}\n        sx={{\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          color: theme => theme.palette.grey[500],\n        }}\n      >\n        <CloseIcon />\n      </IconButton>\n      <DialogContent sx={{ padding: 0, overflow: 'hidden' }}>\n        {iframeSrc && (\n          <iframe\n            ref={iframeRef}\n            src={iframeSrc}\n            style={{ width: '100%', height: '100%', border: 'none' }}\n            title={`Privacy Policy - ${type}/${area}`}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}","'use client';\r\nimport { BottomNavigation, BottomNavigationAction, Box, CssBaseline, Paper, Stack } from '@mui/material';\r\n\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport StorefrontIcon from '@mui/icons-material/Storefront';\r\nimport { useRouter } from 'next/router';\r\nimport React, { PropsWithChildren } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ITitleI18nConf } from '../page';\r\nimport AndroidPageContent from '../page/AndroidPageContent';\r\nimport CreateIcon from '@mui/icons-material/Create';\r\n// interface TabInfoType {\r\n//   label: string;\r\n//   value: string;\r\n//   icon: React.ReactNode;\r\n// }\r\n\r\nfunction BottomBar({navBar}:{navBar?:React.ReactNode}) {\r\n  return <Paper\r\n    id=\"bottom-navigation\"\r\n    sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}\r\n    elevation={3}>\r\n    {/* <NavBar /> */}\r\n    {navBar}\r\n  </Paper>;\r\n}\r\n// function NavBar() {\r\n//   const router = useRouter();\r\n//   const { pathname } = router;\r\n//   const { t } = useTranslation('app-ui/components/tabbar/content');\r\n//   const tabInfoList: TabInfoType[] = [\r\n//     { label: t('content.home'), value: '/', icon: <HomeIcon /> },\r\n//     // { label: t('content.create'), value: '/script-creator', icon: <CreateIcon /> },\r\n//     // { label: t('content.market'), value: '/market', icon: <StorefrontIcon /> },\r\n//     { label: t('content.settings'), value: '/settings', icon: <SettingsIcon /> },\r\n//   ];\r\n//   return (\r\n\r\n//     <BottomNavigation showLabels value={pathname}>\r\n//       {tabInfoList.map(e => (\r\n//         <BottomNavigationAction\r\n//           key={e.value}\r\n//           label={e.label}\r\n//           icon={e.icon}\r\n//           data-id={`tabbar-${e.value}`}\r\n//           className={pathname === e.value ? 'Mui-selected' : ''}\r\n//           onClick={() => {\r\n//             if (pathname === e.value) return;\r\n//             router.push(e.value);\r\n//           }}\r\n//         />\r\n//       ))}\r\n//     </BottomNavigation>\r\n//   );\r\n// }\r\n\r\n\r\n// testWatchUpdates()\r\nexport function TabbarContainer({ children, titleConf, navBar }: {titleConf?:ITitleI18nConf, navBar:React.ReactNode} & PropsWithChildren)  {\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', height2: '100vh' }}>\r\n      <CssBaseline />\r\n      <Stack direction={\"column\"} spacing={3}\r\n      \r\n      >\r\n        <AndroidPageContent titleConf={titleConf}>\r\n          {children}\r\n        </AndroidPageContent>\r\n        <BottomBar navBar={navBar} />\r\n      </Stack>\r\n    </Box>\r\n  );\r\n}\r\n\r\n"],"names":["request","tms","tmsEmcInviteContacts","opts","res","TEmc","MEmcInviteContacts","params","gateway","handler","tmsEmcGetContactTypes","MEmcGetContactTypes","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Box","CircularProgress","Autocomplete","useState","useCallback","useEffect","useRef","user","toast","matrixUser","authService","Log","useProxyWatch","fileLogger","isValidIdentity","text","test","is11DigitNumber","InviteContactDialog","open","onClose","onInviteSent","uiLogger","sub","contacts","setContacts","remark","setRemark","callType","setCallType","availableCallTypes","setAvailableCallTypes","console","log","message","setMessage","isLoading","setIsLoading","isTypesLoading","setIsTypesLoading","pendingParams","setPendingParams","executionLock","accessToken","userData","userInfo","loginResponse","access_token","isUserLoggedIn","data","sessionData","global_user_info","userToken","storeData","user_token","current","finalParams","matrix_access_token","type","executeApiCall","error","responseData","printLog","err","shellIsOk","dataIsOk","errorMessage","results","msg","successResults","filter","r","result_code","infoResults","errorResults","length","success","infoMessages","map","Boolean","join","errorMessages","fetchCallTypes","logger","JSON","stringify","types","formattedTypes","id","uuid","name","is_system","defaultType","warn","handleSendInvitation","contactInputs","split","c","trim","contactIdentities","input","push","identity","identityType","appLoggedIn","showLoginDialog","currentAccessToken","apiParams","maxWidth","fullWidth","component","sx","mt","autoFocus","margin","label","multiline","rows","variant","placeholder","value","onChange","e","target","disabled","freeSolo","options","option","event","newValue","inputValue","onInputChange","newInputValue","reason","disablePortal","disableClearable","forcePopupIcon","mb","width","renderInput","InputProps","endAdornment","color","size","ListboxProps","style","maxHeight","overflow","onClick","tmsEmergencyCallListPendingReceivedInvitations","MEmcListPendingReceivedInvitations","emergencyCallPendingInvitationService","listPendingReceivedInvitations","React","Typography","Card","CardContent","CardActions","Avatar","Chip","Alert","Stack","Check","CheckIcon","Close","CloseIcon","AccessTime","AccessTimeIcon","Notifications","NotificationsIcon","formatDistanceToNow","zhCN","emergencyCallInvitationService","AppModelEvent","appModel","matrixClient","PendingInvitationCard","invitation","onRespond","isProcessing","isProcessingAction","setIsProcessingAction","handleRespond","action","isExpired","Date","expires_at","opacity","display","alignItems","src","user_info","avatar_url","alt","display_name","height","mr","toUpperCase","flexGrow","created_at","addSuffix","locale","textAlign","icon","fontSize","fontWeight","justifyContent","pt","startIcon","PendingInvitationsList","setError","invitations","setInvitations","setIsProcessing","loadPendingInvitations","is_ok","handleRespondToInvite","invitationId","respondToInvite","invitation_id","Error","prev","invite","dispatcher","emit","InviteListUpdated","unsubscribe","addListener","unsub","imDispatcher","ImDispatcherEventTypes","INVITE","flexDirection","p","severity","spacing","Switch","Paper","Collapse","Divider","IconButton","FormControlLabel","Tooltip","FormControl","MenuItem","InputLabel","Select","DragIndicator","DragIndicatorIcon","ExpandLess","Settings","Delete","PlayArrow","Stop","VolumeUp","VolumeUpIcon","Vibration","VibrationIcon","DndContext","closestCenter","KeyboardSensor","PointerSensor","TouchSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","useSortable","verticalListSortingStrategy","CSS","debounce","autoJsStoreUtils","PRE_ALARM_CONFIG_KEY","defaultSoundResources","SortableActionItem","isPlaying","onUpdate","onRemove","onPreview","onStopPreview","attributes","listeners","setNodeRef","transform","transition","isDragging","Transform","toString","zIndex","ref","elevation","gap","userSelect","cursor","touchAction","duration","parseInt","resourceId","startAdornment","title","sound","PreAlarmConfig2","config","setConfig","expanded","setExpanded","playingSoundId","setPlayingSoundId","debouncedWrite","newConfig","write","sensors","activationConstraint","distance","delay","tolerance","coordinateGetter","loadConfig","storedConfig","read","actionsWithIds","actions","Math","random","substr","enabled","maxWaitDuration","updateConfig","updates","handleToggleEnabled","checked","handleAddAction","newAction","now","handleUpdateAction","handleRemoveAction","handleDragEnd","active","over","oldIndex","findIndex","a","newIndex","handlePreviewSound","handleStopSound","window","SoundManager","previewSound","stopPreview","borderRadius","control","in","border","borderColor","gutterBottom","ml","my","direction","collisionDetection","onDragEnd","items","strategy","isRealInAndroid","PrivacyDialogDisplay","autoOpened","PrivacyDialogAuto","area","setOpen","handleClose","def","agree","disagreeTime","ListenShowPrivacyContent","autoWebViewJs","TestEmergencyCall","script","callScript","fileLog","stopAllHandler","stopEmergencyMethods","methodError","Snackbar","Fab","StopIcon","VolumeOff","VolumeOffIcon","EmergencyStopButton","loading","setLoading","isAndroidWebView","handleStopAllEmergencyAudio","bl","handleCloseMessage","placement","position","bottom","right","autoHideDuration","anchorOrigin","vertical","horizontal","Slider","List","ListItem","ListItemText","ListItemSecondaryAction","LinearProgress","Tabs","Tab","Mic","Share","Refresh","Star","StarBorder","CloudUpload","InsertDriveFile","ReportButton","DEFAULT_SETTINGS","repeatInterval","voiceSpeed","voicePitch","useCustomAudio","lastUpdated","DEFAULT_VOICE_CONFIG","TTS_SETTINGS_KEY","VOICE_CONFIG_KEY","EmergencyTTSSettings","settings","setSettings","voiceConfig","setVoiceConfig","fileList","setFileList","testing","setTesting","showSuccess","setShowSuccess","successMessage","setSuccessMessage","activeTab","setActiveTab","isRecording","setIsRecording","playingFile","setPlayingFile","recordText","setRecordText","recordSpeed","setRecordSpeed","recordPitch","setRecordPitch","showRecordDialog","setShowRecordDialog","ttsAvailable","setTtsAvailable","isUploading","setIsUploading","selectedFile","setSelectedFile","uploadProgress","setUploadProgress","supportedFormats","setSupportedFormats","onRecordClick","loadData","savedSettings","savedConfig","checkTTSAvailability","loadFileList","loadSupportedFormats","javaResultString","formats","parse","maxFileSizeMB","maxDurationSeconds","recommendedDurationSeconds","listJson","files","filesWithType","file","isDefault","handleSelectAndUploadAudioFile","progressInterval","setInterval","clearInterval","result","saveSettings","newSettings","settingsToSave","saveVoiceConfig","configToSave","handleRecord","timestamp","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","fileName","replace","setTimeout","resultJson","handlePlayFile","filePath","handleShareFile","handleDeleteFile","confirm","setAsDefaultAudio","medicalDefault","updatedSettings","medicalEmergencyAudioPath","securityDefault","updatedFiles","formatFileSize","bytes","toFixed","formatTime","toLocaleString","formatDuration","milliseconds","seconds","floor","minutes","remainingSeconds","testTTS","Promise","resolve","stopTest","handleSettingChange","key","handleSave","xs","sm","flexWrap","flex","minWidth","flexShrink","padding","_","helperText","lineHeight","min","max","step","marks","valueLabelDisplay","valueLabelFormat","br","py","dense","index","Fragment","pl","primary","source","format","secondary","fileSize","createTime","mimeType","backgroundColor","strong","undefined","CheckCircle","CheckCircleIcon","ErrorIcon","Help","HelpIcon","SettingsIcon","RefreshIcon","Security","SecurityIcon","Info","InfoIcon","PermissionStatusPanel","permissionsData","setPermissionsData","infoDialogOpen","setInfoDialogOpen","selectedPermission","setSelectedPermission","fetchPermissions","handleOpenSettings","permission","jpushScript","jpushErr","handleConfirmLockScreenPermission","handleShowPermissionInfo","handleCloseInfoDialog","getPermissionReason","reasonMap","getPermissionImpact","impactMap","getStatusIcon","iconProps","status","getStatusChip","statusConfig","granted","denied","unknown","px","getTypeLabel","typeLabels","runtime","special","vendor","minHeight","permissions","deviceBrand","apiLevel","borderLeft","borderLeftColor","bgcolor","canDetect","toLocaleTimeString","PaperProps","mx","pb","DialogContentText","Accordion","AccordionSummary","AccordionDetails","ExpandMore","ExpandMoreIcon","SensorMonitor","threshold","setThreshold","isMonitoring","setIsMonitoring","isSensorInfoDialogOpen","setSensorInfoDialogOpen","isForegroundServiceDialogOpen","setForegroundServiceDialogOpen","sensorCallbackRef","foregroundServiceCallbackRef","thresholdValue","parseFloat","readIsMonitoring","handleSetThreshold","isNaN","alert","handleToggleMonitoring","checkShowInfo","passed","checkShowSensorInfo","callback","info","checkShowForegroundServiceInfo","handleSensorDialog","handleForegroundServiceDialog","marginBottom","expandIcon","aria-controls","aria-labelledby","aria-describedby","AppShell","TabbarContainer","Grid2","NavBar","MeetingList","useRouter","Content","openInviteDialog","setOpenInviteDialog","router","maxItemLength","container","m","Home","titleConf","ns","navBar","AddCommentIcon","ReportSubmitModal","buttonText","rest","modalOpen","setModalOpen","handleSuccess","onSuccess","submitReport","TReport","MReportSubmit","mobile","setMobile","setReason","handleSubmit","reported_mobile","report_type","useTranslation","HomeIcon","BottomNavigation","BottomNavigationAction","pathname","t","tabInfoList","showLabels","data-id","className","tmsEmergencyCallListAllInvitations","MEmcListAllInvitations","cancelOrRemoveInvitation","isReceived","tmsEmergencyCallRespondToInvite","MEmcRespondToInvite","listAllInvitations","suffix","location","href","indexOf","iframeSrc","setIframeSrc","iframeRef","handleMessage","contentWindow","sender","addEventListener","removeEventListener","aria-label","top","theme","palette","grey","iframe","CssBaseline","AndroidPageContent","BottomBar","left","children","height2"],"sourceRoot":"","ignoreList":[5]}