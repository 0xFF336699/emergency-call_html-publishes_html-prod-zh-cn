{"version":3,"file":"static/chunks/6681-46078d31a67faea2.js","mappings":"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","sources":["webpack://_N_E/../../libs/app/model/src/remote/emc/inviteContacts.ts","webpack://_N_E/../../libs/app/model/src/remote/emc/tmsEmcGetContactTypes.ts","webpack://_N_E/./src/components/dialogs/InviteContactDialog.tsx","webpack://_N_E/./src/components/emergency-audio-control/stopAllHandler.ts","webpack://_N_E/./src/components/emergency-audio-control/EmergencyStopButton.tsx","webpack://_N_E/./src/components/emergency-tts-settings/EmergencyTTSSettings.tsx","webpack://_N_E/./src/components/emergency-tts-settings/index.ts","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_pending_received_invitations.ts","webpack://_N_E/./src/components/PendingInvitationsList/PendingInvitationsList.tsx","webpack://_N_E/../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js","webpack://_N_E/./src/components/pre-alarm-config2/index.tsx","webpack://_N_E/./src/components/privacies/PrivacyDialogAuto.tsx","webpack://_N_E/./src/components/privacies/ListenShowPrivacyContent.tsx","webpack://_N_E/./src/components/permission-status/PermissionStatusPanel.tsx","webpack://_N_E/./src/components/permission-status/index.ts","webpack://_N_E/./src/components/sensor-monitor/SensorMonitor.tsx","webpack://_N_E/./src/components/shakeconfig/ShakeConfigUI.tsx","webpack://_N_E/./src/components/test/TestEmergencyCall.tsx","webpack://_N_E/./src/pages/home/index.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_all_invitations.ts"],"sourcesContent":["import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description 单个联系人的信息，由前端提供\n */\nexport interface IEmcContactIdentity {\n    identity: string;\n    identityType: 'email' | 'mobile';\n}\n\n/**\n * @description 邀请联系人的请求参数\n */\nexport interface IEmcInviteContactsParams extends IRequestParams {\n    contacts: IEmcContactIdentity[];\n    remark?: string;\n    type: string;\n    message?: string;\n    matrix_access_token: string; // 新增：用于创建 Matrix 房间的授权 Token\n}\n\n/**\n * @description 单个邀请的处理结果，由后端返回\n */\nexport interface IEmcInviteResultItem {\n    identity: string;\n    result_code: string; // 使用 ResultCode 的字符串形式\n    msg: string;\n}\n\n/**\n * @description 邀请联系人的完整响应体\n */\n// export interface IEmcInviteContactsResult extends IResultContent {\n//     data: {\n//         data: {\n//             results: IEmcInviteResultItem[];\n//             msg?: string;\n//         };\n//         msg?: string;\n//     };\n//     results?: IEmcInviteResultItem[]; // 保持向后兼容\n// }\n\nexport interface IEmcInviteContactsResult extends IResultContent {\n    data: {\n        is_ok:boolean;\n        results: IEmcInviteResultItem[];\n        msg?: string;\n    };\n}\n\n/**\n * @description 调用邀请联系人接口的函数\n * @param opts 包含 params, gateway, handler 的请求选项\n */\nexport async function tmsEmcInviteContacts(opts: IRequestOptions<IEmcInviteContactsParams>) {\n    const res = await request<IEmcInviteContactsResult>(tms.TEmc, tms.MEmcInviteContacts, opts.params, opts.gateway, opts.handler);\n    return res;\n}","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description 获取联系人类型的请求参数\n */\nexport interface IEmcGetContactTypesParams extends IRequestParams {\n    // 可能不需要额外参数，但保留结构以备将来扩展\n}\n\n/**\n * @description 单个联系人类型\n */\nexport interface IEmcContactTypeItem {\n    id: string;\n    name: string;\n    // 根据实际需要可以添加更多字段，例如 icon, description 等\n}\n\n/**\n * @description 获取联系人类型的完整响应体\n */\nexport interface IEmcGetContactTypesResult extends IResultContent {\n    data: {\n        types: Array<{\n            uuid: string;\n            name: string;\n            is_system: boolean;\n        }>;\n    };\n}\n\n/**\n * @description 调用获取联系人类型接口的函数\n * @param opts 包含 params, gateway, handler 的请求选项\n */\nexport async function tmsEmcGetContactTypes(opts: IRequestOptions<IEmcGetContactTypesParams>) {\n    const res = await request<IEmcGetContactTypesResult>(tms.TEmc, tms.MEmcGetContactTypes, opts.params, opts.gateway, opts.handler);\n    return res;\n}\n","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Box,\n    CircularProgress,\n    Autocomplete,\n} from '@mui/material';\nimport { useState, useCallback, useEffect, useRef, SyntheticEvent } from 'react';\nimport { \n    IEmcInviteContactsParams, \n    tmsEmcInviteContacts, \n    IEmcContactIdentity, \n    user, \n    tmsEmcGetContactTypes,\n    IEmcGetContactTypesResult,\n    IEmcContactTypeItem,\n    IEmcInviteResultItem,\n    trackingPrint,\n} from '@app/model';\nimport toast from 'react-hot-toast';\nimport { matrixUser } from '@im/matrix';\nimport { authService } from '@src/services/authService';\nimport { Log, useProxyWatch,\n    IRequestResult } from '@fanfanlo';\nconst fileLogger = new Log(false, 'InviteContactDialog.tsx');\n\nconst isValidIdentity = (text: string) => /(^\\d{11}$)|(^[a-zA-Z0-9]{32}$)/.test(text);\nconst is11DigitNumber = (text: string) => /^\\d{11}$/.test(text);\n\ninterface InviteContactDialogProps {\n    open: boolean;\n    onClose: () => void;\n    onInviteSent?: () => void;\n}\n\nexport function InviteContactDialog({ open, onClose, onInviteSent }: InviteContactDialogProps) {\n    const uiLogger = fileLogger.sub(false, 'InviteContactDialog_ui');\n\n    const [contacts, setContacts] = useState('');\n    const [remark, setRemark] = useState('');\n    const [callType, setCallType] = useState<string | null>(null);\n    const [availableCallTypes, setAvailableCallTypes] = useState<readonly IEmcContactTypeItem[]>([]);\n    \n    // Debug effect to log availableCallTypes changes\n    useEffect(() => {\n        console.log('availableCallTypes updated:', availableCallTypes);\n    }, [availableCallTypes]);\n    \n    // Debug effect to log callType changes\n    useEffect(() => {\n        console.log('callType updated:', callType);\n    }, [callType]);\n    const [message, setMessage] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isTypesLoading, setIsTypesLoading] = useState(false);\n\n    const [pendingParams, setPendingParams] = useState<Omit<IEmcInviteContactsParams, 'matrix_access_token'> | null>(null);\n    const executionLock = useRef(false);\n    const [accessToken] = useProxyWatch(matrixUser.userData.userInfo, 'loginResponse.access_token', matrixUser.userData.userInfo.loginResponse?.access_token);\n    const [isUserLoggedIn] = useProxyWatch(user.data.sessionData, 'global_user_info', !!user.data.sessionData.global_user_info);\n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    useEffect(() => {\n        if (accessToken && pendingParams && !executionLock.current) {\n            executionLock.current = true;\n            const finalParams: IEmcInviteContactsParams = {\n                ...pendingParams,\n                matrix_access_token: accessToken,\n                contacts: pendingParams?.contacts || [],\n                type: pendingParams?.type || ''\n            };\n            executeApiCall(finalParams);\n        }\n    }, [accessToken, pendingParams]);\n\n    const executeApiCall = useCallback(async (params: IEmcInviteContactsParams) => {\n        if (!params.contacts || !params.type) {\n            toast.error('请填写联系人和呼叫类型');\n            return;\n        }\n\n        setIsLoading(true);\n        \n        try {\n            const res = await tmsEmcInviteContacts({\n                params,\n                handler: { printLog: true }\n            });\n\n            console.log('Invite response:', res);\n\n            // 处理响应结果\n            if (res.err || !res.shellIsOk || !res.dataIsOk) {\n                const errorMessage = res.err?.message || '邀请失败，请稍后重试';\n                toast.error(errorMessage);\n                return;\n            }\n\n            // 处理嵌套的响应结构\n            const responseData = res.data;\n            if (!responseData?.data?.results) {\n                const errorMessage = responseData?.data?.msg || res.data?.msg || '未返回有效的结果';\n                toast.error(errorMessage);\n                return;\n            }\n            \n            const results: IEmcInviteResultItem[] = responseData.data.results;\n\n            // 统计成功和失败的数量\n            const successResults = results.filter(r => r.result_code === 'SUCCESS');\n            const infoResults = results.filter(r => r.result_code === 'INVITE_ALREADY_SENT' || r.result_code === 'ALREADY_A_CONTACT');\n            const errorResults = results.filter(r => r.result_code !== 'SUCCESS' && r.result_code !== 'INVITE_ALREADY_SENT' && r.result_code !== 'ALREADY_A_CONTACT');\n\n            if (successResults.length > 0) {\n                toast.success(`成功邀请 ${successResults.length} 个联系人`);\n                onInviteSent?.();\n            }\n            \n            if (infoResults.length > 0) {\n                const infoMessages = infoResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (infoMessages) {\n                    // 使用默认的 toast 替代 toast.info\n                    toast(infoMessages);\n                }\n            }\n            \n            if (errorResults.length > 0) {\n                const errorMessages = errorResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (errorMessages) {\n                    toast.error(`部分邀请失败：\\n${errorMessages}`);\n                }\n            }\n        } catch (error) {\n            console.error('Error in executeApiCall:', error);\n            toast.error('处理请求时发生错误，请稍后重试');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [onInviteSent]);\n\n    const fetchCallTypes = useCallback(async () => {\n        const logger = uiLogger.sub(false, 'fetchCallTypes_fn');\n        logger.log('Fetching call types...');\n        setIsTypesLoading(true);\n        const res: IRequestResult<IEmcGetContactTypesResult, any> = await tmsEmcGetContactTypes({ params: {}, handler: { printLog: true } });\n        logger.log('Call types response:', JSON.stringify(res));\n        setIsTypesLoading(false);\n\n        if (res.err || !res.shellIsOk || !res.dataIsOk) {\n            const errorMessage = res.err?.message || '加载呼叫类型失败。';\n            toast.error(errorMessage);\n            setAvailableCallTypes([]);\n            logger.error('Failed to load call types:', errorMessage);\n        } else {\n            // 从 res.data.data.types 获取数据\n            const types = res.data?.data?.types || [];\n            logger.log('Setting availableCallTypes:', JSON.stringify(types));\n            \n            // 转换为 IEmcContactTypeItem[] 格式\n            const formattedTypes = types.map(type => ({\n                id: type.uuid,\n                name: type.name,\n                is_system: type.is_system\n            }));\n            \n            setAvailableCallTypes(formattedTypes);\n            \n            // 只在 callType 为空时设置默认值\n            if (formattedTypes.length > 0 && !callType) {\n                const defaultType = formattedTypes[0].name;\n                logger.log('Setting default call type:', defaultType);\n                setCallType(defaultType);\n            } else if (formattedTypes.length === 0) {\n                logger.warn('No call types available');\n            }\n        }\n    }, []); // 移除了 callType 依赖\n\n    useEffect(() => {\n        if (open) {\n            fetchCallTypes();\n        } else {\n            setContacts('');\n            setRemark('');\n            setCallType(null);\n            setAvailableCallTypes([]);\n            setMessage('');\n            setIsLoading(false);\n            setPendingParams(null);\n            executionLock.current = false;\n        }\n    }, [open, fetchCallTypes]);\n\n    const handleSendInvitation = useCallback(async () => {\n        const contactInputs = contacts.split('\\n').map(c => c.trim()).filter(c => c);\n        if (contactInputs.length === 0) {\n            toast.error('请输入至少一个联系人。');\n            return;\n        }\n\n        const contactIdentities: IEmcContactIdentity[] = [];\n        for (const input of contactInputs) {\n            if (isValidIdentity(input)) {\n                const type = is11DigitNumber(input) ? 'mobile' : 'email';\n                contactIdentities.push({ identity: input, identityType: type });\n            } else {\n                toast.error(`联系人格式无效: ${input}。必须是11位手机号或32位字符串。`);\n                return;\n            }\n        }\n\n        if (!callType || callType.trim() === '') {\n            toast.error('请选择或输入一个呼叫类型。');\n            return;\n        }\n\n        setIsLoading(true);\n\n        if (!userToken) {\n            const appLoggedIn = await authService.showLoginDialog();\n            if (!appLoggedIn) {\n                setIsLoading(false);\n                return; \n            }\n        }\n\n        const currentAccessToken = matrixUser.userData.userInfo.loginResponse?.access_token;\n        const params: Omit<IEmcInviteContactsParams, 'matrix_access_token'> = {\n            contacts: contactIdentities,\n            type: callType.trim(),\n            remark: remark.trim(),\n            message: message.trim(),\n        };\n\n        if (currentAccessToken) {\n            executionLock.current = true;\n            const apiParams: IEmcInviteContactsParams = {\n                ...params,\n                matrix_access_token: currentAccessToken,\n                contacts: params.contacts || [],\n                type: params.type || ''\n            };\n            executeApiCall(apiParams);\n        } else {\n            toast('等待登录...');\n            setPendingParams(params);\n        }\n\n    }, [contacts, remark, callType, message, executeApiCall, isUserLoggedIn]);\n\n    return (\n        <Dialog open={open} onClose={() => onClose()} maxWidth=\"sm\" fullWidth>\n            <DialogTitle>邀请紧急联系人</DialogTitle>\n            <DialogContent>\n                <Box component=\"form\" sx={{ mt: 2 }}>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"contacts\"\n                        label=\"联系人 (11位手机号)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={4}\n                        variant=\"outlined\"\n                        placeholder=\"13800138000\"\n                        value={contacts}\n                        onChange={(e) => setContacts(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"remark\"\n                        label=\"备注名 (可选)\"\n                        type=\"text\"\n                        fullWidth\n                        variant=\"outlined\"\n                        value={remark}\n                        onChange={(e) => setRemark(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <Autocomplete\n                        freeSolo\n                        id=\"call-type-autocomplete\"\n                        options={availableCallTypes.map((option) => option.name)}\n                        value={callType || ''}\n                        onChange={(event: SyntheticEvent, newValue: string | null) => {\n                            console.log('Call type changed to:', newValue);\n                            setCallType(newValue);\n                        }}\n                        inputValue={callType || ''}\n                        onInputChange={(event, newInputValue, reason) => {\n                            // Only update when the user is typing, not when an option is selected\n                            if (reason === 'input') {\n                                console.log('Input value changed to:', newInputValue);\n                                setCallType(newInputValue);\n                            }\n                        }}\n                        disablePortal\n                        disableClearable\n                        forcePopupIcon={!isTypesLoading}\n                        sx={{ mt: 1, mb: 1, width: '100%' }}\n                        renderInput={(params) => (\n                            <TextField\n                                {...params}\n                                label=\"呼叫类型\"\n                                variant=\"outlined\"\n                                fullWidth\n                                InputProps={{\n                                    ...params.InputProps,\n                                    endAdornment: (\n                                        <>\n                                            {isTypesLoading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                                            {params.InputProps.endAdornment}\n                                        </>\n                                    ),\n                                }}\n                            />\n                        )}\n                        ListboxProps={{\n                            style: {\n                                maxHeight: '200px',\n                                overflow: 'auto',\n                            },\n                        }}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"message\"\n                        label=\"邀请信息 (可选)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={3}\n                        variant=\"outlined\"\n                        placeholder=\"我已将您添加为我的紧急联系人，请接受邀请。\"\n                        value={message}\n                        onChange={(e) => setMessage(e.target.value)}\n                        disabled={isLoading}\n                    />\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => onClose()} disabled={isLoading}>关闭</Button>\n                <Button onClick={handleSendInvitation} variant=\"contained\" disabled={isLoading}>\n                    {isLoading ? <CircularProgress size={24} /> : '发送邀请'}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Log } from \"@fanfanlo\";\r\n\r\nconst fileLog = new Log(false, 'stopAllHandler_f');\r\n\r\nexport function stopAllHandler() {\r\n\r\n    try {\r\n      fileLog.log('开始停止所有紧急音频和震动...');\r\n\r\n      // 使用正确的停止方法（与EmergencyAudioControl.tsx保持一致）\r\n      const stopEmergencyMethods = [\r\n        // 停止监控\r\n        // `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`,\r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stop();\r\n          com.fanfanlo.emergencycall.manager.AlarmSoundManager.stop();\r\n          com.fanfanlo.emergencycall.v2.core.EmergencySystemV2.forceStopHelpSound();\r\n        } catch(e) {\r\n          // console.log('停止呼救者声音失败:', e);\r\n        }\r\n        `,\r\n        \r\n        // 停止联系人报警声音（主要方法）\r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stopEmergencyAlarm();\r\n          \r\n          // 备用方案：如果WebViewActivity的Android接口可用，也调用它\r\n          if(typeof Android !== 'undefined' && typeof Android.stopAlarm === 'function') {\r\n            Android.stopAlarm();\r\n          }\r\n        } catch(e) {\r\n          console.log('停止联系人报警声音失败:', e);\r\n        }\r\n        `\r\n      ];\r\n\r\n      for (const script of stopEmergencyMethods) {\r\n        try {\r\n          fileLog.log(`调用停止脚本: ${script.trim()}`);\r\n          autoWebViewJs.callScript(script);\r\n        } catch (methodError) {\r\n          fileLog.warn(`停止方法调用失败:`, methodError);\r\n          // 继续尝试其他方法\r\n        }\r\n      }\r\n\r\n      fileLog.log('已停止所有紧急音频和震动');\r\n      return true;\r\n    //   setMessage({\r\n    //     type: 'success',\r\n    //     text: '已停止所有紧急音频和震动'\r\n    //   });\r\n    } catch (error) {\r\n      fileLog.error('停止紧急音频失败:', error);\r\n    //   setMessage({\r\n    //     type: 'error',\r\n    //     text: `停止失败: ${error instanceof Error ? error.message : '未知错误'}`\r\n    //   });\r\n    return false;\r\n    } finally {\r\n    //   setLoading(false);\r\n    }\r\n    \r\n}","import React, { useState } from 'react';\nimport {\n  Button,\n  Snackbar,\n  Alert,\n  Fab,\n  Tooltip\n} from '@mui/material';\nimport {\n  Stop as StopIcon,\n  VolumeOff as VolumeOffIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\nimport { trackingPrint } from \"@app/model\";\nimport { stopAllHandler } from './stopAllHandler';\n\nconst fileLog = new Log(false, 'EmergencyStopButton');\n\ninterface EmergencyStopButtonProps {\n  variant?: 'button' | 'fab';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n}\n\n/**\n * 紧急停止按钮组件\n * 快速停止所有紧急呼救相关的音频和震动\n */\nconst EmergencyStopButton: React.FC<EmergencyStopButtonProps> = ({ \n  variant = 'button',\n  size = 'medium',\n  fullWidth = false\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  /**\n   * 检查是否在Android WebView环境中\n   */\n  const isAndroidWebView = (): boolean => {\n    try {\n      return !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n    } catch (e) {\n      fileLog.error('检查WebView环境时出错:', e);\n      return false;\n    }\n  };\n\n  /**\n   * 停止所有紧急呼救音频和震动\n   */\n  const handleStopAllEmergencyAudio = async (): Promise<void> => {\n    setLoading(true);\n    setMessage(null);\n\n    // 添加按钮点击埋点\n    trackingPrint({params:{\n      type:\"用户操作\",\n      title:\"紧急停止\",\n      subtitle:\"停止按钮-点击\",\n      extra:{\n        buttonType: variant,\n        timestamp: Date.now(),\n        isAndroidWebView: isAndroidWebView()\n      }\n    }});\n\n    try {\n      const bl = stopAllHandler();\n      if (bl){\n        // 成功埋点\n        trackingPrint({params:{\n          type:\"系统事件\",\n          title:\"紧急停止\",\n          subtitle:\"停止成功\",\n          extra:{\n            result: \"success\",\n            timestamp: Date.now()\n          }\n        }});\n        \n        setMessage({\n          type: 'success',\n          text: '已停止所有紧急音频和震动'\n        });\n      }else{\n        // 失败埋点\n        trackingPrint({params:{\n          type:\"系统异常\",\n          title:\"紧急停止\",\n          subtitle:\"停止失败\",\n          extra:{\n            result: \"failed\",\n            timestamp: Date.now(),\n            reason: \"stopAllHandler返回false\"\n          }\n        }});\n        \n        setMessage({\n          type: 'error',\n          text: `停止失败`\n        });\n      }\n    } catch (error) {\n      // 异常埋点\n      trackingPrint({params:{\n        type:\"系统异常\",\n        title:\"紧急停止\",\n        subtitle:\"停止异常\",\n        extra:{\n          error: error instanceof Error ? error.message : String(error),\n          stack: error instanceof Error ? error.stack : undefined,\n          timestamp: Date.now()\n        }\n      }});\n      \n      setMessage({\n        type: 'error',\n        text: '停止时发生异常'\n      });\n    }\n    \n    setLoading(false);\n  };\n\n  /**\n   * 关闭消息提示\n   */\n  const handleCloseMessage = () => {\n    setMessage(null);\n  };\n\n  // 浮动操作按钮样式\n  if (variant === 'fab') {\n    return (\n      <>\n        <Tooltip title=\"停止所有紧急音频和震动\" placement=\"left\">\n          <Fab\n            color=\"error\"\n            onClick={handleStopAllEmergencyAudio}\n            disabled={loading}\n            size={size}\n            sx={{\n              position: 'fixed',\n              bottom: 80,\n              right: 16,\n              zIndex: 1000\n            }}\n          >\n            {loading ? <VolumeOffIcon /> : <StopIcon />}\n          </Fab>\n        </Tooltip>\n\n        <Snackbar\n          open={!!message}\n          autoHideDuration={4000}\n          onClose={handleCloseMessage}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert \n            onClose={handleCloseMessage} \n            severity={message?.type || 'info'}\n            sx={{ width: '100%' }}\n          >\n            {message?.text}\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  // 普通按钮样式\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"error\"\n        size={size}\n        fullWidth={fullWidth}\n        startIcon={loading ? <VolumeOffIcon /> : <StopIcon />}\n        onClick={handleStopAllEmergencyAudio}\n        disabled={loading}\n        sx={{ mb: 1 }}\n      >\n        🔕 静音\n      </Button>\n\n      <Snackbar\n        open={!!message}\n        autoHideDuration={4000}\n        onClose={handleCloseMessage}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert \n          onClose={handleCloseMessage} \n          severity={message?.type || 'info'}\n          sx={{ width: '100%' }}\n        >\n          {message?.text}\n        </Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default EmergencyStopButton;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Switch,\n  TextField,\n  Paper,\n  Button,\n  FormControlLabel,\n  Slider,\n  Divider,\n  Alert,\n  Snackbar,\n  Collapse,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton,\n  Chip,\n  LinearProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  CircularProgress,\n} from '@mui/material';\nimport { \n  PlayArrow, \n  Stop, \n  VolumeUp, \n  Settings, \n  ExpandLess, \n  Mic,\n  Save,\n  Share,\n  Delete,\n  Refresh,\n  Star,\n  StarBorder,\n  MusicNote,\n  CloudUpload,\n  AudioFile,\n  InsertDriveFile,\n} from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { user } from '@app/model';\nimport { authService } from '@src/services/authService';\nimport { ReportButton } from '../report/ReportButton';\n\n// 完整的TTS设置数据结构（整合录制功能后）\ninterface EmergencyTTSSettings {\n  enabled: boolean;\n  message: string;\n  repeatInterval: number;\n  voiceSpeed: number;\n  voicePitch: number;\n  useCustomAudio: boolean;        // 是否使用自定义录音\n  medicalEmergencyAudioPath?: string; // 医疗呼救音频路径\n  lastUpdated: number;\n}\n\n// TTS文件信息接口（扩展版本）\ninterface TTSFileInfo {\n  fileName: string;\n  filePath: string;\n  fileSize: number;\n  createTime: number;\n  type: 'general' | 'medical' | 'security' | 'custom';\n  source: 'recorded' | 'uploaded';  // 新增来源标识\n  isDefault?: boolean;\n  duration?: number;  // 音频时长（毫秒）\n  format?: string;    // 文件格式\n  mimeType?: string;  // MIME类型\n}\n\n// 录制结果接口\ninterface TTSRecordResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n}\n\n// 语音配置接口\ninterface VoiceEmergencyConfig {\n  medicalDefault?: string;\n  securityDefault?: string;\n  lastUpdated: number;\n}\n\n// 文件上传相关接口\ninterface FileSelectResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: SelectedFileInfo;\n}\n\ninterface SelectedFileInfo {\n  filePath: string;\n  fileName: string;\n  fileSize: number;\n  mimeType: string;\n  duration?: number;\n}\n\ninterface FileUploadResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: TTSFileInfo;\n}\n\ninterface FileValidationResult {\n  isValid: boolean;\n  message: string;\n  fileSize: number;\n  duration: number;\n  format: string;\n  warnings: string[];\n}\n\ninterface SupportedFormats {\n  formats: string[];\n  maxFileSizeMB: number;\n  maxDurationSeconds: number;\n  recommendedDurationSeconds: number;\n}\n\n// 默认设置\nconst DEFAULT_SETTINGS: EmergencyTTSSettings = {\n  enabled: false,\n  message: '我遇到了紧急情况，需要帮助！请立即联系紧急服务！',\n  repeatInterval: 3000,\n  voiceSpeed: 1.0,\n  voicePitch: 1.0,\n  useCustomAudio: false,\n  lastUpdated: Date.now(),\n};\n\nconst DEFAULT_VOICE_CONFIG: VoiceEmergencyConfig = {\n  lastUpdated: Date.now(),\n};\n\nconst TTS_SETTINGS_KEY = 'emergencyTTSSettings';\nconst VOICE_CONFIG_KEY = 'voiceEmergencyConfig';\n\nexport const EmergencyTTSSettings: React.FC = () => {\n  const [settings, setSettings] = useState<EmergencyTTSSettings>(DEFAULT_SETTINGS);\n  const [voiceConfig, setVoiceConfig] = useState<VoiceEmergencyConfig>(DEFAULT_VOICE_CONFIG);\n  const [fileList, setFileList] = useState<TTSFileInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [testing, setTesting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const [activeTab, setActiveTab] = useState(0);\n  \n  // 录制相关状态\n  const [isRecording, setIsRecording] = useState(false);\n  const [playingFile, setPlayingFile] = useState<string | null>(null);\n  const [recordText, setRecordText] = useState(DEFAULT_SETTINGS.message);\n  const [recordSpeed, setRecordSpeed] = useState(1.0);\n  const [recordPitch, setRecordPitch] = useState(1.0);\n  const [showRecordDialog, setShowRecordDialog] = useState(false);\n  const [ttsAvailable, setTtsAvailable] = useState<boolean | null>(null);\n  \n  // 文件上传相关状态\n  const [isUploading, setIsUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<SelectedFileInfo | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [supportedFormats, setSupportedFormats] = useState<SupportedFormats | null>(null);\n\n  async function onRecordClick(){\n    if(user.data.storeData.user_token){\n      setShowRecordDialog(true)\n    }else{\n      // 弹出登录页面\n\n      const appLoggedIn = await authService.showLoginDialog();\n      if(appLoggedIn){\n        setShowRecordDialog(true);\n      }\n    }\n  }\n  // 加载所有设置和数据\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // 加载TTS设置\n        const savedSettings = await autoJsStoreUtils.read<EmergencyTTSSettings>(\n          TTS_SETTINGS_KEY, \n          DEFAULT_SETTINGS\n        );\n        setSettings(savedSettings);\n        \n        // 加载语音配置\n        const savedConfig = await autoJsStoreUtils.read<VoiceEmergencyConfig>(\n          VOICE_CONFIG_KEY,\n          DEFAULT_VOICE_CONFIG\n        );\n        setVoiceConfig(savedConfig);\n        \n        // 检查TTS可用性\n        checkTTSAvailability();\n        \n        // 加载文件列表\n        loadFileList();\n      } catch (err) {\n        console.error('加载数据失败:', err);\n        setError('加载设置失败');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // 初始化时加载支持的音频格式\n  useEffect(() => {\n    loadSupportedFormats();\n  }, []);\n\n  // 加载支持的音频格式\n  const loadSupportedFormats = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getSupportedAudioFormats();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const formats = JSON.parse(javaResultString || '{}') as SupportedFormats;\n      setSupportedFormats(formats);\n    } catch (error) {\n      console.error('加载支持格式失败:', error);\n      setSupportedFormats({\n        formats: ['mp3', 'wav', 'm4a', 'aac'],\n        maxFileSizeMB: 10,\n        maxDurationSeconds: 60,\n        recommendedDurationSeconds: 30\n      });\n    }\n  }, []);\n\n  // 加载文件列表\n  const loadFileList = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList();\ndata;`;\n      const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n      const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n      \n      // 为现有文件设置默认类型（兼容性处理）\n      const filesWithType = files.map(file => ({\n        ...file,\n        type: (file as any).type || 'general' as const,\n        isDefault: (file as any).isDefault || false,\n      }));\n      \n      setFileList(filesWithType);\n    } catch (error) {\n      console.error('加载文件列表失败:', error);\n      setFileList([]);\n    }\n  }, []);\n\n  // 选择并上传音频文件（整合操作）\n  const handleSelectAndUploadAudioFile = useCallback(async () => {\n    if (isUploading) return;\n    \n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.selectAndUploadAudioFile();\ndata;`;\n      \n      // 模拟上传进度\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return 90;\n          }\n          return prev + 10;\n        });\n      }, 300);\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const result = JSON.parse(javaResultString || '{}') as FileUploadResult;\n      \n      clearInterval(progressInterval);\n      setUploadProgress(100);\n      \n      if (result.success) {\n        setSuccessMessage('音频文件上传成功！');\n        setShowSuccess(true);\n        loadFileList(); // 刷新文件列表\n      } else {\n        setError(result.message || '上传失败');\n      }\n    } catch (error) {\n      console.error('文件上传失败:', error);\n      setError('文件上传异常：' + (error as Error).message);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  }, [isUploading, loadFileList]);\n\n  // 检查TTS可用性\n  const checkTTSAvailability = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.isTTSAvailable();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      setTtsAvailable(javaResultString === 'true');\n    } catch (error) {\n      console.error('检查TTS可用性失败:', error);\n      setTtsAvailable(false);\n    }\n  }, []);\n\n  // 保存设置\n  const saveSettings = async (newSettings: EmergencyTTSSettings) => {\n    try {\n      const settingsToSave = {\n        ...newSettings,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(TTS_SETTINGS_KEY, settingsToSave);\n      setSettings(settingsToSave);\n      setSuccessMessage('设置保存成功');\n      setShowSuccess(true);\n      setError(null);\n    } catch (err) {\n      console.error('保存TTS设置失败:', err);\n      setError('保存设置失败');\n    }\n  };\n\n  // 保存语音配置\n  const saveVoiceConfig = async (newConfig: VoiceEmergencyConfig) => {\n    try {\n      const configToSave = {\n        ...newConfig,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(VOICE_CONFIG_KEY, configToSave);\n      setVoiceConfig(configToSave);\n    } catch (err) {\n      console.error('保存语音配置失败:', err);\n      setError('保存配置失败');\n    }\n  };\n\n  // 录制TTS\n  const handleRecord = useCallback(() => {\n    if (!recordText.trim()) {\n      setError('请输入要录制的文字');\n      return;\n    }\n\n    if (!ttsAvailable) {\n      setError('TTS服务不可用，无法录制');\n      return;\n    }\n\n    try {\n      setIsRecording(true);\n      // 生成文件名：TTS_YYYYMMDD_HHMMSS.wav\n      const now = new Date();\n      const timestamp = now.getFullYear().toString() + \n                       (now.getMonth() + 1).toString().padStart(2, '0') + \n                       now.getDate().toString().padStart(2, '0') + '_' +\n                       now.getHours().toString().padStart(2, '0') + \n                       now.getMinutes().toString().padStart(2, '0') + \n                       now.getSeconds().toString().padStart(2, '0');\n      const fileName = `TTS_${timestamp}.wav`;\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.recordTTS(\"${recordText.replace(/\"/g, '\\\\\"')}\", \"${fileName}\", ${recordSpeed}, ${recordPitch});\ndata;`;\n      \n      // 模拟异步录制过程\n      setTimeout(() => {\n        try {\n          const { javaResultString: resultJson } = autoWebViewJs.callScript(script);\n          console.log('录制结果:', resultJson);\n          const result = JSON.parse(resultJson || '{}') as TTSRecordResult;\n          \n          if (result.success) {\n            setSuccessMessage('录制成功！');\n            setShowSuccess(true);\n            setShowRecordDialog(false);\n            loadFileList(); // 刷新文件列表\n          } else {\n            setError(result.message || '录制失败');\n          }\n        } catch (error) {\n          console.error('录制失败:', error);\n          setError('录制异常：' + (error as Error).message);\n        } finally {\n          setIsRecording(false);\n        }\n      }, 2000);\n    } catch (error) {\n      setError('录制异常：' + (error as Error).message);\n      setIsRecording(false);\n    }\n  }, [recordText, recordSpeed, recordPitch, ttsAvailable, loadFileList]);\n\n  // 播放文件\n  const handlePlayFile = useCallback((filePath: string) => {\n    try {\n      if (playingFile === filePath) {\n        setPlayingFile(null);\n        return;\n      }\n\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.playFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success === 'true') {\n        setPlayingFile(filePath);\n        setTimeout(() => setPlayingFile(null), 3000);\n      } else {\n        setError('播放失败');\n      }\n    } catch (error) {\n      setError('播放异常：' + (error as Error).message);\n    }\n  }, [playingFile]);\n\n  // 分享文件\n  const handleShareFile = useCallback((filePath: string) => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.shareFile(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"紧急呼救语音\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success !== 'true') {\n        setError('分享失败');\n      }\n    } catch (error) {\n      setError('分享异常：' + (error as Error).message);\n    }\n  }, []);\n\n  // 删除文件\n  const handleDeleteFile = useCallback((filePath: string) => {\n    if (window.confirm('确定要删除这个文件吗？')) {\n      try {\n        const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.deleteFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n        const { javaResultString: success } = autoWebViewJs.callScript(script);\n        if (success === 'true') {\n          setSuccessMessage('文件删除成功');\n          setShowSuccess(true);\n          loadFileList();\n        } else {\n          setError('删除失败');\n        }\n      } catch (error) {\n        setError('删除异常：' + (error as Error).message);\n      }\n    }\n  }, [loadFileList]);\n\n  // 设置为默认音频\n  const setAsDefaultAudio = useCallback(async (filePath: string, type: 'medical' | 'security') => {\n    try {\n      // 调用Android端设置默认音频\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.setFileAsDefault(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"${type}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      \n      if (success !== 'true') {\n        setError('设置默认音频失败');\n        return;\n      }\n      \n      const newConfig = { ...voiceConfig };\n      if (type === 'medical') {\n        newConfig.medicalDefault = filePath;\n        // 同时更新TTS设置中的路径\n        const updatedSettings = {\n          ...settings,\n          medicalEmergencyAudioPath: filePath,\n          useCustomAudio: true,\n        };\n        setSettings(updatedSettings);\n        await saveSettings(updatedSettings);\n      } else {\n        newConfig.securityDefault = filePath;\n      }\n      \n      await saveVoiceConfig(newConfig);\n      \n      // 更新文件列表中的默认标记\n      const updatedFiles = fileList.map(file => ({\n        ...file,\n        isDefault: file.filePath === filePath,\n      }));\n      setFileList(updatedFiles);\n      \n      setSuccessMessage(`已设置为${type === 'medical' ? '医疗' : '安全'}呼救默认音频`);\n      setShowSuccess(true);\n    } catch (err) {\n      console.error('设置默认音频失败:', err);\n      setError('设置默认音频失败');\n    }\n  }, [voiceConfig, fileList, settings, saveSettings, saveVoiceConfig]);\n\n  // 格式化文件大小\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  // 格式化时间\n  const formatTime = (timestamp: number): string => {\n    return new Date(timestamp).toLocaleString();\n  };\n\n  // 格式化时长\n  const formatDuration = (milliseconds: number): string => {\n    if (!milliseconds || milliseconds <= 0) return '';\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${seconds}s`;\n  };\n\n  // 测试TTS\n  const testTTS = async () => {\n    if (!settings.message.trim()) {\n      setError('请输入呼救文字后再测试');\n      return;\n    }\n\n    try {\n      setTesting(true);\n      \n      // 调用Android端TTS测试方法\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.testTTS(\"${settings.message}\", ${settings.voiceSpeed}, ${settings.voicePitch});\n      `;\n      \n      await new Promise(resolve => setTimeout(resolve, 500)); // 模拟测试时间\n      // TODO: 实际调用时取消注释\n      autoWebViewJs.callScript(script);\n      \n    } catch (err) {\n      console.error('TTS测试失败:', err);\n      setError('TTS测试失败');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  // 停止TTS测试\n  const stopTest = async () => {\n    try {\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.stopTest();\n      `;\n      // TODO: 实际调用时取消注释\n      autoWebViewJs.callScript(script);\n      setTesting(false);\n    } catch (err) {\n      console.error('停止TTS测试失败:', err);\n    }\n  };\n\n  const handleSettingChange = (key: keyof EmergencyTTSSettings, value: any) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    \n    // 对于启用/禁用这样的关键设置，立即保存\n    if (key === 'enabled') {\n      saveSettings(newSettings);\n    }\n  };\n\n  const handleSave = () => {\n    if (settings.enabled && !settings.useCustomAudio && !settings.message.trim()) {\n      setError('启用TTS功能时，呼救文字不能为空');\n      return;\n    }\n    saveSettings(settings);\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ p: 2, textAlign: 'center' }}>\n        <Typography>加载中...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ mb: 3 }}>\n      {/* 折叠头部 */}\n      <Paper \n        elevation={1} \n        sx={{ \n          p: 2, \n          display: 'flex', \n          alignItems: 'center',\n          justifyContent: 'space-between',\n          borderRadius: 1,\n        }}\n      >\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          gap: { xs: 1, sm: 2 },\n          flexWrap: { xs: 'wrap', sm: 'nowrap' },\n          flex: 1,\n          minWidth: 0\n        }}>\n          <Typography \n            variant=\"subtitle1\" \n            sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: 1,\n              fontSize: { xs: '0.95rem', sm: '1.25rem' },\n              minWidth: 0,\n              flexShrink: 0\n            }}\n          >\n            <VolumeUp fontSize=\"small\" />\n            <Box component=\"span\" sx={{ \n              display: { xs: 'none', sm: 'inline' }\n            }}>紧急呼救语音设置</Box>\n            <Box component=\"span\" sx={{ \n              display: { xs: 'inline', sm: 'none' }\n            }}>呼救语音</Box>\n          </Typography>\n          \n          <Box sx={{ \n            display: 'flex', \n            alignItems: 'center', \n            gap: { xs: 1, sm: 2 },\n            flexWrap: { xs: 'wrap', sm: 'nowrap' }\n          }}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.enabled}\n                  onChange={(e) => handleSettingChange('enabled', e.target.checked)}\n                  color=\"primary\"\n                  size=\"small\"\n                />\n              }\n              label={settings.enabled ? '已启用' : '未启用'}\n              sx={{ \n                margin: 0,\n                '& .MuiFormControlLabel-label': {\n                  fontSize: { xs: '0.8rem', sm: '0.875rem' }\n                }\n              }}\n            />\n            \n            {/* 状态指示器 */}\n            {/* <Chip \n              size=\"small\"\n              icon={ttsAvailable ? <VolumeUp /> : <MusicNote />}\n              label={ttsAvailable === null ? '检测中...' : (ttsAvailable ? 'TTS可用' : 'TTS不可用')}\n              color={ttsAvailable === null ? 'default' : (ttsAvailable ? 'success' : 'warning')}\n              variant=\"outlined\"\n              sx={{ \n                fontSize: { xs: '0.7rem', sm: '0.8125rem' },\n                height: { xs: '24px', sm: '32px' }\n              }}\n            /> */}\n          </Box>\n        </Box>\n        \n        <Button\n          variant=\"outlined\"\n          size=\"small\"\n          startIcon={expanded ? <ExpandLess /> : <Settings />}\n          onClick={() => setExpanded(!expanded)}\n          sx={{ \n            fontSize: { xs: '0.75rem', sm: '0.875rem' },\n            padding: { xs: '4px 8px', sm: '6px 16px' },\n            minWidth: { xs: 'auto', sm: '64px' },\n            flexShrink: 0\n          }}\n        >\n          <Box component=\"span\" sx={{ display: { xs: 'none', sm: 'inline' } }}>\n            {expanded ? '收起设置' : '设置'}\n          </Box>\n          <Box component=\"span\" sx={{ display: { xs: 'inline', sm: 'none' } }}>\n            {expanded ? '收起' : '设置'}\n          </Box>\n        </Button>\n      </Paper>\n\n      {/* 折叠内容 */}\n      <Collapse in={expanded}>\n        <Paper \n          elevation={0} \n          sx={{ \n            mt: 1, \n            p: 0,\n            border: '1px solid', \n            borderColor: 'divider',\n            borderRadius: 1,\n          }}\n        >\n          {/* 功能标签页 */}\n          <Tabs \n            value={activeTab} \n            onChange={(_, newValue) => setActiveTab(newValue)}\n            variant=\"fullWidth\"\n          >\n            {/* <Tab label=\"文字设置\" /> */}\n            <Tab label=\"上传/文字转语音\" />\n            <Tab label=\"文件管理\" />\n          </Tabs>\n\n          {/* 标签页内容 */}\n          <Box sx={{ p: 2 }}>\n            {/* 文字设置 Tab */}\n            {activeTab === -1 && (\n              <Box>\n                {/* 呼救文字设置 */}\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    呼救文字内容\n                  </Typography>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={3}\n                    value={settings.message}\n                    onChange={(e) => handleSettingChange('message', e.target.value)}\n                    placeholder=\"请输入紧急情况下要播报的文字...\"\n                    disabled={!settings.enabled}\n                    helperText={`当前字数: ${settings.message.length} 字符`}\n                    sx={{ \n                      '& .MuiInputBase-input': {\n                        fontSize: '16px',\n                        lineHeight: 1.5,\n                      }\n                    }}\n                  />\n                </Box>\n\n                {/* 语音设置 */}\n                {settings.enabled && (\n                  <>\n                    <Divider sx={{ my: 3 }} />\n                    \n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                      语音参数设置\n                    </Typography>\n\n                    {/* 重复间隔 */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        重复间隔: {settings.repeatInterval / 1000} 秒\n                      </Typography>\n                      <Slider\n                        value={settings.repeatInterval}\n                        onChange={(_, value) => handleSettingChange('repeatInterval', value)}\n                        min={2000}\n                        max={10000}\n                        step={500}\n                        marks={[\n                          { value: 2000, label: '2s' },\n                          { value: 5000, label: '5s' },\n                          { value: 10000, label: '10s' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                        valueLabelFormat={(value) => `${value / 1000}s`}\n                      />\n                    </Box>\n\n                    {/* 语音速度 */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        语音速度: {settings.voiceSpeed}x\n                      </Typography>\n                      <Slider\n                        value={settings.voiceSpeed}\n                        onChange={(_, value) => handleSettingChange('voiceSpeed', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '0.5x' },\n                          { value: 1.0, label: '1.0x' },\n                          { value: 2.0, label: '2.0x' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n\n                    {/* 语音音调 */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        语音音调: {settings.voicePitch}x\n                      </Typography>\n                      <Slider\n                        value={settings.voicePitch}\n                        onChange={(_, value) => handleSettingChange('voicePitch', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '低' },\n                          { value: 1.0, label: '标准' },\n                          { value: 2.0, label: '高' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n                  </>\n                )}\n              </Box>\n            )}\n\n            {/* 录制音频 Tab */}\n            {activeTab === 0 && (\n              <Box>\n                {/* 录制语音区域 */}\n                <Box sx={{ mb: 4 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    录制新的呼救语音\n                  </Typography>\n                  \n                  {!ttsAvailable ? (\n                    <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                      TTS服务不可用，无法录制语音。请检查设备设置或联系技术支持。\n                    </Alert>\n                  ) : (\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Mic />}\n                      onClick={onRecordClick}\n                      disabled={isUploading}\n                      sx={{ mb: 3 }}\n                    >\n                      录制新语音\n                    </Button>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    • 点击\"录制新语音\"开始录制<br />\n                    • 可以调节语速和音调参数<br />\n                    • 录制完成后会自动保存到文件列表<br />\n                    • 在文件管理中可以设置为默认呼救音频\n                  </Typography>\n                </Box>\n\n                <Divider sx={{ my: 3 }} />\n\n                {/* 上传音频文件区域 */}\n                <Box>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    上传音频文件\n                  </Typography>\n                  \n                  <Button\n                    variant=\"outlined\"\n                    startIcon={isUploading ? <CircularProgress size={16} /> : <CloudUpload />}\n                    onClick={handleSelectAndUploadAudioFile}\n                    disabled={isUploading}\n                    sx={{ mb: 2 }}\n                  >\n                    {isUploading ? '上传中...' : '选择并上传音频文件'}\n                  </Button>\n                  \n                  {/* 上传进度 */}\n                  {isUploading && uploadProgress > 0 && (\n                    <Box sx={{ mb: 2 }}>\n                      <LinearProgress \n                        variant=\"determinate\" \n                        value={uploadProgress} \n                        sx={{ mb: 1 }}\n                      />\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center' }}>\n                        上传中... {uploadProgress}%\n                      </Typography>\n                    </Box>\n                  )}\n                  \n                  {supportedFormats && supportedFormats.formats && (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                      支持格式: {supportedFormats.formats.join(', ').toUpperCase()}<br />\n                      文件大小限制: {supportedFormats.maxFileSizeMB}MB<br />\n                      推荐时长: {supportedFormats.recommendedDurationSeconds}秒内\n                    </Typography>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    • 支持从设备中选择现有的音频文件<br />\n                    {/* • 文件会被自动复制到应用私有目录<br />\n                    • 上传前会自动验证文件格式和大小<br /> */}\n                    • 上传成功后可在文件管理中设置为默认音频\n                  </Typography>\n                </Box>\n              </Box>\n            )}\n\n            {/* 文件管理 Tab */}\n            {activeTab === 1 && (\n              <Box>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    录制文件列表\n                  </Typography>\n                  <Button\n                    size=\"small\"\n                    startIcon={<Refresh />}\n                    onClick={loadFileList}\n                  >\n                    刷新\n                  </Button>\n                </Box>\n\n                {fileList.length === 0 ? (\n                  <Typography color=\"text.secondary\" sx={{ textAlign: 'center', py: 3 }}>\n                    暂无录制文件\n                  </Typography>\n                ) : (\n                  <List dense>\n                    {fileList.map((file, index) => (\n                      <React.Fragment key={file.filePath}>\n                        <ListItem sx={{ pl: 0 }}>\n                          <ListItemText\n                            primary={\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                  {file.source === 'uploaded' ? <InsertDriveFile fontSize=\"small\" /> : <Mic fontSize=\"small\" />}\n                                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                                    {file.fileName}\n                                  </Typography>\n                                </Box>\n                                \n                                {/* 标签集合 */}\n                                <Box sx={{ display: 'flex', gap: 0.5 }}>\n                                  {file.isDefault && (\n                                    <Chip size=\"small\" label=\"默认\" color=\"primary\" />\n                                  )}\n                                  <Chip \n                                    size=\"small\" \n                                    label={file.source === 'uploaded' ? '上传' : '录制'} \n                                    color={file.source === 'uploaded' ? 'secondary' : 'default'}\n                                    variant=\"outlined\"\n                                  />\n                                  {file.format && (\n                                    <Chip \n                                      size=\"small\" \n                                      label={file.format.toUpperCase()} \n                                      color=\"default\" \n                                      variant=\"outlined\"\n                                    />\n                                  )}\n                                </Box>\n                              </Box>\n                            }\n                            secondary={\n                              <Box>\n                                <Typography variant=\"caption\" color=\"text.secondary\">\n                                  {formatFileSize(file.fileSize)} • {formatTime(file.createTime)}\n                                  {file.duration && file.duration > 0 && ` • ${formatDuration(file.duration)}`}\n                                </Typography>\n                                {file.mimeType && (\n                                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                                    {file.mimeType}\n                                  </Typography>\n                                )}\n                              </Box>\n                            }\n                          />\n                          <ListItemSecondaryAction>\n                            <Box sx={{ display: 'flex', gap: 0.5 }}>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handlePlayFile(file.filePath)}\n                                color={playingFile === file.filePath ? \"primary\" : \"default\"}\n                              >\n                                {playingFile === file.filePath ? <Stop /> : <PlayArrow />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => setAsDefaultAudio(file.filePath, 'medical')}\n                                color={file.isDefault ? \"primary\" : \"default\"}\n                              >\n                                {file.isDefault ? <Star /> : <StarBorder />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleShareFile(file.filePath)}\n                              >\n                                <Share />\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleDeleteFile(file.filePath)}\n                                color=\"error\"\n                              >\n                                <Delete />\n                              </IconButton>\n                            </Box>\n                          </ListItemSecondaryAction>\n                        </ListItem>\n                        {index < fileList.length - 1 && <Divider />}\n                      </React.Fragment>\n                    ))}\n                  </List>\n                )}\n              </Box>\n            )}\n\n            {/* 通用操作按钮 */}\n            <Divider sx={{ my: 3 }} />\n            \n            {/* <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', mb: 2 }}>\n              <Button\n                variant=\"contained\"\n                onClick={handleSave}\n                sx={{ minWidth: 100 }}\n              >\n                保存设置\n              </Button>\n\n              {settings.enabled && settings.message.trim() && (\n                <>\n                  {!testing ? (\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<PlayArrow />}\n                      onClick={testTTS}\n                      sx={{ minWidth: 100 }}\n                    >\n                      测试呼救\n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      startIcon={<Stop />}\n                      onClick={stopTest}\n                      sx={{ minWidth: 100 }}\n                    >\n                      停止测试\n                    </Button>\n                  )}\n                </>\n              )}\n            </Box> */}\n\n            {/* 使用说明 */}\n            <Box sx={{ p: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                <strong>智能音频回退说明:</strong><br />\n                • 第1级: 检查是否启用呼救功能<br />\n                • 第2级: 优先播放设置为默认的自定义音频文件<br />\n                {/* • 第3级: 降级到文字转语音播报<br /> */}\n                • 第3级: 最终降级到系统默认提示音<br />\n                <br />\n                <strong>使用建议:</strong><br />\n                • 建议录制或上传个人化的呼救信息，包含您的姓名、病情和紧急联系人<br />\n                • 在文件管理中点击五角星设置为默认音频<br />\n                • 先测试语音效果，确保在紧急情况下能清楚传达<br />\n                • 定期检查和更新呼救音频内容\n              </Typography>\n            </Box>\n          </Box>\n        </Paper>\n      </Collapse>\n\n      {/* 录制对话框 */}\n      <Dialog open={showRecordDialog} onClose={() => setShowRecordDialog(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>录制新语音</DialogTitle>\n        <DialogContent>\n          <TextField\n            fullWidth\n            multiline\n            rows={4}\n            label=\"录制文字内容\"\n            value={recordText}\n            onChange={(e) => setRecordText(e.target.value)}\n            margin=\"normal\"\n            placeholder=\"请输入要录制的紧急呼救内容...\"\n            helperText={`字数: ${recordText.length} 字符`}\n          />\n          \n          {isRecording && (\n            <Box sx={{ mt: 2 }}>\n              <LinearProgress />\n              <Typography variant=\"body2\" sx={{ mt: 1, textAlign: 'center' }}>\n                正在录制中，请稍候...\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ mt: 3 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              录制参数\n            </Typography>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                语音速度: {recordSpeed}x\n              </Typography>\n              <Slider\n                value={recordSpeed}\n                onChange={(_, value) => setRecordSpeed(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '慢' },\n                  { value: 1.0, label: '标准' },\n                  { value: 2.0, label: '快' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                语音音调: {recordPitch}x\n              </Typography>\n              <Slider\n                value={recordPitch}\n                onChange={(_, value) => setRecordPitch(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '低' },\n                  { value: 1.0, label: '标准' },\n                  { value: 2.0, label: '高' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <ReportButton />\n          <Button \n            onClick={() => setShowRecordDialog(false)}\n            disabled={isRecording}\n          >\n            取消\n          </Button>\n          <Button \n            onClick={handleRecord} \n            variant=\"contained\"\n            disabled={!recordText.trim() || isRecording}\n            startIcon={isRecording ? undefined : <Mic />}\n          >\n            {isRecording ? '录制中...' : '开始录制'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* 成功提示 */}\n      <Snackbar\n        open={showSuccess}\n        autoHideDuration={3000}\n        onClose={() => setShowSuccess(false)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setShowSuccess(false)} severity=\"success\">\n          {successMessage || 'TTS设置保存成功！'}\n        </Alert>\n      </Snackbar>\n\n      {/* 错误提示 */}\n      <Snackbar\n        open={!!error}\n        autoHideDuration={6000}\n        onClose={() => setError(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setError(null)} severity=\"error\">\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};","export { EmergencyTTSSettings } from './EmergencyTTSSettings';","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { request } from \"@fanfanlo\";\n\n/**\n * 获取未处理被邀请信息的请求参数\n */\nexport interface IParamsListPendingReceivedInvitations {\n  // 可以添加分页等参数\n  page?: number;\n  page_size?: number;\n}\n\n/**\n * 未处理的被邀请信息\n */\nexport interface IPendingInvitationInfo {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: 'pending';\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * 获取未处理被邀请信息的响应结果\n */\nexport interface IResultListPendingReceivedInvitations {\n  is_ok: boolean;\n  msg?: string;\n  invitations: IPendingInvitationInfo[];\n}\n\n/**\n * 获取未处理的被邀请信息\n */\nexport async function tmsEmergencyCallListPendingReceivedInvitations(\n  opts: IRequestOptions<IParamsListPendingReceivedInvitations>\n) {\n  return request<IResultListPendingReceivedInvitations, IParamsListPendingReceivedInvitations>(\n    tms.TEmc,\n    tms.MEmcListPendingReceivedInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// 导出服务\nexport const emergencyCallPendingInvitationService = {\n  listPendingReceivedInvitations: tmsEmergencyCallListPendingReceivedInvitations,\n};\n\nexport default emergencyCallPendingInvitationService;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardActions,\n  CircularProgress,\n  Avatar,\n  Chip,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport {\n  Check as CheckIcon,\n  Close as CloseIcon,\n  AccessTime as AccessTimeIcon,\n  Person as PersonIcon,\n  Notifications as NotificationsIcon,\n} from '@mui/icons-material';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { \n  emergencyCallPendingInvitationService,\n  emergencyCallInvitationService,\n  IPendingInvitationInfo,\n  user,\n  AppModelEvent,\n  appModel\n} from '@app/model';\nimport { useProxyWatch } from '@fanfanlo';\nimport { matrixClient } from '@im/matrix';\n\n// 邀请卡片组件\nfunction PendingInvitationCard({ \n  invitation,\n  onRespond,\n  isProcessing = false,\n}: { \n  invitation: IPendingInvitationInfo;\n  onRespond?: (action: 'accept' | 'decline') => Promise<void>;\n  isProcessing?: boolean;\n}) {\n  const [isProcessingAction, setIsProcessingAction] = useState(false);\n\n  const handleRespond = async (action: 'accept' | 'decline') => {\n    if (!onRespond) return;\n    \n    try {\n      setIsProcessingAction(true);\n      await onRespond(action);\n    } finally {\n      setIsProcessingAction(false);\n    }\n  };\n\n  const isExpired = new Date(invitation.expires_at * 1000) < new Date();\n\n  return (\n    <Card variant=\"outlined\" sx={{ mb: 2, opacity: isProcessing ? 0.7 : 1 }}>\n      <CardContent>\n        <Box display=\"flex\" alignItems=\"center\" mb={2}>\n          <Avatar \n            src={invitation.user_info.avatar_url} \n            alt={invitation.user_info.display_name}\n            sx={{ width: 50, height: 50, mr: 2 }}\n          >\n            {invitation.user_info.display_name?.[0]?.toUpperCase() || '?'}\n          </Avatar>\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\">\n              {invitation.user_info.display_name || '未知用户'}\n            </Typography>\n            {/* <Typography variant=\"body2\" color=\"text.secondary\">\n              ID: {invitation.user_info.user_id}\n            </Typography> */}\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              {formatDistanceToNow(invitation.created_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}\n            </Typography>\n          </Box>\n          <Box textAlign=\"right\">\n            <Chip \n              size=\"small\"\n              icon={<AccessTimeIcon fontSize=\"small\" />}\n              label={isExpired ? '已过期' : `${formatDistanceToNow(invitation.expires_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}`}\n              color={isExpired ? 'error' : 'primary'}\n              variant=\"outlined\"\n            />\n          </Box>\n        </Box>\n        \n        {invitation.message && (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, mb: 1 }}>\n            邀请信息: {invitation.message}\n          </Typography>\n        )}\n\n        <Typography variant=\"body2\" color=\"primary\" sx={{ fontWeight: 'medium' }}>\n          邀请您成为紧急联系人\n        </Typography>\n      </CardContent>\n      \n      {!isExpired && (\n        <CardActions sx={{ justifyContent: 'flex-end', pt: 0 }}>\n          <Button \n            size=\"small\" \n            color=\"error\"\n            startIcon={<CloseIcon />}\n            onClick={() => handleRespond('decline')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            拒绝\n          </Button>\n          <Button \n            size=\"small\" \n            color=\"primary\"\n            variant=\"contained\"\n            startIcon={<CheckIcon />}\n            onClick={() => handleRespond('accept')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            接受\n          </Button>\n        </CardActions>\n      )}\n    </Card>\n  );\n}\n\nconst PendingInvitationsList: React.FC = () => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [invitations, setInvitations] = useState<IPendingInvitationInfo[]>([]);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // 监听用户登录状态\n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n\n  // 加载未处理的被邀请信息\n  const loadPendingInvitations = useCallback(async () => {\n    if (!userToken) {\n      setInvitations([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const res = await emergencyCallPendingInvitationService.listPendingReceivedInvitations({\n        params: {},\n      } as any);\n      \n      if (res.shellIsOk && res.dataIsOk && res.data?.is_ok) {\n        setInvitations(res.data.invitations || []);\n      } else {\n        setError(res.data?.msg || '加载邀请列表失败');\n      }\n    } catch (err) {\n      console.error('加载未处理邀请列表异常:', err);\n      setError('发生未知错误');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userToken]); // 现在可以安全地依赖userToken了\n\n  // 响应邀请\n  const handleRespondToInvite = useCallback(async (invitationId: string, action: 'accept' | 'decline'): Promise<void> => {\n    try {\n      setIsProcessing(true);\n\n      const res = await emergencyCallInvitationService.respondToInvite({\n        params: { invitation_id: invitationId, action },\n      } as any);\n\n      if (!res.shellIsOk || !res.dataIsOk || !res.data?.is_ok) {\n        throw new Error(res.data?.msg || '操作失败');\n      }\n      \n      // 从列表中移除已处理的邀请\n      setInvitations(prev => prev.filter(invite => invite.invitation_id !== invitationId));\n      \n      // 发送邀请列表更新事件\n      appModel.dispatcher.emit(AppModelEvent.InviteListUpdated);\n      \n    } catch (err) {\n      console.error('处理邀请失败:', err);\n      setError(err instanceof Error ? err.message : '操作失败，请重试');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, []);\n\n  // 监听用户登录状态变化\n  useEffect(() => {\n    if (userToken) {\n      // 有登录用户了，刷新邀请列表\n      loadPendingInvitations();\n    } else {\n      // 清空邀请信息列表\n      setInvitations([]);\n    }\n  }, [userToken]); // 只依赖userToken\n\n  // 监听邀请列表更新事件\n  useEffect(() => {\n    const unsubscribe = appModel.dispatcher.addListener(AppModelEvent.InviteListUpdated, () => {\n      console.log('AppModelEvent.InviteListUpdated - 刷新未处理邀请列表');\n      loadPendingInvitations();\n    });\n\n    return unsubscribe;\n  }, [loadPendingInvitations]); // 依赖loadPendingInvitations函数\n\n  useEffect(()=>{\n    const unsub = matrixClient.imDispatcher.addListener(matrixClient.ImDispatcherEventTypes.INVITE, ()=>{\n      if(!userToken)return;\n      loadPendingInvitations();\n    });\n    return unsub;\n  }, [])\n  // 如果没有登录用户，不显示任何内容\n  if (!userToken) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" p={2}>\n        {/* <CircularProgress size={24} />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          加载中...\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box p={2}>\n        <Alert severity=\"error\">\n          {error}\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (invitations.length === 0) {\n    return (\n      <Box \n        display=\"flex\" \n        flexDirection=\"column\" \n        alignItems=\"center\" \n        p={2}\n        textAlign=\"center\"\n      >\n        {/* <NotificationsIcon color=\"disabled\" sx={{ fontSize: 48, mb: 1 }} />\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          暂无未处理的邀请\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  return (\n    <Box p={2}>\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\n        <NotificationsIcon color=\"primary\" sx={{ mr: 1 }} />\n        <Typography variant=\"h6\" color=\"primary\">\n          未处理的邀请 ({invitations.length})\n        </Typography>\n      </Box>\n\n      <Stack spacing={2}>\n        {invitations.map((invitation) => (\n          <PendingInvitationCard\n            key={invitation.invitation_id}\n            invitation={invitation}\n            onRespond={(action) => handleRespondToInvite(invitation.invitation_id, action)}\n            isProcessing={isProcessing}\n          />\n        ))}\n      </Stack>\n    </Box>\n  );\n};\n\nexport default PendingInvitationsList;","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\lodash@4.17.21\\\\node_modules\\\\lodash\\\\lodash.js\"","import React, { useState, useCallback } from 'react';\nimport {\n    Box,\n    Switch,\n    Button,\n    Typography,\n    Paper,\n    Collapse,\n    Divider,\n    IconButton,\n    TextField,\n    FormControlLabel,\n    Tooltip,\n    Stack,\n    FormControl,\n    MenuItem,\n    InputLabel,\n    Select,\n} from '@mui/material';\nimport {\n    DragIndicator as DragIndicatorIcon,\n    ExpandLess,\n    Settings,\n    Delete,\n    PlayArrow,\n    Stop,\n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon\n} from '@mui/icons-material';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { debounce } from 'lodash';\nimport { autoJsStoreUtils } from '@droid/android';\n\nconst PRE_ALARM_CONFIG_KEY = 'PRE_ALARM_ACTIONS_CONFIG';\n\ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\ninterface PreAlarmConfig {\n    enabled: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n}\n\nconst defaultSoundResources = [\n    { id: 'beep_short', name: '短提示音' },\n    { id: 'siren_gentle', name: '缓和警报' },\n    { id: 'alarm_clock', name: '闹钟' },\n];\n\nconst SortableActionItem: React.FC<{\n    action: PreAlarmAction;\n    isPlaying: boolean;\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n    onRemove: (id: string) => void;\n    onPreview: (resourceId?: string) => void;\n    onStopPreview: () => void;\n}> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview }) => {\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: isDragging ? 1 : 'auto',\n    };\n\n    return (\n        <Paper\n            ref={setNodeRef}\n            style={style}\n            elevation={isDragging ? 3 : 1}\n            sx={{\n                p: 2,\n                mb: 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                userSelect: 'none',\n            }}\n        >\n            <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                <DragIndicatorIcon />\n            </Box>\n            \n            <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                    <Typography variant=\"subtitle2\">\n                        {action.type === 'sound' ? '声音' : '震动'}\n                    </Typography>\n                    <TextField\n                        size=\"small\"\n                        type=\"number\"\n                        label=\"持续时间 (ms)\"\n                        value={action.duration}\n                        onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\n                        sx={{ width: '100%' }}\n                    />\n                    \n                    {action.type === 'sound' && (\n                        <FormControl size=\"small\" sx={{ width: '100%' }}>\n                            <InputLabel>声音类型</InputLabel>\n                            <Select\n                                value={action.resourceId || ''}\n                                label=\"声音类型\"\n                                onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                startAdornment={\n                                    <Tooltip title={isPlaying ? \"停止\" : \"试听\"}>\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                            sx={{ mr: 1 }}\n                                        >\n                                            {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                        </IconButton>\n                                    </Tooltip>\n                                }\n                            >\n                                {defaultSoundResources.map((sound) => (\n                                    <MenuItem key={sound.id} value={sound.id}>\n                                        {sound.name}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    )}\n                </Box>\n            </Box>\n            \n            <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\">\n                <Delete />\n            </IconButton>\n        </Paper>\n    );\n};\n\nconst PreAlarmConfig2: React.FC = () => {\n    const [config, setConfig] = useState<PreAlarmConfig | null>(null);\n    const [expanded, setExpanded] = useState(false);\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n\n    const debouncedWrite = useCallback(\n        debounce((newConfig: PreAlarmConfig) => {\n            autoJsStoreUtils.write(PRE_ALARM_CONFIG_KEY, newConfig);\n        }, 500),\n        []\n    );\n\n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    React.useEffect(() => {\n        const loadConfig = async () => {\n            const storedConfig = await autoJsStoreUtils.read<PreAlarmConfig>(PRE_ALARM_CONFIG_KEY);\n            if (storedConfig) {\n                const actionsWithIds = storedConfig.actions.map((action) => ({\n                    ...action,\n                    id: action.id || `action-${Math.random().toString(36).substr(2, 9)}`,\n                }));\n                setConfig({\n                    ...storedConfig,\n                    actions: actionsWithIds,\n                });\n            } else {\n                setConfig({\n                    enabled: true,\n                    actions: [],\n                    maxWaitDuration: 30000,\n                });\n            }\n        };\n        loadConfig();\n    }, []);\n\n    const updateConfig = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                const newConfig = { ...prev, ...updates };\n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    const handleToggleEnabled = (event: React.ChangeEvent<HTMLInputElement>) => {\n        updateConfig({ enabled: event.target.checked });\n    };\n\n    const handleAddAction = (type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: 8000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfig({\n            actions: [...(config?.actions || []), newAction],\n        });\n    };\n\n    const handleUpdateAction = (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    };\n\n    const handleRemoveAction = (id: string) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!config || !over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfig({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    };\n\n    const handlePreviewSound = (resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound();\n        \n        console.log(`[WebView] Attempting to preview sound. resourceId: ${resourceId}`);\n\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager JavascriptInterface is not available.');\n        }\n    };\n\n    const handleStopSound = () => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    };\n\n    if (!config) {\n        return <Box sx={{ p: 2, textAlign: 'center' }}>加载中...</Box>;\n    }\n\n    return (\n        <Box sx={{ mb: 3 }}>\n            <Paper \n                elevation={1} \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    borderRadius: 1,\n                }}\n            >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"subtitle1\">防误触报警设置</Typography>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={config.enabled}\n                                onChange={handleToggleEnabled}\n                                color=\"primary\"\n                            />\n                        }\n                        label={config.enabled ? '已启用' : '已禁用'}\n                    />\n                </Box>\n                \n                <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={expanded ? <ExpandLess /> : <Settings />}\n                    onClick={() => setExpanded(!expanded)}\n                >\n                    {expanded ? '收起设置' : '设置'}\n                </Button>\n            </Paper>\n\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        mt: 1, \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                            最大等待时间 (毫秒)\n                        </Typography>\n                        <TextField\n                            fullWidth\n                            type=\"number\"\n                            value={config.maxWaitDuration}\n                            onChange={(e) =>\n                                updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })\n                            }\n                            size=\"small\"\n                            InputProps={{\n                                endAdornment: (\n                                    <Typography variant=\"body2\" sx={{ ml: 1 }}>\n                                        毫秒\n                                    </Typography>\n                                ),\n                            }}\n                        />\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Box sx={{ mb: 2 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\">\n                                预警动作 ({config.actions.length})\n                            </Typography>\n                            <Stack direction=\"row\" spacing={1}>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VolumeUpIcon />}\n                                    onClick={() => handleAddAction('sound')}\n                                >\n                                    添加声音\n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VibrationIcon />}\n                                    onClick={() => handleAddAction('vibration')}\n                                >\n                                    添加震动\n                                </Button>\n                            </Stack>\n                        </Box>\n\n                        {config.actions.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography>暂无报警动作，请点击上方按钮添加</Typography>\n                            </Paper>\n                        ) : (\n                            <DndContext\n                                sensors={sensors}\n                                collisionDetection={closestCenter}\n                                onDragEnd={handleDragEnd}\n                            >\n                                <SortableContext\n                                    items={config.actions.map((a) => a.id)}\n                                    strategy={verticalListSortingStrategy}\n                                >\n                                    {config.actions.map((action) => (\n                                        <SortableActionItem\n                                            key={action.id}\n                                            action={action}\n                                            isPlaying={playingSoundId === action.resourceId}\n                                            onUpdate={handleUpdateAction}\n                                            onRemove={handleRemoveAction}\n                                            onPreview={handlePreviewSound}\n                                            onStopPreview={handleStopSound}\n                                        />\n                                    ))}\n                                </SortableContext>\n                            </DndContext>\n                        )}\n                    </Box>\n                </Paper>\n            </Collapse>\n        </Box>\n    );\n};\n\nexport default PreAlarmConfig2;\n","import { useEffect } from 'react';\nimport { autoJsStoreUtils, isRealInAndroid } from '@droid/android';\nimport { PrivacyDialogDisplay } from './PrivacyDialogDisplay';\nimport { useState } from 'react';\n\ninterface PrivacyDialogAutoProps {\n  type: string;\n  area: string;\n}\n\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\n\nlet autoOpened = false; // 用于标记是否已经自动弹出过隐私协议\n/**\n * 自动逻辑组件 - 负责处理隐私协议的自动弹出逻辑\n * 包含原有的35-49行逻辑：检查用户是否已同意、是否在冷却期等\n */\nexport function PrivacyDialogAuto({ type, area }: PrivacyDialogAutoProps) {\n  const [open, setOpen] = useState(false);\n  // const [autoOpened, setAutoOpened] = useState(false);\n\n  const handleClose = () => {\n    autoOpened = true; // 设置为已自动弹出\n    setOpen(false);\n    // setAutoOpened(true);\n  };\n\n  // 原有的自动弹出逻辑 (35-49行)\n  useEffect(() => {\n    const def: IPrivacyInfo = { agree: false, disagreeTime: 0 };\n    const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_${type}`, def);\n    const value: IPrivacyInfo = res && 'agree' in res ? res : def;\n    if(autoOpened){\n      //自动检测已经弹出过了就不再弹了\n      return;\n    }\n    // 不在Android环境中不弹出\n    if (!isRealInAndroid) {\n      return;\n    }\n    \n    // 已经同意了，不弹出\n    if (value.agree) {\n      return;\n    }\n    \n    // 在冷却期内（拒绝后3天内），不弹出\n    if (value.disagreeTime && value.disagreeTime != 0 && value.disagreeTime + 3 * 24 * 60 * 60 * 1000 > Date.now()) {\n      return;\n    }\n    \n    // 满足条件，弹出隐私协议\n    setOpen(true);\n  }, [type]);\n\n  return (\n    <PrivacyDialogDisplay\n      open={open }\n      onClose={handleClose}\n      type={type}\n      area={area}\n    />\n  );\n}","import { useEffect, useState } from \"react\";\r\nimport { PrivacyDialogAuto } from \"./PrivacyDialogAuto\";\r\nimport { autoJsStoreUtils } from \"@droid/android\";\r\n\r\n\r\nexport function ListenShowPrivacyContent({type}:{type:string}){\r\n\r\n    const [open, setOpen] = useState(false);\r\n    function onClose() {\r\n        setOpen(false);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const value = autoJsStoreUtils.read(`privacy_${type}`, false)\r\n    }, [])\r\n    return(\r\n        <PrivacyDialogAuto type={type} area=\"zh-cn\" />\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  List,\n  ListItem,\n  Button,\n  Chip,\n  Alert,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Divider\n} from '@mui/material';\nimport {\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Help as HelpIcon,\n  Settings as SettingsIcon,\n  Refresh as RefreshIcon,\n  Security as SecurityIcon,\n  Info as InfoIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs, isRealInAndroid } from '@droid/android';\nimport { trackingPrint } from '@app/model';\n\ninterface Permission {\n  id: string;\n  name: string;\n  type: 'runtime' | 'special' | 'vendor';\n  status: 'granted' | 'denied' | 'unknown';\n  canDetect: boolean;\n  description: string;\n  settingsAction: string;\n}\n\ninterface PermissionsData {\n  permissions: Permission[];\n  timestamp: number;\n  deviceBrand: string;\n  apiLevel: number;\n  error?: string;\n}\n\nexport const PermissionStatusPanel: React.FC = () => {\n  const [permissionsData, setPermissionsData] = useState<PermissionsData | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [infoDialogOpen, setInfoDialogOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<Permission | null>(null);\n\n  const fetchPermissions = async () => {\n    try {\n      if(!isRealInAndroid) return;\n      setLoading(true);\n      setError(null);\n      \n      // 权限刷新埋点\n      trackingPrint({params:{\n        type:\"用户操作\",\n        title:\"权限检查\",\n        subtitle:\"权限刷新-开始\",\n        extra:{\n          timestamp: Date.now(),\n          isAndroid: isRealInAndroid\n        }\n      }});\n      \n      const script = `\n        var info = com.fanfanlo.emergencycall.manager.PermissionJSInterface.getAllPermissionsStatus();\n        info;\n      `;\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      \n      if (!javaResultString) {\n        throw new Error('No response from permission interface');\n      }\n      \n      const data = JSON.parse(javaResultString) as PermissionsData;\n      \n      if (data.error) {\n        throw new Error(data.error);\n      }\n      \n      setPermissionsData(data);\n      console.log('Permissions data loaded:', data);\n      \n      // 权限加载成功埋点\n      trackingPrint({params:{\n        type:\"系统事件\",\n        title:\"权限检查\",\n        subtitle:\"权限加载-成功\",\n        extra:{\n          timestamp: Date.now(),\n          permissionsCount: data.permissions.length,\n          grantedCount: data.permissions.filter(p => p.status === 'granted').length,\n          deniedCount: data.permissions.filter(p => p.status === 'denied').length,\n          unknownCount: data.permissions.filter(p => p.status === 'unknown').length,\n          deviceBrand: data.deviceBrand,\n          apiLevel: data.apiLevel\n        }\n      }});\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(errorMessage);\n      console.error('Error fetching permissions:', err);\n      \n      // 权限加载失败埋点\n      trackingPrint({params:{\n        type:\"系统异常\",\n        title:\"权限检查\",\n        subtitle:\"权限加载-失败\",\n        extra:{\n          timestamp: Date.now(),\n          error: errorMessage,\n          isAndroid: isRealInAndroid\n        }\n      }});\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPermissions();\n  }, []);\n\n  const handleOpenSettings = (permission: Permission) => {\n    try {\n      // 权限设置按钮点击埋点\n      trackingPrint({params:{\n        type:\"用户操作\",\n        title:\"权限设置\",\n        subtitle:\"设置按钮-点击\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          permissionName: permission.name,\n          permissionType: permission.type,\n          currentStatus: permission.status,\n          canDetect: permission.canDetect\n        }\n      }});\n      \n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.openPermissionSettings(\"${permission.id}\");\n      `;\n      autoWebViewJs.callScript(script);\n      console.log(`Opening settings for permission: ${permission.id}`);\n      \n      // 如果是消息推送权限，用户从设置页面返回后自动检查JPush状态\n      if (permission.id === 'notification') {\n        // 延迟执行，给用户时间完成权限设置\n        setTimeout(() => {\n          try {\n            const jpushScript = `\n              com.fanfanlo.emergencycall.jpush.JpushManager.checkAndReinitializeIfNeeded();\n            `;\n            autoWebViewJs.callScript(jpushScript);\n            console.log('JPush reinitialization check triggered');\n            \n            // 刷新权限状态\n            setTimeout(() => fetchPermissions(), 1000);\n          } catch (jpushErr) {\n            console.error('Error checking JPush status:', jpushErr);\n            \n            // JPush重新初始化失败埋点\n            trackingPrint({params:{\n              type:\"系统异常\",\n              title:\"JPush重初始化\",\n              subtitle:\"JPush-重初始化失败\",\n              extra:{\n                timestamp: Date.now(),\n                error: jpushErr instanceof Error ? jpushErr.message : String(jpushErr)\n              }\n            }});\n          }\n        }, 3000); // 3秒后检查\n      }\n    } catch (err) {\n      console.error('Error opening permission settings:', err);\n      \n      // 权限设置打开失败埋点\n      trackingPrint({params:{\n        type:\"系统异常\",\n        title:\"权限设置\",\n        subtitle:\"设置打开-失败\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          error: err instanceof Error ? err.message : String(err)\n        }\n      }});\n    }\n  };\n\n  const handleConfirmLockScreenPermission = () => {\n    try {\n      // 锁屏权限确认埋点\n      trackingPrint({params:{\n        type:\"用户操作\",\n        title:\"锁屏权限\",\n        subtitle:\"权限确认-点击\",\n        extra:{\n          timestamp: Date.now()\n        }\n      }});\n      \n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.confirmLockScreenPermission();\n      `;\n      autoWebViewJs.callScript(script);\n      console.log('Confirmed lock screen permission');\n      \n      // 刷新权限状态\n      setTimeout(() => fetchPermissions(), 500);\n    } catch (err) {\n      console.error('Error confirming lock screen permission:', err);\n      \n      // 锁屏权限确认失败埋点\n      trackingPrint({params:{\n        type:\"系统异常\",\n        title:\"锁屏权限\",\n        subtitle:\"权限确认-失败\",\n        extra:{\n          timestamp: Date.now(),\n          error: err instanceof Error ? err.message : String(err)\n        }\n      }});\n    }\n  };\n\n  const handleShowPermissionInfo = (permission: Permission) => {\n    // 权限信息查看埋点\n    trackingPrint({params:{\n      type:\"用户操作\",\n      title:\"权限信息\",\n      subtitle:\"信息按钮-点击\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: permission.id,\n        permissionName: permission.name,\n        permissionStatus: permission.status\n      }\n    }});\n    \n    setSelectedPermission(permission);\n    setInfoDialogOpen(true);\n  };\n\n  const handleCloseInfoDialog = () => {\n    // 权限信息对话框关闭埋点\n    trackingPrint({params:{\n      type:\"模态框操作\",\n      title:\"权限信息\",\n      subtitle:\"信息对话框-关闭\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: selectedPermission?.id\n      }\n    }});\n    \n    setInfoDialogOpen(false);\n    setSelectedPermission(null);\n  };\n\n  const getPermissionReason = (permission: Permission): string => {\n    const reasonMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': '精确定位权限用于在紧急情况下获取您的准确位置信息，以便救援人员能够快速找到您。这对于户外活动、老人独居等场景下的紧急救助至关重要。',\n      'android.permission.ACCESS_COARSE_LOCATION': '大概位置权限作为精确定位的备用选择，在精确定位不可用时仍能提供基本的位置信息，确保紧急情况下不会完全失去位置服务。',\n      'android.permission.BODY_SENSORS': '身体传感器权限用于访问手机的加速度计、陀螺仪等传感器，实现跌倒检测功能。当检测到您可能发生跌倒时，系统会自动触发紧急呼叫，对老人和高危工作者尤为重要。',\n      'android.permission.CAMERA': '相机权限用于在紧急情况下自动拍摄现场照片，为救援人员和家属提供重要的环境信息，帮助判断紧急情况的严重程度和选择合适的救援方案。',\n      'android.permission.RECORD_AUDIO': '录音权限用于记录紧急情况发生时的环境声音，可以为救援人员提供重要线索，同时支持语音紧急呼叫功能，让您在无法操作手机时也能求救。',\n      'android.permission.ACTIVITY_RECOGNITION': '身体活动识别权限用于识别您当前的活动状态(如走路、跑步、静止等)，结合传感器数据提高跌倒检测的准确性，减少误报的同时确保真正的紧急情况不会被遗漏。',\n      'overlay': '悬浮窗权限允许应用在任何界面上显示紧急呼叫窗口，确保即使您在使用其他应用时，紧急呼叫功能也能立即激活，不会被其他应用界面阻挡。',\n      'lock_screen_popup': '后台弹出界面权限确保应用在后台运行时仍能在检测到紧急情况时立即弹出呼叫界面，即使手机处于息屏或锁定状态也不会影响紧急功能的响应速度。',\n      'lock_screen_display': '锁屏显示权限允许应用在手机锁屏状态下显示紧急信息和呼叫界面，确保紧急情况发生时不会因为屏幕锁定而延误救援时机。这对于意外昏迷等无法解锁手机的情况尤为重要。',\n      'desktop_shortcut': '桌面快捷方式权限允许应用在桌面创建一键紧急呼叫的快捷图标，让您在紧急情况下能够更快速地启动求救功能，特别适合老年用户或紧急情况下的快速操作。',\n      'notification': '消息推送权限用于接收紧急呼叫、跌倒检测警报、系统通知等重要消息。这是确保您能及时收到紧急信息和家人求救通知的关键权限，对于紧急救援场景至关重要。'\n    };\n    return reasonMap[permission.id] || '该权限对于应用的正常运行是必要的，请根据您的需要进行授权。';\n  };\n\n  const getPermissionImpact = (permission: Permission): string => {\n    const impactMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': '🚨 高影响：没有位置权限将无法在紧急情况下提供准确的位置信息给救援人员',\n      'android.permission.ACCESS_COARSE_LOCATION': '⚠️ 中影响：作为位置服务的备用选择，建议配合精确位置一起授权',\n      'android.permission.BODY_SENSORS': '🚨 高影响：没有此权限将无法实现自动跌倒检测功能',\n      'android.permission.CAMERA': '⚠️ 中影响：无法自动拍摄现场照片，但不影响基本呼叫功能',\n      'android.permission.RECORD_AUDIO': '⚠️ 中影响：无法录制环境音或使用语音功能，但不影响基本呼叫功能',\n      'android.permission.ACTIVITY_RECOGNITION': '⚠️ 中影响：跌倒检测准确性可能降低，增加误报或漏报风险',\n      'overlay': '🚨 高影响：无法在其他应用界面上显示紧急呼叫，可能错过紧急救援时机',\n      'lock_screen_popup': '🚨 高影响：手机锁屏时无法自动弹出紧急呼叫界面',\n      'lock_screen_display': '🚨 高影响：锁屏状态下无法显示紧急信息，可能延误救援',\n      'desktop_shortcut': '💡 低影响：无法创建桌面快捷方式，但不影响应用内的紧急呼叫功能',\n      'notification': '🚨 高影响：无法接收紧急推送消息，可能错过家人求救信号或重要安全警报'\n    };\n    return impactMap[permission.id] || '该权限的具体影响取决于您的使用场景。';\n  };\n\n  const getStatusIcon = (permission: Permission) => {\n    const iconProps = { fontSize: 18 };\n    switch (permission.status) {\n      case 'granted':\n        return <CheckCircleIcon sx={{ color: 'success.main', ...iconProps }} />;\n      case 'denied':\n        return <ErrorIcon sx={{ color: 'error.main', ...iconProps }} />;\n      case 'unknown':\n        return <HelpIcon sx={{ color: 'warning.main', ...iconProps }} />;\n      default:\n        return <HelpIcon sx={{ color: 'grey.500', ...iconProps }} />;\n    }\n  };\n\n  const getStatusChip = (permission: Permission) => {\n    const statusConfig = {\n      granted: { label: '✓', color: 'success' as const },\n      denied: { label: '✗', color: 'error' as const },\n      unknown: { label: '?', color: 'warning' as const }\n    };\n\n    const config = statusConfig[permission.status];\n    return (\n      <Chip \n        label={config.label} \n        color={config.color} \n        size=\"small\"\n        sx={{ \n          minWidth: 24,\n          height: 20,\n          fontSize: '0.7rem',\n          '& .MuiChip-label': { px: 0.5 }\n        }}\n      />\n    );\n  };\n\n  const getTypeLabel = (type: string) => {\n    const typeLabels = {\n      runtime: '运行时',\n      special: '特殊',\n      vendor: '厂商'\n    };\n    return typeLabels[type as keyof typeof typeLabels] || type;\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"120px\">\n        <CircularProgress size={20} />\n        <Typography variant=\"caption\" sx={{ ml: 1 }}>加载中...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\">权限检查失败: {error}</Typography>\n        <Button \n          onClick={() => {\n            // 重试按钮点击埋点\n            trackingPrint({params:{\n              type:\"用户操作\",\n              title:\"权限检查\",\n              subtitle:\"重试按钮-点击\",\n              extra:{\n                timestamp: Date.now(),\n                previousError: error\n              }\n            }});\n            fetchPermissions();\n          }} \n          size=\"small\" \n          sx={{ mt: 0.5 }}\n        >\n          重试\n        </Button>\n      </Alert>\n    );\n  }\n\n  if (!permissionsData) {\n    return (\n      <Alert severity=\"info\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\">无权限数据，请重新加载</Typography>\n      </Alert>\n    );\n  }\n\n  const { permissions, deviceBrand, apiLevel } = permissionsData;\n\n  return (\n    <Paper elevation={1} sx={{ p: 1 }}>\n      {/* 标题栏 */}\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <SecurityIcon sx={{ mr: 0.5, color: 'primary.main', fontSize: 18 }} />\n          <Typography variant=\"body2\" fontWeight=\"medium\">权限状态</Typography>\n        </Box>\n        <Tooltip title=\"刷新\">\n          <IconButton \n            onClick={() => {\n              // 刷新按钮点击埋点\n              trackingPrint({params:{\n                type:\"用户操作\",\n                title:\"权限检查\",\n                subtitle:\"刷新按钮-点击\",\n                extra:{\n                  timestamp: Date.now(),\n                  currentPermissionsCount: permissionsData?.permissions.length || 0\n                }\n              }});\n              fetchPermissions();\n            }} \n            size=\"small\" \n            sx={{ p: 0.5 }}\n          >\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      {/* 说明 */}\n      <Alert severity=\"info\" sx={{ mb: 1, py: 0.5 }}>\n        <Typography variant=\"caption\" display=\"block\">\n          🟢已授权 🔴未授权 🟡无法检测\n        </Typography>\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          {deviceBrand} • API{apiLevel}\n        </Typography>\n      </Alert>\n\n      {/* 权限列表 */}\n      <List sx={{ py: 0 }}>\n        {permissions.map((permission) => (\n          <ListItem\n            key={permission.id}\n            sx={{\n              borderLeft: 2,\n              borderLeftColor: \n                permission.status === 'granted' ? 'success.main' :\n                permission.status === 'denied' ? 'error.main' : 'warning.main',\n              mb: 0.5,\n              py: 0.5,\n              px: 0.5,\n              borderRadius: 0.5,\n              bgcolor: 'grey.50',\n              display: 'block' // 改为block布局\n            }}\n          >\n            {/* 第一行：图标 + 名称 + 状态 + 信息按钮 */}\n            <Box display=\"flex\" alignItems=\"center\" mb={0.5}>\n              <Box sx={{ mr: 0.5 }}>\n                {getStatusIcon(permission)}\n              </Box>\n              <Typography \n                variant=\"body2\" \n                fontWeight=\"medium\" \n                sx={{ flex: 1, minWidth: 0 }}\n              >\n                {permission.name}\n              </Typography>\n              <Tooltip title=\"查看权限说明\">\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleShowPermissionInfo(permission)}\n                  sx={{ mr: 0.5, p: 0.25 }}\n                >\n                  <InfoIcon sx={{ fontSize: 16, color: 'primary.main' }} />\n                </IconButton>\n              </Tooltip>\n              {getStatusChip(permission)}\n            </Box>\n            \n            {/* 第二行：类型标签 + 确认信息 */}  \n            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={0.5}>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <Chip \n                  label={getTypeLabel(permission.type)} \n                  variant=\"outlined\" \n                  size=\"small\"\n                  sx={{ \n                    fontSize: '0.65rem',\n                    height: 18,\n                    '& .MuiChip-label': { px: 0.5, py: 0 }\n                  }}\n                />\n                {!permission.canDetect && (\n                  <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.65rem' }}>\n                    需确认\n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            {/* 第三行：操作按钮 */}\n            <Box display=\"flex\" gap={0.5}>\n              {/* {(permission.id === 'lock_screen' || permission.id === 'lock_screen_popup' || permission.id === 'lock_screen_display') && permission.status === 'unknown' && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\" \n                  color=\"success\"\n                  onClick={handleConfirmLockScreenPermission}\n                  sx={{ \n                    fontSize: '0.65rem',\n                    minWidth: 'auto',\n                    px: 0.5,\n                    py: 0.25,\n                    height: 24\n                  }}\n                >\n                  已授权\n                </Button>\n              )} */}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<SettingsIcon sx={{ fontSize: 12 }} />}\n                onClick={() => handleOpenSettings(permission)}\n                sx={{ \n                  fontSize: '0.65rem',\n                  minWidth: 'auto',\n                  px: 0.5,\n                  py: 0.25,\n                  height: 24\n                }}\n              >\n                设置\n              </Button>\n            </Box>\n          </ListItem>\n        ))}\n      </List>\n\n      {/* 底部时间戳 */}\n      <Box mt={0.5} py={0.25} px={0.5} bgcolor=\"grey.100\" borderRadius={0.25}>\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.6rem' }}>\n          更新: {new Date(permissionsData.timestamp).toLocaleTimeString()}\n        </Typography>\n      </Box>\n\n      {/* 权限说明对话框 */}\n      <Dialog\n        open={infoDialogOpen}\n        onClose={handleCloseInfoDialog}\n        maxWidth=\"sm\"\n        fullWidth\n        PaperProps={{\n          sx: { mx: 1 } // 移动端适配\n        }}\n      >\n        <DialogTitle sx={{ pb: 1 }}>\n          <Box display=\"flex\" alignItems=\"center\">\n            <SecurityIcon sx={{ mr: 1, color: 'primary.main' }} />\n            <Box>\n              <Typography variant=\"h6\" component=\"div\">\n                {selectedPermission?.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {selectedPermission && getTypeLabel(selectedPermission.type)}权限\n              </Typography>\n            </Box>\n          </Box>\n        </DialogTitle>\n        \n        <DialogContent sx={{ pt: 0 }}>\n          {selectedPermission && (\n            <Box>\n              {/* 权限状态 */}\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                <Typography variant=\"subtitle2\" sx={{ mr: 1 }}>当前状态:</Typography>\n                <Box display=\"flex\" alignItems=\"center\">\n                  {getStatusIcon(selectedPermission)}\n                  <Typography variant=\"body2\" sx={{ ml: 0.5 }}>\n                    {selectedPermission.status === 'granted' ? '已授权' : \n                     selectedPermission.status === 'denied' ? '未授权' : '待确认'}\n                  </Typography>\n                </Box>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/* 权限用途说明 */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"primary.main\">\n                  🎯 为什么需要这个权限？\n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionReason(selectedPermission)}\n                </Typography>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/* 影响说明 */}\n              <Box mb={1}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"warning.main\">\n                  ⚡ 不授权的影响\n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionImpact(selectedPermission)}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        \n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button \n            onClick={() => {\n              // 权限信息\"我知道了\"按钮埋点\n              trackingPrint({params:{\n                type:\"用户操作\",\n                title:\"权限信息\",\n                subtitle:\"我知道了-点击\",\n                extra:{\n                  timestamp: Date.now(),\n                  permissionId: selectedPermission?.id,\n                  permissionStatus: selectedPermission?.status\n                }\n              }});\n              handleCloseInfoDialog();\n            }} \n            color=\"primary\"\n          >\n            我知道了\n          </Button>\n          {selectedPermission && (\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                // 权限信息\"去设置\"按钮埋点\n                trackingPrint({params:{\n                  type:\"用户操作\",\n                  title:\"权限设置\",\n                  subtitle:\"去设置-对话框点击\",\n                  extra:{\n                    timestamp: Date.now(),\n                    permissionId: selectedPermission.id,\n                    permissionName: selectedPermission.name,\n                    currentStatus: selectedPermission.status,\n                    fromDialog: true\n                  }\n                }});\n                \n                handleOpenSettings(selectedPermission);\n                handleCloseInfoDialog();\n              }}\n              color=\"primary\"\n            >\n              去设置\n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Paper>\n  );\n};","export { PermissionStatusPanel } from './PermissionStatusPanel';","import React, { useState, useEffect, useRef } from 'react';\nimport { Box, TextField, Button, Typography, Paper, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport { ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { PermissionStatusPanel } from '../permission-status';\nimport { authService } from '@src/services/authService';\n\nexport const SensorMonitor: React.FC = () => {\n  const [threshold, setThreshold] = useState<string>('5.0');\n  const [isMonitoring, setIsMonitoring] = useState<boolean>(false);\n\n  // 为每个对话框创建独立的状态\n  const [isSensorInfoDialogOpen, setSensorInfoDialogOpen] = useState(false);\n  const [isForegroundServiceDialogOpen, setForegroundServiceDialogOpen] = useState(false);\n\n  // 使用useRef来保存回调函数，避免在re-render中丢失\n  const sensorCallbackRef = useRef<(passed: boolean) => void>();\n  const foregroundServiceCallbackRef = useRef<(passed: boolean) => void>();\n\n\n  useEffect(() => {\n    try {\n      const script = `\n      var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\n      thresholdValue;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const thresholdValue = parseFloat(javaResultString || '5.0');\n      // console.log(\"script get threshold=\", thresholdValue, javaResultString);\n      setThreshold(thresholdValue.toString());\n    } catch (error) {\n      console.error('Error fetching initial threshold value:', error);\n    }\n  }, []);\n\n  function readIsMonitoring() {\n    try {\n      const script = `\n      var isMonitoring = com.fanfanlo.emergencycall.manager.SensorManager.isMonitoring();\n      isMonitoring;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const isMonitoring = javaResultString === \"true\";\n      // console.log(\"script get isMonitoring=\", isMonitoring, javaResultString);\n      setIsMonitoring(isMonitoring);\n    } catch (error) {\n      console.error('Error fetching initial monitoring state:', error);\n    }\n  }\n\n  useEffect(() => {\n    readIsMonitoring();\n  }, []);\n\n  const handleSetThreshold = () => {\n    const thresholdValue = parseFloat(threshold);\n    if (isNaN(thresholdValue)) {\n      alert('请输入一个有效的数字作为阈值。');\n      return;\n    }\n    try {\n      const script = `com.fanfanlo.emergencycall.manager.SensorManager.updateThreshold(${thresholdValue});`;\n      autoWebViewJs.callScript(script);\n      alert(`阈值已设置为: ${thresholdValue}`);\n    } catch (error) {\n      console.error('Error calling updateThreshold:', error);\n      alert('设置阈值失败。请确保您在安卓应用中。');\n    }\n  };\n\n  async function handleToggleMonitoring () {\n    if (isMonitoring) {\n      // 如果当前正在监控，则直接停止，不进行检查\n      try {\n        const script = `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`;\n        autoWebViewJs.callScript(script);\n        readIsMonitoring();\n      } catch (error) {\n        console.error('Error stopping monitoring:', error);\n        alert('停止监控失败。');\n      }\n    } else {\n\n\n      const appLoggedIn = await authService.showLoginDialog();\n      if(!appLoggedIn){\n        alert(\"未登录无法使用该功能\")\n        return\n      }\n      // 如果当前未监控，则检查权限，然后启动\n      checkShowInfo(passed => {\n        if (!passed) return; // 用户不同意，则不执行任何操作\n        try {\n          const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.startMonitoring();`;\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.xx();`;\n          autoWebViewJs.callScript(script);\n          readIsMonitoring();\n        } catch (error) {\n          console.error('Error starting monitoring:', error);\n          alert('开始监控失败。');\n        }\n      });\n    }\n  };\n\n  useEffect(()=>{\n    const id = setInterval(() => {\n      readIsMonitoring();\n    }, 3000); // 每5秒检查一次监控状态\n    return () => clearInterval(id);\n  }, [])\n  function checkShowSensorInfo(callback: (passed: boolean) => void) {\n    interface Info {\n      passed: boolean;\n    }\n    const info = autoJsStoreUtils.read<Info>('showSensorInfo', { passed: false });\n    if (!info || !info.passed) {\n      // 保存回调，并在Dialog操作后调用\n      sensorCallbackRef.current = callback;\n      // 打开传感器权限对话框\n      setSensorInfoDialogOpen(true);\n    } else {\n      callback(true);\n    }\n  }\n\n  function checkShowInfo(callback:(passed:boolean)=>void){\n    checkShowSensorInfo(passed=>{\n      if(!passed) {\n        callback(false);\n        return;\n      };\n      checkShowForegroundServiceInfo(callback);\n    })\n  }\n\n  function checkShowForegroundServiceInfo(callback: (passed: boolean) => void) {\n    interface Info {\n      passed: boolean;\n    }\n    const info = autoJsStoreUtils.read<Info>('showForegroundServiceInfo', { passed: false });\n    if (!info || !info.passed) {\n      // 保存回调，并在Dialog操作后调用\n      foregroundServiceCallbackRef.current = callback;\n      // 打开前台服务对话框\n      setForegroundServiceDialogOpen(true);\n    } else {\n      callback(true);\n    }\n  }\n\n  // 传感器对话框的处理器\n  const handleSensorDialog = (passed: boolean) => {\n    autoJsStoreUtils.write('showSensorInfo', { passed });\n    setSensorInfoDialogOpen(false);\n    if (sensorCallbackRef.current) {\n      sensorCallbackRef.current(passed);\n    }\n  };\n\n  // 前台服务对话框的处理器\n  const handleForegroundServiceDialog = (passed: boolean) => {\n    autoJsStoreUtils.write('showForegroundServiceInfo', { passed });\n    setForegroundServiceDialogOpen(false);\n    if (foregroundServiceCallbackRef.current) {\n      foregroundServiceCallbackRef.current(passed);\n    }\n  };\n\n\n  return (\n    <Box>\n      {/* 传感器监控控制面板 */}\n      <Paper elevation={3} sx={{ padding: 2, marginBottom: 2 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          传感器监控控制\n        </Typography>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, marginBottom: 2 }}>\n          <TextField\n            label=\"震动阈值\"\n            variant=\"outlined\"\n            type=\"number\"\n            value={threshold}\n            onChange={(e) => setThreshold(e.target.value)}\n            size=\"small\"\n          />\n          <Button variant=\"contained\" onClick={handleSetThreshold}>\n            设置\n          </Button>\n        </Box>\n        <Button\n          variant=\"contained\"\n          color={isMonitoring ? 'error' : 'primary'}\n          onClick={handleToggleMonitoring}\n          fullWidth\n        >\n          {isMonitoring ? '停止监控' : '开始监控'}\n        </Button>\n      </Paper>\n\n      {/* 权限状态面板 */}\n      <Accordion >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"permission-panel-content\"\n          id=\"permission-panel-header\"\n        >\n          <Typography variant=\"h6\">权限状态检查</Typography>\n        </AccordionSummary>\n        <AccordionDetails>\n          <PermissionStatusPanel />\n        </AccordionDetails>\n      </Accordion>\n\n      {/* 传感器权限说明对话框 */}\n      <Dialog\n        open={isSensorInfoDialogOpen}\n        onClose={() => handleSensorDialog(false)}\n        aria-labelledby=\"sensor-dialog-title\"\n        aria-describedby=\"sensor-dialog-description\"\n      >\n        <DialogTitle id=\"sensor-dialog-title\">\n          {\"传感器使用授权\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"sensor-dialog-description\">\n            我们需要获取您的身体传感器（如加速度计）权限，以实现跌倒检测功能。这对于在紧急情况下自动触发呼叫至关重要。您是否同意？\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleSensorDialog(false)}>不同意</Button>\n          <Button onClick={() => handleSensorDialog(true)} autoFocus>\n            同意\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* 前台服务通知对话框 */}\n      <Dialog\n        open={isForegroundServiceDialogOpen}\n        onClose={() => handleForegroundServiceDialog(false)}\n        aria-labelledby=\"foreground-dialog-title\"\n        aria-describedby=\"foreground-dialog-description\"\n      >\n        <DialogTitle id=\"foreground-dialog-title\">\n          {\"启用前台服务通知\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"foreground-dialog-description\">\n            为了在应用退到后台后仍能持续监控传感器数据，我们需要启用一个前台服务。这会在您的设备通知栏显示一个持续的通知。您是否同意？\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleForegroundServiceDialog(false)}>不同意</Button>\n          <Button onClick={() => handleForegroundServiceDialog(true)} autoFocus>\n            同意\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default SensorMonitor;\n\n\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Switch,\r\n  FormControlLabel,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Collapse,\r\n  IconButton,\r\n  Chip,\r\n  Alert,\r\n  Grid,\r\n  Divider\r\n} from '@mui/material';\r\nimport { ExpandLess, ExpandMore } from '@mui/icons-material';\r\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\r\nimport { useProxyWatch } from '@fanfanlo';\r\nimport {user} from '@app/model';\r\nimport _ from 'lodash';\r\n\r\nconst SHAKE_CONFIG_KEY = \"shake_emergency_config\"\r\n// 摇一摇配置接口定义\r\ninterface ShakeConfig {\r\n  enabled: boolean;\r\n  shakeCount: number;\r\n  timeWindowMs: number;\r\n  emergencyType: string;\r\n  enablePreAlarm: boolean;\r\n  sensitivity: string;\r\n  vibrationFeedback: boolean;\r\n  soundFeedback: boolean;\r\n  version: number;\r\n}\r\n\r\n// 默认配置\r\nconst defaultConfig: ShakeConfig = {\r\n  enabled: false,\r\n  shakeCount: 3,\r\n  timeWindowMs: 2000,\r\n  emergencyType: \"medical\",\r\n  enablePreAlarm: true,\r\n  sensitivity: \"medium\",\r\n  vibrationFeedback: true,\r\n  soundFeedback: false,\r\n  version: 1\r\n};\r\n\r\n// 配置选项定义\r\nconst emergencyTypeOptions = [\r\n  { value: \"medical\", label: \"医疗报警\" },\r\n  { value: \"security\", label: \"安全报警\" }\r\n];\r\n\r\nconst sensitivityOptions = [\r\n  { value: \"low\", label: \"低敏感度\" },\r\n  { value: \"medium\", label: \"中等敏感度\" }, \r\n  { value: \"high\", label: \"高敏感度\" }\r\n];\r\n\r\nfunction loadConfig():ShakeConfig{\r\n  const conf = autoJsStoreUtils.read(SHAKE_CONFIG_KEY,{})\r\n  const config = _.merge(defaultConfig, conf)\r\n  return config;\r\n}\r\nconst ShakeConfigUI: React.FC = () => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [config, setConfig] = useState<ShakeConfig>(defaultConfig);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [lastSaveTime, setLastSaveTime] = useState<string>('');\r\n  \r\n  // 检测用户登录状态\r\n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\r\n  const isLoggedIn = !!userToken;\r\n  \r\n  // 临时输入值状态，用于处理输入验证\r\n  const [tempValues, setTempValues] = useState<{\r\n    shakeCount?: string;\r\n    timeWindowMs?: string;\r\n  }>({});\r\n\r\n  /**\r\n   * 从Android端读取当前配置\r\n   */\r\n  const loadConfigFromAndroid = useCallback(() => {\r\n    console.log('尝试从Android端读取摇一摇配置...');\r\n    const conf = loadConfig();\r\n    console.log(SHAKE_CONFIG_KEY, 'string', JSON.stringify(conf))\r\n    setConfig(conf)\r\n      setIsLoading(false);\r\n  }, []);\r\n\r\n  /**\r\n   * 验证配置参数的有效性\r\n   */\r\n  const validateConfig = (config: ShakeConfig): boolean => {\r\n    return (\r\n      config.shakeCount >= 1 && config.shakeCount <= 10 &&\r\n      config.timeWindowMs > 0 && config.timeWindowMs <= 10000 &&\r\n      ['medical', 'security'].includes(config.emergencyType) &&\r\n      ['low', 'medium', 'high'].includes(config.sensitivity) &&\r\n      config.version > 0\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 保存配置到Android端\r\n   */\r\n  const saveConfigToAndroid = useCallback((newConfig: ShakeConfig) => {\r\n    try {\r\n      console.log('保存摇一摇配置到Android端:', newConfig);\r\n      \r\n      // 验证配置有效性\r\n      if (!validateConfig(newConfig)) {\r\n        console.error('配置参数无效，不进行保存');\r\n        return;\r\n      }\r\n\r\n      // 构建配置JSON\r\n      const configJson = JSON.stringify(newConfig);\r\n      \r\n      // 编码为Base64\r\n      const base64Config = btoa(unescape(encodeURIComponent(configJson)));\r\n      \r\n      // 通过Rhino调用Android方法\r\n      const script = `\r\n        \r\n          var result = com.fanfanlo.emergencycall.controller.ShakeManager.updateShakeConfig(\"${base64Config}\");\r\n          result;\r\n      `;\r\n      autoWebViewJs.callScript(script);\r\n      setLastSaveTime(new Date().toLocaleTimeString());\r\n      \r\n    } catch (error) {\r\n      console.error('保存摇一摇配置失败:', error);\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * 处理配置更新\r\n   */\r\n  const updateConfig = useCallback((updates: Partial<ShakeConfig>) => {\r\n    const newConfig = { ...config, ...updates };\r\n    setConfig(newConfig);\r\n    \r\n    // 如果配置有效，自动保存\r\n    if (validateConfig(newConfig)) {\r\n      saveConfigToAndroid(newConfig);\r\n    }\r\n  }, [config, saveConfigToAndroid]);\r\n\r\n  /**\r\n   * 处理数字输入框变更，带延迟验证\r\n   */\r\n  const handleNumberInput = useCallback((field: 'shakeCount' | 'timeWindowMs', value: string) => {\r\n    // 更新临时值\r\n    setTempValues(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // 清除之前的定时器\r\n    const timerId = setTimeout(() => {\r\n      const numValue = parseInt(value);\r\n      if (!isNaN(numValue) && numValue > 0) {\r\n        // 有效值，更新配置\r\n        if (field === 'shakeCount' && numValue >= 1 && numValue <= 10) {\r\n          updateConfig({ [field]: numValue });\r\n          setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n        } else if (field === 'timeWindowMs' && numValue >= 1000 && numValue <= 10000) {\r\n          updateConfig({ [field]: numValue });\r\n          setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n        } else {\r\n          // 超出范围，恢复原值\r\n          setTimeout(() => {\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          }, 2000);\r\n        }\r\n      } else if (value === '') {\r\n        // 空值，等待用户继续输入\r\n        setTimeout(() => {\r\n          if (tempValues[field] === '') {\r\n            // 如果2秒后仍为空，恢复默认值\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          }\r\n        }, 2000);\r\n      } else {\r\n        // 无效值，恢复原值\r\n        setTimeout(() => {\r\n          setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n        }, 2000);\r\n      }\r\n    }, 500); // 500ms延迟\r\n\r\n    return () => clearTimeout(timerId);\r\n  }, [updateConfig, tempValues]);\r\n\r\n  /**\r\n   * 监听console.log消息以接收Android端的响应\r\n   */\r\n  useEffect(() => {\r\n    const originalConsoleLog = console.log;\r\n    \r\n    console.log = (...args) => {\r\n      const message = args.join(' ');\r\n      \r\n      // 处理配置加载响应\r\n      if (message.startsWith('SHAKE_CONFIG_LOADED:')) {\r\n        const configData = message.replace('SHAKE_CONFIG_LOADED:', '');\r\n        if (configData === 'null') {\r\n          console.log('未找到摇一摇配置，使用默认配置');\r\n          setConfig(defaultConfig);\r\n        } else {\r\n          try {\r\n            const loadedConfig = JSON.parse(configData);\r\n            setConfig(loadedConfig);\r\n            console.log('摇一摇配置加载成功:', loadedConfig);\r\n          } catch (error) {\r\n            console.error('解析配置失败:', error);\r\n            setConfig(defaultConfig);\r\n          }\r\n        }\r\n        setIsLoading(false);\r\n      }\r\n      \r\n      // 处理保存结果响应\r\n      else if (message.startsWith('SHAKE_CONFIG_SAVE_RESULT:')) {\r\n        const result = message.replace('SHAKE_CONFIG_SAVE_RESULT:', '');\r\n        console.log('配置保存结果:', result === 'true' ? '成功' : '失败');\r\n      }\r\n      \r\n      // 处理错误响应\r\n      else if (message.startsWith('SHAKE_CONFIG_ERROR:') || message.startsWith('SHAKE_CONFIG_SAVE_ERROR:')) {\r\n        console.error('摇一摇配置操作失败:', message);\r\n        setIsLoading(false);\r\n      }\r\n      \r\n      // 调用原始的console.log\r\n      originalConsoleLog.apply(console, args);\r\n    };\r\n\r\n    // 组件挂载时加载配置\r\n    loadConfigFromAndroid();\r\n\r\n    // 清理函数\r\n    return () => {\r\n      console.log = originalConsoleLog;\r\n    };\r\n  }, [loadConfigFromAndroid]);\r\n\r\n  // 渲染加载状态\r\n  if (isLoading) {\r\n    return (\r\n      <Paper sx={{ p: 2 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            加载摇一摇配置...\r\n          </Typography>\r\n        </Box>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper sx={{ overflow: 'hidden' }}>\r\n      {/* 折叠标题栏 */}\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          p: 2,\r\n          cursor: 'pointer',\r\n          opacity: !isLoggedIn ? 0.5 : 1,\r\n          '&:hover': {\r\n            bgcolor: 'action.hover'\r\n          }\r\n        }}\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n          <Typography variant=\"subtitle1\" fontWeight=\"medium\">\r\n            摇一摇\r\n          </Typography>\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                checked={config.enabled}\r\n                onChange={(e) => updateConfig({ enabled: e.target.checked })}\r\n                size=\"small\"\r\n                disabled={!isLoggedIn}\r\n              />\r\n            }\r\n            label={config.enabled ? '已启用' : '已禁用'}\r\n            onClick={(e) => e.stopPropagation()} // 防止点击开关时触发展开/折叠\r\n          />\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          {lastSaveTime && (\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n              已保存 {lastSaveTime}\r\n            </Typography>\r\n          )}\r\n          <IconButton size=\"small\">\r\n            {isExpanded ? <ExpandLess /> : <ExpandMore />}\r\n          </IconButton>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* 展开的配置界面 */}\r\n      <Collapse in={isExpanded}>\r\n        <Divider />\r\n        <Box sx={{ p: 2, opacity: !isLoggedIn ? 0.6 : 1, pointerEvents: !isLoggedIn ? 'none' : 'auto' }}>\r\n          {/* 未登录提示 */}\r\n          {!isLoggedIn && (\r\n            <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                请先登录后再使用摇一摇功能\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n          {/* 基础设置 */}\r\n          <Grid container spacing={2} sx={{ mb: 3 }}>\r\n            {/* 报警类型 */}\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth disabled={!config.enabled || !isLoggedIn}>\r\n                <InputLabel>报警类型</InputLabel>\r\n                <Select\r\n                  value={config.emergencyType}\r\n                  label=\"报警类型\"\r\n                  onChange={(e) => updateConfig({ emergencyType: e.target.value })}\r\n                >\r\n                  {emergencyTypeOptions.map(option => (\r\n                    <MenuItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* 检测参数 */}\r\n          <Typography variant=\"h6\" gutterBottom>检测参数</Typography>\r\n          <Grid container spacing={2} sx={{ mb: 3 }}>\r\n            {/* 摇动次数 */}\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"摇动次数\"\r\n                type=\"number\"\r\n                inputProps={{ min: 1, max: 10 }}\r\n                value={tempValues.shakeCount !== undefined ? tempValues.shakeCount : config.shakeCount}\r\n                onChange={(e) => handleNumberInput('shakeCount', e.target.value)}\r\n                disabled={!config.enabled || !isLoggedIn}\r\n                helperText=\"1-10次\"\r\n                error={tempValues.shakeCount !== undefined && (tempValues.shakeCount === '' || parseInt(tempValues.shakeCount) < 1 || parseInt(tempValues.shakeCount) > 10)}\r\n              />\r\n            </Grid>\r\n\r\n            {/* 时间窗口 */}\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"时间窗口(毫秒)\"\r\n                type=\"number\"\r\n                inputProps={{ min: 1000, max: 10000, step: 500 }}\r\n                value={tempValues.timeWindowMs !== undefined ? tempValues.timeWindowMs : config.timeWindowMs}\r\n                onChange={(e) => handleNumberInput('timeWindowMs', e.target.value)}\r\n                disabled={!config.enabled || !isLoggedIn}\r\n                helperText=\"1000-10000ms\"\r\n                error={tempValues.timeWindowMs !== undefined && (tempValues.timeWindowMs === '' || parseInt(tempValues.timeWindowMs) < 1000 || parseInt(tempValues.timeWindowMs) > 10000)}\r\n              />\r\n            </Grid>\r\n\r\n            {/* 敏感度 */}\r\n            <Grid item xs={12} sm={4}>\r\n              <FormControl fullWidth disabled={!config.enabled || !isLoggedIn}>\r\n                <InputLabel>检测敏感度</InputLabel>\r\n                <Select\r\n                  value={config.sensitivity}\r\n                  label=\"检测敏感度\"\r\n                  onChange={(e) => updateConfig({ sensitivity: e.target.value })}\r\n                >\r\n                  {sensitivityOptions.map(option => (\r\n                    <MenuItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* 预警设置 */}\r\n          <Typography variant=\"h6\" gutterBottom>预警设置</Typography>\r\n          <Box sx={{ mb: 3 }}>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={config.enablePreAlarm}\r\n                  onChange={(e) => updateConfig({ enablePreAlarm: e.target.checked })}\r\n                  disabled={!config.enabled || !isLoggedIn}\r\n                />\r\n              }\r\n              label=\"启用预报警\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={config.vibrationFeedback}\r\n                  onChange={(e) => updateConfig({ vibrationFeedback: e.target.checked })}\r\n                  disabled={!config.enabled || !isLoggedIn}\r\n                />\r\n              }\r\n              label=\"震动反馈\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={config.soundFeedback}\r\n                  onChange={(e) => updateConfig({ soundFeedback: e.target.checked })}\r\n                  disabled={!config.enabled || !isLoggedIn}\r\n                />\r\n              }\r\n              label=\"声音反馈\"\r\n            />\r\n          </Box>\r\n\r\n          {/* 配置说明 */}\r\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\r\n            <Typography variant=\"body2\" component=\"div\">\r\n              <strong>配置说明</strong>\r\n              <ul style={{ margin: '8px 0', paddingLeft: '20px' }}>\r\n                <li>在{config.timeWindowMs}毫秒内连续摇动{config.shakeCount}次将触发报警</li>\r\n                <li>{config.emergencyType === 'medical' ? '医疗报警适合健康紧急情况' : '安全报警适合人身安全威胁'}</li>\r\n                <li>{config.enablePreAlarm ? '启用预警将给您10秒钟确认或取消' : '禁用预警将立即触发报警'}</li>\r\n              </ul>\r\n            </Typography>\r\n          </Alert>\r\n        </Box>\r\n      </Collapse>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ShakeConfigUI;","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Box, Button } from \"@mui/material\";\r\nimport { trackingPrint } from \"@app/model\";\r\n\r\n\r\nexport function TestEmergencyCall() {\r\n    function onClick(){\r\n        // 测试呼救按钮点击埋点\r\n        trackingPrint({params:{\r\n            type:\"用户操作\",\r\n            title:\"测试功能\",\r\n            subtitle:\"测试呼救-按钮点击\",\r\n            extra:{\r\n                timestamp: Date.now(),\r\n                isWebView: !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function')\r\n            }\r\n        }});\r\n        \r\n        try {\r\n            // const script = `\r\n    //         var instance = com.fanfanlo.emergencycall.service\r\n    // .SensorMonitoringService.callFallDetection();\r\n    //         `\r\n            const script = `\r\n            com.fanfanlo.emergencycall.manager.EmergencyCallJSInterface.startFallDetectionCall()`\r\n            const res = autoWebViewJs.callScript(script);\r\n            console.log(\"TestEmergencyCall res=\", res);\r\n            \r\n            // 测试呼救执行成功埋点\r\n            trackingPrint({params:{\r\n                type:\"系统事件\",\r\n                title:\"测试功能\",\r\n                subtitle:\"测试呼救-执行成功\",\r\n                extra:{\r\n                    timestamp: Date.now(),\r\n                    scriptResult: res\r\n                }\r\n            }});\r\n        } catch (error) {\r\n            // 测试呼救执行异常埋点\r\n            trackingPrint({params:{\r\n                type:\"系统异常\",\r\n                title:\"测试功能\",\r\n                subtitle:\"测试呼救-执行异常\",\r\n                extra:{\r\n                    timestamp: Date.now(),\r\n                    error: error instanceof Error ? error.message : String(error),\r\n                    stack: error instanceof Error ? error.stack : undefined\r\n                }\r\n            }});\r\n        }\r\n    }\r\n    return(\r\n        <Box >\r\n            <Button  variant=\"contained\" onClick={onClick}>\r\n                测试呼救\r\n            </Button>\r\n        </Box>  \r\n    )\r\n}","import { trackingPrint } from '@app/model';\r\nimport { AppShell, TabbarContainer } from '@app/ui';\r\nimport { nextPreload } from '@fanfanlo';\r\nimport { Box, Button, Grid2 } from '@mui/material';\r\nimport { InviteContactDialog } from '@src/components/dialogs/InviteContactDialog';\r\nimport EmergencyStopButton from '@src/components/emergency-audio-control/EmergencyStopButton';\r\nimport { EmergencyTTSSettings } from '@src/components/emergency-tts-settings';\r\nimport MeetingList from '@src/components/meeting-list/MeetingList';\r\nimport { NavBar } from '@src/components/navbar/NavBar';\r\nimport PendingInvitationsList from '@src/components/PendingInvitationsList/PendingInvitationsList';\r\nimport PreAlarmConfig2 from '@src/components/pre-alarm-config2';\r\nimport { ListenShowPrivacyContent } from '@src/components/privacies/ListenShowPrivacyContent';\r\nimport SensorMonitor from '@src/components/sensor-monitor/SensorMonitor';\r\nimport ShakeConfigUI from '@src/components/shakeconfig/ShakeConfigUI';\r\nimport { TestEmergencyCall } from '@src/components/test/TestEmergencyCall';\r\nimport { useRouter } from 'next/router';\r\nimport React, { useState } from 'react';\r\n\r\nfunction Content() {\r\n  const [openInviteDialog, setOpenInviteDialog] = useState(false);\r\n\r\n  const router = useRouter();\r\n\r\n  React.useEffect(() => {\r\n    nextPreload(router, '/intro');\r\n    nextPreload(router, '/how-to-use');\r\n  }, []);\r\n\r\n  return (\r\n    <Box sx={{ my: 2, p: 2 }}>\r\n      {/* 紧急停止按钮 - 置顶显示 */}\r\n      {/* <EmergencyStopButton fullWidth size=\"large\" /> */}\r\n\r\n      {/* <Box>\r\n        <Link href=\"/how-to-use\" style={{ textDecoration: 'none' }}>\r\n          如何使用</Link>\r\n      </Box> */}\r\n      <ListenShowPrivacyContent type=\"main\" />\r\n      {/* <InvitationManager /> */}\r\n      {/* <MeetingList maxItemLength={3} /> */}\r\n      <PendingInvitationsList />\r\n\r\n      <Grid2 container spacing={2} sx={{ m: 2 }}>\r\n        <Grid2 size={6}>\r\n          <Button variant=\"contained\" onClick={() => router.push('/intro')}>\r\n            产品介绍\r\n          </Button>\r\n        </Grid2>\r\n        <Grid2 size={6}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <Button\r\n              // fullWidth\r\n              variant=\"contained\"\r\n              onClick={() => {\r\n                router.push('/how-to-use');\r\n              }}>\r\n              使用说明\r\n            </Button>\r\n          </Box>\r\n        </Grid2>\r\n      </Grid2>\r\n      <PreAlarmConfig2 />\r\n      <EmergencyTTSSettings />\r\n      {/* <PreAlarmConfigComponent /> */}\r\n\r\n      {/* <JpushIsInitialized /> */}\r\n\r\n      <Grid2 container sx={{ mt: 2, mb: 2 }}>\r\n        <Grid2 size={6}>\r\n          <TestEmergencyCall />\r\n        </Grid2>\r\n        <Grid2 size={6}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <EmergencyStopButton variant=\"button\" />\r\n          </Box>\r\n        </Grid2>\r\n      </Grid2>\r\n      {/* gemini做的权限管理，不好，先不启用 */}\r\n      {/* <SensorPermissions /> */}\r\n{/* 摇一摇 */}\r\n      <ShakeConfigUI />\r\n\r\n      <SensorMonitor />\r\n      {/* 二合一的前台服务 */}\r\n      {/* <UnifiedMonitoringControl /> */}\r\n\r\n      {/*  统一监控控制 - 集成传感器监控和权限监控 */}\r\n\r\n      <Grid2 container spacing={2} sx={{ m: 2 }}>\r\n        <Grid2 size={6}>\r\n          <Button \r\n            variant=\"contained\" \r\n            onClick={() => {\r\n              // 邀请紧急联系人按钮点击埋点\r\n              trackingPrint({params:{\r\n                type:\"用户操作\",\r\n                title:\"联系人管理\",\r\n                subtitle:\"邀请联系人-按钮点击\",\r\n                extra:{\r\n                  timestamp: Date.now(),\r\n                  page: \"home\"\r\n                }\r\n              }});\r\n              setOpenInviteDialog(true);\r\n            }}\r\n          >\r\n            邀请紧急联系人\r\n          </Button>\r\n        </Grid2>\r\n        <Grid2 size={6}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <Button\r\n              fullWidth\r\n              variant=\"contained\"\r\n              onClick={() => {\r\n                router.push('/contacts');\r\n              }}>\r\n              联系人管理\r\n            </Button>\r\n          </Box>\r\n        </Grid2>\r\n      </Grid2>\r\n      {openInviteDialog && <InviteContactDialog \r\n        open={openInviteDialog} \r\n        onClose={() => {\r\n          // 邀请联系人对话框关闭埋点\r\n          trackingPrint({params:{\r\n            type:\"模态框操作\",\r\n            title:\"联系人管理\",\r\n            subtitle:\"邀请对话框-关闭\",\r\n            extra:{\r\n              timestamp: Date.now(),\r\n              page: \"home\"\r\n            }\r\n          }});\r\n          setOpenInviteDialog(false);\r\n        }} \r\n      />}\r\n\r\n      {/* <MeetingRoom5\r\n        roomName=\"test-room\"\r\n        userName={`user-${Math.random().toString(36).substring(2, 8)}`}\r\n        livekitConfig={mainModel.appConfig.livekit}\r\n        // role=\"initiator\" // Add role for testing\r\n      />\r\n       */}\r\n\r\n      {/* TTS录制与分享 */}\r\n      {/* <TTSRecorder /> */}\r\n      {/* 桌面快捷方式 */}\r\n      {/* <ShortcutConfig /> */}\r\n\r\n      <Box sx={{ mt: 2, mb: 2 }}>\r\n        <Button\r\n          fullWidth\r\n          variant=\"contained\"\r\n          onClick={() => {\r\n            router.push('/shortcut');\r\n          }}>\r\n          桌面快捷方式\r\n          {/* <Link href={\"/shortcut\"}>桌面快捷方式</Link> */}\r\n        </Button>\r\n      </Box>\r\n      {/* <EmergencyAudioControl /> */}\r\n      {/* 浮动紧急停止按钮 */}\r\n      {/* <EmergencyStopButton variant=\"fab\" /> */}\r\n\r\n      {/* <Box>\r\n      <Link href={\"/logs\"}>日志</Link>\r\n      <IMOpenPageLink />\r\n</Box> */}\r\n\r\n      <Box sx={{ mt: '2rem' }}></Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default function Home() {\r\n  return (\r\n    <AppShell>\r\n      <TabbarContainer titleConf={{ ns: 'emergency-call/pages/home/content', key: 'home.title' }} navBar={<NavBar />}>\r\n        <Content />\r\n      </TabbarContainer>\r\n    </AppShell>\r\n  );\r\n}\r\n","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { IRequestHandler, request } from \"@fanfanlo\";\n\n/**\n * 获取所有邀请的请求参数\n */\nexport interface IParamsListAllInvitations {\n  // 可以添加分页等参数\n  page?: number;\n  page_size?: number;\n}\n\n/**\n * 用户信息\n */\nexport interface IInvitationUserInfo {\n  user_id: string;\n  display_name: string;\n  avatar_url?: string;\n}\n\n// 邀请状态类型\nexport type InviteStatus = 'pending' | 'accepted' | 'declined' | 'expired' | 'cancelled';\n\n// 邀请记录详情\nexport interface IInvitationDetails {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: InviteStatus;\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * 获取所有邀请的响应结果\n */\nexport interface IResultListAllInvitations {\n  is_ok: boolean;\n  msg?: string;\n  sent_invitations: IInvitationDetails[];\n  received_invitations: IInvitationDetails[];\n}\n\n/**\n * 响应邀请的请求参数\n */\nexport interface IParamsRespondToInvite {\n  invitation_id: string;\n  action: 'accept' | 'decline' | 'cancel' | 'remove';\n}\n\n/**\n * 获取所有邀请（发送和接收的）\n */\nexport async function tmsEmergencyCallListAllInvitations(\n  opts: IRequestOptions<IParamsListAllInvitations>\n) {\n  return request<IResultListAllInvitations, IParamsListAllInvitations>(\n    tms.TEmc,\n    tms.MEmcListAllInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n/**\n * 取消或删除邀请\n * @param invitationId 邀请ID\n * @param isReceived 是否是接收的邀请\n * @returns Promise\n */\nexport async function cancelOrRemoveInvitation(\n  invitationId: string,\n  isReceived: boolean\n) {\n  const action = isReceived ? 'remove' : 'cancel';\n  return emergencyCallInvitationService.respondToInvite({\n    params: {\n      invitation_id: invitationId,\n      action\n    }\n  } as any);\n}\n\n/**\n * 响应邀请\n */\nexport async function tmsEmergencyCallRespondToInvite(\n  opts: IRequestOptions<IParamsRespondToInvite>\n) {\n  return request<{ is_ok: boolean; msg?: string }, IParamsRespondToInvite>(\n    tms.TEmc,\n    tms.MEmcRespondToInvite,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// 导出所有接口\nexport const emergencyCallInvitationService = {\n  listAllInvitations: tmsEmergencyCallListAllInvitations,\n  respondToInvite: tmsEmergencyCallRespondToInvite,\n};\n\nexport default emergencyCallInvitationService;\n"],"names":["request","tms","tmsEmcInviteContacts","opts","res","TEmc","MEmcInviteContacts","params","gateway","handler","tmsEmcGetContactTypes","MEmcGetContactTypes","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Box","CircularProgress","Autocomplete","useState","useCallback","useEffect","useRef","user","toast","matrixUser","authService","Log","useProxyWatch","fileLogger","isValidIdentity","text","test","is11DigitNumber","InviteContactDialog","open","onClose","onInviteSent","uiLogger","sub","contacts","setContacts","remark","setRemark","callType","setCallType","availableCallTypes","setAvailableCallTypes","console","log","message","setMessage","isLoading","setIsLoading","isTypesLoading","setIsTypesLoading","pendingParams","setPendingParams","executionLock","accessToken","userData","userInfo","loginResponse","access_token","isUserLoggedIn","data","sessionData","global_user_info","userToken","storeData","user_token","current","finalParams","matrix_access_token","type","executeApiCall","error","responseData","printLog","err","shellIsOk","dataIsOk","errorMessage","results","msg","successResults","filter","r","result_code","infoResults","errorResults","length","success","infoMessages","map","Boolean","join","errorMessages","fetchCallTypes","logger","JSON","stringify","types","formattedTypes","id","uuid","name","is_system","defaultType","warn","handleSendInvitation","contactInputs","split","c","trim","contactIdentities","input","push","identity","identityType","appLoggedIn","showLoginDialog","currentAccessToken","apiParams","maxWidth","fullWidth","component","sx","mt","autoFocus","margin","label","multiline","rows","variant","placeholder","value","onChange","e","target","disabled","freeSolo","options","option","event","newValue","inputValue","onInputChange","newInputValue","reason","disablePortal","disableClearable","forcePopupIcon","mb","width","renderInput","InputProps","endAdornment","color","size","ListboxProps","style","maxHeight","overflow","onClick","autoWebViewJs","fileLog","stopAllHandler","stopEmergencyMethods","script","callScript","methodError","React","Snackbar","Alert","Fab","Tooltip","Stop","StopIcon","VolumeOff","VolumeOffIcon","trackingPrint","EmergencyStopButton","loading","setLoading","isAndroidWebView","handleStopAllEmergencyAudio","title","subtitle","extra","buttonType","timestamp","Date","now","bl","result","Error","String","stack","undefined","handleCloseMessage","placement","position","bottom","right","zIndex","autoHideDuration","anchorOrigin","vertical","horizontal","severity","startIcon","Typography","Switch","Paper","FormControlLabel","Slider","Divider","Collapse","List","ListItem","ListItemText","ListItemSecondaryAction","IconButton","Chip","LinearProgress","Tabs","Tab","PlayArrow","VolumeUp","Settings","ExpandLess","Mic","Share","Delete","Refresh","Star","StarBorder","CloudUpload","InsertDriveFile","autoJsStoreUtils","ReportButton","DEFAULT_SETTINGS","enabled","repeatInterval","voiceSpeed","voicePitch","useCustomAudio","lastUpdated","DEFAULT_VOICE_CONFIG","TTS_SETTINGS_KEY","VOICE_CONFIG_KEY","EmergencyTTSSettings","settings","setSettings","voiceConfig","setVoiceConfig","fileList","setFileList","testing","setTesting","showSuccess","setShowSuccess","setError","successMessage","setSuccessMessage","expanded","setExpanded","activeTab","setActiveTab","isRecording","setIsRecording","playingFile","setPlayingFile","recordText","setRecordText","recordSpeed","setRecordSpeed","recordPitch","setRecordPitch","showRecordDialog","setShowRecordDialog","ttsAvailable","setTtsAvailable","isUploading","setIsUploading","selectedFile","setSelectedFile","uploadProgress","setUploadProgress","supportedFormats","setSupportedFormats","onRecordClick","loadData","savedSettings","read","savedConfig","checkTTSAvailability","loadFileList","loadSupportedFormats","javaResultString","formats","parse","maxFileSizeMB","maxDurationSeconds","recommendedDurationSeconds","listJson","files","filesWithType","file","isDefault","handleSelectAndUploadAudioFile","progressInterval","setInterval","prev","clearInterval","saveSettings","newSettings","settingsToSave","write","saveVoiceConfig","newConfig","configToSave","handleRecord","getFullYear","toString","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","fileName","replace","setTimeout","resultJson","handlePlayFile","filePath","handleShareFile","handleDeleteFile","window","confirm","setAsDefaultAudio","medicalDefault","updatedSettings","medicalEmergencyAudioPath","securityDefault","updatedFiles","formatFileSize","bytes","toFixed","formatTime","toLocaleString","formatDuration","milliseconds","seconds","Math","floor","minutes","remainingSeconds","testTTS","Promise","resolve","stopTest","handleSettingChange","key","handleSave","p","textAlign","elevation","display","alignItems","justifyContent","borderRadius","gap","xs","sm","flexWrap","flex","minWidth","fontSize","flexShrink","control","checked","padding","in","border","borderColor","_","fontWeight","helperText","lineHeight","my","min","max","step","marks","valueLabelDisplay","valueLabelFormat","br","toUpperCase","py","dense","index","Fragment","pl","primary","source","format","secondary","fileSize","createTime","duration","mimeType","backgroundColor","strong","gutterBottom","tmsEmergencyCallListPendingReceivedInvitations","MEmcListPendingReceivedInvitations","emergencyCallPendingInvitationService","listPendingReceivedInvitations","Card","CardContent","CardActions","Avatar","Stack","Check","CheckIcon","Close","CloseIcon","AccessTime","AccessTimeIcon","Notifications","NotificationsIcon","formatDistanceToNow","zhCN","emergencyCallInvitationService","AppModelEvent","appModel","matrixClient","PendingInvitationCard","invitation","onRespond","isProcessing","isProcessingAction","setIsProcessingAction","handleRespond","action","isExpired","expires_at","opacity","src","user_info","avatar_url","alt","display_name","height","mr","flexGrow","created_at","addSuffix","locale","icon","pt","PendingInvitationsList","invitations","setInvitations","setIsProcessing","loadPendingInvitations","is_ok","handleRespondToInvite","invitationId","respondToInvite","invitation_id","invite","dispatcher","emit","InviteListUpdated","unsubscribe","addListener","unsub","imDispatcher","ImDispatcherEventTypes","INVITE","flexDirection","spacing","FormControl","MenuItem","InputLabel","Select","DragIndicator","DragIndicatorIcon","VolumeUpIcon","Vibration","VibrationIcon","DndContext","closestCenter","KeyboardSensor","PointerSensor","TouchSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","useSortable","verticalListSortingStrategy","CSS","debounce","PRE_ALARM_CONFIG_KEY","defaultSoundResources","SortableActionItem","isPlaying","onUpdate","onRemove","onPreview","onStopPreview","attributes","listeners","setNodeRef","transform","transition","isDragging","Transform","ref","userSelect","cursor","touchAction","parseInt","resourceId","startAdornment","sound","PreAlarmConfig2","config","setConfig","playingSoundId","setPlayingSoundId","debouncedWrite","sensors","activationConstraint","distance","delay","tolerance","coordinateGetter","loadConfig","storedConfig","actionsWithIds","actions","random","substr","maxWaitDuration","updateConfig","updates","handleToggleEnabled","handleAddAction","newAction","handleUpdateAction","handleRemoveAction","handleDragEnd","active","over","oldIndex","findIndex","a","newIndex","handlePreviewSound","handleStopSound","SoundManager","previewSound","stopPreview","ml","direction","collisionDetection","onDragEnd","items","strategy","isRealInAndroid","PrivacyDialogDisplay","autoOpened","PrivacyDialogAuto","area","setOpen","handleClose","def","agree","disagreeTime","ListenShowPrivacyContent","CheckCircle","CheckCircleIcon","ErrorIcon","Help","HelpIcon","SettingsIcon","RefreshIcon","Security","SecurityIcon","Info","InfoIcon","PermissionStatusPanel","permissionsData","setPermissionsData","infoDialogOpen","setInfoDialogOpen","selectedPermission","setSelectedPermission","fetchPermissions","isAndroid","permissionsCount","permissions","grantedCount","status","deniedCount","unknownCount","deviceBrand","apiLevel","handleOpenSettings","permission","permissionId","permissionName","permissionType","currentStatus","canDetect","jpushScript","jpushErr","handleConfirmLockScreenPermission","handleShowPermissionInfo","permissionStatus","handleCloseInfoDialog","getPermissionReason","reasonMap","getPermissionImpact","impactMap","getStatusIcon","iconProps","getStatusChip","statusConfig","granted","denied","unknown","px","getTypeLabel","typeLabels","runtime","special","vendor","minHeight","previousError","currentPermissionsCount","borderLeft","borderLeftColor","bgcolor","toLocaleTimeString","PaperProps","mx","pb","fromDialog","DialogContentText","Accordion","AccordionSummary","AccordionDetails","ExpandMore","ExpandMoreIcon","SensorMonitor","threshold","setThreshold","isMonitoring","setIsMonitoring","isSensorInfoDialogOpen","setSensorInfoDialogOpen","isForegroundServiceDialogOpen","setForegroundServiceDialogOpen","sensorCallbackRef","foregroundServiceCallbackRef","thresholdValue","parseFloat","readIsMonitoring","handleSetThreshold","isNaN","alert","handleToggleMonitoring","checkShowInfo","passed","checkShowSensorInfo","callback","info","checkShowForegroundServiceInfo","handleSensorDialog","handleForegroundServiceDialog","marginBottom","expandIcon","aria-controls","aria-labelledby","aria-describedby","Grid","SHAKE_CONFIG_KEY","defaultConfig","shakeCount","timeWindowMs","emergencyType","enablePreAlarm","sensitivity","vibrationFeedback","soundFeedback","version","emergencyTypeOptions","sensitivityOptions","conf","merge","ShakeConfigUI","isExpanded","setIsExpanded","lastSaveTime","setLastSaveTime","isLoggedIn","tempValues","setTempValues","loadConfigFromAndroid","validateConfig","includes","saveConfigToAndroid","configJson","base64Config","btoa","unescape","encodeURIComponent","handleNumberInput","field","timerId","numValue","clearTimeout","originalConsoleLog","args","startsWith","configData","loadedConfig","apply","stopPropagation","pointerEvents","container","item","inputProps","ul","paddingLeft","li","TestEmergencyCall","isWebView","scriptResult","AppShell","TabbarContainer","nextPreload","Grid2","NavBar","useRouter","Content","openInviteDialog","setOpenInviteDialog","router","m","page","Home","titleConf","ns","navBar","tmsEmergencyCallListAllInvitations","MEmcListAllInvitations","cancelOrRemoveInvitation","isReceived","tmsEmergencyCallRespondToInvite","MEmcRespondToInvite","listAllInvitations"],"sourceRoot":"","ignoreList":[9]}