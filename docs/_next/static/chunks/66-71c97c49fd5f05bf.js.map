{"version":3,"file":"static/chunks/66-71c97c49fd5f05bf.js","mappings":"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","sources":["webpack://_N_E/./src/components/navbar/NavBar.tsx","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/fanfanlo/src/i18n/i18n-init.ts","webpack://_N_E/../../libs/fanfanlo/src/storage/store-page-context.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/AppShell.tsx","webpack://_N_E/../../libs/app/model/src/remote/emc/inviteContacts.ts","webpack://_N_E/../../libs/app/model/src/remote/emc/tmsEmcGetContactTypes.ts","webpack://_N_E/./src/components/dialogs/InviteContactDialog.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_pending_received_invitations.ts","webpack://_N_E/./src/components/PendingInvitationsList/PendingInvitationsList.tsx","webpack://_N_E/../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js","webpack://_N_E/./src/components/pre-alarm-config2/index.tsx","webpack://_N_E/./src/components/shortcut-config/ShortcutConfig.tsx","webpack://_N_E/./src/components/privacies/PrivacyDialog.tsx","webpack://_N_E/./src/components/privacies/ListenShowPrivacyContent.tsx","webpack://_N_E/./src/components/sensor-monitor/SensorMonitor.tsx","webpack://_N_E/./src/components/test/TestEmergencyCall.tsx","webpack://_N_E/./src/components/emergency-audio-control/EmergencyAudioControl.tsx","webpack://_N_E/./src/components/emergency-audio-control/EmergencyStopButton.tsx","webpack://_N_E/./src/pages/home/index.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/PageContent.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/AndroidPageContent.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_all_invitations.ts","webpack://_N_E/../../libs/app/ui/src/components/tabbar/Tabbar.tsx"],"sourcesContent":["import { useRouter } from \"next/router\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\n\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport ListIcon from '@mui/icons-material/List';\r\nimport { BottomNavigation, BottomNavigationAction } from \"@mui/material\";\r\ninterface TabInfoType {\r\n  label: string;\r\n  value: string;\r\n  icon: React.ReactNode;\r\n}\r\n\r\nexport function NavBar() {\r\n  const router = useRouter();\r\n  const { pathname } = router;\r\n  const { t } = useTranslation('emergency-call/components/navbar/content');\r\n  const tabInfoList: TabInfoType[] = [\r\n    { label: t('NavBar.home'), value: '/', icon: <HomeIcon /> },\r\n    // { label: t('NavBar.logs'), value: '/logs', icon: <ListIcon /> },\r\n    // { label: t('content.create'), value: '/script-creator', icon: <CreateIcon /> },\r\n    // { label: t('content.market'), value: '/market', icon: <StorefrontIcon /> },\r\n    { label: t('NavBar.settings'), value: '/settings', icon: <SettingsIcon /> },\r\n  ];\r\n  return (\r\n\r\n    <BottomNavigation showLabels value={pathname}>\r\n      {tabInfoList.map(e => (\r\n        <BottomNavigationAction\r\n          key={e.value}\r\n          label={e.label}\r\n          icon={e.icon}\r\n          data-id={`tabbar-${e.value}`}\r\n          className={pathname === e.value ? 'Mui-selected' : ''}\r\n          onClick={() => {\r\n            if (pathname === e.value) return;\r\n            router.push(e.value);\r\n          }}\r\n        />\r\n      ))}\r\n    </BottomNavigation>\r\n  );\r\n}","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","\"use client\";\r\n// 现在用的是这个文件\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport Backend, { type HttpBackendOptions } from \"i18next-http-backend\";\r\n\r\nimport i18next from \"i18next\";\r\nimport { Log } from \"../log/Log\";\r\nimport { getBuildTime, isServer } from \"../nextjs/env/env\";\r\nimport { fileMapUtils } from \"../utils\";\r\n;\r\nexport { useTranslation } from 'react-i18next';\r\nlet fileDateVersion:string = ''// = getConfig().publicRuntimeConfig?.version\r\nexport const i18nLogger = new Log(false, `i18n`);\r\nconst windowHref = (()=>{\r\n  if(typeof window === 'undefined')return ''\r\n  const u = new URL(window.location.href || window.parent?.location.href);\r\n  // 同域文本iframe里的页面会获取不到href，所以判断一下直接用父级的就行.\r\n  return u.origin == null || u.origin == 'null' ? '' : u.origin\r\n})()\r\nconst backendOptions = {\r\n  loadPath: function (lngs: string[], namespaces: string[]) {\r\n    const log = i18nLogger.sub(false, `i18n loadpath`);\r\n    log.pause = true;\r\n    const lng = lngs[0]\r\n    let p = ``\r\n    // p = `/options/_locales/${lngs[0].replace(\"-\", \"_\")}/messages.json`;\r\n    // p = `/locales/zh-CN/ns1/content.json`;\r\n    // p = `locales/${lng}/${namespaces[0]}.json?v=${fileDateVersion}`\r\n    const ps = namespaces[0].split('/')\r\n    ps.splice(ps.length - 1, 0, lng)\r\n    // p = `locales/${ps.join('/')}.json?v=${fileDateVersion}`\r\n    // p = `locales/${ps.join('/')}.json?v=${getBuildTime()}`\r\n    p = `locales/${ps.join('/')}.json`\r\n    log.log(`lngs=`, lngs);\r\n    log.log(`namespaces=`, namespaces);\r\n    log.log(\"p=\", p);\r\n    p = fileMapUtils.getFile(`/${p}`);\r\n    // console.log('map p=', p)\r\n    p = `${windowHref}/${p}`\r\n    return p;\r\n\r\n  },\r\n  parse: function (\r\n    data: string,\r\n    languages?: string | string[],\r\n    namespaces?: string | string[]\r\n  ) {\r\n    const log = i18nLogger.sub(false, `i18n backend parse`);\r\n    log.pause = true;\r\n    // log.log(`parrrse`, data, languages, namespaces);\r\n    const l = JSON.parse(data);\r\n    log.print(`before set i18ndata`);\r\n    // i18nData = l as II18n;\r\n    // log.log(`i18nData.rule.scripts.sys.rules`, i18nData.rule.scripts.sys.rules);\r\n    log.log(`parrrse`, languages, namespaces);\r\n    return l;\r\n  },\r\n};\r\nconst backend = new Backend();\r\nbackend.init(null, backendOptions);\r\nexport const i18n = i18next;\r\n// export const resources: Resource = {\r\n//   // 'zh-CN': {\r\n//   //   translation: _.merge({}, zhCN),\r\n//   // },\r\n//   // en: {\r\n//   //   translation: _.merge({}, en),\r\n//   // },\r\n// };\r\n\r\n\r\ni18n.on(\"languageChanged\", async function (lng) {\r\n  const log = i18nLogger.sub(false, `onlanguageChanged`);\r\n  log.pause = true;\r\n  log.log(`lllllng`, lng);\r\n  // lng = \"en\";\r\n  // const p = `/options/_locales/${lng.replace(\"-\", \"_\")}/messages.json`;\r\n});\r\n\r\n\r\n\r\n\r\nexport function i18nInit(_fileDateVersion:string=''){\r\n  fileDateVersion = _fileDateVersion\r\n  i18n\r\n  .use(LanguageDetector)\r\n  .use(backend)\r\n  .use(initReactI18next)\r\n  .init<HttpBackendOptions>({\r\n    load: \"currentOnly\",\r\n    // load: \"all\",\r\n    // supportedLngs: ['zh-CN', 'zh-TW', 'en', 'en-GB', 'ja'],\r\n    // resources,\r\n    fallbackLng: isServer ? \"en\" : \"zh-CN\",\r\n    // fallbackLng: \"zh-CN\",\r\n    // lng: \"zh-CN\",\r\n    partialBundledLanguages:true,\r\n    ns:[],\r\n    \r\n    debug: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    detection: {\r\n      caches: [\"localStorage\"],\r\n    },\r\n  });\r\n}\r\ni18n.on(\"missingKey\", function (lngs, namespace, key, res) {\r\n  console.error(\r\n    \"i18n mssing key, lngs=%s, namespace=%s, key=%s, res=%s\",\r\n    lngs,\r\n    namespace,\r\n    key,\r\n    res\r\n  );\r\n});\r\n\r\ni18n.on(\"loaded\", function (loaded) {\r\n  const log = i18nLogger.sub(false, `onloaded`);\r\n  log.pause = true;\r\n  log.log(`onloaded arguments`, loaded);\r\n});\r\n\r\ni18n.on(\"failedLoading\", function (lng, ns, msg) {\r\n  const log = i18nLogger.sub(false, `onfailedLoading`);\r\n  log.pause = true;\r\n  log.log(`failedLoading arguments`, lng, ns, msg);\r\n});\r\n\r\ni18n.on(\"added\", function () {\r\n  console.log('added', arguments)\r\n});   \r\n\r\nexport default i18n;","import { createContext } from \"react\";\r\nimport { storeUtils } from \"./store-utils\";\r\n// import { storeUtils } from \"./store\";\r\nconst s = storeUtils.namespace('store-page-context')\r\n\r\nexport interface IPageScrollPosition{\r\n    x:number\r\n    y:number\r\n}\r\n\r\nfunction create(){\r\n    return createContext(s)\r\n}\r\nexport const StorePageContext = createContext<any>(s)\r\n\r\nexport const StorePageDynamicContext = createContext<Record<string, any>>({})","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport getConfig from \"node_modules/next/config\";\r\nimport { PropsWithChildren, useEffect } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\n\r\ncheckReloadPage();\r\ni18nInit()\r\n\r\n\r\nfunction checkReloadPage(){\r\n  if(typeof window === 'undefined')return\r\n  if(getConfig().publicRuntimeConfig.isDevelopment){\r\n    return\r\n  }\r\n  if(window.location.href.indexOf('qiniu') == -1)return;\r\n  // 帮我检测url中是否包含_htmlRefreshTime的参数\r\n  // 如果没有，则添加_htmlRefresTime的参数，值为当前时间的毫秒数\r\n  const searchParams = new URL(window.location.href).searchParams\r\n  const htmlRefreshTime = searchParams.get('_htmlRefreshTime')\r\n  if (!htmlRefreshTime) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n    return\r\n  }\r\n\r\n  const refreshTime = Number(htmlRefreshTime)\r\n  if (refreshTime + 2 * 60 * 1000 < Date.now()) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n  }\r\n}\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        window.scrollTo(info.x, info.y)\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description 单个联系人的信息，由前端提供\n */\nexport interface IEmcContactIdentity {\n    identity: string;\n    identityType: 'email' | 'mobile';\n}\n\n/**\n * @description 邀请联系人的请求参数\n */\nexport interface IEmcInviteContactsParams extends IRequestParams {\n    contacts: IEmcContactIdentity[];\n    remark?: string;\n    type: string;\n    message?: string;\n    matrix_access_token: string; // 新增：用于创建 Matrix 房间的授权 Token\n}\n\n/**\n * @description 单个邀请的处理结果，由后端返回\n */\nexport interface IEmcInviteResultItem {\n    identity: string;\n    result_code: string; // 使用 ResultCode 的字符串形式\n    msg: string;\n}\n\n/**\n * @description 邀请联系人的完整响应体\n */\n// export interface IEmcInviteContactsResult extends IResultContent {\n//     data: {\n//         data: {\n//             results: IEmcInviteResultItem[];\n//             msg?: string;\n//         };\n//         msg?: string;\n//     };\n//     results?: IEmcInviteResultItem[]; // 保持向后兼容\n// }\n\nexport interface IEmcInviteContactsResult extends IResultContent {\n    data: {\n        is_ok:boolean;\n        results: IEmcInviteResultItem[];\n        msg?: string;\n    };\n}\n\n/**\n * @description 调用邀请联系人接口的函数\n * @param opts 包含 params, gateway, handler 的请求选项\n */\nexport async function tmsEmcInviteContacts(opts: IRequestOptions<IEmcInviteContactsParams>) {\n    const res = await request<IEmcInviteContactsResult>(tms.TEmc, tms.MEmcInviteContacts, opts.params, opts.gateway, opts.handler);\n    return res;\n}","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description 获取联系人类型的请求参数\n */\nexport interface IEmcGetContactTypesParams extends IRequestParams {\n    // 可能不需要额外参数，但保留结构以备将来扩展\n}\n\n/**\n * @description 单个联系人类型\n */\nexport interface IEmcContactTypeItem {\n    id: string;\n    name: string;\n    // 根据实际需要可以添加更多字段，例如 icon, description 等\n}\n\n/**\n * @description 获取联系人类型的完整响应体\n */\nexport interface IEmcGetContactTypesResult extends IResultContent {\n    data: {\n        types: Array<{\n            uuid: string;\n            name: string;\n            is_system: boolean;\n        }>;\n    };\n}\n\n/**\n * @description 调用获取联系人类型接口的函数\n * @param opts 包含 params, gateway, handler 的请求选项\n */\nexport async function tmsEmcGetContactTypes(opts: IRequestOptions<IEmcGetContactTypesParams>) {\n    const res = await request<IEmcGetContactTypesResult>(tms.TEmc, tms.MEmcGetContactTypes, opts.params, opts.gateway, opts.handler);\n    return res;\n}\n","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Box,\n    CircularProgress,\n    Autocomplete,\n} from '@mui/material';\nimport { useState, useCallback, useEffect, useRef, SyntheticEvent } from 'react';\nimport { \n    IEmcInviteContactsParams, \n    tmsEmcInviteContacts, \n    IEmcContactIdentity, \n    user, \n    tmsEmcGetContactTypes,\n    IEmcGetContactTypesResult,\n    IEmcContactTypeItem,\n    IEmcInviteResultItem,\n} from '@app/model';\nimport toast from 'react-hot-toast';\nimport { matrixUser } from '@im/matrix';\nimport { authService } from '@src/services/authService';\nimport { Log, useProxyWatch,\n    IRequestResult } from '@fanfanlo';\nconst fileLogger = new Log(false, 'InviteContactDialog.tsx');\n\nconst isValidIdentity = (text: string) => /(^\\d{11}$)|(^[a-zA-Z0-9]{32}$)/.test(text);\nconst is11DigitNumber = (text: string) => /^\\d{11}$/.test(text);\n\ninterface InviteContactDialogProps {\n    open: boolean;\n    onClose: () => void;\n    onInviteSent?: () => void;\n}\n\nexport function InviteContactDialog({ open, onClose, onInviteSent }: InviteContactDialogProps) {\n    const uiLogger = fileLogger.sub(false, 'InviteContactDialog_ui');\n\n    const [contacts, setContacts] = useState('');\n    const [remark, setRemark] = useState('');\n    const [callType, setCallType] = useState<string | null>(null);\n    const [availableCallTypes, setAvailableCallTypes] = useState<readonly IEmcContactTypeItem[]>([]);\n    \n    // Debug effect to log availableCallTypes changes\n    useEffect(() => {\n        console.log('availableCallTypes updated:', availableCallTypes);\n    }, [availableCallTypes]);\n    \n    // Debug effect to log callType changes\n    useEffect(() => {\n        console.log('callType updated:', callType);\n    }, [callType]);\n    const [message, setMessage] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isTypesLoading, setIsTypesLoading] = useState(false);\n\n    const [pendingParams, setPendingParams] = useState<Omit<IEmcInviteContactsParams, 'matrix_access_token'> | null>(null);\n    const executionLock = useRef(false);\n    const [accessToken] = useProxyWatch(matrixUser.userData.userInfo, 'loginResponse.access_token', matrixUser.userData.userInfo.loginResponse?.access_token);\n    const [isUserLoggedIn] = useProxyWatch(user.data.sessionData, 'global_user_info', !!user.data.sessionData.global_user_info);\n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    useEffect(() => {\n        if (accessToken && pendingParams && !executionLock.current) {\n            executionLock.current = true;\n            const finalParams: IEmcInviteContactsParams = {\n                ...pendingParams,\n                matrix_access_token: accessToken,\n                contacts: pendingParams?.contacts || [],\n                type: pendingParams?.type || ''\n            };\n            executeApiCall(finalParams);\n        }\n    }, [accessToken, pendingParams]);\n\n    const executeApiCall = useCallback(async (params: IEmcInviteContactsParams) => {\n        if (!params.contacts || !params.type) {\n            toast.error('请填写联系人和呼叫类型');\n            return;\n        }\n\n        setIsLoading(true);\n        \n        try {\n            const res = await tmsEmcInviteContacts({\n                params,\n                handler: { printLog: true }\n            });\n\n            console.log('Invite response:', res);\n\n            // 处理响应结果\n            if (res.err || !res.shellIsOk || !res.dataIsOk) {\n                const errorMessage = res.err?.message || '邀请失败，请稍后重试';\n                toast.error(errorMessage);\n                return;\n            }\n\n            // 处理嵌套的响应结构\n            const responseData = res.data;\n            if (!responseData?.data?.results) {\n                const errorMessage = responseData?.data?.msg || res.data?.msg || '未返回有效的结果';\n                toast.error(errorMessage);\n                return;\n            }\n            \n            const results: IEmcInviteResultItem[] = responseData.data.results;\n\n            // 统计成功和失败的数量\n            const successResults = results.filter(r => r.result_code === 'SUCCESS');\n            const infoResults = results.filter(r => r.result_code === 'INVITE_ALREADY_SENT' || r.result_code === 'ALREADY_A_CONTACT');\n            const errorResults = results.filter(r => r.result_code !== 'SUCCESS' && r.result_code !== 'INVITE_ALREADY_SENT' && r.result_code !== 'ALREADY_A_CONTACT');\n\n            if (successResults.length > 0) {\n                toast.success(`成功邀请 ${successResults.length} 个联系人`);\n                onInviteSent?.();\n            }\n            \n            if (infoResults.length > 0) {\n                const infoMessages = infoResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (infoMessages) {\n                    // 使用默认的 toast 替代 toast.info\n                    toast(infoMessages);\n                }\n            }\n            \n            if (errorResults.length > 0) {\n                const errorMessages = errorResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (errorMessages) {\n                    toast.error(`部分邀请失败：\\n${errorMessages}`);\n                }\n            }\n        } catch (error) {\n            console.error('Error in executeApiCall:', error);\n            toast.error('处理请求时发生错误，请稍后重试');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [onInviteSent]);\n\n    const fetchCallTypes = useCallback(async () => {\n        const logger = uiLogger.sub(false, 'fetchCallTypes_fn');\n        logger.log('Fetching call types...');\n        setIsTypesLoading(true);\n        const res: IRequestResult<IEmcGetContactTypesResult, any> = await tmsEmcGetContactTypes({ params: {}, handler: { printLog: true } });\n        logger.log('Call types response:', JSON.stringify(res));\n        setIsTypesLoading(false);\n\n        if (res.err || !res.shellIsOk || !res.dataIsOk) {\n            const errorMessage = res.err?.message || '加载呼叫类型失败。';\n            toast.error(errorMessage);\n            setAvailableCallTypes([]);\n            logger.error('Failed to load call types:', errorMessage);\n        } else {\n            // 从 res.data.data.types 获取数据\n            const types = res.data?.data?.types || [];\n            logger.log('Setting availableCallTypes:', JSON.stringify(types));\n            \n            // 转换为 IEmcContactTypeItem[] 格式\n            const formattedTypes = types.map(type => ({\n                id: type.uuid,\n                name: type.name,\n                is_system: type.is_system\n            }));\n            \n            setAvailableCallTypes(formattedTypes);\n            \n            // 只在 callType 为空时设置默认值\n            if (formattedTypes.length > 0 && !callType) {\n                const defaultType = formattedTypes[0].name;\n                logger.log('Setting default call type:', defaultType);\n                setCallType(defaultType);\n            } else if (formattedTypes.length === 0) {\n                logger.warn('No call types available');\n            }\n        }\n    }, []); // 移除了 callType 依赖\n\n    useEffect(() => {\n        if (open) {\n            fetchCallTypes();\n        } else {\n            setContacts('');\n            setRemark('');\n            setCallType(null);\n            setAvailableCallTypes([]);\n            setMessage('');\n            setIsLoading(false);\n            setPendingParams(null);\n            executionLock.current = false;\n        }\n    }, [open, fetchCallTypes]);\n\n    const handleSendInvitation = useCallback(async () => {\n        const contactInputs = contacts.split('\\n').map(c => c.trim()).filter(c => c);\n        if (contactInputs.length === 0) {\n            toast.error('请输入至少一个联系人。');\n            return;\n        }\n\n        const contactIdentities: IEmcContactIdentity[] = [];\n        for (const input of contactInputs) {\n            if (isValidIdentity(input)) {\n                const type = is11DigitNumber(input) ? 'mobile' : 'email';\n                contactIdentities.push({ identity: input, identityType: type });\n            } else {\n                toast.error(`联系人格式无效: ${input}。必须是11位手机号或32位字符串。`);\n                return;\n            }\n        }\n\n        if (!callType || callType.trim() === '') {\n            toast.error('请选择或输入一个呼叫类型。');\n            return;\n        }\n\n        setIsLoading(true);\n\n        if (!userToken) {\n            const appLoggedIn = await authService.showLoginDialog();\n            if (!appLoggedIn) {\n                setIsLoading(false);\n                return; \n            }\n        }\n\n        const currentAccessToken = matrixUser.userData.userInfo.loginResponse?.access_token;\n        const params: Omit<IEmcInviteContactsParams, 'matrix_access_token'> = {\n            contacts: contactIdentities,\n            type: callType.trim(),\n            remark: remark.trim(),\n            message: message.trim(),\n        };\n\n        if (currentAccessToken) {\n            executionLock.current = true;\n            const apiParams: IEmcInviteContactsParams = {\n                ...params,\n                matrix_access_token: currentAccessToken,\n                contacts: params.contacts || [],\n                type: params.type || ''\n            };\n            executeApiCall(apiParams);\n        } else {\n            toast('等待登录...');\n            setPendingParams(params);\n        }\n\n    }, [contacts, remark, callType, message, executeApiCall, isUserLoggedIn]);\n\n    return (\n        <Dialog open={open} onClose={() => onClose()} maxWidth=\"sm\" fullWidth>\n            <DialogTitle>邀请紧急联系人</DialogTitle>\n            <DialogContent>\n                <Box component=\"form\" sx={{ mt: 2 }}>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"contacts\"\n                        label=\"联系人 (11位手机号或32位ID)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={4}\n                        variant=\"outlined\"\n                        placeholder=\"13800138000&#10;550e8400e29b41d4a716446655440000\"\n                        value={contacts}\n                        onChange={(e) => setContacts(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"remark\"\n                        label=\"备注名 (可选)\"\n                        type=\"text\"\n                        fullWidth\n                        variant=\"outlined\"\n                        value={remark}\n                        onChange={(e) => setRemark(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    <Autocomplete\n                        freeSolo\n                        id=\"call-type-autocomplete\"\n                        options={availableCallTypes.map((option) => option.name)}\n                        value={callType || ''}\n                        onChange={(event: SyntheticEvent, newValue: string | null) => {\n                            console.log('Call type changed to:', newValue);\n                            setCallType(newValue);\n                        }}\n                        inputValue={callType || ''}\n                        onInputChange={(event, newInputValue, reason) => {\n                            // Only update when the user is typing, not when an option is selected\n                            if (reason === 'input') {\n                                console.log('Input value changed to:', newInputValue);\n                                setCallType(newInputValue);\n                            }\n                        }}\n                        disablePortal\n                        disableClearable\n                        forcePopupIcon={!isTypesLoading}\n                        sx={{ mt: 1, mb: 1, width: '100%' }}\n                        renderInput={(params) => (\n                            <TextField\n                                {...params}\n                                label=\"呼叫类型\"\n                                variant=\"outlined\"\n                                fullWidth\n                                InputProps={{\n                                    ...params.InputProps,\n                                    endAdornment: (\n                                        <>\n                                            {isTypesLoading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                                            {params.InputProps.endAdornment}\n                                        </>\n                                    ),\n                                }}\n                            />\n                        )}\n                        ListboxProps={{\n                            style: {\n                                maxHeight: '200px',\n                                overflow: 'auto',\n                            },\n                        }}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"message\"\n                        label=\"邀请信息 (可选)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={3}\n                        variant=\"outlined\"\n                        placeholder=\"我已将您添加为我的紧急联系人，请接受邀请。\"\n                        value={message}\n                        onChange={(e) => setMessage(e.target.value)}\n                        disabled={isLoading}\n                    />\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => onClose()} disabled={isLoading}>关闭</Button>\n                <Button onClick={handleSendInvitation} variant=\"contained\" disabled={isLoading}>\n                    {isLoading ? <CircularProgress size={24} /> : '发送邀请'}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { request } from \"@fanfanlo\";\n\n/**\n * 获取未处理被邀请信息的请求参数\n */\nexport interface IParamsListPendingReceivedInvitations {\n  // 可以添加分页等参数\n  page?: number;\n  page_size?: number;\n}\n\n/**\n * 未处理的被邀请信息\n */\nexport interface IPendingInvitationInfo {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: 'pending';\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * 获取未处理被邀请信息的响应结果\n */\nexport interface IResultListPendingReceivedInvitations {\n  is_ok: boolean;\n  msg?: string;\n  invitations: IPendingInvitationInfo[];\n}\n\n/**\n * 获取未处理的被邀请信息\n */\nexport async function tmsEmergencyCallListPendingReceivedInvitations(\n  opts: IRequestOptions<IParamsListPendingReceivedInvitations>\n) {\n  return request<IResultListPendingReceivedInvitations, IParamsListPendingReceivedInvitations>(\n    tms.TEmc,\n    tms.MEmcListPendingReceivedInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// 导出服务\nexport const emergencyCallPendingInvitationService = {\n  listPendingReceivedInvitations: tmsEmergencyCallListPendingReceivedInvitations,\n};\n\nexport default emergencyCallPendingInvitationService;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardActions,\n  CircularProgress,\n  Avatar,\n  Chip,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport {\n  Check as CheckIcon,\n  Close as CloseIcon,\n  AccessTime as AccessTimeIcon,\n  Person as PersonIcon,\n  Notifications as NotificationsIcon,\n} from '@mui/icons-material';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { \n  emergencyCallPendingInvitationService,\n  emergencyCallInvitationService,\n  IPendingInvitationInfo,\n  user,\n  AppModelEvent,\n  appModel\n} from '@app/model';\nimport { useProxyWatch } from '@fanfanlo';\n\n// 邀请卡片组件\nfunction PendingInvitationCard({ \n  invitation,\n  onRespond,\n  isProcessing = false,\n}: { \n  invitation: IPendingInvitationInfo;\n  onRespond?: (action: 'accept' | 'decline') => Promise<void>;\n  isProcessing?: boolean;\n}) {\n  const [isProcessingAction, setIsProcessingAction] = useState(false);\n\n  const handleRespond = async (action: 'accept' | 'decline') => {\n    if (!onRespond) return;\n    \n    try {\n      setIsProcessingAction(true);\n      await onRespond(action);\n    } finally {\n      setIsProcessingAction(false);\n    }\n  };\n\n  const isExpired = new Date(invitation.expires_at * 1000) < new Date();\n\n  return (\n    <Card variant=\"outlined\" sx={{ mb: 2, opacity: isProcessing ? 0.7 : 1 }}>\n      <CardContent>\n        <Box display=\"flex\" alignItems=\"center\" mb={2}>\n          <Avatar \n            src={invitation.user_info.avatar_url} \n            alt={invitation.user_info.display_name}\n            sx={{ width: 50, height: 50, mr: 2 }}\n          >\n            {invitation.user_info.display_name?.[0]?.toUpperCase() || '?'}\n          </Avatar>\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\">\n              {invitation.user_info.display_name || '未知用户'}\n            </Typography>\n            {/* <Typography variant=\"body2\" color=\"text.secondary\">\n              ID: {invitation.user_info.user_id}\n            </Typography> */}\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              {formatDistanceToNow(invitation.created_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}\n            </Typography>\n          </Box>\n          <Box textAlign=\"right\">\n            <Chip \n              size=\"small\"\n              icon={<AccessTimeIcon fontSize=\"small\" />}\n              label={isExpired ? '已过期' : `${formatDistanceToNow(invitation.expires_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}`}\n              color={isExpired ? 'error' : 'primary'}\n              variant=\"outlined\"\n            />\n          </Box>\n        </Box>\n        \n        {invitation.message && (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, mb: 1 }}>\n            邀请信息: {invitation.message}\n          </Typography>\n        )}\n\n        <Typography variant=\"body2\" color=\"primary\" sx={{ fontWeight: 'medium' }}>\n          邀请您成为紧急联系人\n        </Typography>\n      </CardContent>\n      \n      {!isExpired && (\n        <CardActions sx={{ justifyContent: 'flex-end', pt: 0 }}>\n          <Button \n            size=\"small\" \n            color=\"error\"\n            startIcon={<CloseIcon />}\n            onClick={() => handleRespond('decline')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            拒绝\n          </Button>\n          <Button \n            size=\"small\" \n            color=\"primary\"\n            variant=\"contained\"\n            startIcon={<CheckIcon />}\n            onClick={() => handleRespond('accept')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            接受\n          </Button>\n        </CardActions>\n      )}\n    </Card>\n  );\n}\n\nconst PendingInvitationsList: React.FC = () => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [invitations, setInvitations] = useState<IPendingInvitationInfo[]>([]);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // 监听用户登录状态\n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n\n  // 加载未处理的被邀请信息\n  const loadPendingInvitations = useCallback(async () => {\n    if (!userToken) {\n      setInvitations([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const res = await emergencyCallPendingInvitationService.listPendingReceivedInvitations({\n        params: {},\n      } as any);\n      \n      if (res.shellIsOk && res.dataIsOk && res.data?.is_ok) {\n        setInvitations(res.data.invitations || []);\n      } else {\n        setError(res.data?.msg || '加载邀请列表失败');\n      }\n    } catch (err) {\n      console.error('加载未处理邀请列表异常:', err);\n      setError('发生未知错误');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userToken]); // 现在可以安全地依赖userToken了\n\n  // 响应邀请\n  const handleRespondToInvite = useCallback(async (invitationId: string, action: 'accept' | 'decline'): Promise<void> => {\n    try {\n      setIsProcessing(true);\n\n      const res = await emergencyCallInvitationService.respondToInvite({\n        params: { invitation_id: invitationId, action },\n      } as any);\n\n      if (!res.shellIsOk || !res.dataIsOk || !res.data?.is_ok) {\n        throw new Error(res.data?.msg || '操作失败');\n      }\n      \n      // 从列表中移除已处理的邀请\n      setInvitations(prev => prev.filter(invite => invite.invitation_id !== invitationId));\n      \n      // 发送邀请列表更新事件\n      appModel.dispatcher.emit(AppModelEvent.InviteListUpdated);\n      \n    } catch (err) {\n      console.error('处理邀请失败:', err);\n      setError(err instanceof Error ? err.message : '操作失败，请重试');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, []);\n\n  // 监听用户登录状态变化\n  useEffect(() => {\n    console.log('PendingInvitationsList - userToken changed:', userToken);\n    if (userToken) {\n      // 有登录用户了，刷新邀请列表\n      loadPendingInvitations();\n    } else {\n      // 清空邀请信息列表\n      setInvitations([]);\n    }\n  }, [userToken]); // 只依赖userToken\n\n  // 监听邀请列表更新事件\n  useEffect(() => {\n    const unsubscribe = appModel.dispatcher.addListener(AppModelEvent.InviteListUpdated, () => {\n      console.log('AppModelEvent.InviteListUpdated - 刷新未处理邀请列表');\n      loadPendingInvitations();\n    });\n\n    return unsubscribe;\n  }, [loadPendingInvitations]); // 依赖loadPendingInvitations函数\n\n  // 如果没有登录用户，不显示任何内容\n  if (!userToken) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" p={2}>\n        {/* <CircularProgress size={24} />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          加载中...\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box p={2}>\n        <Alert severity=\"error\">\n          {error}\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (invitations.length === 0) {\n    return (\n      <Box \n        display=\"flex\" \n        flexDirection=\"column\" \n        alignItems=\"center\" \n        p={2}\n        textAlign=\"center\"\n      >\n        {/* <NotificationsIcon color=\"disabled\" sx={{ fontSize: 48, mb: 1 }} />\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          暂无未处理的邀请\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  return (\n    <Box p={2}>\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\n        <NotificationsIcon color=\"primary\" sx={{ mr: 1 }} />\n        <Typography variant=\"h6\" color=\"primary\">\n          未处理的邀请 ({invitations.length})\n        </Typography>\n      </Box>\n\n      <Stack spacing={2}>\n        {invitations.map((invitation) => (\n          <PendingInvitationCard\n            key={invitation.invitation_id}\n            invitation={invitation}\n            onRespond={(action) => handleRespondToInvite(invitation.invitation_id, action)}\n            isProcessing={isProcessing}\n          />\n        ))}\n      </Stack>\n    </Box>\n  );\n};\n\nexport default PendingInvitationsList;","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\lodash@4.17.21\\\\node_modules\\\\lodash\\\\lodash.js\"","import React, { useState, useCallback } from 'react';\nimport {\n    Box,\n    Switch,\n    Button,\n    Typography,\n    Paper,\n    Collapse,\n    Divider,\n    IconButton,\n    TextField,\n    FormControlLabel,\n    Tooltip,\n    Stack,\n    FormControl,\n    MenuItem,\n    InputLabel,\n    Select,\n} from '@mui/material';\nimport {\n    DragIndicator as DragIndicatorIcon,\n    ExpandLess,\n    Settings,\n    Delete,\n    PlayArrow,\n    Stop,\n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon\n} from '@mui/icons-material';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { debounce } from 'lodash';\nimport { autoJsStoreUtils } from '@droid/android';\n\nconst PRE_ALARM_CONFIG_KEY = 'PRE_ALARM_ACTIONS_CONFIG';\n\ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\ninterface PreAlarmConfig {\n    enabled: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n}\n\nconst defaultSoundResources = [\n    { id: 'beep_short', name: '短提示音' },\n    { id: 'siren_gentle', name: '缓和警报' },\n    { id: 'alarm_clock', name: '闹钟' },\n];\n\nconst SortableActionItem: React.FC<{\n    action: PreAlarmAction;\n    isPlaying: boolean;\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n    onRemove: (id: string) => void;\n    onPreview: (resourceId?: string) => void;\n    onStopPreview: () => void;\n}> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview }) => {\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: isDragging ? 1 : 'auto',\n    };\n\n    return (\n        <Paper\n            ref={setNodeRef}\n            style={style}\n            elevation={isDragging ? 3 : 1}\n            sx={{\n                p: 2,\n                mb: 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                userSelect: 'none',\n            }}\n        >\n            <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                <DragIndicatorIcon />\n            </Box>\n            \n            <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                    <Typography variant=\"subtitle2\">\n                        {action.type === 'sound' ? '声音' : '震动'}\n                    </Typography>\n                    <TextField\n                        size=\"small\"\n                        type=\"number\"\n                        label=\"持续时间 (ms)\"\n                        value={action.duration}\n                        onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\n                        sx={{ width: '100%' }}\n                    />\n                    \n                    {action.type === 'sound' && (\n                        <FormControl size=\"small\" sx={{ width: '100%' }}>\n                            <InputLabel>声音类型</InputLabel>\n                            <Select\n                                value={action.resourceId || ''}\n                                label=\"声音类��\"\n                                onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                startAdornment={\n                                    <Tooltip title={isPlaying ? \"停止\" : \"试听\"}>\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                            sx={{ mr: 1 }}\n                                        >\n                                            {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                        </IconButton>\n                                    </Tooltip>\n                                }\n                            >\n                                {defaultSoundResources.map((sound) => (\n                                    <MenuItem key={sound.id} value={sound.id}>\n                                        {sound.name}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    )}\n                </Box>\n            </Box>\n            \n            <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\">\n                <Delete />\n            </IconButton>\n        </Paper>\n    );\n};\n\nconst PreAlarmConfig2: React.FC = () => {\n    const [config, setConfig] = useState<PreAlarmConfig | null>(null);\n    const [expanded, setExpanded] = useState(false);\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n\n    const debouncedWrite = useCallback(\n        debounce((newConfig: PreAlarmConfig) => {\n            autoJsStoreUtils.write(PRE_ALARM_CONFIG_KEY, newConfig);\n        }, 500),\n        []\n    );\n\n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    React.useEffect(() => {\n        const loadConfig = async () => {\n            const storedConfig = await autoJsStoreUtils.read<PreAlarmConfig>(PRE_ALARM_CONFIG_KEY);\n            if (storedConfig) {\n                const actionsWithIds = storedConfig.actions.map((action) => ({\n                    ...action,\n                    id: action.id || `action-${Math.random().toString(36).substr(2, 9)}`,\n                }));\n                setConfig({\n                    ...storedConfig,\n                    actions: actionsWithIds,\n                });\n            } else {\n                setConfig({\n                    enabled: true,\n                    actions: [],\n                    maxWaitDuration: 30000,\n                });\n            }\n        };\n        loadConfig();\n    }, []);\n\n    const updateConfig = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                const newConfig = { ...prev, ...updates };\n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    const handleToggleEnabled = (event: React.ChangeEvent<HTMLInputElement>) => {\n        updateConfig({ enabled: event.target.checked });\n    };\n\n    const handleAddAction = (type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: 3000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfig({\n            actions: [...(config?.actions || []), newAction],\n        });\n    };\n\n    const handleUpdateAction = (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    };\n\n    const handleRemoveAction = (id: string) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!config || !over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfig({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    };\n\n    const handlePreviewSound = (resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound(); \n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager JavascriptInterface is not available.');\n        }\n    };\n\n    const handleStopSound = () => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    };\n\n    if (!config) {\n        return <Box sx={{ p: 2, textAlign: 'center' }}>加载中...</Box>;\n    }\n\n    return (\n        <Box sx={{ mb: 3 }}>\n            <Paper \n                elevation={1} \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    borderRadius: 1,\n                }}\n            >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"subtitle1\">防误触报警设置</Typography>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={config.enabled}\n                                onChange={handleToggleEnabled}\n                                color=\"primary\"\n                            />\n                        }\n                        label={config.enabled ? '已启用' : '已禁用'}\n                    />\n                </Box>\n                \n                <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={expanded ? <ExpandLess /> : <Settings />}\n                    onClick={() => setExpanded(!expanded)}\n                >\n                    {expanded ? '收起设置' : '设置'}\n                </Button>\n            </Paper>\n\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        mt: 1, \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                            最大等待时间 (毫秒)\n                        </Typography>\n                        <TextField\n                            fullWidth\n                            type=\"number\"\n                            value={config.maxWaitDuration}\n                            onChange={(e) =>\n                                updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })\n                            }\n                            size=\"small\"\n                            InputProps={{\n                                endAdornment: (\n                                    <Typography variant=\"body2\" sx={{ ml: 1 }}>\n                                        毫秒\n                                    </Typography>\n                                ),\n                            }}\n                        />\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Box sx={{ mb: 2 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\">\n                                报警动作 ({config.actions.length})\n                            </Typography>\n                            <Stack direction=\"row\" spacing={1}>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VolumeUpIcon />}\n                                    onClick={() => handleAddAction('sound')}\n                                >\n                                    添加声音\n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VibrationIcon />}\n                                    onClick={() => handleAddAction('vibration')}\n                                >\n                                    添加震动\n                                </Button>\n                            </Stack>\n                        </Box>\n\n                        {config.actions.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography>暂无报警动作，请点击上方按钮添加</Typography>\n                            </Paper>\n                        ) : (\n                            <DndContext\n                                sensors={sensors}\n                                collisionDetection={closestCenter}\n                                onDragEnd={handleDragEnd}\n                            >\n                                <SortableContext\n                                    items={config.actions.map((a) => a.id)}\n                                    strategy={verticalListSortingStrategy}\n                                >\n                                    {config.actions.map((action) => (\n                                        <SortableActionItem\n                                            key={action.id}\n                                            action={action}\n                                            isPlaying={playingSoundId === action.resourceId}\n                                            onUpdate={handleUpdateAction}\n                                            onRemove={handleRemoveAction}\n                                            onPreview={handlePreviewSound}\n                                            onStopPreview={handleStopSound}\n                                        />\n                                    ))}\n                                </SortableContext>\n                            </DndContext>\n                        )}\n                    </Box>\n                </Paper>\n            </Collapse>\n        </Box>\n    );\n};\n\nexport default PreAlarmConfig2;","import React, { useState } from 'react';\nimport { \n    Box, \n    Paper, \n    Typography, \n    Button, \n    TextField, \n    Alert,\n    Divider,\n    Grid\n} from '@mui/material';\nimport { \n    MedicalServices as MedicalIcon,\n    Security as SecurityIcon,\n    Shortcut as ShortcutIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from '@droid/android';\n\n/**\n * 桌面快捷方式配置组件\n * 用于创建医疗呼救和安全呼救的桌面快捷方式\n */\nconst ShortcutConfig: React.FC = () => {\n    const [medicalName, setMedicalName] = useState('意外呼救');\n    const [securityName, setSecurityName] = useState('安全呼救');\n    const [isCreating, setIsCreating] = useState(false);\n    const [message, setMessage] = useState<{type: 'success' | 'error' | 'info', text: string} | null>(null);\n\n    // 创建医疗呼救快捷方式\n    const handleCreateMedicalShortcut = async () => {\n        if (!medicalName.trim()) {\n            setMessage({type: 'error', text: '请输入快捷方式名称'});\n            return;\n        }\n\n        setIsCreating(true);\n        setMessage(null);\n\n        try {\n            // 检查是否支持快捷方式\n            const supportScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.isShortcutSupported();`;\n            const {javaResultString: supportResult} = autoWebViewJs.callScript(supportScript);\n            \n            if (supportResult !== 'true') {\n                setMessage({type: 'error', text: '当前设备不支持创建桌面快捷方式'});\n                return;\n            }\n\n            // 创建医疗呼救快捷方式\n            const script = `com.fanfanlo.emergencycall.manager.ShortcutManager.createMedicalShortcut(\"${medicalName}\");`;\n            const {javaResultString} = autoWebViewJs.callScript(script);\n            \n            if (javaResultString === 'true') {\n                setMessage({type: 'success', text: '医疗呼救快捷方式创建成功！请检查您的桌面。'});\n            } else {\n                setMessage({type: 'error', text: '快捷方式创建失败，请检查权限设置'});\n            }\n        } catch (error) {\n            console.error('Error creating medical shortcut:', error);\n            setMessage({type: 'error', text: '创建快捷方式时发生错误'});\n        } finally {\n            setIsCreating(false);\n        }\n    };\n\n    // 创建安全呼救快捷方式\n    const handleCreateSecurityShortcut = async () => {\n        if (!securityName.trim()) {\n            setMessage({type: 'error', text: '请输入快捷方式名称'});\n            return;\n        }\n\n        setIsCreating(true);\n        setMessage(null);\n\n        try {\n            // 检查是否支持快捷方式\n            const supportScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.isShortcutSupported();`;\n            const {javaResultString: supportResult} = autoWebViewJs.callScript(supportScript);\n            \n            if (supportResult !== 'true') {\n                setMessage({type: 'error', text: '当前设备不支持创建桌面快捷方式'});\n                return;\n            }\n\n            // 创建安全呼救快捷方式\n            const script = `com.fanfanlo.emergencycall.manager.ShortcutManager.createSecurityShortcut(\"${securityName}\");`;\n            const {javaResultString} = autoWebViewJs.callScript(script);\n            \n            if (javaResultString === 'true') {\n                setMessage({type: 'success', text: '安全呼救快捷方式创建成功！请检查您的桌面。'});\n            } else {\n                setMessage({type: 'error', text: '快捷方式创建失败，请检查权限设置'});\n            }\n        } catch (error) {\n            console.error('Error creating security shortcut:', error);\n            setMessage({type: 'error', text: '创建快捷方式时发生错误'});\n        } finally {\n            setIsCreating(false);\n        }\n    };\n\n    // 检查设备支持情况和权限引导\n    const handleCheckSupport = async () => {\n        try {\n            const supportScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.isShortcutSupported();`;\n            const brandScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.getDeviceBrand();`;\n            const guideScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.getPermissionGuideText();`;\n            \n            const {javaResultString: supportResult} = autoWebViewJs.callScript(supportScript);\n            const {javaResultString: brandResult} = autoWebViewJs.callScript(brandScript);\n            const {javaResultString: guideResult} = autoWebViewJs.callScript(guideScript);\n            \n            const supportInfo = `设备支持情况：\n设备品牌: ${brandResult}\n快捷方式支持: ${supportResult === 'true' ? '支持' : '不支持'}\n\n${guideResult}`;\n            \n            setMessage({type: 'info', text: supportInfo});\n        } catch (error) {\n            console.error('Error checking support:', error);\n            setMessage({type: 'error', text: '检查设备支持情况时发生错误'});\n        }\n    };\n    \n    // 检查并请求权限\n    const handleRequestPermission = async () => {\n        try {\n            console.log('开始调用权限引导方法...');\n            \n            // 先测试基础方法是否工作\n            const brandScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.getDeviceBrand();`;\n            const brandResult = autoWebViewJs.callScript(brandScript);\n            console.log('设备品牌测试:', brandResult);\n            \n            if (!brandResult || brandResult.javaResultString === undefined) {\n                throw new Error('基础方法调用失败，可能需要重新编译应用');\n            }\n            \n            // 尝试新的权限引导方法\n            const script = `com.fanfanlo.emergencycall.manager.ShortcutManager.checkAndRequestPermissionWithResult();`;\n            const {javaResultString: result} = autoWebViewJs.callScript(script);\n            console.log('权限引导结果:', result);\n            \n            if (result && result !== 'undefined') {\n                setMessage({\n                    type: result.startsWith('✅') ? 'success' : result.startsWith('❌') ? 'error' : 'info', \n                    text: result\n                });\n            } else {\n                throw new Error('新方法返回undefined，使用兜底方案');\n            }\n        } catch (error) {\n            console.error('权限引导调用出错:', error);\n            console.log('尝试使用兜底方案...');\n            \n            // 兜底方案：使用旧方法 + 手动指引\n            try {\n                const fallbackScript = `com.fanfanlo.emergencycall.manager.ShortcutManager.checkAndRequestShortcutPermission();`;\n                const fallbackResult = autoWebViewJs.callScript(fallbackScript);\n                \n                const brand = autoWebViewJs.callScript(`com.fanfanlo.emergencycall.manager.ShortcutManager.getDeviceBrand();`);\n                const brandName = brand?.javaResultString || 'UNKNOWN';\n                \n                let guideText = '';\n                if (brandName === 'XIAOMI' || brandName === 'REDMI') {\n                    guideText = `\\n\\n小米/Redmi设备权限设置：\\n1. 打开\"设置\" > \"应用设置\" > \"应用管理\"\\n2. 找到\"紧急呼救\"应用\\n3. 点击\"权限管理\" > \"其他权限\"\\n4. 开启\"创建桌面快捷方式\"权限`;\n                } else {\n                    guideText = `\\n\\n请手动前往：\\n设置 > 应用管理 > 紧急呼救 > 权限管理\\n开启\"创建桌面快捷方式\"权限`;\n                }\n                \n                setMessage({\n                    type: 'warning', \n                    text: `⚠️ 权限引导方法可能需要重新编译应用\\n\\n临时解决方案：${guideText}\\n\\n💡 设置完成后，请返回重新创建快捷方式`\n                });\n            } catch (fallbackError) {\n                console.error('兜底方案也失败:', fallbackError);\n                setMessage({\n                    type: 'error', \n                    text: '❌ 权限方法调用失败\\n\\n可能原因：应用需要重新编译\\n\\n临时解决方案：\\n1. 手动前往：设置 > 应用管理 > 紧急呼救\\n2. 开启\"创建桌面快捷方式\"权限\\n3. 返回重新创建快捷方式'\n                });\n            }\n        }\n    };\n\n    return (\n        <Box sx={{ p: 3 }}>\n            <Paper elevation={2} sx={{ p: 3, mb: 3 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                    <ShortcutIcon sx={{ mr: 2, color: 'primary.main' }} />\n                    <Typography variant=\"h5\" component=\"h1\">\n                        桌面快捷方式设置\n                    </Typography>\n                </Box>\n                \n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                    创建桌面快捷方式，可以快速触发紧急呼救功能\n                </Typography>\n\n                {message && (\n                    <Alert \n                        severity={message.type} \n                        sx={{ mb: 3 }}\n                        onClose={() => setMessage(null)}\n                    >\n                        <pre style={{ whiteSpace: 'pre-wrap', margin: 0 }}>\n                            {message.text}\n                        </pre>\n                    </Alert>\n                )}\n\n                <Grid container spacing={3}>\n                    {/* 医疗呼救快捷方式 */}\n                    <Grid item xs={12} md={6}>\n                        <Paper variant=\"outlined\" sx={{ p: 3 }}>\n                            <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                                <MedicalIcon sx={{ mr: 2, color: 'error.main' }} />\n                                <Typography variant=\"h6\">医疗呼救</Typography>\n                            </Box>\n                            \n                            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                                创建医疗紧急呼救快捷方式，点击后直接触发医疗呼救功能\n                            </Typography>\n\n                            <TextField\n                                fullWidth\n                                label=\"快捷方式名称\"\n                                value={medicalName}\n                                onChange={(e) => setMedicalName(e.target.value)}\n                                sx={{ mb: 2 }}\n                                placeholder=\"意外呼救\"\n                            />\n\n                            <Button\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"error\"\n                                onClick={handleCreateMedicalShortcut}\n                                disabled={isCreating}\n                                startIcon={<MedicalIcon />}\n                            >\n                                {isCreating ? '创建中...' : '创建医疗呼救快捷方式'}\n                            </Button>\n                        </Paper>\n                    </Grid>\n\n                    {/* 安全呼救快捷方式 */}\n                    <Grid item xs={12} md={6}>\n                        <Paper variant=\"outlined\" sx={{ p: 3 }}>\n                            <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                                <SecurityIcon sx={{ mr: 2, color: 'warning.main' }} />\n                                <Typography variant=\"h6\">安全呼救</Typography>\n                            </Box>\n                            \n                            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                                创建安全呼救快捷方式（功能开发中，点击显示占位界面）\n                            </Typography>\n\n                            <TextField\n                                fullWidth\n                                label=\"快捷方式名称\"\n                                value={securityName}\n                                onChange={(e) => setSecurityName(e.target.value)}\n                                sx={{ mb: 2 }}\n                                placeholder=\"安全呼救\"\n                            />\n\n                            <Button\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"warning\"\n                                onClick={handleCreateSecurityShortcut}\n                                disabled={isCreating}\n                                startIcon={<SecurityIcon />}\n                            >\n                                {isCreating ? '创建中...' : '创建安全呼救快捷方式'}\n                            </Button>\n                        </Paper>\n                    </Grid>\n                </Grid>\n\n                <Divider sx={{ my: 3 }} />\n\n                {/* 工具按钮 */}\n                <Box sx={{ display: 'flex', gap: 2, justifyContent: 'center', flexWrap: 'wrap' }}>\n                    <Button\n                        variant=\"outlined\"\n                        onClick={handleCheckSupport}\n                        disabled={isCreating}\n                    >\n                        检查设备支持情况\n                    </Button>\n                    \n                    <Button\n                        variant=\"outlined\"\n                        color=\"primary\"\n                        onClick={handleRequestPermission}\n                        disabled={isCreating}\n                    >\n                        打开权限设置\n                    </Button>\n                </Box>\n\n                {/* 使用说明 */}\n                <Box sx={{ mt: 3, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n                    <Typography variant=\"subtitle2\" gutterBottom>\n                        使用说明：\n                    </Typography>\n                    <Typography variant=\"body2\" component=\"div\">\n                        <ul style={{ margin: 0, paddingLeft: '20px' }}>\n                            <li>创建快捷方式后，请在桌面查看</li>\n                            <li>医疗呼救快捷方式会直接触发紧急呼救</li>\n                            <li>安全呼救功能正在开发中，明天会完善</li>\n                            <li>支持自定义快捷方式名称</li>\n                            <li><strong>重要：</strong>小米、华为、OPPO、VIVO等设备需要手动开启权限</li>\n                            <li>如果创建失败，请点击“打开权限设置”按钮</li>\n                        </ul>\n                    </Typography>\n                    \n                    <Box sx={{ mt: 2, p: 1.5, bgcolor: 'warning.light', borderRadius: 1, border: '1px solid', borderColor: 'warning.main' }}>\n                        <Typography variant=\"body2\" color=\"warning.dark\">\n                            <strong>ℹ️ 温馨提示：</strong>\n                            如果创建快捷方式时显示“没有权限”错误，请点击上方“打开权限设置”按钮，\n                            系统会自动跳转到对应的权限设置页面。\n                        </Typography>\n                    </Box>\n                </Box>\n            </Paper>\n        </Box>\n    );\n};\n\nexport default ShortcutConfig;","import { Dialog, DialogContent, IconButton } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\n\n// Add a React import for useRef\nimport React from 'react';\nimport { autoJsStoreUtils, autoWebViewJs, isRealInAndroid } from '@droid/android';\n\ninterface PrivacyDialogProps {\n  // open: boolean;\n  // onClose: () => void;\n  // onResult: (agree: boolean) => void;\n  type: string;\n  area: string;\n}\n\ninterface IPrivacyInfo{\n  agree:boolean;\n  disagreeTime:number;\n}\n\nexport function PrivacyDialog({ type, area }: PrivacyDialogProps) {\n  const url = `/privacies/${type}/${area}.html`;\n  const [iframeSrc, setIframeSrc] = useState(url);\n\n  const [open, setOpen] = useState(false);\n  function onClose() {\n    setOpen(false);\n  }\n\n  useEffect(()=>{\n    setIframeSrc(`/privacies/${type}/${area}.html`)\n  }, [type, area]);\n\n  useEffect(() => {\n    const def:IPrivacyInfo = {agree:false, disagreeTime:0}\n    const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_${type}`, def);\n    const value:IPrivacyInfo = res && 'agree' in res ? res : def;\n    if(!isRealInAndroid){\n      return;\n    }\n    if(value.agree){\n      return\n    }\n    if(value.disagreeTime && value.disagreeTime != 0 &&  value.disagreeTime + 3 * 24 * 60 * 60 * 1000 > Date.now()){\n      return;\n    }\n    setOpen(true)\n  }, []);\n\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      // Basic security check: ensure the message is from a trusted source if possible\n      // For now, we check the data structure.\n      if (event.source !== iframeRef.current?.contentWindow) {\n        return;\n      }\n\n      const { sender, agree } = event.data;\n\n      if (sender === 'privacy_page') {\n        console.log(`Received privacy decision: ${agree ? 'Agreed' : 'Disagreed'}`);\n\n        const value:IPrivacyInfo = {\n          agree,\n          disagreeTime: agree ? 0 : Date.now()\n        }\n        autoJsStoreUtils.write(`privacy_${type}`, value);\n        const s = `\n        var data = new com.fanfanlo.emergencycall.data.PrivacyData(${value.agree}, ${value.disagreeTime});\n        com.fanfanlo.emergencycall.data.PrivacyStateHolder.updateMainPrivacyByJs(data);\n        `\n        autoWebViewJs.callScript(s);\n\n        // onResult(agree);\n        onClose();\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n\n    return () => {\n      window.removeEventListener('message', handleMessage);\n    };\n  }, []);\n\n  const iframeRef = React.useRef<HTMLIFrameElement>(null);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      PaperProps={{\n        sx: {\n          width: '80%',\n          height: '80%',\n          maxWidth: 'none',\n        },\n      }}>\n      <IconButton\n        aria-label=\"close\"\n        onClick={onClose}\n        sx={{\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          color: theme => theme.palette.grey[500],\n        }}>\n        <CloseIcon />\n      </IconButton>\n      <DialogContent sx={{ padding: 0, overflow: 'hidden' }}>\n        {iframeSrc && (\n          <iframe\n            ref={iframeRef}\n            src={iframeSrc}\n            style={{ width: '100%', height: '100%', border: 'none' }}\n            title={`Privacy Policy - ${type}/${area}`}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n\n","import { useEffect, useState } from \"react\";\r\nimport { PrivacyDialog } from \"./PrivacyDialog\";\r\nimport { autoJsStoreUtils } from \"@droid/android\";\r\n\r\n\r\nexport function ListenShowPrivacyContent({type}:{type:string}){\r\n\r\n    const [open, setOpen] = useState(false);\r\n    function onClose() {\r\n        setOpen(false);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const value = autoJsStoreUtils.read(`privacy_${type}`, false)\r\n        console.log('privacy value is', value, typeof value);\r\n    }, [])\r\n    return(\r\n        <PrivacyDialog type={type} area=\"zh-cn\" />\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\nimport { Box, TextField, Button, Typography, Paper } from '@mui/material';\nimport { autoWebViewJs } from '@droid/android';\nimport { parse } from 'path';\n\n\n\nexport const SensorMonitor: React.FC = () => {\n  const [threshold, setThreshold] = useState<string>('5.0');\n  const [isMonitoring, setIsMonitoring] = useState<boolean>(false);\n\n  // Effect to fetch the initial monitoring state from Android\n\n  useEffect(()=>{\n    try {\n      const script = `\n      var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\n      thresholdValue;`;\n      const {javaResultString} = autoWebViewJs.callScript(script);\n      const thresholdValue = parseFloat(javaResultString || '5.0');\n      console.log(\"script get threshold=\", thresholdValue, javaResultString);\n      setThreshold(thresholdValue.toString());\n    } catch (error) {\n      console.error('Error fetching initial threshold value:', error);\n    }\n  }, [])\n  function readIsMonitoring(){\n\n    try {\n      const script = `\n      var isMonitoring = com.fanfanlo.emergencycall.manager.SensorManager.isMonitoring();\n      isMonitoring;`;\n      const {javaResultString} = autoWebViewJs.callScript(script);\n      const isMonitoring = javaResultString === \"true\";\n      console.log(\"script get isMonitoring=\", isMonitoring, javaResultString);\n      setIsMonitoring(isMonitoring);\n    } catch (error) {\n      console.error('Error fetching initial monitoring state:', error);\n    }\n  }\n  useEffect(() => {\n    readIsMonitoring();\n  }, []);\n\n  const handleSetThreshold = () => {\n    const thresholdValue = parseFloat(threshold);\n    if (isNaN(thresholdValue)) {\n      alert('请输入一个有效的数字作为阈值。');\n      return;\n    }\n    try {\n      // This script now ONLY updates the threshold.\n      const script = `com.fanfanlo.emergencycall.manager.SensorManager.updateThreshold(${thresholdValue});`;\n      autoWebViewJs.callScript(script);\n      alert(`阈值已设置为: ${thresholdValue}`);\n    } catch (error) {\n      console.error('Error calling updateThreshold:', error);\n      alert('设置阈值失败。请确保您在安卓应用中。');\n    }\n  };\n\n  const handleToggleMonitoring = () => {\n    try {\n      if (isMonitoring) {\n        const script = `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`;\n        autoWebViewJs.callScript(script);\n      } else {\n        const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\n        autoWebViewJs.callScript(script);\n      }\n      readIsMonitoring();\n    } catch (error) {\n      console.error('Error toggling monitoring:', error);\n      alert('切换监控状态失败。请确保您在安卓应用中。');\n    }\n  };\n\n  return (\n    <Paper elevation={3} sx={{ padding: 2, margin: 2 }}>\n      <Typography variant=\"h6\" gutterBottom>\n        传感器监控控制\n      </Typography>\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, marginBottom: 2 }}>\n        <TextField\n          label=\"震动阈值\"\n          variant=\"outlined\"\n          type=\"number\"\n          value={threshold}\n          onChange={(e) => setThreshold(e.target.value)}\n          size=\"small\"\n        />\n        <Button variant=\"contained\" onClick={handleSetThreshold}>\n          设置\n        </Button>\n      </Box>\n      <Button\n        variant=\"contained\"\n        color={isMonitoring ? 'error' : 'primary'}\n        onClick={handleToggleMonitoring}\n        fullWidth\n      >\n        {isMonitoring ? '停止监控' : '开始监控'}\n      </Button>\n    </Paper>\n  );\n};\n\nexport default SensorMonitor;\n\n\n","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Box, Button } from \"@mui/material\";\r\n\r\n\r\nexport function TestEmergencyCall() {\r\n    function onClick(){\r\n        const script = `\r\n        var instance = com.fanfanlo.emergencycall.service.SensorMonitoringService.instance;\r\n        if(instance){\r\n            instance.triggerEmergencyCall();\r\n        }\r\n        `\r\n        autoWebViewJs.callScript(script);\r\n    }\r\n    return(\r\n        <Box sx={{mt:\"10px\", mb:\"10px\"\r\n        }}>\r\n            <Button onClick={onClick}>\r\n                测试呼救\r\n            </Button>\r\n        </Box>  \r\n    )\r\n}","import React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Alert,\n  Snackbar,\n  Typography,\n  Card,\n  CardContent,\n  Stack\n} from '@mui/material';\nimport {\n  VolumeOff as VolumeOffIcon,\n  NotificationsOff as VibrationOffIcon,\n  Stop as StopIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\n\nconst fileLog = new Log(false, 'EmergencyAudioControl');\n\n/**\n * 紧急呼救音频和震动控制组件\n * 提供停止预报警震动/铃声、求救循环音频、紧急联系人报警音频/震动的功能\n */\nconst EmergencyAudioControl: React.FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  /**\n   * 检查是否在Android WebView环境中\n   */\n  const isAndroidWebView = (): boolean => {\n    try {\n      return !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n    } catch (e) {\n      fileLog.error('检查WebView环境时出错:', e);\n      return false;\n    }\n  };\n\n  /**\n   * 调用Android方法的通用函数\n   */\n  const callAndroidMethod = async (methodName: string, description: string): Promise<void> => {\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      if (!isAndroidWebView()) {\n        throw new Error('当前不在Android WebView环境中');\n      }\n\n      let script = '';\n      \n      // 根据方法名构建不同的脚本\n      switch (methodName) {\n        case 'stopPreAlarmVibrationAndSound':\n          script = `\n            try {\n              com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();\n            } catch(e) {\n              console.log('停止监控失败:', e);\n            }\n          `;\n          break;\n          \n        case 'stopEmergencyLoopAudio':\n          script = `\n            try {\n              // 停止V1系统声音管理器\n              com.fanfanlo.emergencycall.manager.SoundManager.stop();\n              com.fanfanlo.emergencycall.manager.AlarmSoundManager.stop();\n              \n              // 停止V2系统声音管理器\n              com.fanfanlo.emergencycall.v2.core.EmergencySystemV2.forceStopHelpSound();\n            } catch(e) {\n              console.log('停止呼救循环音频失败:', e);\n            }\n          `;\n          break;\n          \n        case 'stopContactAlertVibrationAndSound':\n          script = `\n            try {\n              // 调用WebViewActivity的stopAlarm接口，基于role自动处理\n              if(typeof Android !== 'undefined' && typeof Android.stopAlarm === 'function') {\n                Android.stopAlarm();\n              } else {\n                console.log('Android.stopAlarm接口不可用');\n              }\n            } catch(e) {\n              console.log('停止联系人报警声音失败:', e);\n            }\n          `;\n          break;\n          \n        case 'stopAllEmergencyAudioAndVibration':\n          script = `\n            try {\n              // 停止监控\n              com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();\n              \n              // 停止呼救者声音 (V1 + V2)\n              com.fanfanlo.emergencycall.manager.SoundManager.stop();\n              com.fanfanlo.emergencycall.manager.AlarmSoundManager.stop();\n              com.fanfanlo.emergencycall.v2.core.EmergencySystemV2.forceStopHelpSound();\n              \n              // 停止联系人报警声音 (基于role自动处理)\n              if(typeof Android !== 'undefined' && typeof Android.stopAlarm === 'function') {\n                Android.stopAlarm();\n              }\n            } catch(e) {\n              console.log('停止所有紧急音频和震动失败:', e);\n            }\n          `;\n          break;\n          \n        default:\n          throw new Error(`未知的方法: ${methodName}`);\n      }\n\n      fileLog.log(`调用Android脚本: ${script}`);\n      \n      const result = autoWebViewJs.callScript(script);\n      fileLog.log(`${methodName}调用结果:`, result);\n\n      setMessage({\n        type: 'success',\n        text: `${description}成功`\n      });\n    } catch (error) {\n      fileLog.error(`${methodName}调用失败:`, error);\n      setMessage({\n        type: 'error',\n        text: `${description}失败: ${error instanceof Error ? error.message : '未知错误'}`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * 停止预报警震动和铃声\n   */\n  const stopPreAlarmVibrationAndSound = () => {\n    callAndroidMethod('stopPreAlarmVibrationAndSound', '停止预报警震动和铃声');\n  };\n\n  /**\n   * 停止求救循环音频\n   */\n  const stopEmergencyLoopAudio = () => {\n    callAndroidMethod('stopEmergencyLoopAudio', '停止求救循环音频');\n  };\n\n  /**\n   * 停止紧急联系人报警震动和铃声\n   */\n  const stopContactAlertVibrationAndSound = () => {\n    callAndroidMethod('stopContactAlertVibrationAndSound', '停止紧急联系人报警震动和铃声');\n  };\n\n  /**\n   * 停止所有紧急呼救相关的音频和震动\n   */\n  const stopAllEmergencyAudioAndVibration = () => {\n    callAndroidMethod('stopAllEmergencyAudioAndVibration', '停止所有紧急呼救音频和震动');\n  };\n\n  /**\n   * 关闭消息提示\n   */\n  const handleCloseMessage = () => {\n    setMessage(null);\n  };\n\n  return (\n    <Card sx={{ mb: 2 }}>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          🔕 紧急呼救音频控制\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n          控制和停止紧急呼救相关的音频和震动效果\n        </Typography>\n\n        <Stack spacing={2}>\n          {/* 停止预报警 */}\n          <Button\n            variant=\"contained\"\n            color=\"warning\"\n            startIcon={<VibrationOffIcon />}\n            onClick={stopPreAlarmVibrationAndSound}\n            disabled={loading}\n            fullWidth\n          >\n            停止预报警震动和铃声\n          </Button>\n\n          {/* 停止求救循环音频 */}\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            startIcon={<VolumeOffIcon />}\n            onClick={stopEmergencyLoopAudio}\n            disabled={loading}\n            fullWidth\n          >\n            停止求救循环音频\n          </Button>\n\n          {/* 停止联系人报警 */}\n          <Button\n            variant=\"contained\"\n            color=\"info\"\n            startIcon={<VibrationOffIcon />}\n            onClick={stopContactAlertVibrationAndSound}\n            disabled={loading}\n            fullWidth\n          >\n            停止联系人报警震动和铃声\n          </Button>\n\n          {/* 停止所有 */}\n          <Button\n            variant=\"contained\"\n            color=\"error\"\n            startIcon={<StopIcon />}\n            onClick={stopAllEmergencyAudioAndVibration}\n            disabled={loading}\n            fullWidth\n            sx={{ mt: 1 }}\n          >\n            停止所有紧急音频和震动\n          </Button>\n        </Stack>\n\n        {/* 状态提示 */}\n        <Snackbar\n          open={!!message}\n          autoHideDuration={6000}\n          onClose={handleCloseMessage}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert \n            onClose={handleCloseMessage} \n            severity={message?.type || 'info'}\n            sx={{ width: '100%' }}\n          >\n            {message?.text}\n          </Alert>\n        </Snackbar>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default EmergencyAudioControl;","import React, { useState } from 'react';\nimport {\n  Button,\n  Snackbar,\n  Alert,\n  Fab,\n  Tooltip\n} from '@mui/material';\nimport {\n  Stop as StopIcon,\n  VolumeOff as VolumeOffIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\n\nconst fileLog = new Log(false, 'EmergencyStopButton');\n\ninterface EmergencyStopButtonProps {\n  variant?: 'button' | 'fab';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n}\n\n/**\n * 紧急停止按钮组件\n * 快速停止所有紧急呼救相关的音频和震动\n */\nconst EmergencyStopButton: React.FC<EmergencyStopButtonProps> = ({ \n  variant = 'button',\n  size = 'medium',\n  fullWidth = false\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  /**\n   * 检查是否在Android WebView环境中\n   */\n  const isAndroidWebView = (): boolean => {\n    try {\n      return !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n    } catch (e) {\n      fileLog.error('检查WebView环境时出错:', e);\n      return false;\n    }\n  };\n\n  /**\n   * 停止所有紧急呼救音频和震动\n   */\n  const handleStopAllEmergencyAudio = async (): Promise<void> => {\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      if (!isAndroidWebView()) {\n        throw new Error('当前不在Android WebView环境中');\n      }\n\n      fileLog.log('开始停止所有紧急音频和震动...');\n\n      // 尝试通过 SensorMonitoringService 停止紧急呼救\n      const stopEmergencyMethods = [\n        // 尝试停止紧急呼救服务\n        `\n        var instance = com.fanfanlo.emergencycall.service.SensorMonitoringService.instance;\n        if(instance && typeof instance.stopEmergencyCall === 'function'){\n          instance.stopEmergencyCall();\n        }\n        `,\n        // 尝试停止监控\n        `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`,\n        // 尝试通过 SoundManager 停止声音\n        `\n        try {\n          com.fanfanlo.emergencycall.manager.SoundManager.stopAllSounds();\n        } catch(e) {\n          // 如果方法不存在，忽略错误\n        }\n        `,\n        // 尝试其他可能的停止方法\n        `\n        try {\n          var instance = com.fanfanlo.emergencycall.service.SensorMonitoringService.instance;\n          if(instance && typeof instance.cancelEmergencyCall === 'function'){\n            instance.cancelEmergencyCall();\n          }\n        } catch(e) {\n          // 如果方法不存在，忽略错误\n        }\n        `\n      ];\n\n      for (const script of stopEmergencyMethods) {\n        try {\n          fileLog.log(`调用停止脚本: ${script.trim()}`);\n          autoWebViewJs.callScript(script);\n        } catch (methodError) {\n          fileLog.warn(`停止方法调用失败:`, methodError);\n          // 继续尝试其他方法\n        }\n      }\n\n      setMessage({\n        type: 'success',\n        text: '已尝试停止所有紧急音频和震动'\n      });\n    } catch (error) {\n      fileLog.error('停止紧急音频失败:', error);\n      setMessage({\n        type: 'error',\n        text: `停止失败: ${error instanceof Error ? error.message : '未知错误'}`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * 关闭消息提示\n   */\n  const handleCloseMessage = () => {\n    setMessage(null);\n  };\n\n  // 浮动操作按钮样式\n  if (variant === 'fab') {\n    return (\n      <>\n        <Tooltip title=\"停止所有紧急音频和震动\" placement=\"left\">\n          <Fab\n            color=\"error\"\n            onClick={handleStopAllEmergencyAudio}\n            disabled={loading}\n            size={size}\n            sx={{\n              position: 'fixed',\n              bottom: 80,\n              right: 16,\n              zIndex: 1000\n            }}\n          >\n            {loading ? <VolumeOffIcon /> : <StopIcon />}\n          </Fab>\n        </Tooltip>\n\n        <Snackbar\n          open={!!message}\n          autoHideDuration={4000}\n          onClose={handleCloseMessage}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert \n            onClose={handleCloseMessage} \n            severity={message?.type || 'info'}\n            sx={{ width: '100%' }}\n          >\n            {message?.text}\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  // 普通按钮样式\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"error\"\n        size={size}\n        fullWidth={fullWidth}\n        startIcon={loading ? <VolumeOffIcon /> : <StopIcon />}\n        onClick={handleStopAllEmergencyAudio}\n        disabled={loading}\n        sx={{ mb: 1 }}\n      >\n        🔕 停止紧急音频\n      </Button>\n\n      <Snackbar\n        open={!!message}\n        autoHideDuration={4000}\n        onClose={handleCloseMessage}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert \n          onClose={handleCloseMessage} \n          severity={message?.type || 'info'}\n          sx={{ width: '100%' }}\n        >\n          {message?.text}\n        </Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default EmergencyStopButton;","import { AppShell, TabbarContainer } from '@app/ui';\nimport { MeetingRoom5 } from '@im/livekit';\nimport { IMOpenPageLink } from '@im/matrix';\nimport { Box, Button, Grid2 } from '@mui/material';\nimport { InviteContactDialog } from '@src/components/dialogs/InviteContactDialog';\nimport InvitationManager from '@src/components/InvitationManager/InvitationManager';\nimport { JpushIsInitialized } from '@src/components/jpush/IsInitialized';\nimport { NavBar } from '@src/components/navbar/NavBar';\nimport PendingInvitationsList from '@src/components/PendingInvitationsList/PendingInvitationsList';\nimport PreAlarmConfig2 from '@src/components/pre-alarm-config2';\nimport ShortcutConfig from '@src/components/shortcut-config/ShortcutConfig';\nimport { ListenShowPrivacyContent } from '@src/components/privacies/ListenShowPrivacyContent';\nimport { SensorMonitor } from '@src/components/sensor-monitor/SensorMonitor';\nimport { TestEmergencyCall } from '@src/components/test/TestEmergencyCall';\nimport EmergencyAudioControl from '@src/components/emergency-audio-control/EmergencyAudioControl';\nimport EmergencyStopButton from '@src/components/emergency-audio-control/EmergencyStopButton';\nimport { mainModel } from '@src/libs/mc/main/MainModel';\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport MeetingList from '@src/components/meeting-list/MeetingList';\n\nfunction Content() {\n  const [openInviteDialog, setOpenInviteDialog] = useState(false);\n\n  return (\n    <Box sx={{ my: 2, p: 2 }}>\n      {/* 紧急停止按钮 - 置顶显示 */}\n      {/* <EmergencyStopButton fullWidth size=\"large\" /> */}\n      \n      <ListenShowPrivacyContent type=\"main\" />\n      {/* <InvitationManager /> */}\n      <MeetingList />\n      <PendingInvitationsList />\n      <PreAlarmConfig2 />\n      {/* <PreAlarmConfigComponent /> */}\n      <EmergencyAudioControl />\n      {/* <JpushIsInitialized /> */}\n      <TestEmergencyCall />\n      <Grid2 container spacing={2} sx={{ mb: 2 }}>\n        <Grid2 size={6}>\n          <Button variant=\"contained\" onClick={() => setOpenInviteDialog(true)}>\n            邀请紧急联系人\n          </Button>\n        </Grid2>\n        <Link href=\"/contacts\" style={{ textDecoration: 'none' }}>\n          联系人管理\n        </Link>\n      </Grid2>\n      <SensorMonitor />\n      {openInviteDialog && <InviteContactDialog open={openInviteDialog} onClose={() => setOpenInviteDialog(false)} />}\n\n      {/* <MeetingRoom5\n        roomName=\"test-room\"\n        userName={`user-${Math.random().toString(36).substring(2, 8)}`}\n        livekitConfig={mainModel.appConfig.livekit}\n        // role=\"initiator\" // Add role for testing\n      />\n       */}\n      <ShortcutConfig />\n      \n      <Link href={\"/logs\"}>日志</Link>\n      <IMOpenPageLink />\n      <Box sx={{ mt: \"2rem\" }}></Box>\n      \n      {/* 浮动紧急停止按钮 */}\n      <EmergencyStopButton variant=\"fab\" />\n    </Box>\n  );\n}\n\nexport default function Home() {\n  return (\n    <AppShell>\n      <TabbarContainer titleConf={{ ns: 'emergency-call/pages/home/content', key: 'home.title' }} navBar={<NavBar />}>\n        <Content />\n      </TabbarContainer>\n    </AppShell>\n  );\n}\n","import { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf, ITitleI18nNsConf, ITitleI18nTitleConf } from '.';\r\nimport { isBuild, isDev, isServer, loadI18nValue, publicRuntimeConfig } from '@fanfanlo';\r\nimport { read } from 'fs';\r\nimport { useTranslation } from '@fanfanlo';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  const {t} = useTranslation(\"app-ui/components/page/content\")\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>{t(\"PageContent.refresh\")}</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ flexGrow: 1, overflow: 'auto', padding: \"0px\" }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        \r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { IRequestHandler, request } from \"@fanfanlo\";\n\n/**\n * 获取所有邀请的请求参数\n */\nexport interface IParamsListAllInvitations {\n  // 可以添加分页等参数\n  page?: number;\n  page_size?: number;\n}\n\n/**\n * 用户信息\n */\nexport interface IInvitationUserInfo {\n  user_id: string;\n  display_name: string;\n  avatar_url?: string;\n}\n\n// 邀请状态类型\nexport type InviteStatus = 'pending' | 'accepted' | 'declined' | 'expired' | 'cancelled';\n\n// 邀请记录详情\nexport interface IInvitationDetails {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: InviteStatus;\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * 获取所有邀请的响应结果\n */\nexport interface IResultListAllInvitations {\n  is_ok: boolean;\n  msg?: string;\n  sent_invitations: IInvitationDetails[];\n  received_invitations: IInvitationDetails[];\n}\n\n/**\n * 响应邀请的请求参数\n */\nexport interface IParamsRespondToInvite {\n  invitation_id: string;\n  action: 'accept' | 'decline' | 'cancel' | 'remove';\n}\n\n/**\n * 获取所有邀请（发送和接收的）\n */\nexport async function tmsEmergencyCallListAllInvitations(\n  opts: IRequestOptions<IParamsListAllInvitations>\n) {\n  return request<IResultListAllInvitations, IParamsListAllInvitations>(\n    tms.TEmc,\n    tms.MEmcListAllInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n/**\n * 取消或删除邀请\n * @param invitationId 邀请ID\n * @param isReceived 是否是接收的邀请\n * @returns Promise\n */\nexport async function cancelOrRemoveInvitation(\n  invitationId: string,\n  isReceived: boolean\n) {\n  const action = isReceived ? 'remove' : 'cancel';\n  return emergencyCallInvitationService.respondToInvite({\n    params: {\n      invitation_id: invitationId,\n      action\n    }\n  } as any);\n}\n\n/**\n * 响应邀请\n */\nexport async function tmsEmergencyCallRespondToInvite(\n  opts: IRequestOptions<IParamsRespondToInvite>\n) {\n  return request<{ is_ok: boolean; msg?: string }, IParamsRespondToInvite>(\n    tms.TEmc,\n    tms.MEmcRespondToInvite,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// 导出所有接口\nexport const emergencyCallInvitationService = {\n  listAllInvitations: tmsEmergencyCallListAllInvitations,\n  respondToInvite: tmsEmergencyCallRespondToInvite,\n};\n\nexport default emergencyCallInvitationService;\n","'use client';\r\nimport { BottomNavigation, BottomNavigationAction, Box, CssBaseline, Paper, Stack } from '@mui/material';\r\n\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport StorefrontIcon from '@mui/icons-material/Storefront';\r\nimport { useRouter } from 'next/router';\r\nimport React, { PropsWithChildren } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ITitleI18nConf } from '../page';\r\nimport AndroidPageContent from '../page/AndroidPageContent';\r\nimport CreateIcon from '@mui/icons-material/Create';\r\n// interface TabInfoType {\r\n//   label: string;\r\n//   value: string;\r\n//   icon: React.ReactNode;\r\n// }\r\n\r\nfunction BottomBar({navBar}:{navBar?:React.ReactNode}) {\r\n  return <Paper\r\n    id=\"bottom-navigation\"\r\n    sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}\r\n    elevation={3}>\r\n    {/* <NavBar /> */}\r\n    {navBar}\r\n  </Paper>;\r\n}\r\n// function NavBar() {\r\n//   const router = useRouter();\r\n//   const { pathname } = router;\r\n//   const { t } = useTranslation('app-ui/components/tabbar/content');\r\n//   const tabInfoList: TabInfoType[] = [\r\n//     { label: t('content.home'), value: '/', icon: <HomeIcon /> },\r\n//     // { label: t('content.create'), value: '/script-creator', icon: <CreateIcon /> },\r\n//     // { label: t('content.market'), value: '/market', icon: <StorefrontIcon /> },\r\n//     { label: t('content.settings'), value: '/settings', icon: <SettingsIcon /> },\r\n//   ];\r\n//   return (\r\n\r\n//     <BottomNavigation showLabels value={pathname}>\r\n//       {tabInfoList.map(e => (\r\n//         <BottomNavigationAction\r\n//           key={e.value}\r\n//           label={e.label}\r\n//           icon={e.icon}\r\n//           data-id={`tabbar-${e.value}`}\r\n//           className={pathname === e.value ? 'Mui-selected' : ''}\r\n//           onClick={() => {\r\n//             if (pathname === e.value) return;\r\n//             router.push(e.value);\r\n//           }}\r\n//         />\r\n//       ))}\r\n//     </BottomNavigation>\r\n//   );\r\n// }\r\n\r\n\r\n// testWatchUpdates()\r\nexport function TabbarContainer({ children, titleConf, navBar }: {titleConf?:ITitleI18nConf, navBar:React.ReactNode} & PropsWithChildren)  {\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', height2: '100vh' }}>\r\n      <CssBaseline />\r\n      <Stack direction={\"column\"} spacing={3}\r\n      \r\n      >\r\n        <AndroidPageContent titleConf={titleConf}>\r\n          {children}\r\n        </AndroidPageContent>\r\n        <BottomBar navBar={navBar} />\r\n      </Stack>\r\n    </Box>\r\n  );\r\n}\r\n\r\n"],"names":["useRouter","useTranslation","HomeIcon","SettingsIcon","BottomNavigation","BottomNavigationAction","NavBar","router","pathname","t","tabInfoList","label","value","icon","showLabels","map","e","data-id","className","onClick","push","initReactI18next","LanguageDetector","Backend","i18next","Log","isServer","fileMapUtils","fileDateVersion","i18nLogger","windowHref","window","u","URL","location","href","parent","origin","backendOptions","loadPath","lngs","namespaces","log","sub","pause","lng","p","ps","split","splice","length","join","getFile","parse","data","languages","l","JSON","print","backend","init","i18n","on","i18nInit","_fileDateVersion","use","load","fallbackLng","partialBundledLanguages","ns","debug","interpolation","escapeValue","detection","caches","namespace","key","res","console","error","loaded","msg","arguments","createContext","storeUtils","s","create","StorePageContext","StorePageDynamicContext","toProxy","watchUpdates","getConfig","useEffect","I18nextProvider","checkReloadPage","publicRuntimeConfig","isDevelopment","indexOf","searchParams","htmlRefreshTime","get","newUrl","set","String","Date","now","toString","refreshTime","Number","AppShell","children","scrollKey","dynamicKey","o","read","write","beforePopState","state","clearAll","info","x","y","listenScroll","requestAnimationFrame","scrollTo","onScroll","scrollX","scrollY","addEventListener","unsub","removeEventListener","request","tms","tmsEmcInviteContacts","opts","TEmc","MEmcInviteContacts","params","gateway","handler","tmsEmcGetContactTypes","MEmcGetContactTypes","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Box","CircularProgress","Autocomplete","useState","useCallback","useRef","user","toast","matrixUser","authService","useProxyWatch","fileLogger","isValidIdentity","text","test","is11DigitNumber","InviteContactDialog","open","onClose","onInviteSent","uiLogger","contacts","setContacts","remark","setRemark","callType","setCallType","availableCallTypes","setAvailableCallTypes","message","setMessage","isLoading","setIsLoading","isTypesLoading","setIsTypesLoading","pendingParams","setPendingParams","executionLock","accessToken","userData","userInfo","loginResponse","access_token","isUserLoggedIn","sessionData","global_user_info","userToken","storeData","user_token","current","finalParams","matrix_access_token","type","executeApiCall","responseData","printLog","err","shellIsOk","dataIsOk","errorMessage","results","successResults","filter","r","result_code","infoResults","errorResults","success","infoMessages","Boolean","errorMessages","fetchCallTypes","logger","stringify","types","formattedTypes","id","uuid","name","is_system","defaultType","warn","handleSendInvitation","contactInputs","c","trim","contactIdentities","input","identity","identityType","appLoggedIn","showLoginDialog","currentAccessToken","apiParams","maxWidth","fullWidth","component","sx","mt","autoFocus","margin","multiline","rows","variant","placeholder","onChange","target","disabled","freeSolo","options","option","event","newValue","inputValue","onInputChange","newInputValue","reason","disablePortal","disableClearable","forcePopupIcon","mb","width","renderInput","InputProps","endAdornment","color","size","ListboxProps","style","maxHeight","overflow","tmsEmergencyCallListPendingReceivedInvitations","MEmcListPendingReceivedInvitations","emergencyCallPendingInvitationService","listPendingReceivedInvitations","React","Typography","Card","CardContent","CardActions","Avatar","Chip","Alert","Stack","Check","CheckIcon","Close","CloseIcon","AccessTime","AccessTimeIcon","Notifications","NotificationsIcon","formatDistanceToNow","zhCN","emergencyCallInvitationService","AppModelEvent","appModel","PendingInvitationCard","invitation","onRespond","isProcessing","isProcessingAction","setIsProcessingAction","handleRespond","action","isExpired","expires_at","opacity","display","alignItems","src","user_info","avatar_url","alt","display_name","height","mr","toUpperCase","flexGrow","created_at","addSuffix","locale","textAlign","fontSize","fontWeight","justifyContent","pt","startIcon","PendingInvitationsList","setError","invitations","setInvitations","setIsProcessing","loadPendingInvitations","is_ok","handleRespondToInvite","invitationId","respondToInvite","invitation_id","Error","prev","invite","dispatcher","emit","InviteListUpdated","unsubscribe","addListener","flexDirection","severity","spacing","Switch","Paper","Collapse","Divider","IconButton","FormControlLabel","Tooltip","FormControl","MenuItem","InputLabel","Select","DragIndicator","DragIndicatorIcon","ExpandLess","Settings","Delete","PlayArrow","Stop","VolumeUp","VolumeUpIcon","Vibration","VibrationIcon","DndContext","closestCenter","KeyboardSensor","PointerSensor","TouchSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","useSortable","verticalListSortingStrategy","CSS","debounce","autoJsStoreUtils","PRE_ALARM_CONFIG_KEY","defaultSoundResources","SortableActionItem","isPlaying","onUpdate","onRemove","onPreview","onStopPreview","attributes","listeners","setNodeRef","transform","transition","isDragging","Transform","zIndex","ref","elevation","gap","userSelect","cursor","touchAction","duration","parseInt","resourceId","startAdornment","title","sound","PreAlarmConfig2","config","setConfig","expanded","setExpanded","playingSoundId","setPlayingSoundId","debouncedWrite","newConfig","sensors","activationConstraint","distance","delay","tolerance","coordinateGetter","loadConfig","storedConfig","actionsWithIds","actions","Math","random","substr","enabled","maxWaitDuration","updateConfig","updates","handleToggleEnabled","checked","handleAddAction","newAction","handleUpdateAction","handleRemoveAction","handleDragEnd","active","over","oldIndex","findIndex","a","newIndex","handlePreviewSound","handleStopSound","SoundManager","previewSound","stopPreview","borderRadius","control","in","border","borderColor","gutterBottom","ml","my","direction","collisionDetection","onDragEnd","items","strategy","Grid","MedicalServices","MedicalIcon","Security","SecurityIcon","Shortcut","ShortcutIcon","autoWebViewJs","ShortcutConfig","medicalName","setMedicalName","securityName","setSecurityName","isCreating","setIsCreating","handleCreateMedicalShortcut","supportScript","javaResultString","supportResult","callScript","script","handleCreateSecurityShortcut","handleCheckSupport","brandScript","guideScript","brandResult","guideResult","supportInfo","handleRequestPermission","undefined","result","startsWith","fallbackScript","fallbackResult","brand","brandName","guideText","fallbackError","pre","whiteSpace","container","item","xs","md","flexWrap","bgcolor","ul","paddingLeft","li","strong","isRealInAndroid","PrivacyDialog","area","url","iframeSrc","setIframeSrc","setOpen","def","agree","disagreeTime","handleMessage","iframeRef","source","contentWindow","sender","PaperProps","aria-label","position","right","top","theme","palette","grey","padding","iframe","ListenShowPrivacyContent","SensorMonitor","threshold","setThreshold","isMonitoring","setIsMonitoring","thresholdValue","parseFloat","readIsMonitoring","handleSetThreshold","isNaN","alert","handleToggleMonitoring","marginBottom","TestEmergencyCall","Snackbar","VolumeOff","VolumeOffIcon","NotificationsOff","VibrationOffIcon","StopIcon","fileLog","EmergencyAudioControl","loading","setLoading","isAndroidWebView","callAndroidMethod","methodName","description","stopPreAlarmVibrationAndSound","stopEmergencyLoopAudio","stopContactAlertVibrationAndSound","stopAllEmergencyAudioAndVibration","handleCloseMessage","autoHideDuration","anchorOrigin","vertical","horizontal","Fab","EmergencyStopButton","handleStopAllEmergencyAudio","stopEmergencyMethods","methodError","placement","bottom","TabbarContainer","IMOpenPageLink","Grid2","Link","MeetingList","Content","openInviteDialog","setOpenInviteDialog","textDecoration","Home","titleConf","navBar","Container","useContext","isDev","loadI18nValue","Reload","reload","toLocaleString","ScrollP","index","PageContent","scroll","clazz","loadTitle","document","getElementsByClassName","scrollTop","passive","AndroidPageContent","tmsEmergencyCallListAllInvitations","MEmcListAllInvitations","cancelOrRemoveInvitation","isReceived","tmsEmergencyCallRespondToInvite","MEmcRespondToInvite","listAllInvitations","CssBaseline","BottomBar","left","height2"],"sourceRoot":"","ignoreList":[1,10]}