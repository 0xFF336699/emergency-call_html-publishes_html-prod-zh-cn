{"version":3,"file":"static/chunks/6611-ebd46e479e0a36d8.js","mappings":"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","sources":["webpack://_N_E/./src/components/pages/home/components/AddWidgetButton.tsx","webpack://_N_E/./src/components/pages/home/components/AddSecurityWidgetButton.tsx","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_all_invitations.ts","webpack://_N_E/../../libs/app/model/src/remote/emc/inviteContacts.ts","webpack://_N_E/../../libs/app/model/src/remote/emc/tmsEmcGetContactTypes.ts","webpack://_N_E/./src/components/dialogs/InviteContactDialog.tsx","webpack://_N_E/./src/components/pages/home/components/InviteEmergencyContactButton.tsx","webpack://_N_E/./src/components/pages/home/components/ContactsManagementButton.tsx","webpack://_N_E/./src/components/pages/home/components/DesktopShortcutButton.tsx","webpack://_N_E/./src/components/pages/home/components/ProductIntroductionButton.tsx","webpack://_N_E/./src/components/pages/home/components/UserGuideButton.tsx","webpack://_N_E/./src/components/emergency-audio-control/stopAllHandler.ts","webpack://_N_E/./src/components/emergency-audio-control/EmergencyStopButton.tsx","webpack://_N_E/./src/components/emergency-tts-settings/EmergencyTTSSettings.tsx","webpack://_N_E/./src/components/emergency-tts-settings/index.ts","webpack://_N_E/./src/components/error-display/ErrorDisplay.tsx","webpack://_N_E/./src/components/pages/home/components/PermissionStatusPanel.tsx","webpack://_N_E/../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/lodash.js","webpack://_N_E/./src/components/pages/home/components/PreAlarmConfig.tsx","webpack://_N_E/./src/components/pages/home/components/EmergencyTTSSettings.tsx","webpack://_N_E/./src/components/pages/home/components/index.ts","webpack://_N_E/./src/components/pages/home/components/VoiceEmergencySettings.tsx","webpack://_N_E/./src/components/pages/home/FallDetectionSettings.tsx","webpack://_N_E/./src/components/pages/home/constants.ts","webpack://_N_E/./src/components/pages/home/components/FallDownVideoPlayer.tsx","webpack://_N_E/./src/components/pages/home/FallDetectionWrapper.tsx","webpack://_N_E/./src/components/pages/home/EmergencyCallSettings.tsx","webpack://_N_E/./src/components/pages/home/FunctionWrapper.tsx","webpack://_N_E/./src/components/pages/home/ShakeDetectionSettings.tsx","webpack://_N_E/./src/components/pages/home/index.ts","webpack://_N_E/../../libs/app/model/src/remote/emergency-call/list_pending_received_invitations.ts","webpack://_N_E/./src/components/PendingInvitationsList/PendingInvitationsList.tsx","webpack://_N_E/./src/components/pre-alarm-config2/index.tsx","webpack://_N_E/./src/components/privacies/PrivacyDialogAuto.tsx","webpack://_N_E/./src/components/privacies/ListenShowPrivacyContent.tsx","webpack://_N_E/./src/components/permission-status/PermissionStatusPanel.tsx","webpack://_N_E/./src/components/permission-status/index.ts","webpack://_N_E/./src/components/sensor-monitor/SensorMonitor.tsx","webpack://_N_E/./src/components/shakeconfig/ShakeConfigUI.tsx","webpack://_N_E/./src/components/test/TestEmergencyCall.tsx","webpack://_N_E/./src/components/home/HomeFontSizeButton.tsx","webpack://_N_E/./src/pages/home/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Alert, Box, Typography, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\nimport AddToHomeScreenIcon from '@mui/icons-material/AddToHomeScreen';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport { autoWebViewJs } from '@droid/android';\n\n\ninterface AddWidgetButtonProps {\n  onSuccess?: () => void;\n  onError?: (error: string) => void;\n}\n\nconst AddWidgetButton: React.FC<AddWidgetButtonProps> = ({ \n  onSuccess, \n  onError \n}) => {\n  const [isAdding, setIsAdding] = useState(false);\n  const [message, setMessage] = useState<string>('');\n  const [messageType, setMessageType] = useState<'success' | 'error' | 'info'>('info');\n  const [deviceManufacturer, setDeviceManufacturer] = useState<string>('');\n  const [showPermissionGuide, setShowPermissionGuide] = useState(false);\n\n  // \n  useEffect(() => {\n    try {\n      const manufacturerScript = `\nvar manufacturer = com.fanfanlo.emergencycall.utils.WidgetUtils.getDeviceManufacturerName();\nmanufacturer;`;\n      \n      const { javaResultString } = autoWebViewJs.callScript(manufacturerScript);\n      setDeviceManufacturer(javaResultString || '');\n    } catch (error) {\n      console.warn(':', error);\n      setDeviceManufacturer('');\n    }\n  }, []);\n\n  const handleOpenSettings = async () => {\n    try {\n      console.log('VERSION_AWARE_WIDGET');\n      \n      const settingsScript = `\nvar success = com.fanfanlo.emergencycall.utils.WidgetUtils.openPermissionSettings();\nsuccess;`;\n      \n      const { javaResultString } = autoWebViewJs.callScript(settingsScript);\n      const success = javaResultString === \"true\";\n      \n      if (success) {\n        console.log('VERSION_AWARE_WIDGET');\n      } else {\n        console.warn('VERSION_AWARE_WIDGET');\n      }\n    } catch (error) {\n      console.error('VERSION_AWARE_WIDGET:', error);\n    }\n  };\n\n  const executeAddWidget = async () => {\n    try {\n      setMessage('...');\n      setMessageType('info');\n      \n      const addScript = `\nvar success = com.fanfanlo.emergencycall.utils.WidgetUtils.requestAddMedicalWidget();\nsuccess;`;\n      \n      const { javaResultString: addResult } = autoWebViewJs.callScript(addScript);\n      const addSuccess = addResult === \"true\";\n      \n      if (addSuccess) {\n        setMessage('');\n        setMessageType('success');\n        onSuccess?.();\n      } else {\n        throw new Error('');\n      }\n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : '';\n      setMessage(errorMsg);\n      setMessageType('error');\n      onError?.(errorMsg);\n    }\n  };\n\n  const handleAddWidget = async () => {\n    try {\n      setIsAdding(true);\n      setMessage('...');\n      setMessageType('info');\n\n      // \n      const permissionScript = `\nvar permissionInfo = com.fanfanlo.emergencycall.utils.WidgetUtils.getDevicePermissionInfo();\npermissionInfo;`;\n      \n      const { javaResultString: permissionResult } = autoWebViewJs.callScript(permissionScript);\n      const permissionInfo = JSON.parse(permissionResult || '{}');\n      \n      if (permissionInfo.needsPermission) {\n        // \n//         const stepsScript = `\n// var steps = com.fanfanlo.emergencycall.utils.WidgetUtils.getManualAddSteps();\n// steps;`;\n        \n//         const { javaResultString: stepsResult } = autoWebViewJs.callScript(stepsScript);\n        \n        setMessage(` \"\" `);\n        setMessageType('info');\n        setShowPermissionGuide(true);\n      } else {\n        // \n        await executeAddWidget();\n      }\n      \n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : '';\n      setMessage(errorMsg);\n      setMessageType('error');\n      onError?.(errorMsg);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  return (\n    <Box sx={{ my: 2 }}>\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        size=\"large\"\n        fullWidth\n        // startIcon={<AddToHomeScreenIcon />}\n        onClick={handleAddWidget}\n        disabled={isAdding}\n        sx={{\n          py: 1.5,\n          borderColor: '#DC2626',\n          color: '#DC2626',\n          '&:hover': {\n            borderColor: '#B91C1C',\n            backgroundColor: 'rgba(220, 38, 38, 0.04)',\n          },\n          '&.Mui-disabled': {\n            opacity: 0.6,\n          },\n        }}\n      >\n        {isAdding ? '...' : ' '}\n      </Button>\n      \n      {message && (\n        <Alert \n          severity={messageType} \n          sx={{ mt: 1 }}\n          onClose={() => setMessage('')}\n        >\n          <Typography variant=\"body2\" style={{ whiteSpace: 'pre-line' }}>\n            {message}\n          </Typography>\n        </Alert>\n      )}\n      \n      {/*  */}\n      <Dialog \n        open={showPermissionGuide}\n        onClose={() => setShowPermissionGuide(false)}\n        fullWidth\n        maxWidth=\"sm\"\n      >\n        <DialogTitle>\n          \n        </DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n             {deviceManufacturer}\n          </Typography>\n        </DialogContent>\n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button\n            onClick={async () => {\n              setShowPermissionGuide(false);\n              // \n              await executeAddWidget();\n            }}\n            color=\"inherit\"\n          >\n            \n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<SettingsIcon />}\n            onClick={handleOpenSettings}\n            sx={{\n              backgroundColor: '#DC2626',\n              '&:hover': {\n                backgroundColor: '#B91C1C',\n              },\n            }}\n          >\n            \n          </Button>\n        </DialogActions>\n      </Dialog>\n      \n      {/* {!message && !showPermissionGuide && deviceManufacturer && (\n        <Typography \n          variant=\"caption\" \n          color=\"text.secondary\" \n          sx={{ display: 'block', mt: 1, textAlign: 'center' }}\n        >\n          {deviceManufacturer}  \n        </Typography>\n      )} */}\n    </Box>\n  );\n};\n\nexport default AddWidgetButton;","import React, { useState, useEffect } from 'react';\nimport { Button, Alert, Box, Typography, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\nimport SecurityIcon from '@mui/icons-material/Security';\nimport { autoWebViewJs } from '@droid/android';\n\ninterface AddSecurityWidgetButtonProps {\n  onSuccess?: () => void;\n  onError?: (error: string) => void;\n}\n\nconst AddSecurityWidgetButton: React.FC<AddSecurityWidgetButtonProps> = ({ \n  onSuccess, \n  onError \n}) => {\n  const [isAdding, setIsAdding] = useState(false);\n  const [message, setMessage] = useState<string>('');\n  const [messageType, setMessageType] = useState<'success' | 'error' | 'info'>('info');\n  const [deviceManufacturer, setDeviceManufacturer] = useState<string>('');\n  const [showPermissionGuide, setShowPermissionGuide] = useState(false);\n\n  // \n  useEffect(() => {\n    try {\n      const manufacturerScript = `\nvar manufacturer = com.fanfanlo.emergencycall.utils.WidgetUtils.getDeviceManufacturerName();\nmanufacturer;`;\n      \n      const { javaResultString } = autoWebViewJs.callScript(manufacturerScript);\n      setDeviceManufacturer(javaResultString || '');\n    } catch (error) {\n      console.warn(':', error);\n      setDeviceManufacturer('');\n    }\n  }, []);\n\n  const executeAddWidget = async () => {\n    const addScript = `\nvar success = com.fanfanlo.emergencycall.utils.WidgetUtils.requestAddSecurityWidget();\nsuccess;`;\n\n    const { javaResultString: addResult } = autoWebViewJs.callScript(addScript);\n    const addSuccess = addResult === \"true\";\n\n    if (addSuccess) {\n      setMessage('');\n      setMessageType('success');\n      onSuccess?.();\n    } else {\n      throw new Error('');\n    }\n  };\n\n  const handleAddWidget = async () => {\n    try {\n      setIsAdding(true);\n      setMessage('...');\n      setMessageType('info');\n\n      // \n      const permissionScript = `\nvar permissionInfo = com.fanfanlo.emergencycall.utils.WidgetUtils.getDevicePermissionInfo();\npermissionInfo;`;\n      \n      const { javaResultString: permissionResult } = autoWebViewJs.callScript(permissionScript);\n      const permissionInfo = JSON.parse(permissionResult || '{}');\n      \n      if (permissionInfo.needsPermission) {\n        // \n        setMessage(` \"\" `);\n        setMessageType('info');\n        setShowPermissionGuide(true);\n      } else {\n        // \n        await executeAddWidget();\n      }\n      \n    } catch (error) {\n      const errorMsg = error instanceof Error ? error.message : '';\n      setMessage(errorMsg);\n      setMessageType('error');\n      onError?.(errorMsg);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  const handleOpenSettings = async () => {\n    try {\n      const openSettingsScript = `\nvar success = com.fanfanlo.emergencycall.utils.WidgetUtils.openPermissionSettings();\nsuccess;`;\n      \n      autoWebViewJs.callScript(openSettingsScript);\n    } catch (error) {\n      console.error(':', error);\n    }\n  };\n\n  return (\n    <Box sx={{ my: 2 }}>\n      <Button\n        variant=\"outlined\"\n        color=\"secondary\"\n        size=\"large\"\n        fullWidth\n        // startIcon={<SecurityIcon />}\n        onClick={handleAddWidget}\n        disabled={isAdding}\n        sx={{\n          py: 1.5,\n          borderColor: '#9333EA',\n          color: '#9333EA',\n          '&:hover': {\n            borderColor: '#7C2D92',\n            backgroundColor: 'rgba(147, 51, 234, 0.04)',\n          },\n          '&.Mui-disabled': {\n            opacity: 0.6,\n          },\n        }}\n      >\n        {isAdding ? '...' : ' '}\n      </Button>\n      \n      {message && (\n        <Alert \n          severity={messageType} \n          sx={{ mt: 1 }}\n          onClose={() => setMessage('')}\n        >\n          <Typography variant=\"body2\" style={{ whiteSpace: 'pre-line' }}>\n            {message}\n          </Typography>\n        </Alert>\n      )}\n      \n      {/* {!message && deviceManufacturer && (\n        <Typography \n          variant=\"caption\" \n          color=\"text.secondary\" \n          sx={{ display: 'block', mt: 1, textAlign: 'center' }}\n        >\n          {deviceManufacturer}  \n        </Typography>\n      )} */}\n\n      {/*  */}\n      <Dialog \n        open={showPermissionGuide} \n        onClose={() => setShowPermissionGuide(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          \n        </DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body1\" sx={{ mb: 2 }}>\n             {deviceManufacturer}\n          </Typography>\n        </DialogContent>\n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button\n            onClick={async () => {\n              setShowPermissionGuide(false);\n              // \n              await executeAddWidget();\n            }}\n            variant=\"outlined\"\n          >\n            \n          </Button>\n          <Button\n            onClick={() => {\n              handleOpenSettings();\n            }}\n            variant=\"contained\"\n          >\n            \n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default AddSecurityWidgetButton;","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { IRequestHandler, request } from \"@fanfanlo\";\nimport { emergencyCallContactService } from \"./list_established_contacts\";\n\n/**\n * \n */\nexport interface IParamsListAllInvitations {\n  // \n  page?: number;\n  page_size?: number;\n}\n\n/**\n * \n */\nexport interface IInvitationUserInfo {\n  user_id: string;\n  display_name: string;\n  avatar_url?: string;\n}\n\n// \nexport type InviteStatus = 'pending' | 'accepted' | 'declined' | 'expired' | 'cancelled';\n\n// \nexport interface IInvitationDetails {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: InviteStatus;\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * \n */\nexport interface IResultListAllInvitations {\n  is_ok: boolean;\n  msg?: string;\n  sent_invitations: IInvitationDetails[];\n  received_invitations: IInvitationDetails[];\n}\n\n/**\n * \n */\nexport interface IParamsRespondToInvite {\n  invitation_id: string;\n  action: 'accept' | 'decline' | 'cancel' | 'remove';\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallListAllInvitations(\n  opts: IRequestOptions<IParamsListAllInvitations>\n) {\n  return request<IResultListAllInvitations, IParamsListAllInvitations>(\n    tms.TEmc,\n    tms.MEmcListAllInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n/**\n * \n * @param invitationId ID\n * @param isReceived \n * @param inviteStatus  - \n * @returns Promise\n */\nexport async function cancelOrRemoveInvitation(\n  invitationId: string,\n  isReceived: boolean,\n  inviteStatus?: InviteStatus\n) {\n  // remove\n  if (inviteStatus === 'accepted') {\n    return emergencyCallInvitationService.respondToInvite({\n      params: {\n        invitation_id: invitationId,\n        action: 'remove'\n      }\n    } as any);\n  }\n\n  // pendingcancel\n  const action = 'cancel';\n  return emergencyCallInvitationService.respondToInvite({\n    params: {\n      invitation_id: invitationId,\n      action\n    }\n  } as any);\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallRespondToInvite(\n  opts: IRequestOptions<IParamsRespondToInvite>\n) {\n  return request<{ is_ok: boolean; msg?: string }, IParamsRespondToInvite>(\n    tms.TEmc,\n    tms.MEmcRespondToInvite,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// \nexport const emergencyCallInvitationService = {\n  listAllInvitations: tmsEmergencyCallListAllInvitations,\n  respondToInvite: tmsEmergencyCallRespondToInvite,\n};\n\nexport default emergencyCallInvitationService;\n","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description \n */\nexport interface IEmcContactIdentity {\n    identity: string;\n    identityType: 'email' | 'mobile';\n}\n\n/**\n * @description \n */\nexport interface IEmcInviteContactsParams extends IRequestParams {\n    contacts: IEmcContactIdentity[];\n    remark?: string;\n    type: string;\n    message?: string;\n    matrix_access_token: string; //  Matrix  Token\n}\n\n/**\n * @description \n */\nexport interface IEmcInviteResultItem {\n    identity: string;\n    result_code: string; //  ResultCode \n    msg: string;\n}\n\n/**\n * @description \n */\n// export interface IEmcInviteContactsResult extends IResultContent {\n//     data: {\n//         data: {\n//             results: IEmcInviteResultItem[];\n//             msg?: string;\n//         };\n//         msg?: string;\n//     };\n//     results?: IEmcInviteResultItem[]; // \n// }\n\nexport interface IEmcInviteContactsResult extends IResultContent {\n    data: {\n        is_ok:boolean;\n        results: IEmcInviteResultItem[];\n        msg?: string;\n    };\n}\n\n/**\n * @description \n * @param opts  params, gateway, handler \n */\nexport async function tmsEmcInviteContacts(opts: IRequestOptions<IEmcInviteContactsParams>) {\n    const res = await request<IEmcInviteContactsResult>(tms.TEmc, tms.MEmcInviteContacts, opts.params, opts.gateway, opts.handler);\n    return res;\n}","import { IRequestParams, IResultContent, request } from \"@fanfanlo\";\nimport { tms } from \"../tms\";\nimport { IRequestOptions } from \"../IRequestOptions\";\n\n/**\n * @description \n */\nexport interface IEmcGetContactTypesParams extends IRequestParams {\n    // \n}\n\n/**\n * @description \n */\nexport interface IEmcContactTypeItem {\n    id: string;\n    name: string;\n    //  icon, description \n}\n\n/**\n * @description \n */\nexport interface IEmcGetContactTypesResult extends IResultContent {\n    data: {\n        types: Array<{\n            uuid: string;\n            name: string;\n            is_system: boolean;\n        }>;\n    };\n}\n\n/**\n * @description \n * @param opts  params, gateway, handler \n */\nexport async function tmsEmcGetContactTypes(opts: IRequestOptions<IEmcGetContactTypesParams>) {\n    const res = await request<IEmcGetContactTypesResult>(tms.TEmc, tms.MEmcGetContactTypes, opts.params, opts.gateway, opts.handler);\n    return res;\n}\n","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    Box,\n    CircularProgress,\n    Autocomplete,\n} from '@mui/material';\nimport { useState, useCallback, useEffect, useRef, SyntheticEvent } from 'react';\nimport { \n    IEmcInviteContactsParams, \n    tmsEmcInviteContacts, \n    IEmcContactIdentity, \n    user, \n    tmsEmcGetContactTypes,\n    IEmcGetContactTypesResult,\n    IEmcContactTypeItem,\n    IEmcInviteResultItem,\n    trackingPrint,\n} from '@app/model';\nimport toast from 'react-hot-toast';\nimport { matrixUser } from '@im/matrix';\nimport { authService } from '@src/services/authService';\nimport { Log, useProxyWatch,\n    IRequestResult } from '@fanfanlo';\nconst fileLogger = new Log(false, 'InviteContactDialog.tsx');\n\nconst isValidIdentity = (text: string) => /(^\\d{11}$)|(^[a-zA-Z0-9]{32}$)/.test(text);\nconst is11DigitNumber = (text: string) => /^\\d{11}$/.test(text);\n\ninterface InviteContactDialogProps {\n    open: boolean;\n    onClose: () => void;\n    onInviteSent?: () => void;\n}\n\nexport function InviteContactDialog({ open, onClose, onInviteSent }: InviteContactDialogProps) {\n    const uiLogger = fileLogger.sub(false, 'InviteContactDialog_ui');\n\n    const [contacts, setContacts] = useState('');\n    const [remark, setRemark] = useState('');\n    const [callType, setCallType] = useState<string | null>(null);\n    const [availableCallTypes, setAvailableCallTypes] = useState<readonly IEmcContactTypeItem[]>([]);\n    \n    // Debug effect to log availableCallTypes changes\n    useEffect(() => {\n        console.log('availableCallTypes updated:', availableCallTypes);\n    }, [availableCallTypes]);\n    \n    // Debug effect to log callType changes\n    useEffect(() => {\n        console.log('callType updated:', callType);\n    }, [callType]);\n    const [message, setMessage] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isTypesLoading, setIsTypesLoading] = useState(false);\n\n    const [pendingParams, setPendingParams] = useState<Omit<IEmcInviteContactsParams, 'matrix_access_token'> | null>(null);\n    const executionLock = useRef(false);\n    const [accessToken] = useProxyWatch(matrixUser.userData.userInfo, 'loginResponse.access_token', matrixUser.userData.userInfo.loginResponse?.access_token);\n    const [isUserLoggedIn] = useProxyWatch(user.data.sessionData, 'global_user_info', !!user.data.sessionData.global_user_info);\n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    useEffect(() => {\n        if (accessToken && pendingParams && !executionLock.current) {\n            executionLock.current = true;\n            const finalParams: IEmcInviteContactsParams = {\n                ...pendingParams,\n                matrix_access_token: accessToken,\n                contacts: pendingParams?.contacts || [],\n                type: pendingParams?.type || ''\n            };\n            executeApiCall(finalParams);\n        }\n    }, [accessToken, pendingParams]);\n\n    const executeApiCall = useCallback(async (params: IEmcInviteContactsParams) => {\n        if (!params.contacts || !params.type) {\n            toast.error('');\n            return;\n        }\n\n        setIsLoading(true);\n        \n        try {\n            const res = await tmsEmcInviteContacts({\n                params,\n                handler: { printLog: true }\n            });\n\n            console.log('Invite response:', res);\n\n            // \n            if (res.err || !res.shellIsOk || !res.dataIsOk) {\n                const errorMessage = res.err?.message || '';\n                toast.error(errorMessage);\n                return;\n            }\n\n            // \n            const responseData = res.data;\n            if (!responseData?.data?.results) {\n                const errorMessage = responseData?.data?.msg || res.data?.msg || '';\n                toast.error(errorMessage);\n                return;\n            }\n            \n            const results: IEmcInviteResultItem[] = responseData.data.results;\n\n            // \n            const successResults = results.filter(r => r.result_code === 'SUCCESS');\n            const infoResults = results.filter(r => r.result_code === 'INVITE_ALREADY_SENT' || r.result_code === 'ALREADY_A_CONTACT');\n            const errorResults = results.filter(r => r.result_code !== 'SUCCESS' && r.result_code !== 'INVITE_ALREADY_SENT' && r.result_code !== 'ALREADY_A_CONTACT');\n\n            if (successResults.length > 0) {\n                toast.success(` ${successResults.length} `);\n                onInviteSent?.();\n            }\n            \n            if (infoResults.length > 0) {\n                const infoMessages = infoResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (infoMessages) {\n                    //  toast  toast.info\n                    toast(infoMessages);\n                }\n            }\n            \n            if (errorResults.length > 0) {\n                const errorMessages = errorResults.map(r => r.msg).filter(Boolean).join('\\n');\n                if (errorMessages) {\n                    toast.error(`\\n${errorMessages}`);\n                }\n            }\n        } catch (error) {\n            console.error('Error in executeApiCall:', error);\n            toast.error('');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [onInviteSent]);\n\n    const fetchCallTypes = useCallback(async () => {\n        const logger = uiLogger.sub(false, 'fetchCallTypes_fn');\n        logger.log('Fetching call types...');\n        setIsTypesLoading(true);\n        const res: IRequestResult<IEmcGetContactTypesResult, any> = await tmsEmcGetContactTypes({ params: {}, handler: { printLog: true } });\n        logger.log('Call types response:', JSON.stringify(res));\n        setIsTypesLoading(false);\n\n        if (res.err || !res.shellIsOk || !res.dataIsOk) {\n            const errorMessage = res.err?.message || '';\n            toast.error(errorMessage);\n            setAvailableCallTypes([]);\n            logger.error('Failed to load call types:', errorMessage);\n        } else {\n            //  res.data.data.types \n            const types = res.data?.data?.types || [];\n            logger.log('Setting availableCallTypes:', JSON.stringify(types));\n            \n            //  IEmcContactTypeItem[] \n            const formattedTypes = types.map(type => ({\n                id: type.uuid,\n                name: type.name,\n                is_system: type.is_system\n            }));\n            \n            setAvailableCallTypes(formattedTypes);\n            \n            //  callType \n            if (formattedTypes.length > 0 && !callType) {\n                const defaultType = formattedTypes[0].name;\n                logger.log('Setting default call type:', defaultType);\n                setCallType(defaultType);\n            } else if (formattedTypes.length === 0) {\n                logger.warn('No call types available');\n            }\n        }\n    }, []); //  callType \n\n    useEffect(() => {\n        if (open) {\n            fetchCallTypes();\n        } else {\n            setContacts('');\n            setRemark('');\n            setCallType(null);\n            setAvailableCallTypes([]);\n            setMessage('');\n            setIsLoading(false);\n            setPendingParams(null);\n            executionLock.current = false;\n        }\n    }, [open, fetchCallTypes]);\n\n    const handleSendInvitation = useCallback(async () => {\n        const contactInputs = contacts.split('\\n').map(c => c.trim()).filter(c => c);\n        if (contactInputs.length === 0) {\n            toast.error('');\n            return;\n        }\n\n        const contactIdentities: IEmcContactIdentity[] = [];\n        for (const input of contactInputs) {\n            if (isValidIdentity(input)) {\n                const type = is11DigitNumber(input) ? 'mobile' : 'email';\n                contactIdentities.push({ identity: input, identityType: type });\n            } else {\n                toast.error(`: ${input}1132`);\n                return;\n            }\n        }\n\n        if (!callType || callType.trim() === '') {\n            toast.error('');\n            return;\n        }\n\n        setIsLoading(true);\n\n        if (!userToken) {\n            const appLoggedIn = await authService.showLoginDialog();\n            if (!appLoggedIn) {\n                setIsLoading(false);\n                return; \n            }\n        }\n\n        const currentAccessToken = matrixUser.userData.userInfo.loginResponse?.access_token;\n        const params: Omit<IEmcInviteContactsParams, 'matrix_access_token'> = {\n            contacts: contactIdentities,\n            type: callType.trim(),\n            remark: remark.trim(),\n            message: message.trim(),\n        };\n\n        if (currentAccessToken) {\n            executionLock.current = true;\n            const apiParams: IEmcInviteContactsParams = {\n                ...params,\n                matrix_access_token: currentAccessToken,\n                contacts: params.contacts || [],\n                type: params.type || ''\n            };\n            executeApiCall(apiParams);\n            onClose(); // dialog\n\n        } else {\n            toast('...');\n            setPendingParams(params);\n        }\n\n    }, [contacts, remark, callType, message, executeApiCall, isUserLoggedIn]);\n\n    return (\n        <Dialog open={open} onClose={() => onClose()} maxWidth=\"sm\" fullWidth>\n            <DialogTitle></DialogTitle>\n            <DialogContent>\n                <Box component=\"form\" sx={{ mt: 2 }}>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"contacts\"\n                        label=\" (1132ID)\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={2}\n                        variant=\"outlined\"\n                        placeholder=\"13800138000\"\n                        value={contacts}\n                        onChange={(e) => setContacts(e.target.value)}\n                        disabled={isLoading}\n                    />\n                    {/* <TextField\n                        margin=\"dense\"\n                        id=\"remark\"\n                        label=\" ()\"\n                        type=\"text\"\n                        fullWidth\n                        variant=\"outlined\"\n                        value={remark}\n                        onChange={(e) => setRemark(e.target.value)}\n                        disabled={isLoading}\n                    /> */}\n\n                    {/* <Autocomplete\n                        freeSolo\n                        id=\"call-type-autocomplete\"\n                        options={availableCallTypes.map((option) => option.name)}\n                        value={callType || ''}\n                        onChange={(event: SyntheticEvent, newValue: string | null) => {\n                            console.log('Call type changed to:', newValue);\n                            setCallType(newValue);\n                        }}\n                        inputValue={callType || ''}\n                        onInputChange={(event, newInputValue, reason) => {\n                            // Only update when the user is typing, not when an option is selected\n                            if (reason === 'input') {\n                                console.log('Input value changed to:', newInputValue);\n                                setCallType(newInputValue);\n                            }\n                        }}\n                        disablePortal\n                        disableClearable\n                        forcePopupIcon={!isTypesLoading}\n                        sx={{ mt: 1, mb: 1, width: '100%' }}\n                        renderInput={(params) => (\n                            <TextField\n                                {...params}\n                                label=\"\"\n                                variant=\"outlined\"\n                                fullWidth\n                                InputProps={{\n                                    ...params.InputProps,\n                                    endAdornment: (\n                                        <>\n                                            {isTypesLoading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                                            {params.InputProps.endAdornment}\n                                        </>\n                                    ),\n                                }}\n                            />\n                        )}\n                        ListboxProps={{\n                            style: {\n                                maxHeight: '200px',\n                                overflow: 'auto',\n                            },\n                        }}\n                    /> */}\n\n                    {/* <TextField\n                        margin=\"dense\"\n                        id=\"message\"\n                        label=\" ()\"\n                        type=\"text\"\n                        fullWidth\n                        multiline\n                        rows={3}\n                        variant=\"outlined\"\n                        placeholder=\"\"\n                        value={message}\n                        onChange={(e) => setMessage(e.target.value)}\n                        disabled={isLoading}\n                    /> */}\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => onClose()} disabled={isLoading}></Button>\n                <Button onClick={handleSendInvitation} variant=\"contained\" disabled={isLoading}>\n                    {isLoading ? <CircularProgress size={24} /> : ''}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}","import { Button } from '@mui/material';\nimport { trackingPrint } from '@app/model';\nimport { useState } from 'react';\nimport { InviteContactDialog } from '@src/components/dialogs/InviteContactDialog';\n\ninterface InviteEmergencyContactButtonProps {\n  onInviteClick?: () => void;\n}\n\nexport const InviteEmergencyContactButton = ({ onInviteClick }: InviteEmergencyContactButtonProps) => {\n  const [openInviteDialog, setOpenInviteDialog] = useState(false);\n\n  const handleClick = () => {\n    // \n    trackingPrint({\n      params: {\n        type: \"\",\n        title: \"\",\n        subtitle: \"-\",\n        extra: {\n          timestamp: Date.now(),\n          page: \"home\"\n        }\n      }\n    });\n    \n    setOpenInviteDialog(true);\n    onInviteClick?.();\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        fullWidth\n        onClick={handleClick}\n        sx={{\n          backgroundColor: '#4CAF50',\n          color: 'white',\n          fontSize: '16px',\n          fontWeight: 'bold',\n          minHeight: '48px',\n          borderRadius: '24px',\n          boxShadow: '0 4px 16px rgba(76, 175, 80, 0.3)',\n          textTransform: 'none',\n          position: 'relative',\n          overflow: 'hidden',\n          '&:hover': {\n            backgroundColor: '#45a049',\n            transform: 'translateY(-1px)',\n            boxShadow: '0 6px 20px rgba(76, 175, 80, 0.4)',\n          },\n          '&:active': {\n            transform: 'translateY(0px)',\n            boxShadow: '0 2px 8px rgba(76, 175, 80, 0.3)',\n          },\n        }}\n      >\n        \n      </Button>\n      \n      <InviteContactDialog \n        open={openInviteDialog} \n        onClose={() => {\n                  // \n                  trackingPrint({params:{\n                    type:\"\",\n                    title:\"\",\n                    subtitle:\"-\",\n                    extra:{\n                      timestamp: Date.now(),\n                      page: \"home\"\n                    }\n                  }});\n                  setOpenInviteDialog(false);\n                }}\n      />\n    </>\n  );\n};\n","import { Button, Box } from '@mui/material';\nimport { useRouter } from 'next/router';\n\nexport const ContactsManagementButton = () => {\n  const router = useRouter();\n\n  return (\n    <Button\n      fullWidth\n      variant=\"contained\"\n      onClick={() => router.push('/contacts')}\n      sx={{\n        backgroundColor: '#2196F3',\n        color: 'white',\n        fontSize: '16px',\n        fontWeight: 'bold',\n        minHeight: '48px',\n        borderRadius: '24px',\n        boxShadow: '0 4px 16px rgba(33, 150, 243, 0.3)',\n        textTransform: 'none',\n        position: 'relative',\n        overflow: 'hidden',\n        '&:hover': {\n          backgroundColor: '#1976d2',\n          transform: 'translateY(-1px)',\n          boxShadow: '0 6px 20px rgba(33, 150, 243, 0.4)',\n        },\n        '&:active': {\n          transform: 'translateY(0px)',\n          boxShadow: '0 2px 8px rgba(33, 150, 243, 0.3)',\n        },\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          width: '0',\n          height: '0',\n          borderRadius: '50%',\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\n          transform: 'translate(-50%, -50%)',\n          transition: 'width 0.3s, height 0.3s',\n        },\n        '&:hover::before': {\n          width: '100%',\n          height: '100%',\n        }\n      }}\n      startIcon={\n        <Box sx={{ fontSize: '20px' }}></Box>\n      }\n    >\n      \n    </Button>\n  );\n};\n","import { Button, Box } from '@mui/material';\nimport { useRouter } from 'next/router';\n\nexport const DesktopShortcutButton = () => {\n  const router = useRouter();\n\n  return (\n    <Button\n      fullWidth\n      variant=\"contained\"\n      onClick={() => router.push('/shortcut')}\n      sx={{\n        backgroundColor: '#9C27B0',\n        color: 'white',\n        fontSize: '16px',\n        fontWeight: 'bold',\n        minHeight: '48px',\n        borderRadius: '24px',\n        boxShadow: '0 4px 16px rgba(156, 39, 176, 0.3)',\n        textTransform: 'none',\n        position: 'relative',\n        overflow: 'hidden',\n        transition: 'all 0.3s ease',\n        '&:hover': {\n          backgroundColor: '#7B1FA2',\n          transform: 'translateY(-1px)',\n          boxShadow: '0 6px 20px rgba(156, 39, 176, 0.4)',\n        },\n        '&:active': {\n          transform: 'translateY(0px)',\n          boxShadow: '0 2px 8px rgba(156, 39, 176, 0.3)',\n        },\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          width: '0',\n          height: '0',\n          borderRadius: '50%',\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\n          transform: 'translate(-50%, -50%)',\n          transition: 'width 0.3s, height 0.3s',\n        },\n        '&:hover::before': {\n          width: '100%',\n          height: '100%',\n        }\n      }}\n      startIcon={\n        <Box sx={{ fontSize: '20px' }}></Box>\n      }\n    >\n      \n    </Button>\n  );\n};\n","import { Button } from '@mui/material';\nimport { useRouter } from 'next/router';\n\nexport const ProductIntroductionButton = () => {\n  const router = useRouter();\n\n  return (\n    <Button \n      fullWidth\n      variant=\"contained\" \n      onClick={() => router.push('/intro')}\n      sx={{\n        backgroundColor: '#FF9800',\n        color: 'white',\n        fontSize: '16px',\n        fontWeight: 'bold',\n        minHeight: '48px',\n        borderRadius: '24px',\n        boxShadow: '0 4px 16px rgba(255, 152, 0, 0.3)',\n        textTransform: 'none',\n        position: 'relative',\n        overflow: 'hidden',\n        transition: 'all 0.3s ease',\n        display: 'flex',\n        justifyContent: 'center',\n        '&:hover': {\n          backgroundColor: '#F57C00',\n          transform: 'translateY(-1px)',\n          boxShadow: '0 6px 20px rgba(255, 152, 0, 0.4)',\n        },\n        '&:active': {\n          transform: 'translateY(0px)',\n          boxShadow: '0 2px 8px rgba(255, 152, 0, 0.3)',\n        },\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          width: '0',\n          height: '0',\n          borderRadius: '50%',\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\n          transform: 'translate(-50%, -50%)',\n          transition: 'width 0.3s, height 0.3s',\n        },\n        '&:hover::before': {\n          width: '100%',\n          height: '100%',\n        }\n      }}\n    >\n      \n    </Button>\n  );\n};\n","import { Button, Box } from '@mui/material';\nimport { useRouter } from 'next/router';\n\nexport const UserGuideButton = () => {\n  const router = useRouter();\n\n  return (\n    <Button\n      fullWidth\n      variant=\"contained\"\n      onClick={() => router.push('/how-to-use')}\n      sx={{\n        backgroundColor: '#00BCD4',\n        color: 'white',\n        fontSize: '16px',\n        fontWeight: 'bold',\n        minHeight: '48px',\n        borderRadius: '24px',\n        boxShadow: '0 4px 16px rgba(0, 188, 212, 0.3)',\n        textTransform: 'none',\n        position: 'relative',\n        overflow: 'hidden',\n        transition: 'all 0.3s ease',\n        display: 'flex',\n        justifyContent: 'center',\n        '&:hover': {\n          backgroundColor: '#00ACC1',\n          transform: 'translateY(-1px)',\n          boxShadow: '0 6px 20px rgba(0, 188, 212, 0.4)',\n        },\n        '&:active': {\n          transform: 'translateY(0px)',\n          boxShadow: '0 2px 8px rgba(0, 188, 212, 0.3)',\n        },\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          width: '0',\n          height: '0',\n          borderRadius: '50%',\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\n          transform: 'translate(-50%, -50%)',\n          transition: 'width 0.3s, height 0.3s',\n        },\n        '&:hover::before': {\n          width: '100%',\n          height: '100%',\n        }\n      }}\n      startIcon={\n        <Box sx={{ fontSize: '20px' }}></Box>\n      }\n    >\n      \n    </Button>\n  );\n};\n","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Log } from \"@fanfanlo\";\r\n\r\nconst fileLog = new Log(false, 'stopAllHandler_f');\r\n\r\nexport function stopAllHandler() {\r\n\r\n    try {\r\n      fileLog.log('...');\r\n\r\n      // EmergencyAudioControl.tsx\r\n      const stopEmergencyMethods = [\r\n        // \r\n        // `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`,\r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stop();\r\n          com.fanfanlo.emergencycall.manager.AlarmSoundManager.stop();\r\n          com.fanfanlo.emergencycall.v2.core.EmergencySystemV2.forceStopHelpSound();\r\n        } catch(e) {\r\n          // console.log(':', e);\r\n        }\r\n        `,\r\n        \r\n        // \r\n        `\r\n        try {\r\n          com.fanfanlo.emergencycall.manager.SoundManager.stopEmergencyAlarm();\r\n          \r\n          // WebViewActivityAndroid\r\n          if(typeof Android !== 'undefined' && typeof Android.stopAlarm === 'function') {\r\n            Android.stopAlarm();\r\n          }\r\n        } catch(e) {\r\n          console.log(':', e);\r\n        }\r\n        `\r\n      ];\r\n\r\n      for (const script of stopEmergencyMethods) {\r\n        try {\r\n          fileLog.log(`: ${script.trim()}`);\r\n          autoWebViewJs.callScript(script);\r\n        } catch (methodError) {\r\n          fileLog.warn(`:`, methodError);\r\n          // \r\n        }\r\n      }\r\n\r\n      fileLog.log('');\r\n      return true;\r\n    //   setMessage({\r\n    //     type: 'success',\r\n    //     text: ''\r\n    //   });\r\n    } catch (error) {\r\n      fileLog.error(':', error);\r\n    //   setMessage({\r\n    //     type: 'error',\r\n    //     text: `: ${error instanceof Error ? error.message : ''}`\r\n    //   });\r\n    return false;\r\n    } finally {\r\n    //   setLoading(false);\r\n    }\r\n    \r\n}","import React, { useState } from 'react';\nimport {\n  Button,\n  Snackbar,\n  Alert,\n  Fab,\n  Tooltip\n} from '@mui/material';\nimport {\n  Stop as StopIcon,\n  VolumeOff as VolumeOffIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs } from \"@droid/android\";\nimport { Log } from \"@fanfanlo\";\nimport { trackingPrint } from \"@app/model\";\nimport { stopAllHandler } from './stopAllHandler';\n\nconst fileLog = new Log(false, 'EmergencyStopButton');\n\ninterface EmergencyStopButtonProps {\n  variant?: 'button' | 'fab';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n}\n\n/**\n * \n * \n */\nconst EmergencyStopButton: React.FC<EmergencyStopButtonProps> = ({ \n  variant = 'button',\n  size = 'medium',\n  fullWidth = false\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  /**\n   * Android WebView\n   */\n  const isAndroidWebView = (): boolean => {\n    try {\n      return !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function');\n    } catch (e) {\n      fileLog.error('WebView:', e);\n      return false;\n    }\n  };\n\n  /**\n   * \n   */\n  const handleStopAllEmergencyAudio = async (): Promise<void> => {\n    setLoading(true);\n    setMessage(null);\n\n    // \n    trackingPrint({params:{\n      type:\"\",\n      title:\"\",\n      subtitle:\"-\",\n      extra:{\n        buttonType: variant,\n        timestamp: Date.now(),\n        isAndroidWebView: isAndroidWebView()\n      }\n    }});\n\n    try {\n      const bl = stopAllHandler();\n      if (bl){\n        // \n        trackingPrint({params:{\n          type:\"\",\n          title:\"\",\n          subtitle:\"\",\n          extra:{\n            result: \"success\",\n            timestamp: Date.now()\n          }\n        }});\n        \n        setMessage({\n          type: 'success',\n          text: ''\n        });\n      }else{\n        // \n        trackingPrint({params:{\n          type:\"\",\n          title:\"\",\n          subtitle:\"\",\n          extra:{\n            result: \"failed\",\n            timestamp: Date.now(),\n            reason: \"stopAllHandlerfalse\"\n          }\n        }});\n        \n        setMessage({\n          type: 'error',\n          text: ``\n        });\n      }\n    } catch (error) {\n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"\",\n        extra:{\n          error: error instanceof Error ? error.message : String(error),\n          stack: error instanceof Error ? error.stack : undefined,\n          timestamp: Date.now()\n        }\n      }});\n      \n      setMessage({\n        type: 'error',\n        text: ''\n      });\n    }\n    \n    setLoading(false);\n  };\n\n  /**\n   * \n   */\n  const handleCloseMessage = () => {\n    setMessage(null);\n  };\n\n  // \n  if (variant === 'fab') {\n    return (\n      <>\n        <Tooltip title=\"\" placement=\"left\">\n          <Fab\n            color=\"error\"\n            onClick={handleStopAllEmergencyAudio}\n            disabled={loading}\n            size={size}\n            sx={{\n              position: 'fixed',\n              bottom: 80,\n              right: 16,\n              zIndex: 1000\n            }}\n          >\n            {loading ? <VolumeOffIcon /> : <StopIcon />}\n          </Fab>\n        </Tooltip>\n\n        <Snackbar\n          open={!!message}\n          autoHideDuration={4000}\n          onClose={handleCloseMessage}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert \n            onClose={handleCloseMessage} \n            severity={message?.type || 'info'}\n            sx={{ width: '100%' }}\n          >\n            {message?.text}\n          </Alert>\n        </Snackbar>\n      </>\n    );\n  }\n\n  // \n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"error\"\n        size={size}\n        fullWidth={fullWidth}\n        startIcon={loading ? <VolumeOffIcon /> : <StopIcon />}\n        onClick={handleStopAllEmergencyAudio}\n        disabled={loading}\n        sx={{ mb: 1 }}\n      >\n         \n      </Button>\n\n      <Snackbar\n        open={!!message}\n        autoHideDuration={4000}\n        onClose={handleCloseMessage}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert \n          onClose={handleCloseMessage} \n          severity={message?.type || 'info'}\n          sx={{ width: '100%' }}\n        >\n          {message?.text}\n        </Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default EmergencyStopButton;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Switch,\n  TextField,\n  Paper,\n  Button,\n  FormControlLabel,\n  Slider,\n  Divider,\n  Alert,\n  Snackbar,\n  Collapse,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton,\n  Chip,\n  LinearProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  CircularProgress,\n} from '@mui/material';\nimport { \n  PlayArrow, \n  Stop, \n  VolumeUp, \n  Settings, \n  ExpandLess, \n  Mic,\n  Save,\n  Share,\n  Delete,\n  Refresh,\n  Star,\n  StarBorder,\n  MusicNote,\n  CloudUpload,\n  AudioFile,\n  InsertDriveFile,\n} from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { user } from '@app/model';\nimport { authService } from '@src/services/authService';\nimport { ReportButton } from '../report/ReportButton';\n\n// TTS\ninterface EmergencyTTSSettings {\n  enabled: boolean;\n  message: string;\n  repeatInterval: number;\n  voiceSpeed: number;\n  voicePitch: number;\n  useCustomAudio: boolean;        // \n  medicalEmergencyAudioPath?: string; // \n  lastUpdated: number;\n}\n\n// TTS\ninterface TTSFileInfo {\n  fileName: string;\n  filePath: string;\n  fileSize: number;\n  createTime: number;\n  type: 'general' | 'medical' | 'security' | 'custom';\n  source: 'recorded' | 'uploaded';  // \n  isDefault?: boolean;\n  duration?: number;  // \n  format?: string;    // \n  mimeType?: string;  // MIME\n}\n\n// \ninterface TTSRecordResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n}\n\n// \ninterface VoiceEmergencyConfig {\n  medicalDefault?: string;\n  securityDefault?: string;\n  lastUpdated: number;\n}\n\n// \ninterface FileSelectResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: SelectedFileInfo;\n}\n\ninterface SelectedFileInfo {\n  filePath: string;\n  fileName: string;\n  fileSize: number;\n  mimeType: string;\n  duration?: number;\n}\n\ninterface FileUploadResult {\n  success: boolean;\n  filePath: string;\n  message: string;\n  fileInfo?: TTSFileInfo;\n}\n\ninterface FileValidationResult {\n  isValid: boolean;\n  message: string;\n  fileSize: number;\n  duration: number;\n  format: string;\n  warnings: string[];\n}\n\ninterface SupportedFormats {\n  formats: string[];\n  maxFileSizeMB: number;\n  maxDurationSeconds: number;\n  recommendedDurationSeconds: number;\n}\n\n// \nconst DEFAULT_SETTINGS: EmergencyTTSSettings = {\n  enabled: false,\n  message: '',\n  repeatInterval: 3000,\n  voiceSpeed: 1.0,\n  voicePitch: 1.0,\n  useCustomAudio: false,\n  lastUpdated: Date.now(),\n};\n\nconst DEFAULT_VOICE_CONFIG: VoiceEmergencyConfig = {\n  lastUpdated: Date.now(),\n};\n\nconst TTS_SETTINGS_KEY = 'emergencyTTSSettings';\nconst VOICE_CONFIG_KEY = 'voiceEmergencyConfig';\n\nexport const EmergencyTTSSettings: React.FC = () => {\n  const [settings, setSettings] = useState<EmergencyTTSSettings>(DEFAULT_SETTINGS);\n  const [voiceConfig, setVoiceConfig] = useState<VoiceEmergencyConfig>(DEFAULT_VOICE_CONFIG);\n  const [fileList, setFileList] = useState<TTSFileInfo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [testing, setTesting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const [activeTab, setActiveTab] = useState(0);\n  \n  // \n  const [isRecording, setIsRecording] = useState(false);\n  const [playingFile, setPlayingFile] = useState<string | null>(null);\n  const [recordText, setRecordText] = useState(DEFAULT_SETTINGS.message);\n  const [recordSpeed, setRecordSpeed] = useState(1.0);\n  const [recordPitch, setRecordPitch] = useState(1.0);\n  const [showRecordDialog, setShowRecordDialog] = useState(false);\n  const [ttsAvailable, setTtsAvailable] = useState<boolean | null>(null);\n  \n  // \n  const [isUploading, setIsUploading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<SelectedFileInfo | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [supportedFormats, setSupportedFormats] = useState<SupportedFormats | null>(null);\n\n  async function onRecordClick(){\n    if(user.data.storeData.user_token){\n      setShowRecordDialog(true)\n    }else{\n      // \n\n      const appLoggedIn = await authService.showLoginDialog();\n      if(appLoggedIn){\n        setShowRecordDialog(true);\n      }\n    }\n  }\n  // \n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // TTS\n        const savedSettings = await autoJsStoreUtils.read<EmergencyTTSSettings>(\n          TTS_SETTINGS_KEY, \n          DEFAULT_SETTINGS\n        );\n        setSettings(savedSettings);\n        \n        // \n        const savedConfig = await autoJsStoreUtils.read<VoiceEmergencyConfig>(\n          VOICE_CONFIG_KEY,\n          DEFAULT_VOICE_CONFIG\n        );\n        setVoiceConfig(savedConfig);\n        \n        // TTS\n        checkTTSAvailability();\n        \n        // \n        loadFileList();\n      } catch (err) {\n        console.error(':', err);\n        setError('');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // \n  useEffect(() => {\n    loadSupportedFormats();\n  }, []);\n\n  // \n  const loadSupportedFormats = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getSupportedAudioFormats();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const formats = JSON.parse(javaResultString || '{}') as SupportedFormats;\n      setSupportedFormats(formats);\n    } catch (error) {\n      console.error(':', error);\n      setSupportedFormats({\n        formats: ['mp3', 'wav', 'm4a', 'aac'],\n        maxFileSizeMB: 10,\n        maxDurationSeconds: 60,\n        recommendedDurationSeconds: 30\n      });\n    }\n  }, []);\n\n  // \n  const loadFileList = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList();\ndata;`;\n      const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n      const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n      \n      // \n      const filesWithType = files.map(file => ({\n        ...file,\n        type: (file as any).type || 'general' as const,\n        isDefault: (file as any).isDefault || false,\n      }));\n      \n      setFileList(filesWithType);\n    } catch (error) {\n      console.error(':', error);\n      setFileList([]);\n    }\n  }, []);\n\n  // \n  const handleSelectAndUploadAudioFile = useCallback(async () => {\n    if (isUploading) return;\n    \n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.selectAndUploadAudioFile();\ndata;`;\n      \n      // \n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return 90;\n          }\n          return prev + 10;\n        });\n      }, 300);\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      const result = JSON.parse(javaResultString || '{}') as FileUploadResult;\n      \n      clearInterval(progressInterval);\n      setUploadProgress(100);\n      \n      if (result.success) {\n        setSuccessMessage('');\n        setShowSuccess(true);\n        loadFileList(); // \n      } else {\n        setError(result.message || '');\n      }\n    } catch (error) {\n      console.error(':', error);\n      setError('' + (error as Error).message);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  }, [isUploading, loadFileList]);\n\n  // TTS\n  const checkTTSAvailability = useCallback(() => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.isTTSAvailable();\ndata;`;\n      const { javaResultString } = autoWebViewJs.callScript(script);\n      setTtsAvailable(javaResultString === 'true');\n    } catch (error) {\n      console.error('TTS:', error);\n      setTtsAvailable(false);\n    }\n  }, []);\n\n  // \n  const saveSettings = async (newSettings: EmergencyTTSSettings) => {\n    try {\n      const settingsToSave = {\n        ...newSettings,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(TTS_SETTINGS_KEY, settingsToSave);\n      setSettings(settingsToSave);\n      setSuccessMessage('');\n      setShowSuccess(true);\n      setError(null);\n    } catch (err) {\n      console.error('TTS:', err);\n      setError('');\n    }\n  };\n\n  // \n  const saveVoiceConfig = async (newConfig: VoiceEmergencyConfig) => {\n    try {\n      const configToSave = {\n        ...newConfig,\n        lastUpdated: Date.now(),\n      };\n      \n      await autoJsStoreUtils.write(VOICE_CONFIG_KEY, configToSave);\n      setVoiceConfig(configToSave);\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    }\n  };\n\n  // TTS\n  const handleRecord = useCallback(() => {\n    if (!recordText.trim()) {\n      setError('');\n      return;\n    }\n\n    if (!ttsAvailable) {\n      setError('TTS');\n      return;\n    }\n\n    try {\n      setIsRecording(true);\n      // TTS_YYYYMMDD_HHMMSS.wav\n      const now = new Date();\n      const timestamp = now.getFullYear().toString() + \n                       (now.getMonth() + 1).toString().padStart(2, '0') + \n                       now.getDate().toString().padStart(2, '0') + '_' +\n                       now.getHours().toString().padStart(2, '0') + \n                       now.getMinutes().toString().padStart(2, '0') + \n                       now.getSeconds().toString().padStart(2, '0');\n      const fileName = `TTS_${timestamp}.wav`;\n      \n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.recordTTS(\"${recordText.replace(/\"/g, '\\\\\"')}\", \"${fileName}\", ${recordSpeed}, ${recordPitch});\ndata;`;\n      \n      // \n      setTimeout(() => {\n        try {\n          const { javaResultString: resultJson } = autoWebViewJs.callScript(script);\n          console.log(':', resultJson);\n          const result = JSON.parse(resultJson || '{}') as TTSRecordResult;\n          \n          if (result.success) {\n            setSuccessMessage('');\n            setShowSuccess(true);\n            setShowRecordDialog(false);\n            loadFileList(); // \n          } else {\n            setError(result.message || '');\n          }\n        } catch (error) {\n          console.error(':', error);\n          setError('' + (error as Error).message);\n        } finally {\n          setIsRecording(false);\n        }\n      }, 2000);\n    } catch (error) {\n      setError('' + (error as Error).message);\n      setIsRecording(false);\n    }\n  }, [recordText, recordSpeed, recordPitch, ttsAvailable, loadFileList]);\n\n  // \n  const handlePlayFile = useCallback((filePath: string) => {\n    try {\n      if (playingFile === filePath) {\n        setPlayingFile(null);\n        return;\n      }\n\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.playFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success === 'true') {\n        setPlayingFile(filePath);\n        setTimeout(() => setPlayingFile(null), 3000);\n      } else {\n        setError('');\n      }\n    } catch (error) {\n      setError('' + (error as Error).message);\n    }\n  }, [playingFile]);\n\n  // \n  const handleShareFile = useCallback((filePath: string) => {\n    try {\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.shareFile(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      if (success !== 'true') {\n        setError('');\n      }\n    } catch (error) {\n      setError('' + (error as Error).message);\n    }\n  }, []);\n\n  // \n  const handleDeleteFile = useCallback((filePath: string) => {\n    if (window.confirm('')) {\n      try {\n        const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.deleteFile(\"${filePath.replace(/\"/g, '\\\\\"')}\");\ndata;`;\n        const { javaResultString: success } = autoWebViewJs.callScript(script);\n        if (success === 'true') {\n          setSuccessMessage('');\n          setShowSuccess(true);\n          loadFileList();\n        } else {\n          setError('');\n        }\n      } catch (error) {\n        setError('' + (error as Error).message);\n      }\n    }\n  }, [loadFileList]);\n\n  // \n  const setAsDefaultAudio = useCallback(async (filePath: string, type: 'medical' | 'security') => {\n    try {\n      // Android\n      const script = `var data = com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.setFileAsDefault(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"${type}\");\ndata;`;\n      const { javaResultString: success } = autoWebViewJs.callScript(script);\n      \n      if (success !== 'true') {\n        setError('');\n        return;\n      }\n      \n      const newConfig = { ...voiceConfig };\n      if (type === 'medical') {\n        newConfig.medicalDefault = filePath;\n        // TTS\n        const updatedSettings = {\n          ...settings,\n          medicalEmergencyAudioPath: filePath,\n          useCustomAudio: true,\n        };\n        setSettings(updatedSettings);\n        await saveSettings(updatedSettings);\n      } else {\n        newConfig.securityDefault = filePath;\n      }\n      \n      await saveVoiceConfig(newConfig);\n      \n      // \n      const updatedFiles = fileList.map(file => ({\n        ...file,\n        isDefault: file.filePath === filePath,\n      }));\n      setFileList(updatedFiles);\n      \n      setSuccessMessage(`${type === 'medical' ? '' : ''}`);\n      setShowSuccess(true);\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    }\n  }, [voiceConfig, fileList, settings, saveSettings, saveVoiceConfig]);\n\n  // \n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  // \n  const formatTime = (timestamp: number): string => {\n    return new Date(timestamp).toLocaleString();\n  };\n\n  // \n  const formatDuration = (milliseconds: number): string => {\n    if (!milliseconds || milliseconds <= 0) return '';\n    const seconds = Math.floor(milliseconds / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    if (minutes > 0) {\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    return `${seconds}s`;\n  };\n\n  // TTS\n  const testTTS = async () => {\n    if (!settings.message.trim()) {\n      setError('');\n      return;\n    }\n\n    try {\n      setTesting(true);\n      \n      // AndroidTTS\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.testTTS(\"${settings.message}\", ${settings.voiceSpeed}, ${settings.voicePitch});\n      `;\n      \n      await new Promise(resolve => setTimeout(resolve, 500)); // \n      // TODO: \n      autoWebViewJs.callScript(script);\n      \n    } catch (err) {\n      console.error('TTS:', err);\n      setError('TTS');\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  // TTS\n  const stopTest = async () => {\n    try {\n      const script = `\n        com.fanfanlo.emergencycall.manager.EmergencyTTSManager.stopTest();\n      `;\n      // TODO: \n      autoWebViewJs.callScript(script);\n      setTesting(false);\n    } catch (err) {\n      console.error('TTS:', err);\n    }\n  };\n\n  const handleSettingChange = (key: keyof EmergencyTTSSettings, value: any) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    \n    // /\n    if (key === 'enabled') {\n      saveSettings(newSettings);\n    }\n  };\n\n  const handleSave = () => {\n    if (settings.enabled && !settings.useCustomAudio && !settings.message.trim()) {\n      setError('TTS');\n      return;\n    }\n    saveSettings(settings);\n  };\n\n  if (loading) {\n    return (\n      <Box sx={{ p: 2, textAlign: 'center' }}>\n        <Typography>...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ mb: 3 }}>\n      {/*  */}\n      <Paper \n        elevation={1} \n        sx={{ \n          p: 2, \n          display: 'flex', \n          alignItems: 'center',\n          justifyContent: 'space-between',\n          borderRadius: 1,\n        }}\n      >\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          gap: { xs: 1, sm: 2 },\n          flexWrap: { xs: 'wrap', sm: 'nowrap' },\n          flex: 1,\n          minWidth: 0\n        }}>\n          <Typography \n            variant=\"subtitle1\" \n            sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: 1,\n              fontSize: { xs: '0.95rem', sm: '1.25rem' },\n              minWidth: 0,\n              flexShrink: 0\n            }}\n          >\n            <VolumeUp fontSize=\"small\" />\n            <Box component=\"span\" sx={{ \n              display: { xs: 'none', sm: 'inline' }\n            }}></Box>\n            <Box component=\"span\" sx={{ \n              display: { xs: 'inline', sm: 'none' }\n            }}></Box>\n          </Typography>\n          \n          <Box sx={{ \n            display: 'flex', \n            alignItems: 'center', \n            gap: { xs: 1, sm: 2 },\n            flexWrap: { xs: 'wrap', sm: 'nowrap' }\n          }}>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={settings.enabled}\n                  onChange={(e) => handleSettingChange('enabled', e.target.checked)}\n                  color=\"primary\"\n                  size=\"small\"\n                />\n              }\n              label={settings.enabled ? '' : ''}\n              sx={{ \n                margin: 0,\n                '& .MuiFormControlLabel-label': {\n                  fontSize: { xs: '0.8rem', sm: '0.875rem' }\n                }\n              }}\n            />\n            \n            {/*  */}\n            {/* <Chip \n              size=\"small\"\n              icon={ttsAvailable ? <VolumeUp /> : <MusicNote />}\n              label={ttsAvailable === null ? '...' : (ttsAvailable ? 'TTS' : 'TTS')}\n              color={ttsAvailable === null ? 'default' : (ttsAvailable ? 'success' : 'warning')}\n              variant=\"outlined\"\n              sx={{ \n                fontSize: { xs: '0.7rem', sm: '0.8125rem' },\n                height: { xs: '24px', sm: '32px' }\n              }}\n            /> */}\n          </Box>\n        </Box>\n        \n        <Button\n          variant=\"outlined\"\n          size=\"small\"\n          startIcon={expanded ? <ExpandLess /> : <Settings />}\n          onClick={() => setExpanded(!expanded)}\n          sx={{ \n            fontSize: { xs: '0.75rem', sm: '0.875rem' },\n            padding: { xs: '4px 8px', sm: '6px 16px' },\n            minWidth: { xs: 'auto', sm: '64px' },\n            flexShrink: 0\n          }}\n        >\n          <Box component=\"span\" sx={{ display: { xs: 'none', sm: 'inline' } }}>\n            {expanded ? '' : ''}\n          </Box>\n          <Box component=\"span\" sx={{ display: { xs: 'inline', sm: 'none' } }}>\n            {expanded ? '' : ''}\n          </Box>\n        </Button>\n      </Paper>\n\n      {/*  */}\n      <Collapse in={expanded}>\n        <Paper \n          elevation={0} \n          sx={{ \n            mt: 1, \n            p: 0,\n            border: '1px solid', \n            borderColor: 'divider',\n            borderRadius: 1,\n          }}\n        >\n          {/*  */}\n          <Tabs \n            value={activeTab} \n            onChange={(_, newValue) => setActiveTab(newValue)}\n            variant=\"fullWidth\"\n          >\n            {/* <Tab label=\"\" /> */}\n            <Tab label=\"/\" />\n            <Tab label=\"\" />\n          </Tabs>\n\n          {/*  */}\n          <Box sx={{ p: 2 }}>\n            {/*  Tab */}\n            {activeTab === -1 && (\n              <Box>\n                {/*  */}\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={3}\n                    value={settings.message}\n                    onChange={(e) => handleSettingChange('message', e.target.value)}\n                    placeholder=\"...\"\n                    disabled={!settings.enabled}\n                    helperText={`: ${settings.message.length} `}\n                    sx={{ \n                      '& .MuiInputBase-input': {\n                        fontSize: '16px',\n                        lineHeight: 1.5,\n                      }\n                    }}\n                  />\n                </Box>\n\n                {/*  */}\n                {settings.enabled && (\n                  <>\n                    <Divider sx={{ my: 3 }} />\n                    \n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                      \n                    </Typography>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.repeatInterval / 1000} \n                      </Typography>\n                      <Slider\n                        value={settings.repeatInterval}\n                        onChange={(_, value) => handleSettingChange('repeatInterval', value)}\n                        min={2000}\n                        max={10000}\n                        step={500}\n                        marks={[\n                          { value: 2000, label: '2s' },\n                          { value: 5000, label: '5s' },\n                          { value: 10000, label: '10s' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                        valueLabelFormat={(value) => `${value / 1000}s`}\n                      />\n                    </Box>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.voiceSpeed}x\n                      </Typography>\n                      <Slider\n                        value={settings.voiceSpeed}\n                        onChange={(_, value) => handleSettingChange('voiceSpeed', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '0.5x' },\n                          { value: 1.0, label: '1.0x' },\n                          { value: 2.0, label: '2.0x' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                      <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                        : {settings.voicePitch}x\n                      </Typography>\n                      <Slider\n                        value={settings.voicePitch}\n                        onChange={(_, value) => handleSettingChange('voicePitch', value)}\n                        min={0.5}\n                        max={2.0}\n                        step={0.1}\n                        marks={[\n                          { value: 0.5, label: '' },\n                          { value: 1.0, label: '' },\n                          { value: 2.0, label: '' },\n                        ]}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Box>\n                  </>\n                )}\n              </Box>\n            )}\n\n            {/*  Tab */}\n            {activeTab === 0 && (\n              <Box>\n                {/*  */}\n                <Box sx={{ mb: 4 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  \n                  {!ttsAvailable ? (\n                    <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                      TTS\n                    </Alert>\n                  ) : (\n                    <Button\n                      variant=\"contained\"\n                      startIcon={<Mic />}\n                      onClick={onRecordClick}\n                      disabled={isUploading}\n                      sx={{ mb: 3 }}\n                    >\n                      \n                    </Button>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     \"\"<br />\n                     <br />\n                     <br />\n                     \n                  </Typography>\n                </Box>\n\n                <Divider sx={{ my: 3 }} />\n\n                {/*  */}\n                <Box>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                    \n                  </Typography>\n                  \n                  <Button\n                    variant=\"outlined\"\n                    startIcon={isUploading ? <CircularProgress size={16} /> : <CloudUpload />}\n                    onClick={handleSelectAndUploadAudioFile}\n                    disabled={isUploading}\n                    sx={{ mb: 2 }}\n                  >\n                    {isUploading ? '...' : ''}\n                  </Button>\n                  \n                  {/*  */}\n                  {isUploading && uploadProgress > 0 && (\n                    <Box sx={{ mb: 2 }}>\n                      <LinearProgress \n                        variant=\"determinate\" \n                        value={uploadProgress} \n                        sx={{ mb: 1 }}\n                      />\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center' }}>\n                        ... {uploadProgress}%\n                      </Typography>\n                    </Box>\n                  )}\n                  \n                  {supportedFormats && supportedFormats.formats && (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                      : {supportedFormats.formats.join(', ').toUpperCase()}<br />\n                      : {supportedFormats.maxFileSizeMB}MB<br />\n                      : {supportedFormats.recommendedDurationSeconds}\n                    </Typography>\n                  )}\n                  \n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                     <br />\n                    {/*  <br />\n                     <br /> */}\n                     \n                  </Typography>\n                </Box>\n              </Box>\n            )}\n\n            {/*  Tab */}\n            {activeTab === 1 && (\n              <Box>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                    \n                  </Typography>\n                  <Button\n                    size=\"small\"\n                    startIcon={<Refresh />}\n                    onClick={loadFileList}\n                  >\n                    \n                  </Button>\n                </Box>\n\n                {fileList.length === 0 ? (\n                  <Typography color=\"text.secondary\" sx={{ textAlign: 'center', py: 3 }}>\n                    \n                  </Typography>\n                ) : (\n                  <List dense>\n                    {fileList.map((file, index) => (\n                      <React.Fragment key={file.filePath}>\n                        <ListItem sx={{ pl: 0 }}>\n                          <ListItemText\n                            primary={\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                  {file.source === 'uploaded' ? <InsertDriveFile fontSize=\"small\" /> : <Mic fontSize=\"small\" />}\n                                  <Typography variant=\"body2\" fontWeight=\"medium\">\n                                    {file.fileName}\n                                  </Typography>\n                                </Box>\n                                \n                                {/*  */}\n                                <Box sx={{ display: 'flex', gap: 0.5 }}>\n                                  {file.isDefault && (\n                                    <Chip size=\"small\" label=\"\" color=\"primary\" />\n                                  )}\n                                  <Chip \n                                    size=\"small\" \n                                    label={file.source === 'uploaded' ? '' : ''} \n                                    color={file.source === 'uploaded' ? 'secondary' : 'default'}\n                                    variant=\"outlined\"\n                                  />\n                                  {file.format && (\n                                    <Chip \n                                      size=\"small\" \n                                      label={file.format.toUpperCase()} \n                                      color=\"default\" \n                                      variant=\"outlined\"\n                                    />\n                                  )}\n                                </Box>\n                              </Box>\n                            }\n                            secondary={\n                              <Box>\n                                <Typography variant=\"caption\" color=\"text.secondary\">\n                                  {formatFileSize(file.fileSize)}  {formatTime(file.createTime)}\n                                  {file.duration && file.duration > 0 && `  ${formatDuration(file.duration)}`}\n                                </Typography>\n                                {file.mimeType && (\n                                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                                    {file.mimeType}\n                                  </Typography>\n                                )}\n                              </Box>\n                            }\n                          />\n                          <ListItemSecondaryAction>\n                            <Box sx={{ display: 'flex', gap: 0.5 }}>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handlePlayFile(file.filePath)}\n                                color={playingFile === file.filePath ? \"primary\" : \"default\"}\n                              >\n                                {playingFile === file.filePath ? <Stop /> : <PlayArrow />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => setAsDefaultAudio(file.filePath, 'medical')}\n                                color={file.isDefault ? \"primary\" : \"default\"}\n                              >\n                                {file.isDefault ? <Star /> : <StarBorder />}\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleShareFile(file.filePath)}\n                              >\n                                <Share />\n                              </IconButton>\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleDeleteFile(file.filePath)}\n                                color=\"error\"\n                              >\n                                <Delete />\n                              </IconButton>\n                            </Box>\n                          </ListItemSecondaryAction>\n                        </ListItem>\n                        {index < fileList.length - 1 && <Divider />}\n                      </React.Fragment>\n                    ))}\n                  </List>\n                )}\n              </Box>\n            )}\n\n            {/*  */}\n            <Divider sx={{ my: 3 }} />\n            \n            {/* <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', mb: 2 }}>\n              <Button\n                variant=\"contained\"\n                onClick={handleSave}\n                sx={{ minWidth: 100 }}\n              >\n                \n              </Button>\n\n              {settings.enabled && settings.message.trim() && (\n                <>\n                  {!testing ? (\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<PlayArrow />}\n                      onClick={testTTS}\n                      sx={{ minWidth: 100 }}\n                    >\n                      \n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      startIcon={<Stop />}\n                      onClick={stopTest}\n                      sx={{ minWidth: 100 }}\n                    >\n                      \n                    </Button>\n                  )}\n                </>\n              )}\n            </Box> */}\n\n            {/*  */}\n            <Box sx={{ p: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 1 }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                <strong>:</strong><br />\n                 1: <br />\n                 2: <br />\n                {/*  3: <br /> */}\n                 3: <br />\n                <br />\n                <strong>:</strong><br />\n                 <br />\n                 <br />\n                 <br />\n                 \n              </Typography>\n            </Box>\n          </Box>\n        </Paper>\n      </Collapse>\n\n      {/*  */}\n      <Dialog open={showRecordDialog} onClose={() => setShowRecordDialog(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle></DialogTitle>\n        <DialogContent>\n          <TextField\n            fullWidth\n            multiline\n            rows={4}\n            label=\"\"\n            value={recordText}\n            onChange={(e) => setRecordText(e.target.value)}\n            margin=\"normal\"\n            placeholder=\"...\"\n            helperText={`: ${recordText.length} `}\n          />\n          \n          {isRecording && (\n            <Box sx={{ mt: 2 }}>\n              <LinearProgress />\n              <Typography variant=\"body2\" sx={{ mt: 1, textAlign: 'center' }}>\n                ...\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ mt: 3 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              \n            </Typography>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                : {recordSpeed}x\n              </Typography>\n              <Slider\n                value={recordSpeed}\n                onChange={(_, value) => setRecordSpeed(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '' },\n                  { value: 1.0, label: '' },\n                  { value: 2.0, label: '' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n            \n            <Box sx={{ mt: 2 }}>\n              <Typography variant=\"body2\" gutterBottom>\n                : {recordPitch}x\n              </Typography>\n              <Slider\n                value={recordPitch}\n                onChange={(_, value) => setRecordPitch(value as number)}\n                min={0.5}\n                max={2.0}\n                step={0.1}\n                marks={[\n                  { value: 0.5, label: '' },\n                  { value: 1.0, label: '' },\n                  { value: 2.0, label: '' },\n                ]}\n                disabled={isRecording}\n              />\n            </Box>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <ReportButton />\n          <Button \n            onClick={() => setShowRecordDialog(false)}\n            disabled={isRecording}\n          >\n            \n          </Button>\n          <Button \n            onClick={handleRecord} \n            variant=\"contained\"\n            disabled={!recordText.trim() || isRecording}\n            startIcon={isRecording ? undefined : <Mic />}\n          >\n            {isRecording ? '...' : ''}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/*  */}\n      <Snackbar\n        open={showSuccess}\n        autoHideDuration={3000}\n        onClose={() => setShowSuccess(false)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setShowSuccess(false)} severity=\"success\">\n          {successMessage || 'TTS'}\n        </Alert>\n      </Snackbar>\n\n      {/*  */}\n      <Snackbar\n        open={!!error}\n        autoHideDuration={6000}\n        onClose={() => setError(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert onClose={() => setError(null)} severity=\"error\">\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};","export { EmergencyTTSSettings } from './EmergencyTTSSettings';","import React, { useState, useEffect } from 'react';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\n\ninterface ErrorInfo {\n  id: string;\n  timestamp: number;\n  errorType: string;\n  severity: string;\n  message: string;\n  stackTrace?: string;\n  context?: Record<string, string>;\n}\n\ninterface ErrorStorage {\n  errors: ErrorInfo[];\n}\n\nexport const ErrorDisplay: React.FC = () => {\n  const [errors, setErrors] = useState<ErrorInfo[]>([]);\n  const [isVisible, setIsVisible] = useState(false);\n\n  const loadErrors = () => {\n    try {\n      const parsed = autoJsStoreUtils.read<ErrorStorage>('EMERGENCY_ERRORS_STORAGE', {\"errors\":[]});\n      // const parsed: ErrorStorage = JSON.parse(errorData);\n      \n      if (parsed && parsed.errors && parsed.errors.length > 0) {\n        setErrors(parsed.errors);\n        setIsVisible(true);\n      } else {\n        setErrors([]);\n        setIsVisible(false);\n      }\n    } catch (e) {\n      console.error(':', e);\n      setErrors([]);\n      setIsVisible(false);\n    }\n  };\n\n  const clearErrors = () => {\n    try {\n      // \n      autoJsStoreUtils.write('EMERGENCY_ERRORS_STORAGE', '{\"errors\":[]}');\n      setErrors([]);\n      setIsVisible(false);\n      \n      console.log('');\n    } catch (e) {\n      console.error(':', e);\n    }\n  };\n\n  const handleErrorEvent = () => {\n    console.log('');\n    loadErrors();\n  };\n\n  const handleErrorClearedEvent = () => {\n    console.log('');\n    setErrors([]);\n    setIsVisible(false);\n  };\n\n  useEffect(() => {\n    // \n    loadErrors();\n\n    // \n    const handleFocus = () => {\n      console.log('');\n      loadErrors();\n    };\n\n    // \n    const handleCustomError = (event: any) => {\n      console.log(':', event);\n      handleErrorEvent();\n    };\n\n    const handleCustomErrorCleared = (event: any) => {\n      console.log(':', event);\n      handleErrorClearedEvent();\n    };\n\n    // \n    window.addEventListener('focus', handleFocus);\n    window.addEventListener('emergency_error_added', handleCustomError);\n    window.addEventListener('emergency_errors_cleared', handleCustomErrorCleared);\n\n    return () => {\n      window.removeEventListener('focus', handleFocus);\n      window.removeEventListener('emergency_error_added', handleCustomError);\n      window.removeEventListener('emergency_errors_cleared', handleCustomErrorCleared);\n    };\n  }, []);\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'critical': return 'bg-red-100 border-red-500 text-red-800';\n      case 'high': return 'bg-orange-100 border-orange-500 text-orange-800';\n      case 'medium': return 'bg-yellow-100 border-yellow-500 text-yellow-800';\n      case 'low': return 'bg-blue-100 border-blue-500 text-blue-800';\n      default: return 'bg-gray-100 border-gray-500 text-gray-800';\n    }\n  };\n\n  const getSeverityText = (severity: string) => {\n    switch (severity) {\n      case 'critical': return '';\n      case 'high': return '';\n      case 'medium': return '';\n      case 'low': return '';\n      default: return '';\n    }\n  };\n\n  const getErrorTypeText = (type: string) => {\n    switch (type) {\n      case 'network_error': return '';\n      case 'api_error': return 'API';\n      case 'system_error': return '';\n      default: return type;\n    }\n  };\n\n  const formatTime = (timestamp: number) => {\n    return new Date(timestamp).toLocaleString('zh-CN');\n  };\n\n  if (!isVisible || errors.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed top-4 left-4 right-4 z-50 max-w-2xl mx-auto\">\n      <div className=\"bg-white border border-red-300 rounded-lg shadow-lg p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-semibold text-red-800 flex items-center\">\n            <span className=\"mr-2\"></span>\n             {errors.length} \n          </h3>\n          <button\n            onClick={clearErrors}\n            className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm\"\n          >\n            \n          </button>\n        </div>\n        \n        <div className=\"max-h-64 overflow-y-auto space-y-2\">\n          {errors.slice(0, 3).map((error) => (\n            <div\n              key={error.id}\n              className={`p-3 rounded border-l-4 ${getSeverityColor(error.severity)}`}\n            >\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"font-medium text-sm\">\n                  {getErrorTypeText(error.errorType)}\n                </span>\n                <span className=\"text-xs opacity-75\">\n                  {getSeverityText(error.severity)} | {formatTime(error.timestamp)}\n                </span>\n              </div>\n              \n              <p className=\"text-sm mb-2\">{error.message}</p>\n              \n              {error.context && Object.keys(error.context).length > 0 && (\n                <div className=\"text-xs opacity-75\">\n                  <strong>:</strong>\n                  {Object.entries(error.context).map(([key, value]) => (\n                    <span key={key} className=\"ml-2\">\n                      {key}: {value}\n                    </span>\n                  ))}\n                </div>\n              )}\n              \n              {error.stackTrace && (\n                <details className=\"mt-2\">\n                  <summary className=\"text-xs cursor-pointer opacity-75\">\n                    \n                  </summary>\n                  <pre className=\"text-xs mt-1 p-2 bg-gray-100 rounded overflow-x-auto whitespace-pre-wrap\">\n                    {error.stackTrace}\n                  </pre>\n                </details>\n              )}\n            </div>\n          ))}\n          \n          {errors.length > 3 && (\n            <div className=\"text-center text-sm text-gray-600 py-2\">\n               {errors.length - 3} ...\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  List,\n  ListItem,\n  Button,\n  Chip,\n  Alert,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Divider\n} from '@mui/material';\nimport {\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Help as HelpIcon,\n  Settings as SettingsIcon,\n  Refresh as RefreshIcon,\n  Security as SecurityIcon,\n  Info as InfoIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs, isRealInAndroid } from '@droid/android';\nimport { trackingPrint } from '@app/model';\n\n// ID\nconst FALL_DETECTION_EXCLUDED_PERMISSIONS = [\n  'notification',           //  - \n  'desktop_shortcut'        //  - \n];\n\ninterface Permission {\n  id: string;\n  name: string;\n  type: 'runtime' | 'special' | 'vendor';\n  status: 'granted' | 'denied' | 'unknown';\n  canDetect: boolean;\n  description: string;\n  settingsAction: string;\n}\n\ninterface PermissionsData {\n  permissions: Permission[];\n  timestamp: number;\n  deviceBrand: string;\n  apiLevel: number;\n  error?: string;\n}\n\ninterface PermissionStatusPanelProps {\n  isExpanded: boolean;\n  onStatsChange: (stats: { granted: number; denied: number; unknown: number }) => void;\n}\n\nexport const PermissionStatusPanel: React.FC<PermissionStatusPanelProps> = ({\n  isExpanded,\n  onStatsChange\n}) => {\n  const [permissionsData, setPermissionsData] = useState<PermissionsData | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [infoDialogOpen, setInfoDialogOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<Permission | null>(null);\n\n  const fetchPermissions = async () => {\n    try {\n      if(!isRealInAndroid) return;\n      setLoading(true);\n      setError(null);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          isAndroid: isRealInAndroid\n        }\n      }});\n      \n      const script = `\n        var info = com.fanfanlo.emergencycall.manager.PermissionJSInterface.getAllPermissionsStatus();\n        info;\n      `;\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      \n      if (!javaResultString) {\n        throw new Error('No response from permission interface');\n      }\n      \n      const data = JSON.parse(javaResultString) as PermissionsData;\n      \n      if (data.error) {\n        throw new Error(data.error);\n      }\n      \n      setPermissionsData(data);\n      console.log('Permissions data loaded:', data);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionsCount: data.permissions.length,\n          grantedCount: data.permissions.filter(p => p.status === 'granted').length,\n          deniedCount: data.permissions.filter(p => p.status === 'denied').length,\n          unknownCount: data.permissions.filter(p => p.status === 'unknown').length,\n          deviceBrand: data.deviceBrand,\n          apiLevel: data.apiLevel\n        }\n      }});\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(errorMessage);\n      console.error('Error fetching permissions:', err);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          error: errorMessage,\n          isAndroid: isRealInAndroid\n        }\n      }});\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // \n  const filterRelevantPermissions = (permissions: Permission[]): Permission[] => {\n    return permissions.filter(permission => \n      !FALL_DETECTION_EXCLUDED_PERMISSIONS.includes(permission.id)\n    );\n  };\n\n  // \n  const updateStats = (permissions: Permission[]) => {\n    // \n    const relevantPermissions = filterRelevantPermissions(permissions);\n    \n    const granted = relevantPermissions.filter(p => p.status === 'granted').length;\n    const denied = relevantPermissions.filter(p => p.status === 'denied').length;\n    const unknown = relevantPermissions.filter(p => p.status === 'unknown').length;\n    onStatsChange({ granted, denied, unknown });\n  };\n\n  useEffect(() => {\n    fetchPermissions();\n  }, []);\n\n  //  - \n  useEffect(() => {\n    let intervalId: NodeJS.Timeout | null = null;\n    \n    if (isExpanded && permissionsData) {\n      intervalId = setInterval(() => {\n        fetchPermissions();\n      }, 1500); // 1.5\n    }\n    \n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [isExpanded, permissionsData]);\n\n  // \n  useEffect(() => {\n    if (permissionsData?.permissions) {\n      updateStats(permissionsData.permissions);\n    }\n  }, [permissionsData, onStatsChange]);\n\n  const handleOpenSettings = (permission: Permission) => {\n    try {\n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          permissionName: permission.name,\n          permissionType: permission.type,\n          currentStatus: permission.status,\n          canDetect: permission.canDetect\n        }\n      }});\n      \n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.openPermissionSettings(\"${permission.id}\");\n      `;\n      autoWebViewJs.callScript(script);\n      console.log(`Opening settings for permission: ${permission.id}`);\n      \n      // JPush\n      if (permission.id === 'notification') {\n        // \n        setTimeout(() => {\n          try {\n            const jpushScript = `\n              com.fanfanlo.emergencycall.jpush.JpushManager.checkAndReinitializeIfNeeded();\n            `;\n            autoWebViewJs.callScript(jpushScript);\n            console.log('JPush reinitialization check triggered');\n            \n            // \n            setTimeout(() => fetchPermissions(), 1000);\n          } catch (jpushErr) {\n            console.error('Error checking JPush status:', jpushErr);\n            \n            // JPush\n            trackingPrint({params:{\n              type:\"\",\n              title:\"JPush\",\n              subtitle:\"JPush-\",\n              extra:{\n                timestamp: Date.now(),\n                error: jpushErr instanceof Error ? jpushErr.message : String(jpushErr)\n              }\n            }});\n          }\n        }, 3000); // 3\n      }\n    } catch (err) {\n      console.error('Error opening permission settings:', err);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          error: err instanceof Error ? err.message : String(err)\n        }\n      }});\n    }\n  };\n\n  // const handleConfirmLockScreenPermission = () => {\n  //   try {\n  //     // \n  //     trackingPrint({params:{\n  //       type:\"\",\n  //       title:\"\",\n  //       subtitle:\"-\",\n  //       extra:{\n  //         timestamp: Date.now()\n  //       }\n  //     }});\n      \n  //     const script = `\n  //       com.fanfanlo.emergencycall.manager.PermissionJSInterface.confirmLockScreenPermission();\n  //     `;\n  //     autoWebViewJs.callScript(script);\n  //     console.log('Confirmed lock screen permission');\n      \n  //     // \n  //     setTimeout(() => fetchPermissions(), 500);\n  //   } catch (err) {\n  //     console.error('Error confirming lock screen permission:', err);\n      \n  //     // \n  //     trackingPrint({params:{\n  //       type:\"\",\n  //       title:\"\",\n  //       subtitle:\"-\",\n  //       extra:{\n  //         timestamp: Date.now(),\n  //         error: err instanceof Error ? err.message : String(err)\n  //       }\n  //     }});\n  //   }\n  // };\n\n  const handleShowPermissionInfo = (permission: Permission) => {\n    // \n    trackingPrint({params:{\n      type:\"\",\n      title:\"\",\n      subtitle:\"-\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: permission.id,\n        permissionName: permission.name,\n        permissionStatus: permission.status\n      }\n    }});\n    \n    setSelectedPermission(permission);\n    setInfoDialogOpen(true);\n  };\n\n  const handleCloseInfoDialog = () => {\n    // \n    trackingPrint({params:{\n      type:\"\",\n      title:\"\",\n      subtitle:\"-\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: selectedPermission?.id\n      }\n    }});\n    \n    setInfoDialogOpen(false);\n    setSelectedPermission(null);\n  };\n\n  const getPermissionReason = (permission: Permission): string => {\n    const reasonMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': '',\n      'android.permission.ACCESS_COARSE_LOCATION': '',\n      'android.permission.BODY_SENSORS': '',\n      'android.permission.CAMERA': '',\n      'android.permission.RECORD_AUDIO': '',\n      'android.permission.ACTIVITY_RECOGNITION': '()',\n      'overlay': '',\n      'lock_screen_popup': '',\n      'lock_screen_display': '',\n      'desktop_shortcut': '',\n      'notification': ''\n    };\n    return reasonMap[permission.id] || '';\n  };\n\n  const getPermissionImpact = (permission: Permission): string => {\n    const impactMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': ' ',\n      'android.permission.ACCESS_COARSE_LOCATION': ' ',\n      'android.permission.BODY_SENSORS': ' ',\n      'android.permission.CAMERA': ' ',\n      'android.permission.RECORD_AUDIO': ' ',\n      'android.permission.ACTIVITY_RECOGNITION': ' ',\n      'overlay': ' ',\n      'lock_screen_popup': ' ',\n      'lock_screen_display': ' ',\n      'desktop_shortcut': ' ',\n      'notification': ' '\n    };\n    return impactMap[permission.id] || '';\n  };\n\n  const getStatusIcon = (permission: Permission) => {\n    const iconProps = { fontSize: 18 };\n    switch (permission.status) {\n      case 'granted':\n        return <CheckCircleIcon sx={{ color: 'success.main', ...iconProps }} />;\n      case 'denied':\n        return <ErrorIcon sx={{ color: 'error.main', ...iconProps }} />;\n      case 'unknown':\n        return <HelpIcon sx={{ color: 'warning.main', ...iconProps }} />;\n      default:\n        return <HelpIcon sx={{ color: 'grey.500', ...iconProps }} />;\n    }\n  };\n\n  const getStatusChip = (permission: Permission) => {\n    const statusConfig = {\n      granted: { label: '', color: 'success' as const },\n      denied: { label: '', color: 'error' as const },\n      unknown: { label: '?', color: 'warning' as const }\n    };\n\n    const config = statusConfig[permission.status];\n    return (\n      <Chip \n        label={config.label} \n        color={config.color} \n        size=\"small\"\n        sx={{ \n          minWidth: 24,\n          height: 20,\n          fontSize: '0.7rem',\n          '& .MuiChip-label': { px: 0.5 }\n        }}\n      />\n    );\n  };\n\n  const getTypeLabel = (type: string) => {\n    const typeLabels = {\n      runtime: '',\n      special: '',\n      vendor: ''\n    };\n    return typeLabels[type as keyof typeof typeLabels] || type;\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"120px\">\n        <CircularProgress size={20} />\n        <Typography variant=\"caption\" sx={{ ml: 1 }}>...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\">: {error}</Typography>\n        <Button \n          onClick={() => {\n            // \n            trackingPrint({params:{\n              type:\"\",\n              title:\"\",\n              subtitle:\"-\",\n              extra:{\n                timestamp: Date.now(),\n                previousError: error\n              }\n            }});\n            fetchPermissions();\n          }} \n          size=\"small\" \n          sx={{ mt: 0.5 }}\n        >\n          \n        </Button>\n      </Alert>\n    );\n  }\n\n  if (!permissionsData) {\n    return (\n      <Alert severity=\"info\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\"></Typography>\n      </Alert>\n    );\n  }\n\n  const { permissions, deviceBrand, apiLevel } = permissionsData;\n  // \n  const relevantPermissions = filterRelevantPermissions(permissions);\n\n  return (\n    <Paper elevation={1} sx={{ p: 1 }}>\n      {/*  */}\n      {/* <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <SecurityIcon sx={{ mr: 0.5, color: 'primary.main', fontSize: 18 }} />\n          <Typography variant=\"body2\" fontWeight=\"medium\"></Typography>\n        </Box>\n        <Tooltip title=\"\">\n          <IconButton \n            onClick={() => {\n              // \n              trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                  timestamp: Date.now(),\n                  currentPermissionsCount: permissionsData?.permissions.length || 0\n                }\n              }});\n              fetchPermissions();\n            }} \n            size=\"small\" \n            sx={{ p: 0.5 }}\n          >\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </Box> */}\n\n      {/*  */}\n      {/* <Alert severity=\"info\" sx={{ mb: 1, py: 0.5 }}>\n        <Typography variant=\"caption\" display=\"block\">\n            \n        </Typography>\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          {deviceBrand}  API{apiLevel}\n        </Typography>\n      </Alert> */}\n\n      {/*  */}\n      <List sx={{ py: 0 }}>\n        {relevantPermissions.map((permission) => (\n          <ListItem\n            key={permission.id}\n            sx={{\n              borderLeft: 2,\n              borderLeftColor: \n                permission.status === 'granted' ? 'success.main' :\n                permission.status === 'denied' ? 'error.main' : 'warning.main',\n              mb: 0.5,\n              py: 0.5,\n              px: 0.5,\n              borderRadius: 0.5,\n              bgcolor: 'grey.50',\n              display: 'block' // block\n            }}\n          >\n            {/*  +  +  +  */}\n            <Box display=\"flex\" alignItems=\"center\" mb={0.5}>\n              <Box sx={{ mr: 0.5 }}>\n                {getStatusIcon(permission)}\n              </Box>\n              <Typography \n                variant=\"body2\" \n                fontWeight=\"medium\" \n                sx={{ flex: 1, minWidth: 0 }}\n              >\n                {permission.name}\n              </Typography>\n              <Tooltip title=\"\">\n                <IconButton\n                  size=\"large\"\n                  onClick={() => handleShowPermissionInfo(permission)}\n                  sx={{ mr: 0.5, p: 0.25 }}\n                >\n                  <InfoIcon sx={{ fontSize: 16, color: 'primary.main' }} />\n                </IconButton>\n              </Tooltip>\n              {/* {getStatusChip(permission)} */}\n            </Box>\n            \n            {/*  +  */}  \n            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={0.5}>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <Chip \n                  label={getTypeLabel(permission.type)} \n                  variant=\"outlined\" \n                  size=\"small\"\n                  sx={{ \n                    fontSize: '0.65rem',\n                    height: 18,\n                    '& .MuiChip-label': { px: 0.5, py: 0 }\n                  }}\n                />\n                {!permission.canDetect && (\n                  <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.65rem' }}>\n                    \n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            {/*  */}\n            <Box display=\"flex\" gap={0.5}>\n              {/* {(permission.id === 'lock_screen' || permission.id === 'lock_screen_popup' || permission.id === 'lock_screen_display') && permission.status === 'unknown' && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\" \n                  color=\"success\"\n                  onClick={handleConfirmLockScreenPermission}\n                  sx={{ \n                    fontSize: '0.65rem',\n                    minWidth: 'auto',\n                    px: 0.5,\n                    py: 0.25,\n                    height: 24\n                  }}\n                >\n                  \n                </Button>\n              )} */}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<SettingsIcon sx={{ fontSize: 12 }} />}\n                onClick={() => handleOpenSettings(permission)}\n                sx={{ \n                  fontSize: '0.65rem',\n                  minWidth: 'auto',\n                  px: 0.5,\n                  py: 0.25,\n                  height: 24\n                }}\n              >\n                \n              </Button>\n            </Box>\n          </ListItem>\n        ))}\n      </List>\n\n      {/*  */}\n      {/* <Box mt={0.5} py={0.25} px={0.5} bgcolor=\"grey.100\" borderRadius={0.25}>\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.6rem' }}>\n          : {new Date(permissionsData.timestamp).toLocaleTimeString()}\n          {isExpanded && <>  1.5</>}\n        </Typography>\n      </Box> */}\n\n      {/*  */}\n      <Dialog\n        open={infoDialogOpen}\n        onClose={handleCloseInfoDialog}\n        maxWidth=\"sm\"\n        fullWidth\n        PaperProps={{\n          sx: { mx: 1 } // \n        }}\n      >\n        <DialogTitle sx={{ pb: 1 }}>\n          <Box display=\"flex\" alignItems=\"center\">\n            <SecurityIcon sx={{ mr: 1, color: 'primary.main' }} />\n            <Box>\n              <Typography variant=\"h6\" component=\"div\">\n                {selectedPermission?.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {selectedPermission && getTypeLabel(selectedPermission.type)}\n              </Typography>\n            </Box>\n          </Box>\n        </DialogTitle>\n        \n        <DialogContent sx={{ pt: 0 }}>\n          {selectedPermission && (\n            <Box>\n              {/*  */}\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                <Typography variant=\"subtitle2\" sx={{ mr: 1 }}>:</Typography>\n                <Box display=\"flex\" alignItems=\"center\">\n                  {getStatusIcon(selectedPermission)}\n                  <Typography variant=\"body2\" sx={{ ml: 0.5 }}>\n                    {selectedPermission.status === 'granted' ? '' : \n                     selectedPermission.status === 'denied' ? '' : ''}\n                  </Typography>\n                </Box>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"primary.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionReason(selectedPermission)}\n                </Typography>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={1}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"warning.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionImpact(selectedPermission)}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        \n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button \n            onClick={() => {\n              // \"\"\n              trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                  timestamp: Date.now(),\n                  permissionId: selectedPermission?.id,\n                  permissionStatus: selectedPermission?.status\n                }\n              }});\n              handleCloseInfoDialog();\n            }} \n            color=\"primary\"\n          >\n            \n          </Button>\n          {selectedPermission && (\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                // \"\"\n                trackingPrint({params:{\n                  type:\"\",\n                  title:\"\",\n                  subtitle:\"-\",\n                  extra:{\n                    timestamp: Date.now(),\n                    permissionId: selectedPermission.id,\n                    permissionName: selectedPermission.name,\n                    currentStatus: selectedPermission.status,\n                    fromDialog: true\n                  }\n                }});\n                \n                handleOpenSettings(selectedPermission);\n                handleCloseInfoDialog();\n              }}\n              color=\"primary\"\n            >\n              \n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Paper>\n  );\n};","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\lodash@4.17.21\\\\node_modules\\\\lodash\\\\lodash.js\"","import React, { useState, useCallback } from 'react';\nimport {\n    Box,\n    Switch,\n    Button,\n    Typography,\n    Paper,\n    Collapse,\n    Divider,\n    IconButton,\n    TextField,\n    FormControlLabel,\n    Tooltip,\n    Stack,\n    FormControl,\n    MenuItem,\n    InputLabel,\n    Select,\n} from '@mui/material';\nimport {\n    DragIndicator as DragIndicatorIcon,\n    ExpandMore,\n    Delete,\n    PlayArrow,\n    Stop,\n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon\n} from '@mui/icons-material';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { debounce } from 'lodash';\nimport { autoJsStoreUtils } from '@droid/android';\n\nconst PRE_ALARM_CONFIG_KEY = 'PRE_ALARM_ACTIONS_CONFIG';\n\ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\ninterface PreAlarmConfig {\n    enabled: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n}\n\nconst defaultSoundResources = [\n    { id: 'siren_gentle', name: '' },\n    { id: 'beep_short', name: '' },\n    { id: 'alarm_clock', name: '' },\n];\n\nconst SortableActionItem: React.FC<{\n    action: PreAlarmAction;\n    isPlaying: boolean;\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n    onRemove: (id: string) => void;\n    onPreview: (resourceId?: string) => void;\n    onStopPreview: () => void;\n}> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview }) => {\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: isDragging ? 1 : 'auto',\n    };\n\n    return (\n        <Paper\n            ref={setNodeRef}\n            style={style}\n            elevation={isDragging ? 3 : 1}\n            sx={{\n                p: 2,\n                mb: 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                userSelect: 'none',\n            }}\n        >\n            <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                <DragIndicatorIcon />\n            </Box>\n            \n            <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                    <Typography variant=\"subtitle2\">\n                        {action.type === 'sound' ? '' : ''}\n                    </Typography>\n                    <TextField\n                        size=\"small\"\n                        type=\"number\"\n                        label=\" (ms)\"\n                        value={action.duration}\n                        onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\n                        sx={{ width: '100%' }}\n                    />\n                    \n                    {action.type === 'sound' && (\n                        <FormControl size=\"small\" sx={{ width: '100%' }}>\n                            <InputLabel></InputLabel>\n                            <Select\n                                value={action.resourceId || ''}\n                                label=\"\"\n                                onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                startAdornment={\n                                    <Tooltip title={isPlaying ? \"\" : \"\"}>\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                            sx={{ mr: 1 }}\n                                        >\n                                            {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                        </IconButton>\n                                    </Tooltip>\n                                }\n                            >\n                                {defaultSoundResources.map((sound) => (\n                                    <MenuItem key={sound.id} value={sound.id}>\n                                        {sound.name}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    )}\n                </Box>\n            </Box>\n            \n            <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\">\n                <Delete />\n            </IconButton>\n        </Paper>\n    );\n};\n\n// Paper\nconst PreAlarmConfig: React.FC = () => {\n    const [config, setConfig] = useState<PreAlarmConfig | null>(null);\n    const [expanded, setExpanded] = useState(false);\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n\n    const debouncedWrite = useCallback(\n        debounce((newConfig: PreAlarmConfig) => {\n            autoJsStoreUtils.write(PRE_ALARM_CONFIG_KEY, newConfig);\n        }, 500),\n        []\n    );\n\n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    React.useEffect(() => {\n        const loadConfig = async () => {\n            const storedConfig = await autoJsStoreUtils.read<PreAlarmConfig>(PRE_ALARM_CONFIG_KEY);\n            if (storedConfig) {\n                const actionsWithIds = storedConfig.actions.map((action) => ({\n                    ...action,\n                    id: action.id || `action-${Math.random().toString(36).substr(2, 9)}`,\n                }));\n                \n                // maxWaitDuration\n                const calculatedDuration = calculateTotalDuration(actionsWithIds);\n                \n                setConfig({\n                    ...storedConfig,\n                    actions: actionsWithIds,\n                    maxWaitDuration: calculatedDuration,\n                });\n            } else {\n                // 8 + siren_gentle10\n                const defaultActions: PreAlarmAction[] = [\n                    {\n                        id: `action-${Date.now()}-vibration`,\n                        type: 'vibration',\n                        duration: 8000, // 8\n                    },\n                    {\n                        id: `action-${Date.now()}-sound`,\n                        type: 'sound',\n                        duration: 10000, // 10\n                        resourceId: 'siren_gentle',\n                    }\n                ];\n                \n                const totalDuration = calculateTotalDuration(defaultActions);\n                \n                setConfig({\n                    enabled: false,\n                    actions: defaultActions,\n                    maxWaitDuration: totalDuration, // 8000 + 10000 = 18000ms\n                });\n            }\n        };\n        loadConfig();\n    }, []);\n\n    // \n    const calculateTotalDuration = (actions: PreAlarmAction[]): number => {\n        return actions.reduce((total, action) => total + action.duration, 0);\n    };\n\n    const updateConfig = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                const newConfig = { ...prev, ...updates };\n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    // maxWaitDuration\n    const updateConfigWithCalculatedDuration = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                \n                const newConfig = { ...prev, ...updates };\n                \n                // \n                if (updates.actions) {\n                    newConfig.maxWaitDuration = calculateTotalDuration(updates.actions);\n                }\n                \n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    const handleToggleEnabled = (event: React.ChangeEvent<HTMLInputElement>) => {\n        updateConfigWithCalculatedDuration({ enabled: event.target.checked });\n    };\n\n    const handleAddAction = (type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: 9000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfigWithCalculatedDuration({\n            actions: [...(config?.actions || []), newAction],\n        });\n    };\n\n    const handleUpdateAction = (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        if (!config) return;\n        updateConfigWithCalculatedDuration({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    };\n\n    const handleRemoveAction = (id: string) => {\n        if (!config) return;\n        updateConfigWithCalculatedDuration({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!config || !over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfigWithCalculatedDuration({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    };\n\n    const handlePreviewSound = (resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound();\n        \n        console.log(`[WebView] Attempting to preview sound. resourceId: ${resourceId}`);\n\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager JavascriptInterface is not available.');\n        }\n    };\n\n    const handleStopSound = () => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    };\n\n    if (!config) {\n        return <Box sx={{ p: 2, textAlign: 'center' }}>...</Box>;\n    }\n\n    return (\n        <Box>\n            {/*  */}\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"h6\"></Typography>\n                    \n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={config.enabled}\n                                onChange={handleToggleEnabled}\n                                color=\"primary\"\n                            />\n                        }\n                        label={config.enabled ? '' : ''}\n                    />\n                </Box>\n                \n                <IconButton\n                    onClick={() => setExpanded(!expanded)}\n                    sx={{\n                        transform: expanded ? 'rotate(180deg)' : 'rotate(0deg)',\n                        transition: 'transform 0.2s ease-in-out'\n                    }}\n                >\n                    <ExpandMore />\n                </IconButton>\n            </Box>\n\n            {/*  */}\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    {/* UI */}\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom color=\"text.secondary\">\n                            : {config.maxWaitDuration} ({(config.maxWaitDuration / 1000).toFixed(1)})\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontSize: '0.875rem' }}>\n                            \n                        </Typography>\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Box sx={{ mb: 2 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\">\n                                 ({config.actions.length})\n                            </Typography>\n                            <Stack direction=\"row\" spacing={1}>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VolumeUpIcon />}\n                                    onClick={() => handleAddAction('sound')}\n                                >\n                                    \n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VibrationIcon />}\n                                    onClick={() => handleAddAction('vibration')}\n                                >\n                                    \n                                </Button>\n                            </Stack>\n                        </Box>\n\n                        {config.actions.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography></Typography>\n                            </Paper>\n                        ) : (\n                            <DndContext\n                                sensors={sensors}\n                                collisionDetection={closestCenter}\n                                onDragEnd={handleDragEnd}\n                            >\n                                <SortableContext\n                                    items={config.actions.map((a) => a.id)}\n                                    strategy={verticalListSortingStrategy}\n                                >\n                                    {config.actions.map((action) => (\n                                        <SortableActionItem\n                                            key={action.id}\n                                            action={action}\n                                            isPlaying={playingSoundId === action.resourceId}\n                                            onUpdate={handleUpdateAction}\n                                            onRemove={handleRemoveAction}\n                                            onPreview={handlePreviewSound}\n                                            onStopPreview={handleStopSound}\n                                        />\n                                    ))}\n                                </SortableContext>\n                            </DndContext>\n                        )}\n                    </Box>\n                </Paper>\n            </Collapse>\n        </Box>\n    );\n};\n\nexport default PreAlarmConfig;","import React, { useState } from 'react';\nimport {\n  Box,\n  Typography,\n  Switch,\n  FormControlLabel,\n  Paper,\n  Button,\n  Divider,\n  Alert\n} from '@mui/material';\nimport { VolumeUp, Settings, ExpandLess } from '@mui/icons-material';\nimport { EmergencyTTSSettings as OriginalEmergencyTTSSettings } from '@src/components/emergency-tts-settings';\n\n// \n// \nconst EmergencyTTSSettings: React.FC = () => {\n    const [showOriginal, setShowOriginal] = useState(false);\n\n    return (\n        <Box>\n            {/*  */}\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <VolumeUp />\n                    <Typography variant=\"subtitle2\"></Typography>\n                </Box>\n                \n                <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={showOriginal ? <ExpandLess /> : <Settings />}\n                    onClick={() => setShowOriginal(!showOriginal)}\n                >\n                    {showOriginal ? '' : ''}\n                </Button>\n            </Box>\n\n            {/*  */}\n            {!showOriginal && (\n                <Alert severity=\"info\" sx={{ mb: 2 }}>\n                    <Typography variant=\"body2\">\n                        \n                    </Typography>\n                </Alert>\n            )}\n\n            {/*  */}\n            {showOriginal && (\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                        overflow: 'hidden'\n                    }}\n                >\n                    <OriginalEmergencyTTSSettings />\n                </Paper>\n            )}\n        </Box>\n    );\n};\n\nexport default EmergencyTTSSettings;","export { default as PreAlarmConfig } from './PreAlarmConfig';\nexport { default as EmergencyTTSSettings } from './EmergencyTTSSettings';","import React, { useState, useEffect, useCallback, useImperativeHandle, forwardRef } from 'react';\nimport {\n    Box,\n    Typography,\n    TextField,\n    Button,\n    Paper,\n    List,\n    ListItem,\n    ListItemText,\n    ListItemSecondaryAction,\n    IconButton,\n    Divider,\n    Slider,\n    FormControlLabel,\n    Switch,\n    Alert,\n    Snackbar,\n    Chip,\n    LinearProgress,\n    Collapse,\n    MenuItem,\n    Select,\n    FormControl,\n    InputLabel,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    CircularProgress,\n} from '@mui/material';\nimport {\n    PlayArrow,\n    Stop,\n    Save,\n    Share,\n    Delete,\n    Refresh,\n    ExpandMore,\n    MusicNote,\n    VolumeUp,\n    Mic,\n    Star,\n    StarBorder,\n    CloudUpload,\n    InsertDriveFile,\n} from '@mui/icons-material';\nimport { autoWebViewJs, autoJsStoreUtils } from '@droid/android';\n\n// TTS\ninterface EmergencyTTSSettings {\n    enabled: boolean;\n    message: string;\n    repeatInterval: number;\n    voiceSpeed: number;\n    voicePitch: number;\n    lastUpdated: number;\n    // \n    useCustomAudio: boolean;        // \n    medicalEmergencyAudioPath?: string; // \n}\n\n// TTS\ninterface TTSFileInfo {\n    fileName: string;\n    filePath: string;\n    fileSize: number;\n    createTime: number;\n    type: 'general' | 'medical' | 'security' | 'custom'; // \n    source: 'recorded' | 'uploaded';  // \n    isDefault?: boolean; // \n    duration?: number;  // \n    format?: string;    // \n    mimeType?: string;  // MIME\n}\n\n// \ninterface FileUploadResult {\n    success: boolean;\n    filePath: string;\n    message: string;\n    fileInfo?: TTSFileInfo;\n}\n\ninterface SupportedFormats {\n    formats: string[];\n    maxFileSizeMB: number;\n    maxDurationSeconds: number;\n    recommendedDurationSeconds: number;\n}\n\n// \ninterface TTSRecordResult {\n    success: boolean;\n    filePath: string;\n    message: string;\n}\n\n// \ninterface VoiceEmergencyConfig {\n    medicalDefault?: string;  // \n    securityDefault?: string; // \n    lastUpdated: number;\n}\n\n// \nconst DEFAULT_TTS_SETTINGS: EmergencyTTSSettings = {\n    enabled: false,\n    message: '13911119999',\n    repeatInterval: 3000,\n    voiceSpeed: 1.0,\n    voicePitch: 1.0,\n    lastUpdated: Date.now(),\n    useCustomAudio: false,\n};\n\nconst DEFAULT_VOICE_CONFIG: VoiceEmergencyConfig = {\n    lastUpdated: Date.now(),\n};\n\nconst TTS_SETTINGS_KEY = 'emergencyTTSSettings';\nconst VOICE_CONFIG_KEY = 'voiceEmergencyConfig';\nconst AUDIO_FILE_UPLOAD_SUCCESS_EVENT = 'audioFileUploadSuccess';\n\nexport interface VoiceEmergencySettingsRef {\n    reloadConfig: () => Promise<void>;\n}\n\nconst VoiceEmergencySettings = forwardRef<VoiceEmergencySettingsRef>((props, ref) => {\n    const [settings, setSettings] = useState<EmergencyTTSSettings>(DEFAULT_TTS_SETTINGS);\n    const [voiceConfig, setVoiceConfig] = useState<VoiceEmergencyConfig>(DEFAULT_VOICE_CONFIG);\n    const [fileList, setFileList] = useState<TTSFileInfo[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [expanded, setExpanded] = useState(false);\n    const [isRecording, setIsRecording] = useState(false);\n    const [playingFile, setPlayingFile] = useState<string | null>(null);\n    const [showSuccess, setShowSuccess] = useState(false);\n    const [showError, setShowError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    const [ttsAvailable, setTtsAvailable] = useState<boolean | null>(null);\n    \n    // \n    const [recordText, setRecordText] = useState(DEFAULT_TTS_SETTINGS.message);\n    const [recordSpeed, setRecordSpeed] = useState(1.0);\n    const [recordPitch, setRecordPitch] = useState(1.0);\n    const [showRecordDialog, setShowRecordDialog] = useState(false);\n    \n    // \n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const [supportedFormats, setSupportedFormats] = useState<SupportedFormats | null>(null);\n\n    // \n    const loadData = useCallback(async () => {\n        try {\n            setLoading(true);\n            \n            // TTS\n            const savedSettings = await autoJsStoreUtils.read<EmergencyTTSSettings>(\n                TTS_SETTINGS_KEY, \n                DEFAULT_TTS_SETTINGS\n            );\n            setSettings(savedSettings);\n            \n            // \n            const savedConfig = await autoJsStoreUtils.read<VoiceEmergencyConfig>(\n                VOICE_CONFIG_KEY,\n                DEFAULT_VOICE_CONFIG\n            );\n            setVoiceConfig(savedConfig);\n            \n            // TTS\n            checkTTSAvailability();\n            \n            // \n            loadFileList();\n            \n            // \n            loadSupportedFormats();\n        } catch (err) {\n            console.error(':', err);\n            setErrorMessage('');\n            setShowError(true);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        const handleAudioUploadSuccess = (event: CustomEvent) => {\n            console.log(':', event.detail);\n            // \n            try {\n                const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList()`;\n                const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n                const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n                const filesWithType = files.map(file => ({\n                    ...file,\n                    type: (file as any).type || 'general' as const,\n                    isDefault: (file as any).isDefault || false,\n                    source: (file as any).source || 'recorded' as const,\n                }));\n                setFileList(filesWithType);\n            } catch (error) {\n                console.error(':', error);\n            }\n            // \n            setSuccessMessage(`: ${event.detail.fileName}`);\n            setShowSuccess(true);\n        };\n\n        window.addEventListener(AUDIO_FILE_UPLOAD_SUCCESS_EVENT, handleAudioUploadSuccess as EventListener);\n\n        loadData();\n\n        // \n        return () => {\n            window.removeEventListener(AUDIO_FILE_UPLOAD_SUCCESS_EVENT, handleAudioUploadSuccess as EventListener);\n        };\n    }, [loadData]);\n\n    // \n    useImperativeHandle(ref, () => ({\n        reloadConfig: loadData,\n    }), [loadData]);\n\n    useEffect(() => {\n        loadData();\n    }, [loadData]);\n\n    // \n    const loadSupportedFormats = useCallback(() => {\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getSupportedAudioFormats()`;\n            const { javaResultString } = autoWebViewJs.callScript(script);\n            const formats = JSON.parse(javaResultString || '{}') as SupportedFormats;\n            setSupportedFormats(formats);\n        } catch (error) {\n            console.error(':', error);\n            setSupportedFormats({\n                formats: ['mp3', 'wav', 'm4a', 'aac'],\n                maxFileSizeMB: 10,\n                maxDurationSeconds: 60,\n                recommendedDurationSeconds: 30\n            });\n        }\n    }, []);\n\n    // \n    const handleSelectAndUploadAudioFile = useCallback(async () => {\n        if (isUploading) return;\n        \n        try {\n            setIsUploading(true);\n            setUploadProgress(0);\n            \n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.selectAndUploadAudioFile()`;\n            \n            // \n            const progressInterval = setInterval(() => {\n                setUploadProgress(prev => {\n                    if (prev >= 90) {\n                        clearInterval(progressInterval);\n                        return 90;\n                    }\n                    return prev + 10;\n                });\n            }, 300);\n            \n            const { javaResultString } = autoWebViewJs.callScript(script);\n            const result = JSON.parse(javaResultString || '{}') as FileUploadResult;\n            \n            clearInterval(progressInterval);\n            setUploadProgress(100);\n            \n            if (result.success) {\n                setSuccessMessage('');\n                setShowSuccess(true);\n                // \n                try {\n                    const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList()`;\n                    const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n                    const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n                    const filesWithType = files.map(file => ({\n                        ...file,\n                        type: (file as any).type || 'general' as const,\n                        isDefault: (file as any).isDefault || false,\n                        source: (file as any).source || 'recorded' as const,\n                    }));\n                    setFileList(filesWithType);\n                } catch (error) {\n                    console.error(':', error);\n                }\n            } else {\n                setErrorMessage(result.message || '');\n                setShowError(true);\n            }\n        } catch (error) {\n            console.error(':', error);\n            setErrorMessage('' + (error as Error).message);\n            setShowError(true);\n        } finally {\n            setIsUploading(false);\n            setUploadProgress(0);\n        }\n    }, [isUploading]);\n\n    // TTS\n    const checkTTSAvailability = useCallback(() => {\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.isTTSAvailable()`;\n            const { javaResultString } = autoWebViewJs.callScript(script);\n            setTtsAvailable(javaResultString === 'true');\n        } catch (error) {\n            console.error('TTS:', error);\n            setTtsAvailable(false);\n        }\n    }, []);\n\n    // \n    const loadFileList = useCallback(() => {\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.getFileList()`;\n            const { javaResultString: listJson } = autoWebViewJs.callScript(script);\n            console.log(':', listJson);\n            const files = JSON.parse((listJson || \"[]\") as string) as TTSFileInfo[];\n            \n            // \n            const filesWithType = files.map(file => ({\n                ...file,\n                type: (file as any).type || 'general' as const,\n                isDefault: (file as any).isDefault || false,\n                source: (file as any).source || 'recorded' as const,\n            }));\n            \n            setFileList(filesWithType);\n        } catch (error) {\n            console.error(':', error);\n            setFileList([]);\n        }\n    }, []);\n\n    // TTS\n    const saveTTSSettings = async (newSettings: EmergencyTTSSettings) => {\n        try {\n            const settingsToSave = {\n                ...newSettings,\n                lastUpdated: Date.now(),\n            };\n            \n            await autoJsStoreUtils.write(TTS_SETTINGS_KEY, settingsToSave);\n            setSettings(settingsToSave);\n            setSuccessMessage('');\n            setShowSuccess(true);\n        } catch (err) {\n            console.error('TTS:', err);\n            setErrorMessage('');\n            setShowError(true);\n        }\n    };\n\n    // \n    const saveVoiceConfig = async (newConfig: VoiceEmergencyConfig) => {\n        try {\n            const configToSave = {\n                ...newConfig,\n                lastUpdated: Date.now(),\n            };\n            \n            await autoJsStoreUtils.write(VOICE_CONFIG_KEY, configToSave);\n            setVoiceConfig(configToSave);\n        } catch (err) {\n            console.error(':', err);\n            setErrorMessage('');\n            setShowError(true);\n        }\n    };\n\n    // \n    const setAsDefaultAudio = useCallback(async (filePath: string, type: 'medical' | 'security') => {\n        try {\n            const newConfig = { ...voiceConfig };\n            if (type === 'medical') {\n                newConfig.medicalDefault = filePath;\n            } else {\n                newConfig.securityDefault = filePath;\n            }\n            \n            await saveVoiceConfig(newConfig);\n            \n            // \n            const updatedFiles = fileList.map(file => ({\n                ...file,\n                isDefault: file.filePath === filePath && file.type === type,\n            }));\n            setFileList(updatedFiles);\n            \n            setSuccessMessage(`${type === 'medical' ? '' : ''}`);\n            setShowSuccess(true);\n        } catch (error) {\n            setErrorMessage('');\n            setShowError(true);\n        }\n    }, [voiceConfig, fileList]);\n\n    // TTS\n    const handleRecord = useCallback(() => {\n        if (!recordText.trim()) {\n            setErrorMessage('');\n            setShowError(true);\n            return;\n        }\n\n        if (!ttsAvailable) {\n            setErrorMessage('TTS');\n            setShowError(true);\n            return;\n        }\n\n        setIsRecording(true);\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.recordTTS(\"${recordText.replace(/\"/g, '\\\\\"')}\", null, ${recordSpeed}, ${recordPitch})`;\n            const { javaResultString: resultJson } = autoWebViewJs.callScript(script);\n            const result = JSON.parse(resultJson as string) as TTSRecordResult;\n            \n            setIsRecording(false);\n            if (result.success) {\n                setSuccessMessage(result.message);\n                setShowSuccess(true);\n                setShowRecordDialog(false);\n                loadFileList();\n            } else {\n                setErrorMessage(result.message);\n                setShowError(true);\n            }\n        } catch (error) {\n            setIsRecording(false);\n            setErrorMessage('' + (error as Error).message);\n            setShowError(true);\n        }\n    }, [recordText, recordSpeed, recordPitch, ttsAvailable, loadFileList]);\n\n    // \n    const handlePlayFile = useCallback((filePath: string) => {\n        try {\n            const stopScript = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.stopPlayback()`;\n            autoWebViewJs.callScript(stopScript);\n            \n            if (playingFile === filePath) {\n                setPlayingFile(null);\n                return;\n            }\n\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.playFile(\"${filePath.replace(/\"/g, '\\\\\"')}\")`;\n            const { javaResultString: success } = autoWebViewJs.callScript(script);\n            if (success === 'true') {\n                setPlayingFile(filePath);\n                setTimeout(() => setPlayingFile(null), 3000);\n            } else {\n                setErrorMessage('');\n                setShowError(true);\n            }\n        } catch (error) {\n            setErrorMessage('' + (error as Error).message);\n            setShowError(true);\n        }\n    }, [playingFile]);\n\n    // \n    const handleShareFile = useCallback((filePath: string) => {\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.shareFile(\"${filePath.replace(/\"/g, '\\\\\"')}\", \"\")`;\n            const { javaResultString: success } = autoWebViewJs.callScript(script);\n            if (success !== 'true') {\n                setErrorMessage('');\n                setShowError(true);\n            }\n        } catch (error) {\n            setErrorMessage('' + (error as Error).message);\n            setShowError(true);\n        }\n    }, []);\n\n    // \n    const handleDeleteFile = useCallback((filePath: string) => {\n        if (window.confirm('')) {\n            try {\n                const script = `com.fanfanlo.emergencycall.manager.TTSRecorderJSInterface.deleteFile(\"${filePath.replace(/\"/g, '\\\\\"')}\")`;\n                const { javaResultString: success } = autoWebViewJs.callScript(script);\n                if (success === 'true') {\n                    setSuccessMessage('');\n                    setShowSuccess(true);\n                    loadFileList();\n                } else {\n                    setErrorMessage('');\n                    setShowError(true);\n                }\n            } catch (error) {\n                setErrorMessage('' + (error as Error).message);\n                setShowError(true);\n            }\n        }\n    }, [loadFileList]);\n\n    // \n    const handleSettingChange = (key: keyof EmergencyTTSSettings, value: any) => {\n        const newSettings = { ...settings, [key]: value };\n        if (newSettings.enabled && !newSettings.useCustomAudio && !newSettings.message.trim()) {\n            setErrorMessage('TTS');\n            setShowError(true);\n            return;\n        }\n        setSettings(newSettings);\n        saveTTSSettings(newSettings);\n    };\n\n    // \n    const handleSaveSettings = () => {\n        if (settings.enabled && !settings.useCustomAudio && !settings.message.trim()) {\n            setErrorMessage('TTS');\n            setShowError(true);\n            return;\n        }\n        saveTTSSettings(settings);\n    };\n\n    // \n    const formatFileSize = (bytes: number): string => {\n        if (bytes < 1024) return `${bytes} B`;\n        if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n        return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    };\n\n    // \n    const formatTime = (timestamp: number): string => {\n        return new Date(timestamp).toLocaleString();\n    };\n\n    // \n    const formatDuration = (milliseconds: number): string => {\n        if (!milliseconds || milliseconds <= 0) return '';\n        const seconds = Math.floor(milliseconds / 1000);\n        const minutes = Math.floor(seconds / 60);\n        const remainingSeconds = seconds % 60;\n        if (minutes > 0) {\n            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n        }\n        return `${seconds}s`;\n    };\n\n    if (loading) {\n        return (\n            <Box sx={{ p: 2, textAlign: 'center' }}>\n                <Typography>...</Typography>\n            </Box>\n        );\n    }\n\n    return (\n        <Box sx={{ mb: 3 }}>\n            {/*  */}\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"h6\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        {/* <VolumeUp /> */}\n                        \n                    </Typography>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={settings.enabled}\n                                onChange={(e) => handleSettingChange('enabled', e.target.checked)}\n                                color=\"primary\"\n                            />\n                        }\n                        label={settings.enabled ? '' : ''}\n                    />\n                    \n                    {/*  */}\n                    {/* <Chip \n                        size=\"small\"\n                        icon={ttsAvailable ? <VolumeUp /> : <MusicNote />}\n                        label={ttsAvailable === null ? '...' : (ttsAvailable ? 'TTS' : 'TTS')}\n                        color={ttsAvailable === null ? 'default' : (ttsAvailable ? 'success' : 'warning')}\n                        variant=\"outlined\"\n                    /> */}\n                </Box>\n                \n                <IconButton\n                    onClick={() => setExpanded(!expanded)}\n                    sx={{\n                        transform: expanded ? 'rotate(180deg)' : 'rotate(0deg)',\n                        transition: 'transform 0.2s ease-in-out'\n                    }}\n                >\n                    <ExpandMore />\n                </IconButton>\n            </Box>\n\n            {/*  */}\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                                 ({fileList.length})\n                            </Typography>\n                            <Box sx={{ display: 'flex', gap: 1 }}>\n                                {/* <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<Mic />}\n                                    onClick={() => setShowRecordDialog(true)}\n                                    disabled={!ttsAvailable}\n                                >\n                                    \n                                </Button> */}\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<Refresh />}\n                                    onClick={loadFileList}\n                                >\n                                    {/*  */}\n                                </Button>\n                            </Box>\n                        </Box>\n\n                        {fileList.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography></Typography>\n                                <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                                    \"\"\n                                </Typography>\n                            </Paper>\n                        ) : (\n                            <List sx={{ bgcolor: 'background.paper', borderRadius: 1, border: '1px solid', borderColor: 'divider' }}>\n                                {fileList.map((file, index) => (\n                                    <React.Fragment key={file.filePath}>\n                                        <ListItem>\n                                            <ListItemText\n                                                primary={\n                                                    <Box sx={{ width: '100%' }}>\n                                                        {/*  +  */}\n                                                        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1, mb: 1 }}>\n                                                            {file.source === 'uploaded' ? <InsertDriveFile fontSize=\"small\" sx={{ mt: 0.2 }} /> : <MusicNote fontSize=\"small\" sx={{ mt: 0.2 }} />}\n                                                            <Typography \n                                                                variant=\"body1\" \n                                                                sx={{ \n                                                                    flex: 1,\n                                                                    minWidth: 0,\n                                                                    wordBreak: 'break-word',\n                                                                    lineHeight: 1.4\n                                                                }}\n                                                            >\n                                                                {file.fileName}\n                                                            </Typography>\n                                                        </Box>\n                                                        \n                                                        {/*  */}\n                                                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n                                                            {playingFile === file.filePath && (\n                                                                <Chip size=\"small\" label=\"\" color=\"primary\" />\n                                                            )}\n                                                            {file.isDefault && (\n                                                                <Chip size=\"small\" label=\"\" color=\"success\" icon={<Star />} />\n                                                            )}\n                                                            {/* <Chip \n                                                                size=\"small\" \n                                                                label={file.source === 'uploaded' ? '' : ''} \n                                                                color={file.source === 'uploaded' ? 'secondary' : 'default'}\n                                                                variant=\"outlined\"\n                                                            /> */}\n                                                        </Box>\n                                                        \n                                                        {/*  */}\n                                                        <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n                                                            <IconButton\n                                                                size=\"small\"\n                                                                onClick={() => handlePlayFile(file.filePath)}\n                                                                color={playingFile === file.filePath ? \"primary\" : \"default\"}\n                                                                title=\"/\"\n                                                                sx={{ \n                                                                    border: '1px solid',\n                                                                    borderColor: 'divider',\n                                                                    '&:hover': { backgroundColor: 'action.hover' }\n                                                                }}\n                                                            >\n                                                                {playingFile === file.filePath ? <Stop /> : <PlayArrow />}\n                                                            </IconButton>\n                                                            \n                                                            <IconButton\n                                                                size=\"small\"\n                                                                onClick={() => setAsDefaultAudio(file.filePath, 'medical')}\n                                                                color={voiceConfig.medicalDefault === file.filePath ? \"warning\" : \"default\"}\n                                                                title=\"\"\n                                                                sx={{ \n                                                                    border: '1px solid',\n                                                                    borderColor: 'divider',\n                                                                    '&:hover': { backgroundColor: 'action.hover' }\n                                                                }}\n                                                            >\n                                                                {voiceConfig.medicalDefault === file.filePath ? <Star /> : <StarBorder />}\n                                                            </IconButton>\n                                                            \n                                                            <IconButton\n                                                                size=\"small\"\n                                                                onClick={() => handleShareFile(file.filePath)}\n                                                                title=\"\"\n                                                                sx={{ \n                                                                    border: '1px solid',\n                                                                    borderColor: 'divider',\n                                                                    '&:hover': { backgroundColor: 'action.hover' }\n                                                                }}\n                                                            >\n                                                                <Share />\n                                                            </IconButton>\n                                                            \n                                                            <IconButton\n                                                                size=\"small\"\n                                                                onClick={() => handleDeleteFile(file.filePath)}\n                                                                color=\"error\"\n                                                                title=\"\"\n                                                                sx={{ \n                                                                    border: '1px solid',\n                                                                    borderColor: 'divider',\n                                                                    '&:hover': { backgroundColor: 'action.hover' }\n                                                                }}\n                                                            >\n                                                                <Delete />\n                                                            </IconButton>\n                                                        </Box>\n                                                    </Box>\n                                                }\n                                                secondary={\n                                                    <Box>\n                                                        <Typography variant=\"body2\" color=\"text.secondary\">\n                                                            : {formatFileSize(file.fileSize)} | : {formatTime(file.createTime)}\n                                                            {file.duration && file.duration > 0 && ` | ${formatDuration(file.duration)}`}\n                                                        </Typography>\n                                                        {file.mimeType && (\n                                                            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block' }}>\n                                                                {file.mimeType}\n                                                            </Typography>\n                                                        )}\n                                                    </Box>\n                                                }\n                                                sx={{ pr: 2 }}\n                                            />\n                                        </ListItem>\n                                        {index < fileList.length - 1 && <Divider />}\n                                    </React.Fragment>\n                                ))}\n                            </List>\n                        )}\n                    </Box>\n\n                    <Divider sx={{ my: 3 }} />\n                    <Box>\n                        \n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<Mic />}\n                                    onClick={() => setShowRecordDialog(true)}\n                                    disabled={!ttsAvailable}\n                                >\n                                    \n                                </Button>\n                    </Box>\n\n                    <Divider sx={{ my: 3 }} />\n\n                    {/*  */}\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                            \n                        </Typography>\n                        \n                        <Button\n                            variant=\"outlined\"\n                            startIcon={isUploading ? <CircularProgress size={16} /> : <CloudUpload />}\n                            onClick={handleSelectAndUploadAudioFile}\n                            disabled={isUploading}\n                            sx={{ mb: 2 }}\n                        >\n                            {isUploading ? '...' : ''}\n                        </Button>\n                        \n                        {/*  */}\n                        {isUploading && uploadProgress > 0 && (\n                            <Box sx={{ mb: 2 }}>\n                                <LinearProgress \n                                    variant=\"determinate\" \n                                    value={uploadProgress} \n                                    sx={{ mb: 1 }}\n                                />\n                                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center' }}>\n                                    ... {uploadProgress}%\n                                </Typography>\n                            </Box>\n                        )}\n                        \n                        {supportedFormats && supportedFormats.formats && (\n                            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                                : {supportedFormats.formats.join(', ').toUpperCase()}<br />\n                                : {supportedFormats.maxFileSizeMB}MB\n                                {/* <br /> */}\n                                {/* : {supportedFormats.recommendedDurationSeconds} */}\n                            </Typography>\n                        )}\n                        \n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                             <br />\n                             <br />\n                             \"\"\n                        </Typography>\n                    </Box>\n\n                    {/*  */}\n                    <Box sx={{ p: 2, backgroundColor: 'rgba(0,0,0,0.05)', borderRadius: 1 }}>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                            <strong>:</strong><br />\n                             <br />\n                             <br />\n                             \"\"<br />\n                             \n                        </Typography>\n                    </Box>\n                </Paper>\n            </Collapse>\n\n            {/*  */}\n            <Dialog open={showRecordDialog} onClose={() => setShowRecordDialog(false)} maxWidth=\"md\" fullWidth>\n                <DialogTitle></DialogTitle>\n                <DialogContent>\n                    <TextField\n                        fullWidth\n                        multiline\n                        rows={4}\n                        value={recordText}\n                        onChange={(e) => setRecordText(e.target.value)}\n                        placeholder=\"...\"\n                        disabled={isRecording}\n                        sx={{ mb: 2, mt: 1 }}\n                        helperText={`: ${recordText.length} `}\n                    />\n\n                    {/*  */}\n                    <Box sx={{ mb: 2 }}>\n                        <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                            : {recordSpeed}x\n                        </Typography>\n                        <Slider\n                            value={recordSpeed}\n                            onChange={(_, value) => setRecordSpeed(value as number)}\n                            min={0.5}\n                            max={2.0}\n                            step={0.1}\n                            disabled={isRecording}\n                            marks={[\n                                { value: 0.5, label: '0.5x' },\n                                { value: 1.0, label: '1.0x' },\n                                { value: 2.0, label: '2.0x' },\n                            ]}\n                            sx={{ mb: 2 }}\n                        />\n\n                        <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                            : {recordPitch}x\n                        </Typography>\n                        <Slider\n                            value={recordPitch}\n                            onChange={(_, value) => setRecordPitch(value as number)}\n                            min={0.5}\n                            max={2.0}\n                            step={0.1}\n                            disabled={isRecording}\n                            marks={[\n                                { value: 0.5, label: '' },\n                                { value: 1.0, label: '' },\n                                { value: 2.0, label: '' },\n                            ]}\n                        />\n                    </Box>\n\n                    {/*  */}\n                    {isRecording && (\n                        <Box sx={{ mb: 2 }}>\n                            <LinearProgress />\n                            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, textAlign: 'center' }}>\n                                ...\n                            </Typography>\n                        </Box>\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button \n                        onClick={() => setShowRecordDialog(false)} \n                        disabled={isRecording}\n                    >\n                        \n                    </Button>\n                    <Button \n                        onClick={handleRecord} \n                        variant=\"contained\"\n                        disabled={!recordText.trim() || isRecording}\n                    >\n                        {isRecording ? '...' : ''}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/*  */}\n            <Snackbar\n                open={showSuccess}\n                autoHideDuration={3000}\n                onClose={() => setShowSuccess(false)}\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            >\n                <Alert onClose={() => setShowSuccess(false)} severity=\"success\">\n                    {successMessage}\n                </Alert>\n            </Snackbar>\n\n            {/*  */}\n            <Snackbar\n                open={showError}\n                autoHideDuration={6000}\n                onClose={() => setShowError(false)}\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            >\n                <Alert onClose={() => setShowError(false)} severity=\"error\">\n                    {errorMessage}\n                </Alert>\n            </Snackbar>\n        </Box>\n    );\n});\n\nexport default VoiceEmergencySettings;","import React, { useState, useEffect, useRef } from 'react';\nimport { \n    Box, \n    TextField, \n    Typography, \n    Paper, \n    Accordion, \n    AccordionSummary, \n    AccordionDetails,\n    Divider\n} from '@mui/material';\nimport { ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\nimport { autoWebViewJs } from '@droid/android';\nimport { PermissionStatusPanel } from './components/PermissionStatusPanel';\nimport { PreAlarmConfig, EmergencyTTSSettings } from './components';\nimport toast from 'react-hot-toast';\nimport VoiceEmergencySettings, { VoiceEmergencySettingsRef } from './components/VoiceEmergencySettings';\n\ninterface FallDetectionSettingsProps {\n    voiceSettingsRef?: React.RefObject<VoiceEmergencySettingsRef>;\n}\n// import { VoiceEmergencySettings } from '@src/components/voice-emergency-settings';\n\nexport const FallDetectionSettings: React.FC<FallDetectionSettingsProps> = ({ voiceSettingsRef }) => {\n    const [threshold, setThreshold] = useState<string>('5.0');\n    const [lastValidThreshold, setLastValidThreshold] = useState<string>('5.0');\n    const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);\n    const localVoiceSettingsRef = useRef<VoiceEmergencySettingsRef>(null);\n    const effectiveVoiceSettingsRef = voiceSettingsRef || localVoiceSettingsRef;\n    \n    // \n    const [permissionExpanded, setPermissionExpanded] = useState(false);\n    const [permissionStats, setPermissionStats] = useState({ granted: 0, denied: 0, unknown: 0 });\n\n    // Android\n    const fetchThresholdFromAndroid = async (): Promise<string> => {\n        try {\n            const script = `\n            var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\n            thresholdValue;`;\n            const { javaResultString } = autoWebViewJs.callScript(script);\n            const thresholdValue = parseFloat(javaResultString || '5.0');\n            return thresholdValue.toString();\n        } catch (error) {\n            console.error('Error fetching threshold value:', error);\n            return '5.0';\n        }\n    };\n\n    useEffect(() => {\n        const initializeThreshold = async () => {\n            const fetchedThreshold = await fetchThresholdFromAndroid();\n            setThreshold(fetchedThreshold);\n            setLastValidThreshold(fetchedThreshold);\n        };\n        initializeThreshold();\n\n        // \n        return () => {\n            if (debounceTimerRef.current) {\n                clearTimeout(debounceTimerRef.current);\n            }\n        };\n    }, []);\n\n\n    // Android\n    const submitThreshold = async (thresholdValue: number): Promise<boolean> => {\n        try {\n            const script = `com.fanfanlo.emergencycall.manager.SensorManager.updateThreshold(${thresholdValue});`;\n            autoWebViewJs.callScript(script);\n            console.log(`: ${thresholdValue}`);\n            toast.success('');\n            return true;\n        } catch (error) {\n            console.error('Error calling updateThreshold:', error);\n            toast.error(':' + error);\n            return false;\n        }\n    };\n\n    // \n    const isValidThreshold = (value: string): boolean => {\n        const numValue = parseFloat(value);\n        return !isNaN(numValue) && numValue > 0;\n    };\n\n    // toast\n    const showToast = (message: string) => {\n        // alerttoasttoast\n        alert(\"showToast_fn\" + message);\n    };\n\n    // onChange\n    const handleThresholdChange = (newValue: string) => {\n        setThreshold(newValue);\n        \n        // \n        if (debounceTimerRef.current) {\n            clearTimeout(debounceTimerRef.current);\n        }\n        \n        // \n        debounceTimerRef.current = setTimeout(async () => {\n            if (isValidThreshold(newValue)) {\n                // \n                const numValue = parseFloat(newValue);\n                const success = await submitThreshold(numValue);\n                if (success) {\n                    setLastValidThreshold(newValue);\n                } else {\n                    showToast('');\n                    // \n                    setThreshold(lastValidThreshold);\n                }\n            } else {\n                // \n                showToast('');\n                if (lastValidThreshold) {\n                    setThreshold(lastValidThreshold);\n                } else {\n                    // Android\n                    const fetchedThreshold = await fetchThresholdFromAndroid();\n                    setThreshold(fetchedThreshold);\n                    setLastValidThreshold(fetchedThreshold);\n                }\n            }\n        }, 1500); // 1.5\n    };\n\n\n\n\n    return (\n        <Box sx={{ p: 2 }}>\n            {/*  */}\n            <Paper elevation={1} sx={{ padding: 2, marginBottom: 2 }}>\n                <Typography variant=\"h6\" gutterBottom>\n                    \n                </Typography>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, marginBottom: 2 }}>\n                    <TextField\n                        label=\"\"\n                        variant=\"outlined\"\n                        type=\"number\"\n                        value={threshold}\n                        onChange={(e) => handleThresholdChange(e.target.value)}\n                        size=\"small\"\n                        helperText=\"3-15\"\n                    />\n                </Box>\n            </Paper>\n\n            {/*  */}\n            <Accordion \n                sx={{ marginBottom: 2 }}\n                expanded={permissionExpanded}\n                onChange={(event, isExpanded) => setPermissionExpanded(isExpanded)}\n            >\n                <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls=\"permission-panel-content\"\n                    id=\"permission-panel-header\"\n                >\n                    <Box sx={{ display: 'flex', flexDirection: 'column', width: '100%' }}>\n                        <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                            \n                        </Typography>\n                        \n                        {/*  */}\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mt: 0.5 }}>\n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                                <Box \n                                    sx={{ \n                                        width: 8, \n                                        height: 8, \n                                        borderRadius: '50%', \n                                        backgroundColor: 'success.main' \n                                    }} \n                                />\n                                <Typography variant=\"caption\" color=\"success.main\">\n                                    /{permissionStats.granted}\n                                </Typography>\n                            </Box>\n                            \n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                                <Box \n                                    sx={{ \n                                        width: 8, \n                                        height: 8, \n                                        borderRadius: '50%', \n                                        backgroundColor: 'error.main' \n                                    }} \n                                />\n                                <Typography variant=\"caption\" color=\"error.main\">\n                                    /{permissionStats.denied}\n                                </Typography>\n                            </Box>\n                            \n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                                <Box \n                                    sx={{ \n                                        width: 8, \n                                        height: 8, \n                                        borderRadius: '50%', \n                                        backgroundColor: 'warning.main' \n                                    }} \n                                />\n                                <Typography variant=\"caption\" color=\"warning.main\">\n                                    /{permissionStats.unknown}\n                                </Typography>\n                            </Box>\n                        </Box>\n                    </Box>\n                </AccordionSummary>\n                <AccordionDetails>\n                    <PermissionStatusPanel \n                        isExpanded={permissionExpanded}\n                        onStatsChange={setPermissionStats}\n                    />\n                </AccordionDetails>\n            </Accordion>\n\n            <Divider sx={{ my: 3 }} />\n\n            {/*  */}\n            <Box sx={{ mb: 3 }}>\n                {/* <Typography variant=\"h6\" gutterBottom>\n                    \n                </Typography> */}\n                <PreAlarmConfig />\n            </Box>\n\n            <Divider sx={{ my: 3 }} />\n\n            {/*  */}\n            <Box sx={{ mb: 3 }}>\n                <VoiceEmergencySettings ref={effectiveVoiceSettingsRef} />\n            </Box>\n\n        </Box>\n    );\n};\n\nexport default FallDetectionSettings;","// \nexport const SENSOR_MONITORING_STATE_CHANGED = \"sensor_monitoring_state_changed\";","import { useRef, useEffect, useState } from 'react';\nimport { Box } from '@mui/material';\nimport { fileMapUtils } from '@fanfanlo';\n\n\n\nexport function FallDownVideoPlayer() {// \n\n    const fallDownImg = fileMapUtils.getFile('/images/fall-down-video/fall-down-001.jpg')\n    console.log('falldown img', fallDownImg)\n    const falldownVideo = fileMapUtils.getFile('/video/fall-down/fall-down.mp4')\n    console.log('falldownVideo=', falldownVideo)\n    const VIDEO_CONFIG = {\n      src: falldownVideo, // \n      type: 'video/mp4',\n      poster: fallDownImg, // \n      controls: true,\n      muted: false,\n      loop: true,\n    };\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  // \n  useEffect(() => {\n    const videoElement = videoRef.current;\n    if (!videoElement) return;\n\n    // \n    const initVideo = () => {\n      console.log('');\n      // \n      videoElement.load();\n    };\n\n    // \n    const handleLoadedData = () => {\n      console.log('');\n    };\n\n    // \n    const handlePlay = () => {\n      console.log('');\n      setIsPlaying(true);\n    };\n\n    const handlePause = () => {\n      console.log('');\n      setIsPlaying(false);\n    };\n\n    // \n    videoElement.addEventListener('loadeddata', handleLoadedData);\n    videoElement.addEventListener('play', handlePlay);\n    videoElement.addEventListener('pause', handlePause);\n\n    // \n    initVideo();\n\n    // \n    return () => {\n      console.log('');\n      \n      // \n      if (!videoElement.paused) {\n        videoElement.pause();\n      }\n      \n      // \n      if (videoElement.src) {\n        videoElement.src = '';\n      }\n      \n      // \n      videoElement.removeEventListener('loadeddata', handleLoadedData);\n      videoElement.removeEventListener('play', handlePlay);\n      videoElement.removeEventListener('pause', handlePause);\n      \n      // \n      if (videoElement.load) {\n        videoElement.load();\n      }\n    };\n  }, []);\n\n  return (\n    <Box\n      component=\"div\"\n      sx={{\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n      }}\n    >\n      <video\n        ref={videoRef}\n        width=\"100%\"\n        height=\"100%\"\n        controls={VIDEO_CONFIG.controls}\n        muted={VIDEO_CONFIG.muted}\n        loop={VIDEO_CONFIG.loop}\n        poster={VIDEO_CONFIG.poster}\n        style={{\n          width: '100%',\n          height: '100%',\n          objectFit: 'contain',\n          backgroundColor: '#000',\n          display: 'block',\n        }}\n      >\n        <source src={VIDEO_CONFIG.src} type={VIDEO_CONFIG.type} />\n         HTML5 \n      </video>\n    </Box>\n  );\n}","import React, { useState, useEffect, useRef } from 'react';\nimport {\n    Box,\n    Paper,\n    Typography,\n    IconButton,\n    Collapse,\n    Switch,\n    FormControlLabel,\n    useTheme,\n    alpha,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Button\n} from '@mui/material';\nimport FallRescueAnimation from './components/FallRescueAnimation';\nimport {\n    ExpandLess,\n    ExpandMore,\n    Animation as AnimationIcon\n} from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { authService } from '@src/services/authService';\nimport FallDetectionSettings from './FallDetectionSettings';\nimport { VoiceEmergencySettingsRef } from './components/VoiceEmergencySettings';\nimport { SENSOR_MONITORING_STATE_CHANGED } from './constants';\nimport { PrivacyDialogDisplay } from '@src/components/privacies/PrivacyDialogDisplay';\nimport { fileMapUtils, IDispatcher } from '@fanfanlo';\nimport { privacyDialogClosedEventType } from '@src/components/privacies/PrivacyDialogAuto';\nimport { FallDownVideoPlayer } from './components/FallDownVideoPlayer';\n\ninterface FallDetectionWrapperProps {\n    title: string;\n    isExpanded: boolean;\n    onToggleExpanded: (expanded: boolean) => void;\n    animationType?: 'fall' | 'shake';\n    dispatcher?:IDispatcher\n}\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\ninterface IWaitPlayVideoInfo{\n    isAppFirstOpen:boolean;\n}\n// \nconst REQUIRE_LOGIN_FOR_FALL_DETECTION = true; // \n\nconst FallDetectionWrapper: React.FC<FallDetectionWrapperProps> = ({\n    title,\n    isExpanded,\n    onToggleExpanded,\n    animationType,\n    dispatcher\n}) => {\n    const theme = useTheme();\n    //  SensorMonitor.tsx - \n    const [fallThreshold, setFallThreshold] = useState<string>('5.0');\n    const voiceSettingsRef = useRef<VoiceEmergencySettingsRef>(null);\n    \n    // VoiceEmergencySettings\n    useEffect(() => {\n        if (isExpanded && voiceSettingsRef.current) {\n            voiceSettingsRef.current.reloadConfig();\n        }\n    }, [isExpanded]);\n    \n    const [fallIsMonitoring, setFallIsMonitoring] = useState<boolean>(false);\n    const [fallSensorInfoDialogOpen, setFallSensorInfoDialogOpen] = useState(false);\n    const [fallForegroundServiceDialogOpen, setFallForegroundServiceDialogOpen] = useState(false);\n    \n    // \n    const [privacyDialogOpen, setPrivacyDialogOpen] = useState(false);\n\n    //  SensorMonitor.tsx - useRef\n    const fallSensorCallbackRef = useRef<(passed: boolean) => void>();\n    const fallForegroundServiceCallbackRef = useRef<(passed: boolean) => void>();\n    const privacyCallbackRef = useRef<(passed: boolean) => void>();\n\n    //  SensorMonitor.tsx - \n    useEffect(() => {\n        try {\n            const script = `\n            var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\n            thresholdValue;`;\n            const { javaResultString } = autoWebViewJs.callScript(script);\n            const thresholdValue = parseFloat(javaResultString || '5.0');\n            setFallThreshold(thresholdValue.toString());\n        } catch (error) {\n            console.error('Error fetching initial threshold value:', error);\n        }\n    }, []);\n\n    //  SensorMonitor.tsx - \n    function readFallIsMonitoring() {\n        try {\n            const script = `\n            var isMonitoring = com.fanfanlo.emergencycall.manager.SensorManager.isMonitoring();\n            isMonitoring;`;\n            const { javaResultString } = autoWebViewJs.callScript(script);\n            const isMonitoring = javaResultString === \"true\";\n            // setFallIsMonitoring(isMonitoring);\n            // state\n            setFallIsMonitoring(prev => {\n                if (prev !== isMonitoring) {\n                    return isMonitoring;\n                }\n                return prev;\n            });\n        } catch (error) {\n            console.error('Error fetching initial monitoring state:', error);\n        }\n    }\n\n    //  SensorMonitor.tsx - \n    useEffect(() => {\n        readFallIsMonitoring();\n        \n        // Android\n        const handleMonitoringStateChange = (event: any) => {\n            const { isMonitoring: newState } = event.detail || {};\n            if (typeof newState === 'boolean') {\n                setFallIsMonitoring(newState);\n            }\n        };\n\n        window.addEventListener(SENSOR_MONITORING_STATE_CHANGED, handleMonitoringStateChange);\n        return () => window.removeEventListener(SENSOR_MONITORING_STATE_CHANGED, handleMonitoringStateChange);\n    }, []);\n\n    //  SensorMonitor.tsx - \n    function checkShowFallSensorInfo(callback: (passed: boolean) => void) {\n        interface Info {\n            passed: boolean;\n        }\n        const info = autoJsStoreUtils.read<Info>('showSensorInfo', { passed: false });\n        if (!info || !info.passed) {\n            fallSensorCallbackRef.current = callback;\n            setFallSensorInfoDialogOpen(true);\n        } else {\n            callback(true);\n        }\n    }\n\n    function checkShowFallInfo(callback: (passed: boolean) => void) {\n        checkShowFallSensorInfo(passed => {\n            if (!passed) {\n                callback(false);\n                return;\n            }\n            checkShowFallForegroundServiceInfo(callback);\n        })\n    }\n\n    function checkShowFallForegroundServiceInfo(callback: (passed: boolean) => void) {\n        interface Info {\n            passed: boolean;\n        }\n        const info = autoJsStoreUtils.read<Info>('showForegroundServiceInfo', { passed: false });\n        if (!info || !info.passed) {\n            fallForegroundServiceCallbackRef.current = callback;\n            setFallForegroundServiceDialogOpen(true);\n        } else {\n            callback(true);\n        }\n    }\n\n    //  SensorMonitor.tsx - \n    const handleFallSensorDialog = (passed: boolean) => {\n        autoJsStoreUtils.write('showSensorInfo', { passed });\n        setFallSensorInfoDialogOpen(false);\n        if (fallSensorCallbackRef.current) {\n            fallSensorCallbackRef.current(passed);\n        }\n    };\n\n    const handleFallForegroundServiceDialog = (passed: boolean) => {\n        autoJsStoreUtils.write('showForegroundServiceInfo', { passed });\n        setFallForegroundServiceDialogOpen(false);\n        if (fallForegroundServiceCallbackRef.current) {\n            fallForegroundServiceCallbackRef.current(passed);\n        }\n    };\n\n    // \n    function checkPrivacyAgreement(callback: (passed: boolean) => void): boolean {\n        interface IPrivacyInfo {\n            agree: boolean;\n            disagreeTime: number;\n        }\n        \n        const def: IPrivacyInfo = { agree: false, disagreeTime: 0 };\n        const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_main`, def);\n        const value: IPrivacyInfo = res && 'agree' in res ? res : def;\n        \n        // \n        if (value.agree) {\n            callback(true);\n            return true;\n        }\n        \n        // \n        privacyCallbackRef.current = callback;\n        setPrivacyDialogOpen(true);\n        return false;\n    }\n\n    // \n    const handlePrivacyDialogClose = (agreed?: boolean) => {\n        setPrivacyDialogOpen(false);\n        if (privacyCallbackRef.current) {\n            privacyCallbackRef.current(agreed === true);\n        }\n    };\n\n    //  SensorMonitor.tsx - \n    async function handleToggleFallMonitoring(enabled: boolean) {\n        console.log('[] :', enabled ? '' : '');\n        \n        if (enabled) {\n            console.log('[] ');\n            \n            // 1. \n            console.log('[] 1: ');\n            checkPrivacyAgreement(passed => {\n                console.log('[] :', passed ? '' : '');\n                if (!passed) {\n                    console.log('[] ');\n                    return;\n                }\n                \n                // 2. \n                console.log('[] 2: ');\n                if (REQUIRE_LOGIN_FOR_FALL_DETECTION) {\n                    console.log('[] ');\n                    authService.showLoginDialog().then(appLoggedIn => {\n                        console.log('[] :', appLoggedIn ? '' : '');\n                        if (!appLoggedIn) {\n                            console.warn('[] ');\n                            alert(\"\");\n                            return;\n                        }\n                        \n                        // 3. \n                        console.log('[] 3: ');\n                        checkShowFallInfo(permissionPassed => {\n                            console.log('[] :', permissionPassed ? '' : '');\n                            if (!permissionPassed) {\n                                console.log('[] ');\n                                return;\n                            }\n                            \n                            try {\n                                console.log('[] ');\n                                const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\n                                autoWebViewJs.callScript(script);\n                                console.log('[] ');\n                            } catch (error) {\n                                console.error('[] :', error);\n                                alert('');\n                            }\n                        });\n                    });\n                } else {\n                    // \n                    console.log('[] ');\n                    checkShowFallInfo(permissionPassed => {\n                        console.log('[] ():', permissionPassed ? '' : '');\n                        if (!permissionPassed) {\n                            console.log('[] ()');\n                            return;\n                        }\n                        \n                        try {\n                            console.log('[] ()');\n                            const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\n                            autoWebViewJs.callScript(script);\n                            console.log('[] ()');\n                        } catch (error) {\n                            console.error('[] ():', error);\n                            alert('');\n                        }\n                    });\n                }\n            });\n        } else {\n            // \n            console.log('[] ');\n            try {\n                const script = `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`;\n                console.log('[] ');\n                await autoWebViewJs.callScript(script);\n                console.log('[] ');\n            } catch (error) {\n                console.error('[] :', error);\n                alert('');\n            }\n        }\n    }\n\n    //  SensorMonitor.tsx - \n    useEffect(() => {\n        const id = setInterval(() => {\n            readFallIsMonitoring();\n        }, 3000); // 3\n        return () => clearInterval(id);\n    }, []);\n\n    // \n    const AnimationPlaceholder: React.FC<{ type?: 'fall' | 'shake' }> = ({ type }) => {\n        const getAnimationContent = () => {\n            switch (type) {\n                case 'fall':\n                    return {\n                        icon: '',\n                        title: '',\n                        description: '',\n                        color: theme.palette.error.main\n                    };\n                case 'shake':\n                    return {\n                        icon: '',\n                        title: '',\n                        description: '',\n                        color: theme.palette.warning.main\n                    };\n                default:\n                    return {\n                        icon: '',\n                        title: '',\n                        description: '',\n                        color: theme.palette.primary.main\n                    };\n            }\n        };\n\n        const content = getAnimationContent();\n\n        return (\n            <Box sx={{ \n                textAlign: 'center',\n                color: 'text.secondary',\n                px: 4\n            }}>\n                <Box sx={{ \n                    fontSize: 72, \n                    mb: 2,\n                    animation: 'pulse 2s infinite',\n                    '@keyframes pulse': {\n                        '0%': { transform: 'scale(1)' },\n                        '50%': { transform: 'scale(1.1)' },\n                        '100%': { transform: 'scale(1)' }\n                    }\n                }}>\n                    {content.icon}\n                </Box>\n                <Typography \n                    variant=\"h5\" \n                    sx={{ \n                        mb: 1, \n                        fontWeight: 600,\n                        color: content.color\n                    }}\n                >\n                    {content.title}\n                </Typography>\n                <Typography \n                    variant=\"body1\" \n                    sx={{ \n                        color: 'text.secondary',\n                        lineHeight: 1.6\n                    }}\n                >\n                    {content.description}\n                </Typography>\n                <Box sx={{\n                    mt: 3,\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    gap: 1,\n                    color: 'text.disabled'\n                }}>\n                    <AnimationIcon sx={{ fontSize: 20 }} />\n                    <Typography variant=\"caption\">\n                        \n                    </Typography>\n                </Box>\n            </Box>\n        );\n    };\n\n    return (\n        <Paper \n            sx={{ \n                mb: 2, \n                overflow: 'hidden',\n                border: `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n                '&:hover': {\n                    boxShadow: theme.shadows[4]\n                }\n            }}\n        >\n            {/*  */}\n            <Box \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    backgroundColor: alpha(theme.palette.primary.main, 0.05),\n                    '&:hover': {\n                        backgroundColor: alpha(theme.palette.primary.main, 0.1)\n                    }\n                }}\n            >\n                {/*  */}\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography \n                        variant=\"h6\" \n                        sx={{ \n                            fontWeight: 600,\n                            color: theme.palette.primary.main\n                        }}\n                    >\n                        {title}\n                    </Typography>\n                    \n                    {/* / */}\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={fallIsMonitoring}\n                                onChange={(e) => handleToggleFallMonitoring(e.target.checked)}\n                                size=\"small\"\n                                color=\"primary\"\n                            />\n                        }\n                        label={\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                                {fallIsMonitoring ? '' : ''}\n                            </Typography>\n                        }\n                        onClick={(e) => e.stopPropagation()}\n                        sx={{ margin: 0 }}\n                    />\n                </Box>\n\n                {/* / */}\n                <IconButton \n                    size=\"small\"\n                    onClick={() => onToggleExpanded(!isExpanded)}\n                    sx={{ \n                        color: theme.palette.primary.main,\n                        transform: isExpanded ? 'rotate(180deg)' : 'rotate(0deg)',\n                        transition: 'transform 0.2s ease-in-out'\n                    }}\n                >\n                    <ExpandMore />\n                </IconButton>\n            </Box>\n            \n            {/*  */}\n            <Box>\n                {/*  -  */}\n                <Collapse in={!isExpanded}>\n                    <Box sx={{ \n                        height: 300,\n                        width: '100%',\n                        display: 'flex', \n                        alignItems: 'center', \n                        justifyContent: 'center',\n                        backgroundColor: alpha(theme.palette.background.paper, 0.8),\n                        borderTop: `1px solid ${theme.palette.divider}`,\n                        position: 'relative',\n                        overflow: 'hidden'\n                    }}>\n                        {/* <FallRescueAnimation type={animationType} /> */}\n                        <Box>\n                            <FallDownVideoPlayer/>\n                        </Box>\n                    </Box>\n                </Collapse>\n                \n                {/*  -  */}\n                <Collapse in={isExpanded}>\n                    <Box sx={{ \n                        borderTop: `1px solid ${theme.palette.divider}`,\n                        backgroundColor: theme.palette.background.paper\n                    }}>\n                        <FallDetectionSettings voiceSettingsRef={voiceSettingsRef} />\n                    </Box>\n                </Collapse>\n            </Box>\n\n            {/*  SensorMonitor.tsx -  */}\n            <Dialog\n                open={fallSensorInfoDialogOpen}\n                onClose={() => handleFallSensorDialog(false)}\n                aria-labelledby=\"fall-sensor-dialog-title\"\n                aria-describedby=\"fall-sensor-dialog-description\"\n            >\n                <DialogTitle id=\"fall-sensor-dialog-title\">\n                    {\"\"}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"fall-sensor-dialog-description\">\n                        \n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleFallSensorDialog(false)}></Button>\n                    <Button onClick={() => handleFallSensorDialog(true)} autoFocus>\n                        \n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/*  SensorMonitor.tsx -  */}\n            <Dialog\n                open={fallForegroundServiceDialogOpen}\n                onClose={() => handleFallForegroundServiceDialog(false)}\n                aria-labelledby=\"fall-foreground-dialog-title\"\n                aria-describedby=\"fall-foreground-dialog-description\"\n            >\n                <DialogTitle id=\"fall-foreground-dialog-title\">\n                    {\"\"}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"fall-foreground-dialog-description\">\n                        \n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleFallForegroundServiceDialog(false)}></Button>\n                    <Button onClick={() => handleFallForegroundServiceDialog(true)} autoFocus>\n                        \n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/*  */}\n            <PrivacyDialogDisplay\n                open={privacyDialogOpen}\n                onClose={handlePrivacyDialogClose}\n                type=\"main\"\n                area=\"zh-cn\"\n            />\n        </Paper>\n    );\n};\n\nexport default FallDetectionWrapper;","import React, { useState, useEffect } from 'react';\nimport {\n    Box,\n    Container,\n    Typography,\n    Paper,\n    Alert,\n    Divider\n} from '@mui/material';\nimport { IDispatcher, useProxyWatch } from '@fanfanlo';\nimport { user } from '@app/model';\nimport { autoWebViewJs } from '@droid/android';\n\nimport FallDetectionWrapper from './FallDetectionWrapper';\nimport ShakeDetectionWrapper from './ShakeDetectionWrapper';\nimport { SENSOR_MONITORING_STATE_CHANGED } from './constants';\n\nfunction EmergencyCallSettings({dispatcher}:{dispatcher:IDispatcher}){\n    // UI\n    const [fallExpanded, setFallExpanded] = useState(false);\n    const [shakeExpanded, setShakeExpanded] = useState(false);\n    \n    // WrapperUI\n\n    // \n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    const isLoggedIn = !!userToken;\n\n    // \n    const handleToggleExpanded = (\n        type: 'fall' | 'shake', \n        expanded: boolean\n    ) => {\n        if (expanded) {\n            // \n            setFallExpanded(type === 'fall');\n            setShakeExpanded(type === 'shake');\n        } else {\n            // \n            switch (type) {\n                case 'fall':\n                    setFallExpanded(false);\n                    break;\n                case 'shake':\n                    setShakeExpanded(false);\n                    break;\n            }\n        }\n    };\n\n    // Wrapper\n\n    return (\n        <Box maxWidth=\"md\" sx={{ py: 3 }}>\n\n            {/*  */}\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n                {/*  */}\n                <FallDetectionWrapper\n                    title=\" \"\n                    isExpanded={fallExpanded}\n                    onToggleExpanded={(expanded) => handleToggleExpanded('fall', expanded)}\n                    animationType=\"fall\"\n                    dispatcher={dispatcher}\n                />\n\n                {/*  */}\n                {/* <ShakeDetectionWrapper\n                    title=\" \"\n                    isExpanded={shakeExpanded}\n                    onToggleExpanded={(expanded) => handleToggleExpanded('shake', expanded)}\n                    animationType=\"shake\"\n                /> */}\n            </Box>\n\n        </Box>\n    );\n};\n\nexport default EmergencyCallSettings;","import React, { useState } from 'react';\nimport {\n    Box,\n    Paper,\n    Typography,\n    IconButton,\n    Collapse,\n    Switch,\n    FormControlLabel,\n    useTheme,\n    alpha\n} from '@mui/material';\nimport {\n    ExpandLess,\n    ExpandMore,\n    Animation as AnimationIcon\n} from '@mui/icons-material';\n\ninterface FunctionWrapperProps {\n    title: string;\n    isExpanded: boolean;\n    onToggleExpanded: (expanded: boolean) => void;\n    animationType?: 'fall' | 'shake';\n    enabled?: boolean;\n    onToggleEnabled?: (enabled: boolean) => void;\n    children: React.ReactNode;\n}\n\nconst FunctionWrapper: React.FC<FunctionWrapperProps> = ({\n    title,\n    isExpanded,\n    onToggleExpanded,\n    animationType,\n    enabled,\n    onToggleEnabled,\n    children\n}) => {\n    const theme = useTheme();\n\n    return (\n        <Paper \n            sx={{ \n                mb: 2, \n                overflow: 'hidden',\n                border: `1px solid ${alpha(theme.palette.primary.main, 0.2)}`,\n                '&:hover': {\n                    boxShadow: theme.shadows[4]\n                }\n            }}\n        >\n            {/*  */}\n            <Box \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    backgroundColor: alpha(theme.palette.primary.main, 0.05),\n                    '&:hover': {\n                        backgroundColor: alpha(theme.palette.primary.main, 0.1)\n                    }\n                }}\n            >\n                {/*  */}\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography \n                        variant=\"h6\" \n                        sx={{ \n                            fontWeight: 600,\n                            color: theme.palette.primary.main\n                        }}\n                    >\n                        {title}\n                    </Typography>\n                    \n                    {/* / */}\n                    {onToggleEnabled !== undefined && (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    checked={enabled || false}\n                                    onChange={(e) => onToggleEnabled(e.target.checked)}\n                                    size=\"small\"\n                                    color=\"primary\"\n                                />\n                            }\n                            label={\n                                <Typography variant=\"body2\" color=\"text.secondary\">\n                                    {enabled ? '' : ''}\n                                </Typography>\n                            }\n                            onClick={(e) => e.stopPropagation()}\n                            sx={{ margin: 0 }}\n                        />\n                    )}\n                </Box>\n\n                {/* / */}\n                <IconButton \n                    size=\"small\"\n                    onClick={() => onToggleExpanded(!isExpanded)}\n                    sx={{ \n                        color: theme.palette.primary.main,\n                        transform: isExpanded ? 'rotate(180deg)' : 'rotate(0deg)',\n                        transition: 'transform 0.2s ease-in-out'\n                    }}\n                >\n                    <ExpandMore />\n                </IconButton>\n            </Box>\n            \n            {/*  */}\n            <Box>\n                {/*  -  */}\n                <Collapse in={!isExpanded}>\n                    <Box sx={{ \n                        height: 300,\n                        width: '100%',\n                        display: 'flex', \n                        alignItems: 'center', \n                        justifyContent: 'center',\n                        backgroundColor: alpha(theme.palette.background.paper, 0.8),\n                        borderTop: `1px solid ${theme.palette.divider}`,\n                        position: 'relative',\n                        overflow: 'hidden'\n                    }}>\n                        <AnimationPlaceholder type={animationType} />\n                    </Box>\n                </Collapse>\n                \n                {/*  -  */}\n                <Collapse in={isExpanded}>\n                    <Box sx={{ \n                        borderTop: `1px solid ${theme.palette.divider}`,\n                        backgroundColor: theme.palette.background.paper\n                    }}>\n                        {children}\n                    </Box>\n                </Collapse>\n            </Box>\n        </Paper>\n    );\n};\n\n// \nconst AnimationPlaceholder: React.FC<{ type?: 'fall' | 'shake' }> = ({ type }) => {\n    const theme = useTheme();\n    \n    const getAnimationContent = () => {\n        switch (type) {\n            case 'fall':\n                return {\n                    icon: '',\n                    title: '',\n                    description: '',\n                    color: theme.palette.error.main\n                };\n            case 'shake':\n                return {\n                    icon: '',\n                    title: '',\n                    description: '',\n                    color: theme.palette.warning.main\n                };\n            default:\n                return {\n                    icon: '',\n                    title: '',\n                    description: '',\n                    color: theme.palette.primary.main\n                };\n        }\n    };\n\n    const content = getAnimationContent();\n\n    return (\n        <Box sx={{ \n            textAlign: 'center',\n            color: 'text.secondary',\n            px: 4\n        }}>\n            <Box sx={{ \n                fontSize: 72, \n                mb: 2,\n                animation: 'pulse 2s infinite',\n                '@keyframes pulse': {\n                    '0%': { transform: 'scale(1)' },\n                    '50%': { transform: 'scale(1.1)' },\n                    '100%': { transform: 'scale(1)' }\n                }\n            }}>\n                {content.icon}\n            </Box>\n            <Typography \n                variant=\"h5\" \n                sx={{ \n                    mb: 1, \n                    fontWeight: 600,\n                    color: content.color\n                }}\n            >\n                {content.title}\n            </Typography>\n            <Typography \n                variant=\"body1\" \n                sx={{ \n                    color: 'text.secondary',\n                    lineHeight: 1.6\n                }}\n            >\n                {content.description}\n            </Typography>\n            <Box sx={{\n                mt: 3,\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                gap: 1,\n                color: 'text.disabled'\n            }}>\n                <AnimationIcon sx={{ fontSize: 20 }} />\n                <Typography variant=\"caption\">\n                    \n                </Typography>\n            </Box>\n        </Box>\n    );\n};\n\nexport default FunctionWrapper;","import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport {\n    Box,\n    Paper,\n    Typography,\n    Switch,\n    FormControlLabel,\n    TextField,\n    Select,\n    MenuItem,\n    FormControl,\n    InputLabel,\n    Chip,\n    Alert,\n    Grid,\n    Divider,\n    Button,\n    Tooltip,\n    Collapse,\n    IconButton\n} from '@mui/material';\nimport { \n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon,\n    PlayArrow,\n    Stop,\n    Delete,\n    DragIndicator as DragIndicatorIcon\n} from '@mui/icons-material';\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\nimport { useProxyWatch } from '@fanfanlo';\nimport { user } from '@app/model';\nimport _ from 'lodash';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { EmergencyTTSSettings } from './components';\nimport { VoiceEmergencySettingsRef } from './components/VoiceEmergencySettings';\nimport toast from 'react-hot-toast';\n\nimport VoiceEmergencySettings from './components/VoiceEmergencySettings';\n\nconst SHAKE_CONFIG_KEY = \"shake_emergency_config\";\n\n// \nconst THRESHOLD_MIN = 7;\nconst THRESHOLD_MAX = 15;\nconst THRESHOLD_DEFAULT = 9;\n\n// \ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\n// \ninterface ShakeConfig {\n    enabled: boolean;\n    shakeCount: number;\n    timeWindowMs: number;\n    emergencyType: string;\n    threshold: number;\n    // \n    baseMotionThreshold: number;\n    directionChangeThreshold: number;\n    minMotionInterval: number;\n    cooldownDuration: number;\n    vibrationFeedback: boolean;\n    soundFeedback: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n    version: number;\n}\n\ninterface ShakeDetectionSettingsProps {\n    voiceSettingsRef?: React.RefObject<VoiceEmergencySettingsRef>;\n    config:ShakeConfig\n}\n// \nconst defaultConfig: ShakeConfig = {\n    enabled: false,\n    shakeCount: 3,\n    timeWindowMs: 2000,\n    emergencyType: \"medical\",\n    threshold: THRESHOLD_DEFAULT,\n    // \n    baseMotionThreshold: 3.5,\n    directionChangeThreshold: 0.2,\n    minMotionInterval: 200,\n    cooldownDuration: 6000,\n    vibrationFeedback: true,\n    soundFeedback: false,\n    actions: [],\n    maxWaitDuration: 10000,\n    version: 1\n};\n\n// \nconst emergencyTypeOptions = [\n    { value: \"medical\", label: \"\" },\n    { value: \"security\", label: \"\" }\n];\n\n// \nconst defaultSoundResources = [\n    { id: 'siren_gentle', name: '' },\n    { id: 'beep_short', name: '' },\n    { id: 'alarm_clock', name: '' },\n];\n\nfunction loadConfig(): ShakeConfig {\n    const conf = autoJsStoreUtils.read(SHAKE_CONFIG_KEY, {});\n    const config = _.merge(defaultConfig, conf);\n    return config;\n}\n\nconst ShakeDetectionSettings: React.FC<ShakeDetectionSettingsProps> = ({ config: conf, voiceSettingsRef }) => {\n    const [config, setConfig] = useState<ShakeConfig>(defaultConfig);\n    const [isLoading, setIsLoading] = useState(true);\n    const [lastSaveTime, setLastSaveTime] = useState<string>('');\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n    \n    // \n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n    \n    // \n    const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n    const isLoggedIn = !!userToken;\n    \n    // \n    const [tempValues, setTempValues] = useState<{\n        shakeCount?: string;\n        timeWindowMs?: string;\n        threshold?: string;\n        baseMotionThreshold?: string;\n        directionChangeThreshold?: string;\n        minMotionInterval?: string;\n        cooldownDuration?: string;\n    }>({});\n    \n    const localVoiceSettingsRef = useRef<VoiceEmergencySettingsRef>(null);\n    const effectiveVoiceSettingsRef = voiceSettingsRef || localVoiceSettingsRef;\n\n    /**\n     * Android\n     */\n    const loadConfigFromAndroid = useCallback(() => {\n        console.log('Android...');\n        const conf = loadConfig();\n        console.log(SHAKE_CONFIG_KEY, 'string', JSON.stringify(conf));\n        setConfig(conf);\n        setIsLoading(false);\n    }, []);\n\n    /**\n     * \n     */\n    const validateConfig = (config: ShakeConfig): boolean => {\n        return (\n            config.shakeCount >= 1 && config.shakeCount <= 10 &&\n            config.timeWindowMs > 0 && config.timeWindowMs <= 10000 &&\n            ['medical', 'security'].includes(config.emergencyType) &&\n            typeof config.threshold === 'number' &&\n            config.threshold >= 0 &&\n            // \n            typeof config.baseMotionThreshold === 'number' && config.baseMotionThreshold >= 0.1 &&\n            typeof config.directionChangeThreshold === 'number' && \n            config.directionChangeThreshold >= -1.0 && config.directionChangeThreshold <= 1.0 &&\n            typeof config.minMotionInterval === 'number' && config.minMotionInterval >= 50 &&\n            typeof config.cooldownDuration === 'number' && config.cooldownDuration >= 1000 &&\n            config.version > 0\n        );\n    };\n\n    /**\n     * Android\n     */\n    const saveConfigToAndroid = useCallback((newConfig: ShakeConfig) => {\n        try {\n            console.log('Android:', newConfig);\n            \n            // \n            if (!validateConfig(newConfig)) {\n                console.error('');\n                return;\n            }\n\n            const config = loadConfig();\n            newConfig.enabled = config.enabled;\n            //  maxWaitDuration\n            newConfig.maxWaitDuration = newConfig.actions.reduce((sum, action) => sum + action.duration, 0);\n            // JSON\n            const configJson = JSON.stringify(newConfig);\n            \n            // Base64\n            const base64Config = btoa(unescape(encodeURIComponent(configJson)));\n            \n            // RhinoAndroid\n            const script = `\n                var result = com.fanfanlo.emergencycall.controller.ShakeManager.updateShakeConfig(\"${base64Config}\");\n                result;\n            `;\n            autoWebViewJs.callScript(script);\n            setLastSaveTime(new Date().toLocaleTimeString());\n            \n        } catch (error) {\n            console.error(':', error);\n        }\n    }, []);\n\n    /**\n     * \n     */\n    const updateConfig = useCallback((updates: Partial<ShakeConfig>) => {\n        const newConfig = { ...config, ...updates };\n        setConfig(newConfig);\n        \n        // \n        if (validateConfig(newConfig)) {\n            saveConfigToAndroid(newConfig);\n        }\n    }, [config, saveConfigToAndroid]);\n\n    /**\n     * \n     */\n    const handleNumberInput = useCallback((field: 'shakeCount' | 'timeWindowMs' | 'threshold' | 'baseMotionThreshold' | 'directionChangeThreshold' | 'minMotionInterval' | 'cooldownDuration', value: string) => {\n        // \n        setTempValues(prev => ({ ...prev, [field]: value }));\n        \n        // \n        const timerId = setTimeout(() => {\n            if (field === 'threshold' || field === 'baseMotionThreshold' || field === 'directionChangeThreshold') {\n                // \n                const numValue = parseFloat(value);\n                if (!isNaN(numValue) && numValue >= 0) {\n                    updateConfig({ [field]: numValue });\n                    setTempValues(prev => ({ ...prev, [field]: undefined }));\n                } else if (value === '') {\n                    // \n                    setTimeout(() => {\n                        if (tempValues[field] === '') {\n                            setTempValues(prev => ({ ...prev, [field]: undefined }));\n                        }\n                    }, 2000);\n                } else {\n                    // \n                    setTimeout(() => {\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    }, 2000);\n                }\n            } else {\n                // \n                const numValue = parseInt(value);\n                if (!isNaN(numValue) && numValue > 0) {\n                    if (field === 'shakeCount' && numValue >= 1 && numValue <= 10) {\n                        updateConfig({ [field]: numValue });\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    } else if (field === 'timeWindowMs' && numValue >= 1000 && numValue <= 10000) {\n                        updateConfig({ [field]: numValue });\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    } else if (field === 'minMotionInterval' && numValue >= 50 && numValue <= 2000) {\n                        updateConfig({ [field]: numValue });\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    } else if (field === 'cooldownDuration' && numValue >= 1000 && numValue <= 60000) {\n                        updateConfig({ [field]: numValue });\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    } else {\n                        setTimeout(() => {\n                            setTempValues(prev => ({ ...prev, [field]: undefined }));\n                        }, 2000);\n                    }\n                } else if (value === '') {\n                    setTimeout(() => {\n                        if (tempValues[field] === '') {\n                            setTempValues(prev => ({ ...prev, [field]: undefined }));\n                        }\n                    }, 2000);\n                } else {\n                    setTimeout(() => {\n                        setTempValues(prev => ({ ...prev, [field]: undefined }));\n                    }, 2000);\n                }\n            }\n        }, 500); // 500ms\n\n        return () => clearTimeout(timerId);\n    }, [updateConfig, tempValues]);\n\n    /**\n     * \n     */\n    const handleAddPreAlarmAction = useCallback((type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: type === 'vibration' ? 1000 : 2000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfig({\n            actions: [...config.actions, newAction],\n        });\n    }, [config.actions, updateConfig]);\n\n    const handleUpdatePreAlarmAction = useCallback((id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        updateConfig({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    }, [config.actions, updateConfig]);\n\n    const handleRemovePreAlarmAction = useCallback((id: string) => {\n        updateConfig({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    }, [config.actions, updateConfig]);\n\n    const handlePreviewSound = useCallback((resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound();\n        \n        console.log(`[ShakeConfig] Previewing sound: ${resourceId}`);\n        \n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager not available');\n        }\n    }, []);\n\n    const handleStopSound = useCallback(() => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    }, []);\n\n    /**\n     * \n     */\n    const handleDragEnd = useCallback((event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfig({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    }, [config.actions, updateConfig]);\n\n    /**\n     * \n     */\n    const SortablePreAlarmActionItem: React.FC<{\n        action: PreAlarmAction;\n        isPlaying: boolean;\n        onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n        onRemove: (id: string) => void;\n        onPreview: (resourceId?: string) => void;\n        onStopPreview: () => void;\n        disabled: boolean;\n    }> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview, disabled }) => {\n        const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n        \n        // \n        const [localDuration, setLocalDuration] = useState(action.duration);\n        \n        // \n        const debouncedUpdate = useMemo(\n            () => _.debounce((id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n                onUpdate(id, updates);\n                toast.success('');\n            }, 1000), // 1\n            [onUpdate]\n        );\n        \n        // \n        const handleDurationChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n            const value = parseInt(e.target.value, 10) || 0;\n            setLocalDuration(value); // \n            debouncedUpdate(action.id, { duration: value }); // \n        }, [action.id, debouncedUpdate]);\n        \n        //  action.duration \n        useEffect(() => {\n            setLocalDuration(action.duration);\n        }, [action.duration]);\n        \n        // \n        useEffect(() => {\n            return () => {\n                debouncedUpdate.cancel();\n            };\n        }, [debouncedUpdate]);\n\n        const style = {\n            transform: CSS.Transform.toString(transform),\n            transition,\n            opacity: isDragging ? 0.8 : 1,\n            zIndex: isDragging ? 1 : 'auto',\n        };\n\n        return (\n            <Paper\n                ref={setNodeRef}\n                style={style}\n                elevation={isDragging ? 3 : 1}\n                sx={{\n                    p: 2,\n                    mb: 1,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 2,\n                    userSelect: 'none',\n                    opacity: disabled ? 0.6 : 1\n                }}\n            >\n                <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                    <DragIndicatorIcon />\n                </Box>\n                \n                <Box sx={{ flexGrow: 1 }}>\n                    <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                        <Typography variant=\"subtitle2\">\n                            {action.type === 'sound' ? '' : ''}\n                        </Typography>\n                        \n                        <TextField\n                            size=\"small\"\n                            type=\"number\"\n                            label=\" (ms)\"\n                            value={localDuration}\n                            onChange={handleDurationChange}\n                            disabled={disabled}\n                            sx={{ width: '100%' }}\n                        />\n                        \n                        {action.type === 'sound' && (\n                            <FormControl size=\"small\" sx={{ width: '100%' }}>\n                                <InputLabel></InputLabel>\n                                <Select\n                                    value={action.resourceId || ''}\n                                    label=\"\"\n                                    onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                    disabled={disabled}\n                                    startAdornment={\n                                        <Tooltip title={isPlaying ? \"\" : \"\"}>\n                                            <IconButton\n                                                size=\"small\"\n                                                onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                                sx={{ mr: 1 }}\n                                                disabled={disabled}\n                                            >\n                                                {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                            </IconButton>\n                                        </Tooltip>\n                                    }\n                                >\n                                    {defaultSoundResources.map((sound) => (\n                                        <MenuItem key={sound.id} value={sound.id}>\n                                            {sound.name}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        )}\n                    </Box>\n                </Box>\n                \n                <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\" disabled={disabled}>\n                    <Delete />\n                </IconButton>\n            </Paper>\n        );\n    };\n\n    // \n    useEffect(() => {\n        loadConfigFromAndroid();\n    }, [loadConfigFromAndroid]);\n\n    // \n    if (isLoading) {\n        return (\n            <Paper sx={{ p: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                        ...\n                    </Typography>\n                </Box>\n            </Paper>\n        );\n    }\n\n    return (\n        <Box sx={{ p: 2 }}>\n            {/*  */}\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n                {/* <FormControlLabel\n                    control={\n                        <Switch\n                            checked={config.enabled}\n                            onChange={(e) => updateConfig({ enabled: e.target.checked })}\n                            size=\"small\"\n                            disabled={!isLoggedIn}\n                        />\n                    }\n                    label={config.enabled ? '' : ''}\n                />\n                {lastSaveTime && (\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                         {lastSaveTime}\n                    </Typography>\n                )} */}\n            </Box>\n\n            {/*  */}\n            {!isLoggedIn && (\n                <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                    <Typography variant=\"body2\">\n                        \n                    </Typography>\n                </Alert>\n            )}\n\n            {/*  */}\n            <Grid container spacing={2} sx={{ mb: 3 }}>\n                {/*  */}\n                <Grid item xs={12} sm={6}>\n                    <FormControl fullWidth disabled={ !isLoggedIn}>\n                        <InputLabel></InputLabel>\n                        <Select\n                            value={config.emergencyType}\n                            label=\"\"\n                            onChange={(e) => updateConfig({ emergencyType: e.target.value })}\n                        >\n                            {emergencyTypeOptions.map(option => (\n                                <MenuItem key={option.value} value={option.value}>\n                                    {option.label}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                </Grid>\n            </Grid>\n\n            {/*  */}\n            <Typography variant=\"h6\" gutterBottom></Typography>\n            <Grid container spacing={2} sx={{ mb: 3 }}>\n                {/*  */}\n                <Grid item xs={12} sm={4}>\n                    <TextField\n                        fullWidth\n                        label=\"\"\n                        type=\"number\"\n                        inputProps={{ min: 1, max: 10 }}\n                        value={tempValues.shakeCount !== undefined ? tempValues.shakeCount : config.shakeCount}\n                        onChange={(e) => handleNumberInput('shakeCount', e.target.value)}\n                        disabled={ !isLoggedIn}\n                        helperText=\"1-10\"\n                        error={tempValues.shakeCount !== undefined && (tempValues.shakeCount === '' || parseInt(tempValues.shakeCount) < 1 || parseInt(tempValues.shakeCount) > 10)}\n                    />\n                </Grid>\n\n                {/*  */}\n                <Grid item xs={12} sm={4}>\n                    <TextField\n                        fullWidth\n                        label=\"()\"\n                        type=\"number\"\n                        inputProps={{ min: 1000, max: 10000, step: 500 }}\n                        value={tempValues.timeWindowMs !== undefined ? tempValues.timeWindowMs : config.timeWindowMs}\n                        onChange={(e) => handleNumberInput('timeWindowMs', e.target.value)}\n                        disabled={ !isLoggedIn}\n                        helperText=\"1000-10000ms\"\n                        error={tempValues.timeWindowMs !== undefined && (tempValues.timeWindowMs === '' || parseInt(tempValues.timeWindowMs) < 1000 || parseInt(tempValues.timeWindowMs) > 10000)}\n                    />\n                </Grid>\n\n                {/*  */}\n                <Grid item xs={12} sm={4}>\n                    <TextField\n                        fullWidth\n                        label=\"\"\n                        type=\"number\"\n                        inputProps={{ min: 0, step: 0.1 }}\n                        value={tempValues.threshold !== undefined ? tempValues.threshold : config.threshold}\n                        onChange={(e) => handleNumberInput('threshold', e.target.value)}\n                        disabled={ !isLoggedIn}\n                        helperText={`${THRESHOLD_MIN}-${THRESHOLD_MAX}`}\n                        error={tempValues.threshold !== undefined && (tempValues.threshold === '' || parseFloat(tempValues.threshold) < 0)}\n                    />\n                </Grid>\n            </Grid>\n\n            {/*  */}\n            <Typography variant=\"h6\" gutterBottom sx={{ mt: 3 }}></Typography>\n            <Grid container spacing={2} sx={{ mb: 3 }}>\n                {/*  */}\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        fullWidth\n                        label=\"\"\n                        type=\"number\"\n                        inputProps={{ min: 0.1, step: 0.1 }}\n                        value={tempValues.baseMotionThreshold !== undefined ? tempValues.baseMotionThreshold : config.baseMotionThreshold}\n                        onChange={(e) => handleNumberInput('baseMotionThreshold', e.target.value)}\n                        disabled={!isLoggedIn}\n                        helperText=\": 2.0-8.0\"\n                        error={tempValues.baseMotionThreshold !== undefined && (tempValues.baseMotionThreshold === '' || parseFloat(tempValues.baseMotionThreshold) < 0.1)}\n                    />\n                </Grid>\n\n                {/*  */}\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        fullWidth\n                        label=\"\"\n                        type=\"number\"\n                        inputProps={{ min: -1.0, max: 1.0, step: 0.01 }}\n                        value={tempValues.directionChangeThreshold !== undefined ? tempValues.directionChangeThreshold : config.directionChangeThreshold}\n                        onChange={(e) => handleNumberInput('directionChangeThreshold', e.target.value)}\n                        disabled={!isLoggedIn}\n                        helperText=\": -0.50.5\"\n                        error={tempValues.directionChangeThreshold !== undefined && (tempValues.directionChangeThreshold === '' || parseFloat(tempValues.directionChangeThreshold) < -1.0 || parseFloat(tempValues.directionChangeThreshold) > 1.0)}\n                    />\n                </Grid>\n\n                {/*  */}\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        fullWidth\n                        label=\" ()\"\n                        type=\"number\"\n                        inputProps={{ min: 50, max: 2000, step: 10 }}\n                        value={tempValues.minMotionInterval !== undefined ? tempValues.minMotionInterval : config.minMotionInterval}\n                        onChange={(e) => handleNumberInput('minMotionInterval', e.target.value)}\n                        disabled={!isLoggedIn}\n                        helperText=\": 200-800ms\"\n                        error={tempValues.minMotionInterval !== undefined && (tempValues.minMotionInterval === '' || parseInt(tempValues.minMotionInterval) < 50 || parseInt(tempValues.minMotionInterval) > 2000)}\n                    />\n                </Grid>\n\n                {/*  */}\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        fullWidth\n                        label=\" ()\"\n                        type=\"number\"\n                        inputProps={{ min: 1000, max: 60000, step: 100 }}\n                        value={tempValues.cooldownDuration !== undefined ? tempValues.cooldownDuration : config.cooldownDuration}\n                        onChange={(e) => handleNumberInput('cooldownDuration', e.target.value)}\n                        disabled={!isLoggedIn}\n                        helperText=\": 3000-15000ms\"\n                        error={tempValues.cooldownDuration !== undefined && (tempValues.cooldownDuration === '' || parseInt(tempValues.cooldownDuration) < 1000 || parseInt(tempValues.cooldownDuration) > 60000)}\n                    />\n                </Grid>\n            </Grid>\n\n            <Divider sx={{ my: 3 }} />\n\n            {/*  */}\n            <Typography variant=\"h6\" gutterBottom></Typography>\n            <Box sx={{ mb: 3 }}>\n                {/*  */}\n                <Collapse in={config.actions.length > 0 || true}>\n                    <Box sx={{ mt: 2, pl: 4, borderLeft: '2px solid', borderColor: 'primary.main' }}>\n                        {/* <Grid container spacing={2} sx={{ mb: 2 }}>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    fullWidth\n                                    size=\"small\"\n                                    type=\"number\"\n                                    label=\"(ms)\"\n                                    value={config.maxWaitDuration}\n                                    onChange={(e) => updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })}\n                                    disabled={ !isLoggedIn}\n                                    helperText=\"\"\n                                />\n                            </Grid>\n                        </Grid> */}\n                        \n                        <Box sx={{ mb: 2 }}>\n                            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n                                <Typography variant=\"body2\" fontWeight=\"medium\">\n                                     ({config.actions.length})\n                                </Typography>\n                                <Box sx={{ display: 'flex', gap: 1 }}>\n                                    <Button\n                                        variant=\"outlined\"\n                                        size=\"small\"\n                                        startIcon={<VolumeUpIcon />}\n                                        onClick={() => handleAddPreAlarmAction('sound')}\n                                        disabled={ !isLoggedIn}\n                                    >\n                                        \n                                    </Button>\n                                    <Button\n                                        variant=\"outlined\"\n                                        size=\"small\"\n                                        startIcon={<VibrationIcon />}\n                                        onClick={() => handleAddPreAlarmAction('vibration')}\n                                        disabled={ !isLoggedIn}\n                                    >\n                                        \n                                    </Button>\n                                </Box>\n                            </Box>\n                            \n                            {config.actions.length === 0 ? (\n                                <Box sx={{ \n                                    p: 2, \n                                    border: '1px dashed', \n                                    borderColor: 'divider', \n                                    borderRadius: 1, \n                                    textAlign: 'center',\n                                    color: 'text.secondary'\n                                }}>\n                                    <Typography variant=\"body2\"></Typography>\n                                </Box>\n                            ) : (\n                                <DndContext\n                                    sensors={sensors}\n                                    collisionDetection={closestCenter}\n                                    onDragEnd={handleDragEnd}\n                                >\n                                    <SortableContext\n                                        items={config.actions.map((a) => a.id)}\n                                        strategy={verticalListSortingStrategy}\n                                    >\n                                        {config.actions.map((action) => (\n                                            <SortablePreAlarmActionItem\n                                                key={action.id}\n                                                action={action}\n                                                isPlaying={playingSoundId === action.resourceId}\n                                                onUpdate={handleUpdatePreAlarmAction}\n                                                onRemove={handleRemovePreAlarmAction}\n                                                onPreview={handlePreviewSound}\n                                                onStopPreview={handleStopSound}\n                                                disabled={ !isLoggedIn}\n                                            />\n                                        ))}\n                                    </SortableContext>\n                                </DndContext>\n                            )}\n                        </Box>\n                    </Box>\n                </Collapse>\n                \n                {/*  */}\n                <FormControlLabel\n                    control={\n                        <Switch\n                            checked={config.vibrationFeedback}\n                            onChange={(e) => updateConfig({ vibrationFeedback: e.target.checked })}\n                            disabled={!isLoggedIn}\n                        />\n                    }\n                    label=\"\"\n                />\n                \n                <FormControlLabel\n                    control={\n                        <Switch\n                            checked={config.soundFeedback}\n                            onChange={(e) => updateConfig({ soundFeedback: e.target.checked })}\n                            disabled={!isLoggedIn}\n                        />\n                    }\n                    label=\"\"\n                />\n            </Box>\n\n            <Divider sx={{ my: 3 }} />\n\n            <Box sx={{ mb: 3 }}>\n                <VoiceEmergencySettings ref={effectiveVoiceSettingsRef} />\n            </Box>\n            {/*  */}\n            {/* <Box sx={{ mb: 3 }}>\n                <Typography variant=\"h6\" gutterBottom>\n                    \n                </Typography>\n                <EmergencyTTSSettings />\n            </Box> */}\n\n            {/*  */}\n            <Alert severity=\"info\" sx={{ mt: 2 }}>\n                <Typography variant=\"body2\" component=\"div\">\n                    <strong></strong>\n                    <ul style={{ margin: '8px 0', paddingLeft: '20px' }}>\n                        <li>{config.timeWindowMs}{config.shakeCount}</li>\n                        <li>{config.emergencyType === 'medical' ? '' : ''}</li>\n                        <li>{config.threshold}{THRESHOLD_MIN}-{THRESHOLD_MAX}</li>\n                        <li>{config.actions.length > 0 ? `${config.maxWaitDuration}${config.actions.length}` : ''}</li>\n                    </ul>\n                </Typography>\n            </Alert>\n        </Box>\n    );\n};\n\nexport default ShakeDetectionSettings;","export { default as EmergencyCallSettings } from './EmergencyCallSettings';\nexport { default as FunctionWrapper } from './FunctionWrapper';\nexport { default as FallDetectionSettings } from './FallDetectionSettings';\nexport { default as ShakeDetectionSettings } from './ShakeDetectionSettings';\nexport { default as AddWidgetButton } from './components/AddWidgetButton';\nexport { default as AddSecurityWidgetButton } from './components/AddSecurityWidgetButton';","import { IRequestOptions } from \"../IRequestOptions\";\nimport { tms } from \"../tms\";\nimport { request } from \"@fanfanlo\";\n\n/**\n * \n */\nexport interface IParamsListPendingReceivedInvitations {\n  // \n  page?: number;\n  page_size?: number;\n}\n\n/**\n * \n */\nexport interface IPendingInvitationInfo {\n  invitation_id: string;\n  user_info: {\n    user_id: string;\n    display_name: string;\n    avatar_url?: string;\n  };\n  status: 'pending';\n  message: string;\n  created_at: number;\n  expires_at: number;\n}\n\n/**\n * \n */\nexport interface IResultListPendingReceivedInvitations {\n  is_ok: boolean;\n  msg?: string;\n  invitations: IPendingInvitationInfo[];\n}\n\n/**\n * \n */\nexport async function tmsEmergencyCallListPendingReceivedInvitations(\n  opts: IRequestOptions<IParamsListPendingReceivedInvitations>\n) {\n  return request<IResultListPendingReceivedInvitations, IParamsListPendingReceivedInvitations>(\n    tms.TEmc,\n    tms.MEmcListPendingReceivedInvitations,\n    opts.params,\n    opts.gateway,\n    opts.handler\n  );\n}\n\n// \nexport const emergencyCallPendingInvitationService = {\n  listPendingReceivedInvitations: tmsEmergencyCallListPendingReceivedInvitations,\n};\n\nexport default emergencyCallPendingInvitationService;","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardActions,\n  CircularProgress,\n  Avatar,\n  Chip,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport {\n  Check as CheckIcon,\n  Close as CloseIcon,\n  AccessTime as AccessTimeIcon,\n  Person as PersonIcon,\n  Notifications as NotificationsIcon,\n} from '@mui/icons-material';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { \n  emergencyCallPendingInvitationService,\n  emergencyCallInvitationService,\n  IPendingInvitationInfo,\n  user,\n  AppModelEvent,\n  appModel\n} from '@app/model';\nimport { useProxyWatch } from '@fanfanlo';\nimport { matrixClient } from '@im/matrix';\n\n// \nfunction PendingInvitationCard({ \n  invitation,\n  onRespond,\n  isProcessing = false,\n}: { \n  invitation: IPendingInvitationInfo;\n  onRespond?: (action: 'accept' | 'decline') => Promise<void>;\n  isProcessing?: boolean;\n}) {\n  const [isProcessingAction, setIsProcessingAction] = useState(false);\n\n  const handleRespond = async (action: 'accept' | 'decline') => {\n    if (!onRespond) return;\n    \n    try {\n      setIsProcessingAction(true);\n      await onRespond(action);\n    } finally {\n      setIsProcessingAction(false);\n    }\n  };\n\n  const isExpired = new Date(invitation.expires_at * 1000) < new Date();\n\n  return (\n    <Card variant=\"outlined\" sx={{ mb: 2, opacity: isProcessing ? 0.7 : 1 }}>\n      <CardContent>\n        <Box display=\"flex\" alignItems=\"center\" mb={2}>\n          <Avatar \n            src={invitation.user_info.avatar_url} \n            alt={invitation.user_info.display_name}\n            sx={{ width: 50, height: 50, mr: 2 }}\n          >\n            {invitation.user_info.display_name?.[0]?.toUpperCase() || '?'}\n          </Avatar>\n          <Box flexGrow={1}>\n            <Typography variant=\"h6\">\n              {invitation.user_info.display_name || ''}\n            </Typography>\n            {/* <Typography variant=\"body2\" color=\"text.secondary\">\n              ID: {invitation.user_info.user_id}\n            </Typography> */}\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              {formatDistanceToNow(invitation.created_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}\n            </Typography>\n          </Box>\n          <Box textAlign=\"right\">\n            <Chip \n              size=\"small\"\n              icon={<AccessTimeIcon fontSize=\"small\" />}\n              label={isExpired ? '' : `${formatDistanceToNow(invitation.expires_at * 1000, { \n                addSuffix: true, \n                locale: zhCN \n              })}`}\n              color={isExpired ? 'error' : 'primary'}\n              variant=\"outlined\"\n            />\n          </Box>\n        </Box>\n        \n        {invitation.message && (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1, mb: 1 }}>\n            : {invitation.message}\n          </Typography>\n        )}\n\n        <Typography variant=\"body2\" color=\"primary\" sx={{ fontWeight: 'medium' }}>\n          \n        </Typography>\n      </CardContent>\n      \n      {!isExpired && (\n        <CardActions sx={{ justifyContent: 'flex-end', pt: 0 }}>\n          <Button \n            size=\"small\" \n            color=\"error\"\n            startIcon={<CloseIcon />}\n            onClick={() => handleRespond('decline')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            \n          </Button>\n          <Button \n            size=\"small\" \n            color=\"primary\"\n            variant=\"contained\"\n            startIcon={<CheckIcon />}\n            onClick={() => handleRespond('accept')}\n            disabled={isProcessing || isProcessingAction}\n          >\n            \n          </Button>\n        </CardActions>\n      )}\n    </Card>\n  );\n}\n\nconst PendingInvitationsList: React.FC = () => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [invitations, setInvitations] = useState<IPendingInvitationInfo[]>([]);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // \n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\n\n  // \n  const loadPendingInvitations = useCallback(async () => {\n    if (!userToken) {\n      setInvitations([]);\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const res = await emergencyCallPendingInvitationService.listPendingReceivedInvitations({\n        params: {},\n      } as any);\n      \n      if (res.shellIsOk && res.dataIsOk && res.data?.is_ok) {\n        setInvitations(res.data.invitations || []);\n      } else {\n        setError(res.data?.msg || '');\n      }\n    } catch (err) {\n      console.error(':', err);\n      setError('');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userToken]); // userToken\n\n  // \n  const handleRespondToInvite = useCallback(async (invitationId: string, action: 'accept' | 'decline'): Promise<void> => {\n    try {\n      setIsProcessing(true);\n\n      const res = await emergencyCallInvitationService.respondToInvite({\n        params: { invitation_id: invitationId, action },\n      } as any);\n\n      if (!res.shellIsOk || !res.dataIsOk || !res.data?.is_ok) {\n        throw new Error(res.data?.msg || '');\n      }\n      \n      // \n      setInvitations(prev => prev.filter(invite => invite.invitation_id !== invitationId));\n      \n      // \n      appModel.dispatcher.emit(AppModelEvent.InviteListUpdated);\n      \n    } catch (err) {\n      console.error(':', err);\n      setError(err instanceof Error ? err.message : '');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, []);\n\n  // \n  useEffect(() => {\n    if (userToken) {\n      // \n      loadPendingInvitations();\n    } else {\n      // \n      setInvitations([]);\n    }\n  }, [userToken]); // userToken\n\n  // \n  useEffect(() => {\n    const unsubscribe = appModel.dispatcher.addListener(AppModelEvent.InviteListUpdated, () => {\n      console.log('AppModelEvent.InviteListUpdated - ');\n      loadPendingInvitations();\n    });\n\n    return unsubscribe;\n  }, [loadPendingInvitations]); // loadPendingInvitations\n\n  useEffect(()=>{\n    const unsub = matrixClient.imDispatcher.addListener(matrixClient.ImDispatcherEventTypes.INVITE, ()=>{\n      if(!userToken)return;\n      loadPendingInvitations();\n    });\n    return unsub;\n  }, [])\n  // \n  if (!userToken) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" p={2}>\n        {/* <CircularProgress size={24} />\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          ...\n        </Typography> */}\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box p={2}>\n        <Alert severity=\"error\">\n          {error}\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (invitations.length === 0) {\n    return (\n      <Box \n        display=\"flex\" \n        flexDirection=\"column\" \n        alignItems=\"center\" \n        p={2}\n        textAlign=\"center\"\n      >\n        {/* <NotificationsIcon color=\"disabled\" sx={{ fontSize: 48, mb: 1 }} />\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          \n        </Typography> */}\n      </Box>\n    );\n  }\n\n  return (\n    <Box p={2}>\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\n        <NotificationsIcon color=\"primary\" sx={{ mr: 1 }} />\n        <Typography variant=\"h6\" color=\"primary\">\n           ({invitations.length})\n        </Typography>\n      </Box>\n\n      <Stack spacing={2}>\n        {invitations.map((invitation) => (\n          <PendingInvitationCard\n            key={invitation.invitation_id}\n            invitation={invitation}\n            onRespond={(action) => handleRespondToInvite(invitation.invitation_id, action)}\n            isProcessing={isProcessing}\n          />\n        ))}\n      </Stack>\n    </Box>\n  );\n};\n\nexport default PendingInvitationsList;","import React, { useState, useCallback } from 'react';\nimport {\n    Box,\n    Switch,\n    Button,\n    Typography,\n    Paper,\n    Collapse,\n    Divider,\n    IconButton,\n    TextField,\n    FormControlLabel,\n    Tooltip,\n    Stack,\n    FormControl,\n    MenuItem,\n    InputLabel,\n    Select,\n} from '@mui/material';\nimport {\n    DragIndicator as DragIndicatorIcon,\n    ExpandLess,\n    Settings,\n    Delete,\n    PlayArrow,\n    Stop,\n    VolumeUp as VolumeUpIcon,\n    Vibration as VibrationIcon\n} from '@mui/icons-material';\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { debounce } from 'lodash';\nimport { autoJsStoreUtils } from '@droid/android';\n\nconst PRE_ALARM_CONFIG_KEY = 'PRE_ALARM_ACTIONS_CONFIG';\n\ninterface PreAlarmAction {\n    id: string;\n    type: 'sound' | 'vibration';\n    duration: number;\n    resourceId?: string;\n}\n\ninterface PreAlarmConfig {\n    enabled: boolean;\n    actions: PreAlarmAction[];\n    maxWaitDuration: number;\n}\n\nconst defaultSoundResources = [\n    { id: 'siren_gentle', name: '' },\n    { id: 'beep_short', name: '' },\n    { id: 'alarm_clock', name: '' },\n];\n\nconst SortableActionItem: React.FC<{\n    action: PreAlarmAction;\n    isPlaying: boolean;\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\n    onRemove: (id: string) => void;\n    onPreview: (resourceId?: string) => void;\n    onStopPreview: () => void;\n}> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview }) => {\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        opacity: isDragging ? 0.8 : 1,\n        zIndex: isDragging ? 1 : 'auto',\n    };\n\n    return (\n        <Paper\n            ref={setNodeRef}\n            style={style}\n            elevation={isDragging ? 3 : 1}\n            sx={{\n                p: 2,\n                mb: 1,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                userSelect: 'none',\n            }}\n        >\n            <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\n                <DragIndicatorIcon />\n            </Box>\n            \n            <Box sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\n                    <Typography variant=\"subtitle2\">\n                        {action.type === 'sound' ? '' : ''}\n                    </Typography>\n                    <TextField\n                        size=\"small\"\n                        type=\"number\"\n                        label=\" (ms)\"\n                        value={action.duration}\n                        onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\n                        sx={{ width: '100%' }}\n                    />\n                    \n                    {action.type === 'sound' && (\n                        <FormControl size=\"small\" sx={{ width: '100%' }}>\n                            <InputLabel></InputLabel>\n                            <Select\n                                value={action.resourceId || ''}\n                                label=\"\"\n                                onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\n                                startAdornment={\n                                    <Tooltip title={isPlaying ? \"\" : \"\"}>\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\n                                            sx={{ mr: 1 }}\n                                        >\n                                            {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\n                                        </IconButton>\n                                    </Tooltip>\n                                }\n                            >\n                                {defaultSoundResources.map((sound) => (\n                                    <MenuItem key={sound.id} value={sound.id}>\n                                        {sound.name}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    )}\n                </Box>\n            </Box>\n            \n            <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\">\n                <Delete />\n            </IconButton>\n        </Paper>\n    );\n};\n\nconst PreAlarmConfig2: React.FC = () => {\n    const [config, setConfig] = useState<PreAlarmConfig | null>(null);\n    const [expanded, setExpanded] = useState(false);\n    const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\n\n    const debouncedWrite = useCallback(\n        debounce((newConfig: PreAlarmConfig) => {\n            autoJsStoreUtils.write(PRE_ALARM_CONFIG_KEY, newConfig);\n        }, 500),\n        []\n    );\n\n    const sensors = useSensors(\n        useSensor(PointerSensor, {\n            activationConstraint: {\n                distance: 8,\n            },\n        }),\n        useSensor(TouchSensor, {\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        }),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    React.useEffect(() => {\n        const loadConfig = async () => {\n            const storedConfig = await autoJsStoreUtils.read<PreAlarmConfig>(PRE_ALARM_CONFIG_KEY);\n            if (storedConfig) {\n                const actionsWithIds = storedConfig.actions.map((action) => ({\n                    ...action,\n                    id: action.id || `action-${Math.random().toString(36).substr(2, 9)}`,\n                }));\n                setConfig({\n                    ...storedConfig,\n                    actions: actionsWithIds,\n                });\n            } else {\n                setConfig({\n                    enabled: true,\n                    actions: [],\n                    maxWaitDuration: 30000,\n                });\n            }\n        };\n        loadConfig();\n    }, []);\n\n    const updateConfig = useCallback(\n        (updates: Partial<PreAlarmConfig>) => {\n            setConfig((prev) => {\n                if (!prev) return null;\n                const newConfig = { ...prev, ...updates };\n                debouncedWrite(newConfig);\n                return newConfig;\n            });\n        },\n        [debouncedWrite]\n    );\n\n    const handleToggleEnabled = (event: React.ChangeEvent<HTMLInputElement>) => {\n        updateConfig({ enabled: event.target.checked });\n    };\n\n    const handleAddAction = (type: 'sound' | 'vibration') => {\n        const newAction: PreAlarmAction = {\n            id: `action-${Date.now()}`,\n            type,\n            duration: 8000,\n            ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\n        };\n        updateConfig({\n            actions: [...(config?.actions || []), newAction],\n        });\n    };\n\n    const handleUpdateAction = (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.map((action) =>\n                action.id === id ? { ...action, ...updates } : action\n            ),\n        });\n    };\n\n    const handleRemoveAction = (id: string) => {\n        if (!config) return;\n        updateConfig({\n            actions: config.actions.filter((action) => action.id !== id),\n        });\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n        if (!config || !over || active.id === over.id) return;\n\n        const oldIndex = config.actions.findIndex((a) => a.id === active.id);\n        const newIndex = config.actions.findIndex((a) => a.id === over.id);\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n            updateConfig({\n                actions: arrayMove(config.actions, oldIndex, newIndex),\n            });\n        }\n    };\n\n    const handlePreviewSound = (resourceId?: string) => {\n        if (!resourceId) return;\n        handleStopSound();\n        \n        console.log(`[WebView] Attempting to preview sound. resourceId: ${resourceId}`);\n\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.previewSound(resourceId);\n            setPlayingSoundId(resourceId);\n        } else {\n            console.warn('SoundManager JavascriptInterface is not available.');\n        }\n    };\n\n    const handleStopSound = () => {\n        if ((window as any).SoundManager) {\n            (window as any).SoundManager.stopPreview();\n        }\n        setPlayingSoundId(null);\n    };\n\n    if (!config) {\n        return <Box sx={{ p: 2, textAlign: 'center' }}>...</Box>;\n    }\n\n    return (\n        <Box sx={{ mb: 3 }}>\n            <Paper \n                elevation={1} \n                sx={{ \n                    p: 2, \n                    display: 'flex', \n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    borderRadius: 1,\n                }}\n            >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Typography variant=\"subtitle1\"></Typography>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={config.enabled}\n                                onChange={handleToggleEnabled}\n                                color=\"primary\"\n                            />\n                        }\n                        label={config.enabled ? '' : ''}\n                    />\n                </Box>\n                \n                <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={expanded ? <ExpandLess /> : <Settings />}\n                    onClick={() => setExpanded(!expanded)}\n                >\n                    {expanded ? '' : ''}\n                </Button>\n            </Paper>\n\n            <Collapse in={expanded}>\n                <Paper \n                    elevation={0} \n                    sx={{ \n                        mt: 1, \n                        p: 2, \n                        border: '1px solid', \n                        borderColor: 'divider',\n                        borderRadius: 1,\n                    }}\n                >\n                    <Box sx={{ mb: 3 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>\n                             ()\n                        </Typography>\n                        <TextField\n                            fullWidth\n                            type=\"number\"\n                            value={config.maxWaitDuration}\n                            onChange={(e) =>\n                                updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })\n                            }\n                            size=\"small\"\n                            InputProps={{\n                                endAdornment: (\n                                    <Typography variant=\"body2\" sx={{ ml: 1 }}>\n                                        \n                                    </Typography>\n                                ),\n                            }}\n                        />\n                    </Box>\n\n                    <Divider sx={{ my: 2 }} />\n\n                    <Box sx={{ mb: 2 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                            <Typography variant=\"subtitle2\">\n                                 ({config.actions.length})\n                            </Typography>\n                            <Stack direction=\"row\" spacing={1}>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VolumeUpIcon />}\n                                    onClick={() => handleAddAction('sound')}\n                                >\n                                    \n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    startIcon={<VibrationIcon />}\n                                    onClick={() => handleAddAction('vibration')}\n                                >\n                                    \n                                </Button>\n                            </Stack>\n                        </Box>\n\n                        {config.actions.length === 0 ? (\n                            <Paper\n                                variant=\"outlined\"\n                                sx={{\n                                    p: 3,\n                                    textAlign: 'center',\n                                    color: 'text.secondary',\n                                }}\n                            >\n                                <Typography></Typography>\n                            </Paper>\n                        ) : (\n                            <DndContext\n                                sensors={sensors}\n                                collisionDetection={closestCenter}\n                                onDragEnd={handleDragEnd}\n                            >\n                                <SortableContext\n                                    items={config.actions.map((a) => a.id)}\n                                    strategy={verticalListSortingStrategy}\n                                >\n                                    {config.actions.map((action) => (\n                                        <SortableActionItem\n                                            key={action.id}\n                                            action={action}\n                                            isPlaying={playingSoundId === action.resourceId}\n                                            onUpdate={handleUpdateAction}\n                                            onRemove={handleRemoveAction}\n                                            onPreview={handlePreviewSound}\n                                            onStopPreview={handleStopSound}\n                                        />\n                                    ))}\n                                </SortableContext>\n                            </DndContext>\n                        )}\n                    </Box>\n                </Paper>\n            </Collapse>\n        </Box>\n    );\n};\n\nexport default PreAlarmConfig2;\n","import { useEffect } from 'react';\nimport { autoJsStoreUtils, isRealInAndroid } from '@droid/android';\nimport { PrivacyDialogDisplay } from './PrivacyDialogDisplay';\nimport { useState } from 'react';\nimport { IDispatcher, Log } from '@fanfanlo';\n\nconst fileLog = new Log(false, 'PrivacyDialogAuto_file')\ninterface PrivacyDialogAutoProps {\n  type: string;\n  area: string;\n  dispatcher?:IDispatcher\n}\nexport const privacyDialogClosedEventType = \"privacyDialogClosed\"\ninterface IPrivacyInfo {\n  agree: boolean;\n  disagreeTime: number;\n}\n\nlet autoOpened = false; // \n/**\n *  - \n * 35-49\n */\nexport function PrivacyDialogAuto({ type, area, dispatcher }: PrivacyDialogAutoProps) {\n  const uiLog = fileLog.sub(false, 'PrivacyDialogAuto_ui')\n  const [open, setOpen] = useState(false);\n\n  const handleClose = () => {\n    autoOpened = true; // \n    setOpen(false);\n    dispatcher?.dispatch('privacyDialogClosed');\n  };\n\n  //  (35-49)\n  useEffect(() => {\n    const effLog = uiLog.sub(false, 'setOpenEffect')\n    // web\n    const def: IPrivacyInfo = { agree: isRealInAndroid ? false : true, disagreeTime: 0 };\n    const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_${type}`, def);\n    const value: IPrivacyInfo = res && 'agree' in res ? res : def;\n    effLog.log('values def=', def);\n    effLog.log('values res=', res);\n    effLog.log('values value=', value);\n      effLog.log('autoOpened=', autoOpened)\n    if(autoOpened){\n      //\n      return;\n    }\n    // Android\n    // if (!isRealInAndroid) {\n    //   return;\n    // }\n    \n    // \n    if (value.agree) {\n      effLog.log('value.agree=', value.agree)\n      return;\n    }\n    \n    // 3\n    if (value.disagreeTime && value.disagreeTime != 0 && value.disagreeTime + 3 * 24 * 60 * 60 * 1000 > Date.now()) {\n      effLog.log('value.disagreeTime', value.disagreeTime , value.disagreeTime != 0 , value.disagreeTime + 3 * 24 * 60 * 60 * 1000, Date.now())\n      return;\n    }\n    \n      effLog.log('setOpen=true')\n    // \n    setOpen(true);\n  }, [type]);\n\n  return (\n    <PrivacyDialogDisplay\n      open={open }\n      onClose={handleClose}\n      type={type}\n      area={area}\n    />\n  );\n}","import { useEffect, useState } from \"react\";\r\nimport { PrivacyDialogAuto } from \"./PrivacyDialogAuto\";\r\nimport { autoJsStoreUtils } from \"@droid/android\";\r\nimport { IDispatcher } from \"@fanfanlo\";\r\n\r\n\r\nexport function ListenShowPrivacyContent({type, dispatcher}:{type:string, dispatcher?:IDispatcher}){\r\n    return(\r\n        <PrivacyDialogAuto type={type} area=\"zh-cn\" dispatcher={dispatcher} />\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Typography,\n  Paper,\n  List,\n  ListItem,\n  Button,\n  Chip,\n  Alert,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Divider\n} from '@mui/material';\nimport {\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Help as HelpIcon,\n  Settings as SettingsIcon,\n  Refresh as RefreshIcon,\n  Security as SecurityIcon,\n  Info as InfoIcon\n} from '@mui/icons-material';\nimport { autoWebViewJs, isRealInAndroid } from '@droid/android';\nimport { trackingPrint } from '@app/model';\n\ninterface Permission {\n  id: string;\n  name: string;\n  type: 'runtime' | 'special' | 'vendor';\n  status: 'granted' | 'denied' | 'unknown';\n  canDetect: boolean;\n  description: string;\n  settingsAction: string;\n}\n\ninterface PermissionsData {\n  permissions: Permission[];\n  timestamp: number;\n  deviceBrand: string;\n  apiLevel: number;\n  error?: string;\n}\n\nexport const PermissionStatusPanel: React.FC = () => {\n  const [permissionsData, setPermissionsData] = useState<PermissionsData | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [infoDialogOpen, setInfoDialogOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<Permission | null>(null);\n\n  const fetchPermissions = async () => {\n    try {\n      if(!isRealInAndroid) return;\n      setLoading(true);\n      setError(null);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          isAndroid: isRealInAndroid\n        }\n      }});\n      \n      const script = `\n        var info = com.fanfanlo.emergencycall.manager.PermissionJSInterface.getAllPermissionsStatus();\n        info;\n      `;\n      \n      const { javaResultString } = autoWebViewJs.callScript(script);\n      \n      if (!javaResultString) {\n        throw new Error('No response from permission interface');\n      }\n      \n      const data = JSON.parse(javaResultString) as PermissionsData;\n      \n      if (data.error) {\n        throw new Error(data.error);\n      }\n      \n      setPermissionsData(data);\n      console.log('Permissions data loaded:', data);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionsCount: data.permissions.length,\n          grantedCount: data.permissions.filter(p => p.status === 'granted').length,\n          deniedCount: data.permissions.filter(p => p.status === 'denied').length,\n          unknownCount: data.permissions.filter(p => p.status === 'unknown').length,\n          deviceBrand: data.deviceBrand,\n          apiLevel: data.apiLevel\n        }\n      }});\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(errorMessage);\n      console.error('Error fetching permissions:', err);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          error: errorMessage,\n          isAndroid: isRealInAndroid\n        }\n      }});\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPermissions();\n  }, []);\n\n  const handleOpenSettings = (permission: Permission) => {\n    try {\n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          permissionName: permission.name,\n          permissionType: permission.type,\n          currentStatus: permission.status,\n          canDetect: permission.canDetect\n        }\n      }});\n      \n      const script = `\n        com.fanfanlo.emergencycall.manager.PermissionJSInterface.openPermissionSettings(\"${permission.id}\");\n      `;\n      autoWebViewJs.callScript(script);\n      console.log(`Opening settings for permission: ${permission.id}`);\n      \n      // JPush\n      if (permission.id === 'notification') {\n        // \n        setTimeout(() => {\n          try {\n            const jpushScript = `\n              com.fanfanlo.emergencycall.jpush.JpushManager.checkAndReinitializeIfNeeded();\n            `;\n            autoWebViewJs.callScript(jpushScript);\n            console.log('JPush reinitialization check triggered');\n            \n            // \n            setTimeout(() => fetchPermissions(), 1000);\n          } catch (jpushErr) {\n            console.error('Error checking JPush status:', jpushErr);\n            \n            // JPush\n            trackingPrint({params:{\n              type:\"\",\n              title:\"JPush\",\n              subtitle:\"JPush-\",\n              extra:{\n                timestamp: Date.now(),\n                error: jpushErr instanceof Error ? jpushErr.message : String(jpushErr)\n              }\n            }});\n          }\n        }, 3000); // 3\n      }\n    } catch (err) {\n      console.error('Error opening permission settings:', err);\n      \n      // \n      trackingPrint({params:{\n        type:\"\",\n        title:\"\",\n        subtitle:\"-\",\n        extra:{\n          timestamp: Date.now(),\n          permissionId: permission.id,\n          error: err instanceof Error ? err.message : String(err)\n        }\n      }});\n    }\n  };\n\n  // const handleConfirmLockScreenPermission = () => {\n  //   try {\n  //     // \n  //     trackingPrint({params:{\n  //       type:\"\",\n  //       title:\"\",\n  //       subtitle:\"-\",\n  //       extra:{\n  //         timestamp: Date.now()\n  //       }\n  //     }});\n      \n  //     const script = `\n  //       com.fanfanlo.emergencycall.manager.PermissionJSInterface.confirmLockScreenPermission();\n  //     `;\n  //     autoWebViewJs.callScript(script);\n  //     console.log('Confirmed lock screen permission');\n      \n  //     // \n  //     setTimeout(() => fetchPermissions(), 500);\n  //   } catch (err) {\n  //     console.error('Error confirming lock screen permission:', err);\n      \n  //     // \n  //     trackingPrint({params:{\n  //       type:\"\",\n  //       title:\"\",\n  //       subtitle:\"-\",\n  //       extra:{\n  //         timestamp: Date.now(),\n  //         error: err instanceof Error ? err.message : String(err)\n  //       }\n  //     }});\n  //   }\n  // };\n\n  const handleShowPermissionInfo = (permission: Permission) => {\n    // \n    trackingPrint({params:{\n      type:\"\",\n      title:\"\",\n      subtitle:\"-\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: permission.id,\n        permissionName: permission.name,\n        permissionStatus: permission.status\n      }\n    }});\n    \n    setSelectedPermission(permission);\n    setInfoDialogOpen(true);\n  };\n\n  const handleCloseInfoDialog = () => {\n    // \n    trackingPrint({params:{\n      type:\"\",\n      title:\"\",\n      subtitle:\"-\",\n      extra:{\n        timestamp: Date.now(),\n        permissionId: selectedPermission?.id\n      }\n    }});\n    \n    setInfoDialogOpen(false);\n    setSelectedPermission(null);\n  };\n\n  const getPermissionReason = (permission: Permission): string => {\n    const reasonMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': '',\n      'android.permission.ACCESS_COARSE_LOCATION': '',\n      'android.permission.BODY_SENSORS': '',\n      'android.permission.CAMERA': '',\n      'android.permission.RECORD_AUDIO': '',\n      'android.permission.ACTIVITY_RECOGNITION': '()',\n      'overlay': '',\n      'lock_screen_popup': '',\n      'lock_screen_display': '',\n      'desktop_shortcut': '',\n      'notification': ''\n    };\n    return reasonMap[permission.id] || '';\n  };\n\n  const getPermissionImpact = (permission: Permission): string => {\n    const impactMap: Record<string, string> = {\n      'android.permission.ACCESS_FINE_LOCATION': ' ',\n      'android.permission.ACCESS_COARSE_LOCATION': ' ',\n      'android.permission.BODY_SENSORS': ' ',\n      'android.permission.CAMERA': ' ',\n      'android.permission.RECORD_AUDIO': ' ',\n      'android.permission.ACTIVITY_RECOGNITION': ' ',\n      'overlay': ' ',\n      'lock_screen_popup': ' ',\n      'lock_screen_display': ' ',\n      'desktop_shortcut': ' ',\n      'notification': ' '\n    };\n    return impactMap[permission.id] || '';\n  };\n\n  const getStatusIcon = (permission: Permission) => {\n    const iconProps = { fontSize: 18 };\n    switch (permission.status) {\n      case 'granted':\n        return <CheckCircleIcon sx={{ color: 'success.main', ...iconProps }} />;\n      case 'denied':\n        return <ErrorIcon sx={{ color: 'error.main', ...iconProps }} />;\n      case 'unknown':\n        return <HelpIcon sx={{ color: 'warning.main', ...iconProps }} />;\n      default:\n        return <HelpIcon sx={{ color: 'grey.500', ...iconProps }} />;\n    }\n  };\n\n  const getStatusChip = (permission: Permission) => {\n    const statusConfig = {\n      granted: { label: '', color: 'success' as const },\n      denied: { label: '', color: 'error' as const },\n      unknown: { label: '?', color: 'warning' as const }\n    };\n\n    const config = statusConfig[permission.status];\n    return (\n      <Chip \n        label={config.label} \n        color={config.color} \n        size=\"small\"\n        sx={{ \n          minWidth: 24,\n          height: 20,\n          fontSize: '0.7rem',\n          '& .MuiChip-label': { px: 0.5 }\n        }}\n      />\n    );\n  };\n\n  const getTypeLabel = (type: string) => {\n    const typeLabels = {\n      runtime: '',\n      special: '',\n      vendor: ''\n    };\n    return typeLabels[type as keyof typeof typeLabels] || type;\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"120px\">\n        <CircularProgress size={20} />\n        <Typography variant=\"caption\" sx={{ ml: 1 }}>...</Typography>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\">: {error}</Typography>\n        <Button \n          onClick={() => {\n            // \n            trackingPrint({params:{\n              type:\"\",\n              title:\"\",\n              subtitle:\"-\",\n              extra:{\n                timestamp: Date.now(),\n                previousError: error\n              }\n            }});\n            fetchPermissions();\n          }} \n          size=\"small\" \n          sx={{ mt: 0.5 }}\n        >\n          \n        </Button>\n      </Alert>\n    );\n  }\n\n  if (!permissionsData) {\n    return (\n      <Alert severity=\"info\" sx={{ py: 1 }}>\n        <Typography variant=\"body2\"></Typography>\n      </Alert>\n    );\n  }\n\n  const { permissions, deviceBrand, apiLevel } = permissionsData;\n\n  return (\n    <Paper elevation={1} sx={{ p: 1 }}>\n      {/*  */}\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n        <Box display=\"flex\" alignItems=\"center\">\n          <SecurityIcon sx={{ mr: 0.5, color: 'primary.main', fontSize: 18 }} />\n          <Typography variant=\"body2\" fontWeight=\"medium\"></Typography>\n        </Box>\n        <Tooltip title=\"\">\n          <IconButton \n            onClick={() => {\n              // \n              trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                  timestamp: Date.now(),\n                  currentPermissionsCount: permissionsData?.permissions.length || 0\n                }\n              }});\n              fetchPermissions();\n            }} \n            size=\"small\" \n            sx={{ p: 0.5 }}\n          >\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      {/*  */}\n      <Alert severity=\"info\" sx={{ mb: 1, py: 0.5 }}>\n        <Typography variant=\"caption\" display=\"block\">\n            \n        </Typography>\n        <Typography variant=\"caption\" color=\"textSecondary\">\n          {deviceBrand}  API{apiLevel}\n        </Typography>\n      </Alert>\n\n      {/*  */}\n      <List sx={{ py: 0 }}>\n        {permissions.map((permission) => (\n          <ListItem\n            key={permission.id}\n            sx={{\n              borderLeft: 2,\n              borderLeftColor: \n                permission.status === 'granted' ? 'success.main' :\n                permission.status === 'denied' ? 'error.main' : 'warning.main',\n              mb: 0.5,\n              py: 0.5,\n              px: 0.5,\n              borderRadius: 0.5,\n              bgcolor: 'grey.50',\n              display: 'block' // block\n            }}\n          >\n            {/*  +  +  +  */}\n            <Box display=\"flex\" alignItems=\"center\" mb={0.5}>\n              <Box sx={{ mr: 0.5 }}>\n                {getStatusIcon(permission)}\n              </Box>\n              <Typography \n                variant=\"body2\" \n                fontWeight=\"medium\" \n                sx={{ flex: 1, minWidth: 0 }}\n              >\n                {permission.name}\n              </Typography>\n              <Tooltip title=\"\">\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleShowPermissionInfo(permission)}\n                  sx={{ mr: 0.5, p: 0.25 }}\n                >\n                  <InfoIcon sx={{ fontSize: 16, color: 'primary.main' }} />\n                </IconButton>\n              </Tooltip>\n              {getStatusChip(permission)}\n            </Box>\n            \n            {/*  +  */}  \n            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={0.5}>\n              <Box display=\"flex\" alignItems=\"center\" gap={0.5}>\n                <Chip \n                  label={getTypeLabel(permission.type)} \n                  variant=\"outlined\" \n                  size=\"small\"\n                  sx={{ \n                    fontSize: '0.65rem',\n                    height: 18,\n                    '& .MuiChip-label': { px: 0.5, py: 0 }\n                  }}\n                />\n                {!permission.canDetect && (\n                  <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.65rem' }}>\n                    \n                  </Typography>\n                )}\n              </Box>\n            </Box>\n            \n            {/*  */}\n            <Box display=\"flex\" gap={0.5}>\n              {/* {(permission.id === 'lock_screen' || permission.id === 'lock_screen_popup' || permission.id === 'lock_screen_display') && permission.status === 'unknown' && (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\" \n                  color=\"success\"\n                  onClick={handleConfirmLockScreenPermission}\n                  sx={{ \n                    fontSize: '0.65rem',\n                    minWidth: 'auto',\n                    px: 0.5,\n                    py: 0.25,\n                    height: 24\n                  }}\n                >\n                  \n                </Button>\n              )} */}\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<SettingsIcon sx={{ fontSize: 12 }} />}\n                onClick={() => handleOpenSettings(permission)}\n                sx={{ \n                  fontSize: '0.65rem',\n                  minWidth: 'auto',\n                  px: 0.5,\n                  py: 0.25,\n                  height: 24\n                }}\n              >\n                \n              </Button>\n            </Box>\n          </ListItem>\n        ))}\n      </List>\n\n      {/*  */}\n      <Box mt={0.5} py={0.25} px={0.5} bgcolor=\"grey.100\" borderRadius={0.25}>\n        <Typography variant=\"caption\" color=\"textSecondary\" sx={{ fontSize: '0.6rem' }}>\n          : {new Date(permissionsData.timestamp).toLocaleTimeString()}\n        </Typography>\n      </Box>\n\n      {/*  */}\n      <Dialog\n        open={infoDialogOpen}\n        onClose={handleCloseInfoDialog}\n        maxWidth=\"sm\"\n        fullWidth\n        PaperProps={{\n          sx: { mx: 1 } // \n        }}\n      >\n        <DialogTitle sx={{ pb: 1 }}>\n          <Box display=\"flex\" alignItems=\"center\">\n            <SecurityIcon sx={{ mr: 1, color: 'primary.main' }} />\n            <Box>\n              <Typography variant=\"h6\" component=\"div\">\n                {selectedPermission?.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {selectedPermission && getTypeLabel(selectedPermission.type)}\n              </Typography>\n            </Box>\n          </Box>\n        </DialogTitle>\n        \n        <DialogContent sx={{ pt: 0 }}>\n          {selectedPermission && (\n            <Box>\n              {/*  */}\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                <Typography variant=\"subtitle2\" sx={{ mr: 1 }}>:</Typography>\n                <Box display=\"flex\" alignItems=\"center\">\n                  {getStatusIcon(selectedPermission)}\n                  <Typography variant=\"body2\" sx={{ ml: 0.5 }}>\n                    {selectedPermission.status === 'granted' ? '' : \n                     selectedPermission.status === 'denied' ? '' : ''}\n                  </Typography>\n                </Box>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={2}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"primary.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionReason(selectedPermission)}\n                </Typography>\n              </Box>\n              \n              <Divider sx={{ mb: 2 }} />\n              \n              {/*  */}\n              <Box mb={1}>\n                <Typography variant=\"subtitle2\" gutterBottom color=\"warning.main\">\n                   \n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\" lineHeight={1.6}>\n                  {getPermissionImpact(selectedPermission)}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </DialogContent>\n        \n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button \n            onClick={() => {\n              // \"\"\n              trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                  timestamp: Date.now(),\n                  permissionId: selectedPermission?.id,\n                  permissionStatus: selectedPermission?.status\n                }\n              }});\n              handleCloseInfoDialog();\n            }} \n            color=\"primary\"\n          >\n            \n          </Button>\n          {selectedPermission && (\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                // \"\"\n                trackingPrint({params:{\n                  type:\"\",\n                  title:\"\",\n                  subtitle:\"-\",\n                  extra:{\n                    timestamp: Date.now(),\n                    permissionId: selectedPermission.id,\n                    permissionName: selectedPermission.name,\n                    currentStatus: selectedPermission.status,\n                    fromDialog: true\n                  }\n                }});\n                \n                handleOpenSettings(selectedPermission);\n                handleCloseInfoDialog();\n              }}\n              color=\"primary\"\n            >\n              \n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Paper>\n  );\n};","export { PermissionStatusPanel } from './PermissionStatusPanel';","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Box, TextField, Button, Typography, Paper, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\r\nimport { ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\r\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\r\nimport { PermissionStatusPanel } from '../permission-status';\r\nimport { authService } from '@src/services/authService';\r\n\r\nexport const SensorMonitor: React.FC = () => {\r\n  const [threshold, setThreshold] = useState<string>('5.0');\r\n  const [isMonitoring, setIsMonitoring] = useState<boolean>(false);\r\n\r\n  // \r\n  const [isSensorInfoDialogOpen, setSensorInfoDialogOpen] = useState(false);\r\n  const [isForegroundServiceDialogOpen, setForegroundServiceDialogOpen] = useState(false);\r\n\r\n  // useRefre-render\r\n  const sensorCallbackRef = useRef<(passed: boolean) => void>();\r\n  const foregroundServiceCallbackRef = useRef<(passed: boolean) => void>();\r\n\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const script = `\r\n      var thresholdValue = com.fanfanlo.emergencycall.manager.SensorManager.getThreshold();\r\n      thresholdValue;`;\r\n      const { javaResultString } = autoWebViewJs.callScript(script);\r\n      const thresholdValue = parseFloat(javaResultString || '5.0');\r\n      // console.log(\"script get threshold=\", thresholdValue, javaResultString);\r\n      setThreshold(thresholdValue.toString());\r\n    } catch (error) {\r\n      console.error('Error fetching initial threshold value:', error);\r\n    }\r\n  }, []);\r\n\r\n  function readIsMonitoring() {\r\n    try {\r\n      const script = `\r\n      var isMonitoring = com.fanfanlo.emergencycall.manager.SensorManager.isMonitoring();\r\n      isMonitoring;`;\r\n      const { javaResultString } = autoWebViewJs.callScript(script);\r\n      const isMonitoring = javaResultString === \"true\";\r\n      // console.log(\"script get isMonitoring=\", isMonitoring, javaResultString);\r\n      setIsMonitoring(isMonitoring);\r\n    } catch (error) {\r\n      console.error('Error fetching initial monitoring state:', error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    readIsMonitoring();\r\n  }, []);\r\n\r\n  const handleSetThreshold = () => {\r\n    const thresholdValue = parseFloat(threshold);\r\n    if (isNaN(thresholdValue)) {\r\n      alert('');\r\n      return;\r\n    }\r\n    try {\r\n      const script = `com.fanfanlo.emergencycall.manager.SensorManager.updateThreshold(${thresholdValue});`;\r\n      autoWebViewJs.callScript(script);\r\n      alert(`: ${thresholdValue}`);\r\n    } catch (error) {\r\n      console.error('Error calling updateThreshold:', error);\r\n      alert('');\r\n    }\r\n  };\r\n\r\n  async function handleToggleMonitoring () {\r\n    if (isMonitoring) {\r\n      // \r\n      try {\r\n        const script = `com.fanfanlo.emergencycall.manager.SensorManager.stopMonitoring();`;\r\n        autoWebViewJs.callScript(script);\r\n        readIsMonitoring();\r\n      } catch (error) {\r\n        console.error('Error stopping monitoring:', error);\r\n        alert('');\r\n      }\r\n    } else {\r\n\r\n\r\n      const appLoggedIn = await authService.showLoginDialog();\r\n      if(!appLoggedIn){\r\n        alert(\"\")\r\n        return\r\n      }\r\n      // \r\n      checkShowInfo(passed => {\r\n        if (!passed) return; // \r\n        try {\r\n          const script = `com.fanfanlo.emergencycall.manager.SensorManager.startMonitoring();`;\r\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.startMonitoring();`;\r\n          // const script = `com.fanfanlo.emergencycall.manager.SensorManagerShell.xx();`;\r\n          autoWebViewJs.callScript(script);\r\n          readIsMonitoring();\r\n        } catch (error) {\r\n          console.error('Error starting monitoring:', error);\r\n          alert('');\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(()=>{\r\n    const id = setInterval(() => {\r\n      readIsMonitoring();\r\n    }, 3000); // 5\r\n    return () => clearInterval(id);\r\n  }, [])\r\n  function checkShowSensorInfo(callback: (passed: boolean) => void) {\r\n    interface Info {\r\n      passed: boolean;\r\n    }\r\n    const info = autoJsStoreUtils.read<Info>('showSensorInfo', { passed: false });\r\n    if (!info || !info.passed) {\r\n      // Dialog\r\n      sensorCallbackRef.current = callback;\r\n      // \r\n      setSensorInfoDialogOpen(true);\r\n    } else {\r\n      callback(true);\r\n    }\r\n  }\r\n\r\n  function checkShowInfo(callback:(passed:boolean)=>void){\r\n    checkShowSensorInfo(passed=>{\r\n      if(!passed) {\r\n        callback(false);\r\n        return;\r\n      };\r\n      checkShowForegroundServiceInfo(callback);\r\n    })\r\n  }\r\n\r\n  function checkShowForegroundServiceInfo(callback: (passed: boolean) => void) {\r\n    interface Info {\r\n      passed: boolean;\r\n    }\r\n    const info = autoJsStoreUtils.read<Info>('showForegroundServiceInfo', { passed: false });\r\n    if (!info || !info.passed) {\r\n      // Dialog\r\n      foregroundServiceCallbackRef.current = callback;\r\n      // \r\n      setForegroundServiceDialogOpen(true);\r\n    } else {\r\n      callback(true);\r\n    }\r\n  }\r\n\r\n  // \r\n  const handleSensorDialog = (passed: boolean) => {\r\n    autoJsStoreUtils.write('showSensorInfo', { passed });\r\n    setSensorInfoDialogOpen(false);\r\n    if (sensorCallbackRef.current) {\r\n      sensorCallbackRef.current(passed);\r\n    }\r\n  };\r\n\r\n  // \r\n  const handleForegroundServiceDialog = (passed: boolean) => {\r\n    autoJsStoreUtils.write('showForegroundServiceInfo', { passed });\r\n    setForegroundServiceDialogOpen(false);\r\n    if (foregroundServiceCallbackRef.current) {\r\n      foregroundServiceCallbackRef.current(passed);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <Box>\r\n      {/*  */}\r\n      <Paper elevation={3} sx={{ padding: 2, marginBottom: 2 }}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          \r\n        </Typography>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, marginBottom: 2 }}>\r\n          <TextField\r\n            label=\"\"\r\n            variant=\"outlined\"\r\n            type=\"number\"\r\n            value={threshold}\r\n            onChange={(e) => setThreshold(e.target.value)}\r\n            size=\"small\"\r\n          />\r\n          <Button variant=\"contained\" onClick={handleSetThreshold}>\r\n            \r\n          </Button>\r\n        </Box>\r\n        <Button\r\n          variant=\"contained\"\r\n          color={isMonitoring ? 'error' : 'primary'}\r\n          onClick={handleToggleMonitoring}\r\n          fullWidth\r\n        >\r\n          {isMonitoring ? '' : ''}\r\n        </Button>\r\n      </Paper>\r\n\r\n      {/*  */}\r\n      <Accordion >\r\n        <AccordionSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"permission-panel-content\"\r\n          id=\"permission-panel-header\"\r\n        >\r\n          <Typography variant=\"h6\"></Typography>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <PermissionStatusPanel />\r\n        </AccordionDetails>\r\n      </Accordion>\r\n\r\n      {/*  */}\r\n      <Dialog\r\n        open={isSensorInfoDialogOpen}\r\n        onClose={() => handleSensorDialog(false)}\r\n        aria-labelledby=\"sensor-dialog-title\"\r\n        aria-describedby=\"sensor-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"sensor-dialog-title\">\r\n          {\"\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"sensor-dialog-description\">\r\n            \r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleSensorDialog(false)}></Button>\r\n          <Button onClick={() => handleSensorDialog(true)} autoFocus>\r\n            \r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/*  */}\r\n      <Dialog\r\n        open={isForegroundServiceDialogOpen}\r\n        onClose={() => handleForegroundServiceDialog(false)}\r\n        aria-labelledby=\"foreground-dialog-title\"\r\n        aria-describedby=\"foreground-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"foreground-dialog-title\">\r\n          {\"\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"foreground-dialog-description\">\r\n            \r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleForegroundServiceDialog(false)}></Button>\r\n          <Button onClick={() => handleForegroundServiceDialog(true)} autoFocus>\r\n            \r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SensorMonitor;\r\n\r\n\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Switch,\r\n  FormControlLabel,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Collapse,\r\n  IconButton,\r\n  Chip,\r\n  Alert,\r\n  Grid,\r\n  Divider,\r\n  Button,\r\n  Tooltip\r\n} from '@mui/material';\r\nimport { \r\n  ExpandLess, \r\n  ExpandMore,\r\n  VolumeUp as VolumeUpIcon,\r\n  Vibration as VibrationIcon,\r\n  PlayArrow,\r\n  Stop,\r\n  Delete,\r\n  DragIndicator as DragIndicatorIcon\r\n} from '@mui/icons-material';\r\nimport { autoJsStoreUtils, autoWebViewJs } from '@droid/android';\r\nimport { useProxyWatch } from '@fanfanlo';\r\nimport {user} from '@app/model';\r\nimport _ from 'lodash';\r\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, TouchSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\r\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\nconst SHAKE_CONFIG_KEY = \"shake_emergency_config\"\r\n\r\n// \r\nconst THRESHOLD_MIN = 7;\r\nconst THRESHOLD_MAX = 15;\r\nconst THRESHOLD_DEFAULT = 9;\r\n// \r\ninterface PreAlarmAction {\r\n  id: string;\r\n  type: 'sound' | 'vibration';\r\n  duration: number;\r\n  resourceId?: string;\r\n}\r\n\r\n// \r\ninterface ShakeConfig {\r\n  enabled: boolean;\r\n  shakeCount: number;\r\n  timeWindowMs: number;\r\n  emergencyType: string;\r\n  threshold: number;\r\n  vibrationFeedback: boolean;\r\n  soundFeedback: boolean;\r\n  actions: PreAlarmAction[];\r\n  maxWaitDuration: number;\r\n  version: number;\r\n}\r\n\r\n// \r\nconst defaultConfig: ShakeConfig = {\r\n  enabled: false,\r\n  shakeCount: 3,\r\n  timeWindowMs: 2000,\r\n  emergencyType: \"medical\",\r\n  threshold: THRESHOLD_DEFAULT,\r\n  vibrationFeedback: true,\r\n  soundFeedback: false,\r\n  actions: [],\r\n  maxWaitDuration: 10000,\r\n  version: 1\r\n};\r\n\r\n// \r\nconst emergencyTypeOptions = [\r\n  { value: \"medical\", label: \"\" },\r\n  { value: \"security\", label: \"\" }\r\n];\r\n\r\n// \r\nconst defaultSoundResources = [\r\n  { id: 'siren_gentle', name: '' },\r\n  { id: 'beep_short', name: '' },\r\n  { id: 'alarm_clock', name: '' },\r\n];\r\n\r\n\r\nfunction loadConfig():ShakeConfig{\r\n  const conf = autoJsStoreUtils.read(SHAKE_CONFIG_KEY,{})\r\n  const config = _.merge(defaultConfig, conf)\r\n  return config;\r\n}\r\nconst ShakeConfigUI: React.FC = () => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [config, setConfig] = useState<ShakeConfig>(defaultConfig);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [lastSaveTime, setLastSaveTime] = useState<string>('');\r\n  const [playingSoundId, setPlayingSoundId] = useState<string | null>(null);\r\n  \r\n  // \r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8,\r\n      },\r\n    }),\r\n    useSensor(TouchSensor, {\r\n      activationConstraint: {\r\n        delay: 250,\r\n        tolerance: 5,\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n  \r\n  // \r\n  const [userToken] = useProxyWatch(user, 'data.storeData.user_token', user.data.storeData.user_token);\r\n  const isLoggedIn = !!userToken;\r\n  \r\n  // \r\n  const [tempValues, setTempValues] = useState<{\r\n    shakeCount?: string;\r\n    timeWindowMs?: string;\r\n    threshold?: string;\r\n  }>({});\r\n\r\n  /**\r\n   * Android\r\n   */\r\n  const loadConfigFromAndroid = useCallback(() => {\r\n    console.log('Android...');\r\n    const conf = loadConfig();\r\n    console.log(SHAKE_CONFIG_KEY, 'string', JSON.stringify(conf))\r\n    setConfig(conf)\r\n      setIsLoading(false);\r\n  }, []);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const validateConfig = (config: ShakeConfig): boolean => {\r\n    return (\r\n      config.shakeCount >= 1 && config.shakeCount <= 10 &&\r\n      config.timeWindowMs > 0 && config.timeWindowMs <= 10000 &&\r\n      ['medical', 'security'].includes(config.emergencyType) &&\r\n      typeof config.threshold === 'number' &&\r\n      config.threshold >= 0 &&\r\n      config.version > 0\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Android\r\n   */\r\n  const saveConfigToAndroid = useCallback((newConfig: ShakeConfig) => {\r\n    try {\r\n      console.log('Android:', newConfig);\r\n      \r\n      // \r\n      if (!validateConfig(newConfig)) {\r\n        console.error('');\r\n        return;\r\n      }\r\n\r\n      // JSON\r\n      const configJson = JSON.stringify(newConfig);\r\n      \r\n      // Base64\r\n      const base64Config = btoa(unescape(encodeURIComponent(configJson)));\r\n      \r\n      // RhinoAndroid\r\n      const script = `\r\n        \r\n          var result = com.fanfanlo.emergencycall.controller.ShakeManager.updateShakeConfig(\"${base64Config}\");\r\n          result;\r\n      `;\r\n      autoWebViewJs.callScript(script);\r\n      setLastSaveTime(new Date().toLocaleTimeString());\r\n      \r\n    } catch (error) {\r\n      console.error(':', error);\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const updateConfig = useCallback((updates: Partial<ShakeConfig>) => {\r\n    const newConfig = { ...config, ...updates };\r\n    setConfig(newConfig);\r\n    \r\n    // \r\n    if (validateConfig(newConfig)) {\r\n      saveConfigToAndroid(newConfig);\r\n    }\r\n  }, [config, saveConfigToAndroid]);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const handleNumberInput = useCallback((field: 'shakeCount' | 'timeWindowMs' | 'threshold', value: string) => {\r\n    // \r\n    setTempValues(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // \r\n    const timerId = setTimeout(() => {\r\n      if (field === 'threshold') {\r\n        // \r\n        const numValue = parseFloat(value);\r\n        if (!isNaN(numValue) && numValue >= 0) {\r\n          updateConfig({ [field]: numValue });\r\n          setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n        } else if (value === '') {\r\n          // \r\n          setTimeout(() => {\r\n            if (tempValues[field] === '') {\r\n              setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n            }\r\n          }, 2000);\r\n        } else {\r\n          // \r\n          setTimeout(() => {\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          }, 2000);\r\n        }\r\n      } else {\r\n        // \r\n        const numValue = parseInt(value);\r\n        if (!isNaN(numValue) && numValue > 0) {\r\n          if (field === 'shakeCount' && numValue >= 1 && numValue <= 10) {\r\n            updateConfig({ [field]: numValue });\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          } else if (field === 'timeWindowMs' && numValue >= 1000 && numValue <= 10000) {\r\n            updateConfig({ [field]: numValue });\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          } else {\r\n            setTimeout(() => {\r\n              setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n            }, 2000);\r\n          }\r\n        } else if (value === '') {\r\n          setTimeout(() => {\r\n            if (tempValues[field] === '') {\r\n              setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n            }\r\n          }, 2000);\r\n        } else {\r\n          setTimeout(() => {\r\n            setTempValues(prev => ({ ...prev, [field]: undefined }));\r\n          }, 2000);\r\n        }\r\n      }\r\n    }, 500); // 500ms\r\n\r\n    return () => clearTimeout(timerId);\r\n  }, [updateConfig, tempValues]);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const handleAddPreAlarmAction = useCallback((type: 'sound' | 'vibration') => {\r\n    const newAction: PreAlarmAction = {\r\n      id: `action-${Date.now()}`,\r\n      type,\r\n      duration: type === 'vibration' ? 1000 : 2000,\r\n      ...(type === 'sound' && { resourceId: defaultSoundResources[0].id }),\r\n    };\r\n    updateConfig({\r\n      actions: [...config.actions, newAction],\r\n    });\r\n  }, [config.actions, updateConfig]);\r\n\r\n  const handleUpdatePreAlarmAction = useCallback((id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => {\r\n    updateConfig({\r\n      actions: config.actions.map((action) =>\r\n        action.id === id ? { ...action, ...updates } : action\r\n      ),\r\n    });\r\n  }, [config.actions, updateConfig]);\r\n\r\n  const handleRemovePreAlarmAction = useCallback((id: string) => {\r\n    updateConfig({\r\n      actions: config.actions.filter((action) => action.id !== id),\r\n    });\r\n  }, [config.actions, updateConfig]);\r\n\r\n  const handlePreviewSound = useCallback((resourceId?: string) => {\r\n    if (!resourceId) return;\r\n    handleStopSound();\r\n    \r\n    console.log(`[ShakeConfig] Previewing sound: ${resourceId}`);\r\n    \r\n    if ((window as any).SoundManager) {\r\n      (window as any).SoundManager.previewSound(resourceId);\r\n      setPlayingSoundId(resourceId);\r\n    } else {\r\n      console.warn('SoundManager not available');\r\n    }\r\n  }, []);\r\n\r\n  const handleStopSound = useCallback(() => {\r\n    if ((window as any).SoundManager) {\r\n      (window as any).SoundManager.stopPreview();\r\n    }\r\n    setPlayingSoundId(null);\r\n  }, []);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const handleDragEnd = useCallback((event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    if (!over || active.id === over.id) return;\r\n\r\n    const oldIndex = config.actions.findIndex((a) => a.id === active.id);\r\n    const newIndex = config.actions.findIndex((a) => a.id === over.id);\r\n\r\n    if (oldIndex !== -1 && newIndex !== -1) {\r\n      updateConfig({\r\n        actions: arrayMove(config.actions, oldIndex, newIndex),\r\n      });\r\n    }\r\n  }, [config.actions, updateConfig]);\r\n\r\n  /**\r\n   * \r\n   */\r\n  const SortablePreAlarmActionItem: React.FC<{\r\n    action: PreAlarmAction;\r\n    isPlaying: boolean;\r\n    onUpdate: (id: string, updates: Partial<Omit<PreAlarmAction, 'id'>>) => void;\r\n    onRemove: (id: string) => void;\r\n    onPreview: (resourceId?: string) => void;\r\n    onStopPreview: () => void;\r\n    disabled: boolean;\r\n  }> = ({ action, isPlaying, onUpdate, onRemove, onPreview, onStopPreview, disabled }) => {\r\n    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: action.id });\r\n\r\n    const style = {\r\n      transform: CSS.Transform.toString(transform),\r\n      transition,\r\n      opacity: isDragging ? 0.8 : 1,\r\n      zIndex: isDragging ? 1 : 'auto',\r\n    };\r\n\r\n    return (\r\n      <Paper\r\n        ref={setNodeRef}\r\n        style={style}\r\n        elevation={isDragging ? 3 : 1}\r\n        sx={{\r\n          p: 2,\r\n          mb: 1,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 2,\r\n          userSelect: 'none',\r\n          opacity: disabled ? 0.6 : 1\r\n        }}\r\n      >\r\n        <Box {...attributes} {...listeners} sx={{ display: 'flex', alignItems: 'center', cursor: 'grab', touchAction: 'none' }}>\r\n          <DragIndicatorIcon />\r\n        </Box>\r\n        \r\n        <Box sx={{ flexGrow: 1 }}>\r\n          <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: 1.5 }}>\r\n            <Typography variant=\"subtitle2\">\r\n              {action.type === 'sound' ? '' : ''}\r\n            </Typography>\r\n            \r\n            <TextField\r\n              size=\"small\"\r\n              type=\"number\"\r\n              label=\" (ms)\"\r\n              value={action.duration}\r\n              onChange={(e) => onUpdate(action.id, { duration: parseInt(e.target.value, 10) || 0 })}\r\n              disabled={disabled}\r\n              sx={{ width: '100%' }}\r\n            />\r\n            \r\n            {action.type === 'sound' && (\r\n              <FormControl size=\"small\" sx={{ width: '100%' }}>\r\n                <InputLabel></InputLabel>\r\n                <Select\r\n                  value={action.resourceId || ''}\r\n                  label=\"\"\r\n                  onChange={(e) => onUpdate(action.id, { resourceId: e.target.value })}\r\n                  disabled={disabled}\r\n                  startAdornment={\r\n                    <Tooltip title={isPlaying ? \"\" : \"\"}>\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => isPlaying ? onStopPreview() : onPreview(action.resourceId)}\r\n                        sx={{ mr: 1 }}\r\n                        disabled={disabled}\r\n                      >\r\n                        {isPlaying ? <Stop fontSize=\"small\" /> : <PlayArrow fontSize=\"small\" />}\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                  {defaultSoundResources.map((sound) => (\r\n                    <MenuItem key={sound.id} value={sound.id}>\r\n                      {sound.name}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            )}\r\n          </Box>\r\n        </Box>\r\n        \r\n        <IconButton onClick={() => onRemove(action.id)} size=\"small\" color=\"error\" disabled={disabled}>\r\n          <Delete />\r\n        </IconButton>\r\n      </Paper>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * console.logAndroid\r\n   */\r\n  useEffect(() => {\r\n    const originalConsoleLog = console.log;\r\n    \r\n    console.log = (...args) => {\r\n      const message = args.join(' ');\r\n      \r\n      // \r\n      if (message.startsWith('SHAKE_CONFIG_LOADED:')) {\r\n        const configData = message.replace('SHAKE_CONFIG_LOADED:', '');\r\n        if (configData === 'null') {\r\n          console.log('');\r\n          setConfig(defaultConfig);\r\n        } else {\r\n          try {\r\n            const loadedConfig = JSON.parse(configData);\r\n            setConfig(loadedConfig);\r\n            console.log(':', loadedConfig);\r\n          } catch (error) {\r\n            console.error(':', error);\r\n            setConfig(defaultConfig);\r\n          }\r\n        }\r\n        setIsLoading(false);\r\n      }\r\n      \r\n      // \r\n      else if (message.startsWith('SHAKE_CONFIG_SAVE_RESULT:')) {\r\n        const result = message.replace('SHAKE_CONFIG_SAVE_RESULT:', '');\r\n        console.log(':', result === 'true' ? '' : '');\r\n      }\r\n      \r\n      // \r\n      else if (message.startsWith('SHAKE_CONFIG_ERROR:') || message.startsWith('SHAKE_CONFIG_SAVE_ERROR:')) {\r\n        console.error(':', message);\r\n        setIsLoading(false);\r\n      }\r\n      \r\n      // console.log\r\n      originalConsoleLog.apply(console, args);\r\n    };\r\n\r\n    // \r\n    loadConfigFromAndroid();\r\n\r\n    // \r\n    return () => {\r\n      console.log = originalConsoleLog;\r\n    };\r\n  }, [loadConfigFromAndroid]);\r\n\r\n  // \r\n  if (isLoading) {\r\n    return (\r\n      <Paper sx={{ p: 2 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            ...\r\n          </Typography>\r\n        </Box>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper sx={{ overflow: 'hidden' }}>\r\n      {/*  */}\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          p: 2,\r\n          cursor: 'pointer',\r\n          opacity: !isLoggedIn ? 0.5 : 1,\r\n          '&:hover': {\r\n            bgcolor: 'action.hover'\r\n          }\r\n        }}\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n          <Typography variant=\"subtitle1\" fontWeight=\"medium\">\r\n            \r\n          </Typography>\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                checked={config.enabled}\r\n                onChange={(e) => updateConfig({ enabled: e.target.checked })}\r\n                size=\"small\"\r\n                disabled={!isLoggedIn}\r\n              />\r\n            }\r\n            label={config.enabled ? '' : ''}\r\n            onClick={(e) => e.stopPropagation()} // /\r\n          />\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          {lastSaveTime && (\r\n            <Typography variant=\"caption\" color=\"text.secondary\">\r\n               {lastSaveTime}\r\n            </Typography>\r\n          )}\r\n          <IconButton size=\"small\">\r\n            {isExpanded ? <ExpandLess /> : <ExpandMore />}\r\n          </IconButton>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/*  */}\r\n      <Collapse in={isExpanded}>\r\n        <Divider />\r\n        <Box sx={{ p: 2, opacity: !isLoggedIn ? 0.6 : 1, pointerEvents: !isLoggedIn ? 'none' : 'auto' }}>\r\n          {/*  */}\r\n          {/* {!isLoggedIn && (\r\n            <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                \r\n              </Typography>\r\n            </Alert>\r\n          )} */}\r\n          {/*  */}\r\n          <Grid container spacing={2} sx={{ mb: 3 }}>\r\n            {/*  */}\r\n            <Grid item xs={12} sm={6}>\r\n              <FormControl fullWidth disabled={!config.enabled || !isLoggedIn}>\r\n                <InputLabel></InputLabel>\r\n                <Select\r\n                  value={config.emergencyType}\r\n                  label=\"\"\r\n                  onChange={(e) => updateConfig({ emergencyType: e.target.value })}\r\n                >\r\n                  {emergencyTypeOptions.map(option => (\r\n                    <MenuItem key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  */}\r\n          <Typography variant=\"h6\" gutterBottom></Typography>\r\n          <Grid container spacing={2} sx={{ mb: 3 }}>\r\n            {/*  */}\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"\"\r\n                type=\"number\"\r\n                inputProps={{ min: 1, max: 10 }}\r\n                value={tempValues.shakeCount !== undefined ? tempValues.shakeCount : config.shakeCount}\r\n                onChange={(e) => handleNumberInput('shakeCount', e.target.value)}\r\n                disabled={!config.enabled || !isLoggedIn}\r\n                helperText=\"1-10\"\r\n                error={tempValues.shakeCount !== undefined && (tempValues.shakeCount === '' || parseInt(tempValues.shakeCount) < 1 || parseInt(tempValues.shakeCount) > 10)}\r\n              />\r\n            </Grid>\r\n\r\n            {/*  */}\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"()\"\r\n                type=\"number\"\r\n                inputProps={{ min: 1000, max: 10000, step: 500 }}\r\n                value={tempValues.timeWindowMs !== undefined ? tempValues.timeWindowMs : config.timeWindowMs}\r\n                onChange={(e) => handleNumberInput('timeWindowMs', e.target.value)}\r\n                disabled={!config.enabled || !isLoggedIn}\r\n                helperText=\"1000-10000ms\"\r\n                error={tempValues.timeWindowMs !== undefined && (tempValues.timeWindowMs === '' || parseInt(tempValues.timeWindowMs) < 1000 || parseInt(tempValues.timeWindowMs) > 10000)}\r\n              />\r\n            </Grid>\r\n\r\n            {/*  */}\r\n            <Grid item xs={12} sm={4}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"\"\r\n                type=\"number\"\r\n                inputProps={{ min: 0, step: 0.1 }}\r\n                value={tempValues.threshold !== undefined ? tempValues.threshold : config.threshold}\r\n                onChange={(e) => handleNumberInput('threshold', e.target.value)}\r\n                disabled={!config.enabled || !isLoggedIn}\r\n                helperText={`${THRESHOLD_MIN}-${THRESHOLD_MAX}`}\r\n                error={tempValues.threshold !== undefined && (tempValues.threshold === '' || parseFloat(tempValues.threshold) < 0)}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  */}\r\n          <Typography variant=\"h6\" gutterBottom></Typography>\r\n          <Box sx={{ mb: 3 }}>\r\n            {/*  */}\r\n            <Collapse in={config.actions.length > 0 || true}>\r\n              <Box sx={{ mt: 2, pl: 4, borderLeft: '2px solid', borderColor: 'primary.main' }}>\r\n                <Grid container spacing={2} sx={{ mb: 2 }}>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      label=\"(ms)\"\r\n                      value={config.maxWaitDuration}\r\n                      onChange={(e) => updateConfig({ maxWaitDuration: parseInt(e.target.value, 10) || 0 })}\r\n                      disabled={!config.enabled || !isLoggedIn}\r\n                      helperText=\"\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                \r\n                <Box sx={{ mb: 2 }}>\r\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\r\n                    <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                       ({config.actions.length})\r\n                    </Typography>\r\n                    <Box sx={{ display: 'flex', gap: 1 }}>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        startIcon={<VolumeUpIcon />}\r\n                        onClick={() => handleAddPreAlarmAction('sound')}\r\n                        disabled={!config.enabled || !isLoggedIn}\r\n                      >\r\n                        \r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        startIcon={<VibrationIcon />}\r\n                        onClick={() => handleAddPreAlarmAction('vibration')}\r\n                        disabled={!config.enabled || !isLoggedIn}\r\n                      >\r\n                        \r\n                      </Button>\r\n                    </Box>\r\n                  </Box>\r\n                  \r\n                  {config.actions.length === 0 ? (\r\n                    <Box sx={{ \r\n                      p: 2, \r\n                      border: '1px dashed', \r\n                      borderColor: 'divider', \r\n                      borderRadius: 1, \r\n                      textAlign: 'center',\r\n                      color: 'text.secondary'\r\n                    }}>\r\n                      <Typography variant=\"body2\"></Typography>\r\n                    </Box>\r\n                  ) : (\r\n                    <DndContext\r\n                      sensors={sensors}\r\n                      collisionDetection={closestCenter}\r\n                      onDragEnd={handleDragEnd}\r\n                    >\r\n                      <SortableContext\r\n                        items={config.actions.map((a) => a.id)}\r\n                        strategy={verticalListSortingStrategy}\r\n                      >\r\n                        {config.actions.map((action) => (\r\n                          <SortablePreAlarmActionItem\r\n                            key={action.id}\r\n                            action={action}\r\n                            isPlaying={playingSoundId === action.resourceId}\r\n                            onUpdate={handleUpdatePreAlarmAction}\r\n                            onRemove={handleRemovePreAlarmAction}\r\n                            onPreview={handlePreviewSound}\r\n                            onStopPreview={handleStopSound}\r\n                            disabled={!config.enabled || !isLoggedIn}\r\n                          />\r\n                        ))}\r\n                      </SortableContext>\r\n                    </DndContext>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Collapse>\r\n            \r\n            {/*  */}\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={config.vibrationFeedback}\r\n                  onChange={(e) => updateConfig({ vibrationFeedback: e.target.checked })}\r\n                  disabled={!config.enabled || !isLoggedIn}\r\n                />\r\n              }\r\n              label=\"\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={config.soundFeedback}\r\n                  onChange={(e) => updateConfig({ soundFeedback: e.target.checked })}\r\n                  disabled={!config.enabled || !isLoggedIn}\r\n                />\r\n              }\r\n              label=\"\"\r\n            />\r\n          </Box>\r\n\r\n          {/*  */}\r\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\r\n            <Typography variant=\"body2\" component=\"div\">\r\n              <strong></strong>\r\n              <ul style={{ margin: '8px 0', paddingLeft: '20px' }}>\r\n                <li>{config.timeWindowMs}{config.shakeCount}</li>\r\n                <li>{config.emergencyType === 'medical' ? '' : ''}</li>\r\n                <li>{config.threshold}{THRESHOLD_MIN}-{THRESHOLD_MAX}</li>\r\n                <li>{config.actions.length > 0 ? `${config.maxWaitDuration}${config.actions.length}` : ''}</li>\r\n              </ul>\r\n            </Typography>\r\n          </Alert>\r\n        </Box>\r\n      </Collapse>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ShakeConfigUI;","import { autoWebViewJs, autoJsStoreUtils } from \"@droid/android\";\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid2 } from \"@mui/material\";\nimport { trackingPrint } from \"@app/model\";\nimport { authService } from \"@src/services/authService\";\nimport { PrivacyDialogDisplay } from '@src/components/privacies/PrivacyDialogDisplay';\nimport { useState, useRef } from 'react';\nimport toast from 'react-hot-toast';\n\n//  -  FallDetectionWrapper \nconst REQUIRE_LOGIN_FOR_FALL_DETECTION = false;\n\nexport function TestEmergencyCall() {\n    // \n    const [fallSensorInfoDialogOpen, setFallSensorInfoDialogOpen] = useState(false);\n    const [fallForegroundServiceDialogOpen, setFallForegroundServiceDialogOpen] = useState(false);\n    const [privacyDialogOpen, setPrivacyDialogOpen] = useState(false);\n    \n    // \n    const fallSensorCallbackRef = useRef<(passed: boolean) => void>();\n    const fallForegroundServiceCallbackRef = useRef<(passed: boolean) => void>();\n    const privacyCallbackRef = useRef<(passed: boolean) => void>();\n\n    //  FallDetectionWrapper - \n    function checkShowFallSensorInfo(callback: (passed: boolean) => void) {\n        interface Info {\n            passed: boolean;\n        }\n        const info = autoJsStoreUtils.read<Info>('showSensorInfo', { passed: false });\n        if (!info || !info.passed) {\n            fallSensorCallbackRef.current = callback;\n            setFallSensorInfoDialogOpen(true);\n        } else {\n            callback(true);\n        }\n    }\n\n    function checkShowFallInfo(callback: (passed: boolean) => void) {\n        checkShowFallSensorInfo(passed => {\n            if (!passed) {\n                callback(false);\n                return;\n            }\n            checkShowFallForegroundServiceInfo(callback);\n        })\n    }\n\n    function checkShowFallForegroundServiceInfo(callback: (passed: boolean) => void) {\n        interface Info {\n            passed: boolean;\n        }\n        const info = autoJsStoreUtils.read<Info>('showForegroundServiceInfo', { passed: false });\n        if (!info || !info.passed) {\n            fallForegroundServiceCallbackRef.current = callback;\n            setFallForegroundServiceDialogOpen(true);\n        } else {\n            callback(true);\n        }\n    }\n\n    //  FallDetectionWrapper - \n    const handleFallSensorDialog = (passed: boolean) => {\n        autoJsStoreUtils.write('showSensorInfo', { passed });\n        setFallSensorInfoDialogOpen(false);\n        if (fallSensorCallbackRef.current) {\n            fallSensorCallbackRef.current(passed);\n        }\n    };\n\n    const handleFallForegroundServiceDialog = (passed: boolean) => {\n        autoJsStoreUtils.write('showForegroundServiceInfo', { passed });\n        setFallForegroundServiceDialogOpen(false);\n        if (fallForegroundServiceCallbackRef.current) {\n            fallForegroundServiceCallbackRef.current(passed);\n        }\n    };\n\n    // \n    function checkPrivacyAgreement(callback: (passed: boolean) => void): boolean {\n        interface IPrivacyInfo {\n            agree: boolean;\n            disagreeTime: number;\n        }\n        \n        const def: IPrivacyInfo = { agree: false, disagreeTime: 0 };\n        const res = autoJsStoreUtils.read<IPrivacyInfo>(`privacy_main`, def);\n        const value: IPrivacyInfo = res && 'agree' in res ? res : def;\n        \n        // \n        if (value.agree) {\n            callback(true);\n            return true;\n        }\n        \n        // \n        privacyCallbackRef.current = callback;\n        setPrivacyDialogOpen(true);\n        return false;\n    }\n\n    // \n    const handlePrivacyDialogClose = (agreed?: boolean) => {\n        setPrivacyDialogOpen(false);\n        if (privacyCallbackRef.current) {\n            privacyCallbackRef.current(agreed === true);\n        }\n    };\n\n    // \n    function executeEmergencyCall() {\n        try {\n            const script = `\n            com.fanfanlo.emergencycall.manager.EmergencyCallJSInterface.startMedicalEmergencyCall()`;\n            const res = autoWebViewJs.callScript(script);\n            console.log(\"TestEmergencyCall res=\", res);\n            \n            // \n            trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                    timestamp: Date.now(),\n                    scriptResult: res\n                }\n            }});\n            \n            toast.success('');\n        } catch (error) {\n            console.error('TestEmergencyCall error:', error);\n            \n            // \n            trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                    timestamp: Date.now(),\n                    error: error instanceof Error ? error.message : String(error),\n                    stack: error instanceof Error ? error.stack : undefined\n                }\n            }});\n            \n            toast.error('');\n        }\n    }\n\n    // \n    function executeSecurityEmergencyCall() {\n        try {\n            const script = `\n            com.fanfanlo.emergencycall.manager.EmergencyCallJSInterface.startSecurityEmergencyCall()`;\n            const res = autoWebViewJs.callScript(script);\n            console.log(\"TestSecurityEmergencyCall res=\", res);\n            \n            // \n            trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                    timestamp: Date.now(),\n                    scriptResult: res\n                }\n            }});\n            \n            toast.success('');\n        } catch (error) {\n            console.error('TestSecurityEmergencyCall error:', error);\n            \n            // \n            trackingPrint({params:{\n                type:\"\",\n                title:\"\",\n                subtitle:\"-\",\n                extra:{\n                    timestamp: Date.now(),\n                    error: error instanceof Error ? error.message : String(error),\n                    stack: error instanceof Error ? error.stack : undefined\n                }\n            }});\n            \n            toast.error('');\n        }\n    }\n\n    // \n    async function onSecurityClick() {\n        // \n        trackingPrint({params:{\n            type:\"\",\n            title:\"\", \n            subtitle:\"-\",\n            extra:{\n                timestamp: Date.now(),\n                isWebView: !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function')\n            }\n        }});\n        \n        // 1. \n        const privacyPassed = checkPrivacyAgreement(passed => {\n            if (!passed) {\n                toast.error('');\n                return;\n            }\n            \n            // 2. \n            if (REQUIRE_LOGIN_FOR_FALL_DETECTION) {\n                authService.showLoginDialog().then(appLoggedIn => {\n                    if (!appLoggedIn) {\n                        toast.error(\"\");\n                        return;\n                    }\n                    \n                    // 3. \n                    checkShowFallInfo(permissionPassed => {\n                        if (!permissionPassed) {\n                            toast.error('');\n                            return;\n                        }\n                        executeSecurityEmergencyCall();\n                    });\n                });\n            } else {\n                // \n                checkShowFallInfo(permissionPassed => {\n                    if (!permissionPassed) {\n                        toast.error('');\n                        return;\n                    }\n                    executeSecurityEmergencyCall();\n                });\n            }\n        });\n        \n        // \n        if (privacyPassed) {\n            // 2. \n            if (REQUIRE_LOGIN_FOR_FALL_DETECTION) {\n                const appLoggedIn = await authService.showLoginDialog();\n                if (!appLoggedIn) {\n                    toast.error(\"\");\n                    return;\n                }\n            }\n            \n            // 3. \n            checkShowFallInfo(permissionPassed => {\n                if (!permissionPassed) {\n                    toast.error('');\n                    return;\n                }\n                executeSecurityEmergencyCall();\n            });\n        }\n    }\n\n    //  - \n    async function onClick() {\n        // \n        trackingPrint({params:{\n            type:\"\",\n            title:\"\", \n            subtitle:\"-\",\n            extra:{\n                timestamp: Date.now(),\n                isWebView: !!(autoWebViewJs && typeof autoWebViewJs.callScript === 'function')\n            }\n        }});\n        \n        // 1. \n        const privacyPassed = checkPrivacyAgreement(passed => {\n            if (!passed) {\n                toast.error('');\n                return;\n            }\n            \n            // 2. \n            if (REQUIRE_LOGIN_FOR_FALL_DETECTION) {\n                authService.showLoginDialog().then(appLoggedIn => {\n                    if (!appLoggedIn) {\n                        toast.error(\"\");\n                        return;\n                    }\n                    \n                    // 3. \n                    checkShowFallInfo(permissionPassed => {\n                        if (!permissionPassed) {\n                            toast.error('');\n                            return;\n                        }\n                        executeEmergencyCall();\n                    });\n                });\n            } else {\n                // \n                checkShowFallInfo(permissionPassed => {\n                    if (!permissionPassed) {\n                        toast.error('');\n                        return;\n                    }\n                    executeEmergencyCall();\n                });\n            }\n        });\n        \n        // \n        if (privacyPassed) {\n            // 2. \n            if (REQUIRE_LOGIN_FOR_FALL_DETECTION) {\n                const appLoggedIn = await authService.showLoginDialog();\n                if (!appLoggedIn) {\n                    toast.error(\"\");\n                    return;\n                }\n            }\n            \n            // 3. \n            checkShowFallInfo(permissionPassed => {\n                if (!permissionPassed) {\n                    toast.error('');\n                    return;\n                }\n                executeEmergencyCall();\n            });\n        }\n    }\n    return(\n        <Box  sx={{ p: 2 }}>\n            <Grid2  container spacing={2} sx={{ width: '100%' }}>\n                {/*  */}\n                <Grid2 size={6}>\n                    <Button  \n                        variant=\"contained\" \n                        onClick={onClick}\n                        fullWidth\n                        sx={{\n                            backgroundColor: '#FF5722',\n                            color: 'white',\n                            fontSize: '1.125rem', // 18px\n                            fontWeight: 'bold',\n                            minHeight: '6.25rem', // 100px\n                            borderRadius: '0.5rem', // 8px\n                            boxShadow: '0 0.5rem 1.5rem rgba(255, 87, 34, 0.3)',\n                            textTransform: 'none',\n                            position: 'relative',\n                            overflow: 'hidden',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: '0.5rem', // 8px\n                            '&:hover': {\n                                backgroundColor: '#E64A19',\n                                transform: 'translateY(-0.125rem)', // -2px\n                                boxShadow: '0 0.75rem 2rem rgba(255, 87, 34, 0.4)',\n                            },\n                            '&:active': {\n                                transform: 'translateY(0)',\n                                boxShadow: '0 0.25rem 1rem rgba(255, 87, 34, 0.3)',\n                            },\n                            '&::before': {\n                                content: '\"\"',\n                                position: 'absolute',\n                                top: '50%',\n                                left: '50%',\n                                width: '0',\n                                height: '0',\n                                borderRadius: '50%',\n                                backgroundColor: 'rgba(255, 255, 255, 0.3)',\n                                transform: 'translate(-50%, -50%)',\n                                transition: 'width 0.3s, height 0.3s',\n                            },\n                            '&:hover::before': {\n                                width: '100%',\n                                height: '100%',\n                            }\n                        }}\n                    >\n                        <Box sx={{ \n                            fontSize: '2.5rem',\n                            lineHeight: 1,\n                            animation: 'pulse 2s infinite',\n                            '@keyframes pulse': {\n                                '0%': { transform: 'scale(1)' },\n                                '50%': { transform: 'scale(1.1)' },\n                                '100%': { transform: 'scale(1)' }\n                            }\n                        }}>\n                            \n                        </Box>\n                        <Box></Box>\n                    </Button>\n                </Grid2>\n\n                {/*  */}\n                <Grid2 size={6}>\n                    <Button  \n                        variant=\"contained\" \n                        onClick={onSecurityClick}\n                        fullWidth\n                        sx={{\n                            backgroundColor: '#9C27B0',\n                            color: 'white',\n                            fontSize: '1.125rem', // 18px\n                            fontWeight: 'bold',\n                            minHeight: '6.25rem', // 100px\n                            borderRadius: '0.5rem', // 8px\n                            boxShadow: '0 0.5rem 1.5rem rgba(156, 39, 176, 0.3)',\n                            textTransform: 'none',\n                            position: 'relative',\n                            overflow: 'hidden',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: '0.5rem', // 8px\n                            '&:hover': {\n                                backgroundColor: '#7B1FA2',\n                                transform: 'translateY(-0.125rem)', // -2px\n                                boxShadow: '0 0.75rem 2rem rgba(156, 39, 176, 0.4)',\n                            },\n                            '&:active': {\n                                transform: 'translateY(0)',\n                                boxShadow: '0 0.25rem 1rem rgba(156, 39, 176, 0.3)',\n                            },\n                            '&::before': {\n                                content: '\"\"',\n                                position: 'absolute',\n                                top: '50%',\n                                left: '50%',\n                                width: '0',\n                                height: '0',\n                                borderRadius: '50%',\n                                backgroundColor: 'rgba(255, 255, 255, 0.3)',\n                                transform: 'translate(-50%, -50%)',\n                                transition: 'width 0.3s, height 0.3s',\n                            },\n                            '&:hover::before': {\n                                width: '100%',\n                                height: '100%',\n                            }\n                        }}\n                    >\n                        <Box sx={{ \n                            fontSize: '2.5rem',\n                            lineHeight: 1,\n                            animation: 'pulse 2s infinite',\n                            '@keyframes pulse': {\n                                '0%': { transform: 'scale(1)' },\n                                '50%': { transform: 'scale(1.1)' },\n                                '100%': { transform: 'scale(1)' }\n                            }\n                        }}>\n                            \n                        </Box>\n                        <Box></Box>\n                    </Button>\n                </Grid2>\n            </Grid2>\n\n            {/*  */}\n            <Dialog open={fallSensorInfoDialogOpen} onClose={() => handleFallSensorDialog(false)}>\n                <DialogTitle></DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        \n                        \n                        \n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleFallSensorDialog(false)}></Button>\n                    <Button onClick={() => handleFallSensorDialog(true)} autoFocus>\n                        \n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/*  */}\n            <Dialog open={fallForegroundServiceDialogOpen} onClose={() => handleFallForegroundServiceDialog(false)}>\n                <DialogTitle></DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        \n                        \n                        \n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleFallForegroundServiceDialog(false)}></Button>\n                    <Button onClick={() => handleFallForegroundServiceDialog(true)} autoFocus>\n                        \n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/*  */}\n            <PrivacyDialogDisplay \n                isVisible={privacyDialogOpen}\n                onVisibilityChange={handlePrivacyDialogClose}\n            />\n        </Box>\n    )\n}","import { IconButton } from '@mui/material';\nimport { useFontSize } from '@src/contexts/FontSizeContext';\n\nexport function HomeFontSizeButton() {\n  const { openDialog, showInHome } = useFontSize();\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    e.preventDefault();\n    // Explicitly call openDialog with the fromHome parameter\n    if (openDialog) {\n      openDialog(true);\n    }\n  }\n\n  if (!showInHome) {\n    return null;\n  }\n\n  return (\n    <IconButton\n      onClick={handleClick}\n      sx={{\n        position: 'fixed',\n        top: 24,\n        // right: 24,\n        zIndex: 9999,\n        backgroundColor: 'primary.main',\n        color: 'primary.contrastText',\n        '&:hover': {\n          backgroundColor: 'primary.dark',\n          transform: 'scale(1.1)',\n        },\n        width: 60,\n        height: 60,\n        boxShadow: 3,\n        fontSize: '2rem',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        transition: 'all 0.3s ease',\n      }}\n      aria-label=\"\"\n      title=\"\"\n    >\n      \n    </IconButton>\n  );\n}\n","import { trackingPrint } from '@app/model';\nimport { AppShell, TabbarContainer } from '@app/ui';\nimport { autoWebViewJs } from '@droid/android';\nimport { Dispatcher, IDispatcher, nextPreload } from '@fanfanlo';\nimport { Box, Button, Grid2, Link, IconButton } from '@mui/material';\nimport { InviteEmergencyContactButton } from '@src/components/pages/home/components/InviteEmergencyContactButton';\nimport { ContactsManagementButton } from '@src/components/pages/home/components/ContactsManagementButton';\nimport { DesktopShortcutButton } from '@src/components/pages/home/components/DesktopShortcutButton';\nimport { ProductIntroductionButton } from '@src/components/pages/home/components/ProductIntroductionButton';\nimport { UserGuideButton } from '@src/components/pages/home/components/UserGuideButton';\nimport { InviteContactDialog } from '@src/components/dialogs/InviteContactDialog';\nimport EmergencyStopButton from '@src/components/emergency-audio-control/EmergencyStopButton';\nimport { EmergencyTTSSettings } from '@src/components/emergency-tts-settings';\nimport { ErrorDisplay } from '@src/components/error-display/ErrorDisplay';\nimport MeetingList from '@src/components/meeting-list/MeetingList';\nimport { NavBar } from '@src/components/navbar/NavBar';\nimport { EmergencyCallSettings } from '@src/components/pages/home';\nimport AddWidgetButton from '@src/components/pages/home/components/AddWidgetButton';\nimport AddSecurityWidgetButton from '@src/components/pages/home/components/AddSecurityWidgetButton';\nimport PendingInvitationsList from '@src/components/PendingInvitationsList/PendingInvitationsList';\nimport PreAlarmConfig2 from '@src/components/pre-alarm-config2';\nimport { ListenShowPrivacyContent } from '@src/components/privacies/ListenShowPrivacyContent';\nimport SensorMonitor from '@src/components/sensor-monitor/SensorMonitor';\nimport ShakeConfigUI from '@src/components/shakeconfig/ShakeConfigUI';\nimport { TestEmergencyCall } from '@src/components/test/TestEmergencyCall';\nimport { useRouter } from 'next/router';\nimport React, { useState } from 'react';\nimport { HomeFontSizeButton } from \"@src/components/home/HomeFontSizeButton\";\n\nfunction Content() {\n  const [openInviteDialog, setOpenInviteDialog] = useState(false);\n\n  const router = useRouter();\n\n  React.useEffect(() => {\n    nextPreload(router, '/intro');\n    nextPreload(router, '/how-to-use');\n  }, []);\n\n  return (\n    <Box sx={{ my: 2, p: 2 }}>\n      <ErrorDisplay />\n      {/*  -  */}\n      <EmergencyStopButton fullWidth size=\"large\" />\n\n      <Box>\n        <Link href=\"/how-to-use\" style={{ textDecoration: 'none' }}>\n          </Link>\n      </Box>\n      <ListenShowPrivacyContent type=\"main\" />\n      {/* <InvitationManager /> */}\n      {/* <MeetingList maxItemLength={3} /> */}\n      <PendingInvitationsList />\n\n      <Grid2 container spacing={2} sx={{ m: 2 }}>\n        <Grid2 size={6}>\n          <ProductIntroductionButton />\n        </Grid2>\n        <Grid2 size={6}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <UserGuideButton />\n          </Box>\n        </Grid2>\n      </Grid2>\n      <PreAlarmConfig2 />\n      <EmergencyTTSSettings />\n      {/* <PreAlarmConfigComponent /> */}\n\n      {/* <JpushIsInitialized /> */}\n\n      <Grid2 container sx={{ mt: 2, mb: 2 }}>\n        <Grid2 size={6}>\n          <TestEmergencyCall />\n        </Grid2>\n        <Grid2 size={6}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <EmergencyStopButton variant=\"button\" />\n          </Box>\n        </Grid2>\n      </Grid2>\n\n      {/*  */}\n      <AddWidgetButton\n        onSuccess={() => {\n          console.log('');\n        }}\n        onError={(error) => {\n          console.error(':', error);\n        }}\n      />\n\n\n      {/* gemini */}\n      {/* <SensorPermissions /> */}\n      {/*  */}\n      <ShakeConfigUI />\n\n      <SensorMonitor />\n      {/*  */}\n      {/* <UnifiedMonitoringControl /> */}\n\n      {/*   -  */}\n\n      <Grid2 container spacing={2} sx={{ m: 2 }}>\n        <Grid2 size={6}>\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              // \n              trackingPrint({\n                params: {\n                  type: \"\",\n                  title: \"\",\n                  subtitle: \"-\",\n                  extra: {\n                    timestamp: Date.now(),\n                    page: \"home\"\n                  }\n                }\n              });\n              setOpenInviteDialog(true);\n            }}\n          >\n            \n          </Button>\n        </Grid2>\n        <Grid2 size={6}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <Button\n              fullWidth\n              variant=\"contained\"\n              onClick={() => {\n                router.push('/contacts');\n              }}>\n              \n            </Button>\n          </Box>\n        </Grid2>\n      </Grid2>\n      {openInviteDialog && <InviteContactDialog\n        open={openInviteDialog}\n        onClose={() => {\n          // \n          trackingPrint({\n            params: {\n              type: \"\",\n              title: \"\",\n              subtitle: \"-\",\n              extra: {\n                timestamp: Date.now(),\n                page: \"home\"\n              }\n            }\n          });\n          setOpenInviteDialog(false);\n        }}\n      />}\n\n      {/* <MeetingRoom5\n        roomName=\"test-room\"\n        userName={`user-${Math.random().toString(36).substring(2, 8)}`}\n        livekitConfig={mainModel.appConfig.livekit}\n        // role=\"initiator\" // Add role for testing\n      />\n       */}\n\n      {/* TTS */}\n      {/* <TTSRecorder /> */}\n      {/*  */}\n      {/* <ShortcutConfig /> */}\n\n      <Box sx={{ mt: 2, mb: 2 }}>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          onClick={() => {\n            router.push('/shortcut');\n          }}>\n          \n          {/* <Link href={\"/shortcut\"}></Link> */}\n        </Button>\n      </Box>\n      {/* <EmergencyAudioControl /> */}\n      {/*  */}\n      {/* <EmergencyStopButton variant=\"fab\" /> */}\n\n      {/* <Box>\n      <Link href={\"/logs\"}></Link>\n      <IMOpenPageLink />\n</Box> */}\n\n      <Box sx={{ mt: '2rem' }}></Box>\n    </Box>\n  );\n}\n\n\nfunction Content2() {\n  const [dispatcher] = useState<IDispatcher>(new Dispatcher())\n  const router = useRouter();\n  // const [openInviteDialog, setOpenInviteDialog] = useState(false);\n  return (\n    <Box sx={{ position: 'relative' }}>\n      <HomeFontSizeButton />\n\n      <ListenShowPrivacyContent type=\"main\" dispatcher={dispatcher} />\n      <ErrorDisplay />\n      <PendingInvitationsList />\n      <EmergencyCallSettings dispatcher={dispatcher} />\n\n      <TestEmergencyCall />\n      <Grid2 container spacing={3} sx={{ mt: 2, px: 2 }}>\n        {/*  */}\n        <Grid2 size={6}>\n          <InviteEmergencyContactButton />\n        </Grid2>\n        <Grid2 size={6}>\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n            <ContactsManagementButton />\n          </Box>\n        </Grid2>\n      </Grid2>\n\n      {/* <AddWidgetButton \n        onSuccess={() => {\n          console.log('');\n        }}\n        onError={(error) => {\n          console.error(':', error);\n        }}\n      />\n      <AddSecurityWidgetButton \n        onSuccess={() => {\n          console.log('');\n        }}\n        onError={(error) => {\n          console.error(':', error);\n        }}\n      /> */}\n      <Box sx={{ mt: 2, mb: 2, px: 2 }}>\n        <DesktopShortcutButton />\n      </Box>\n      <MeetingList maxItemLength={1} />\n\n      <Grid2 container spacing={2} sx={{ m: 2 }}>\n        <Grid2 size={6}>\n          <ProductIntroductionButton />\n        </Grid2>\n        <Grid2 size={6}>\n\n          <UserGuideButton />\n        </Grid2>\n      </Grid2>\n    </Box>\n  )\n}\nexport default function Home() {\n  return (\n    <AppShell>\n      <TabbarContainer titleConf={{ ns: 'emergency-call/pages/home/content', key: 'home.title' }} navBar={<NavBar />}>\n        <Content2 />\n      </TabbarContainer>\n    </AppShell>\n  );\n}\n"],"names":["React","useState","useEffect","Button","Alert","Box","Typography","Dialog","DialogTitle","DialogContent","DialogActions","SettingsIcon","autoWebViewJs","AddWidgetButton","onSuccess","onError","isAdding","setIsAdding","message","setMessage","messageType","setMessageType","deviceManufacturer","setDeviceManufacturer","showPermissionGuide","setShowPermissionGuide","manufacturerScript","javaResultString","callScript","error","console","warn","handleOpenSettings","log","settingsScript","success","executeAddWidget","addScript","addResult","addSuccess","Error","errorMsg","handleAddWidget","permissionScript","permissionResult","permissionInfo","JSON","parse","needsPermission","sx","my","variant","color","size","fullWidth","onClick","disabled","py","borderColor","backgroundColor","opacity","severity","mt","onClose","style","whiteSpace","open","maxWidth","mb","px","pb","startIcon","AddSecurityWidgetButton","openSettingsScript","tms","request","tmsEmergencyCallListAllInvitations","opts","TEmc","MEmcListAllInvitations","params","gateway","handler","cancelOrRemoveInvitation","invitationId","isReceived","inviteStatus","emergencyCallInvitationService","respondToInvite","invitation_id","action","tmsEmergencyCallRespondToInvite","MEmcRespondToInvite","listAllInvitations","tmsEmcInviteContacts","res","MEmcInviteContacts","tmsEmcGetContactTypes","MEmcGetContactTypes","TextField","CircularProgress","useCallback","useRef","user","toast","matrixUser","authService","Log","useProxyWatch","fileLogger","isValidIdentity","text","test","is11DigitNumber","InviteContactDialog","onInviteSent","uiLogger","sub","contacts","setContacts","remark","setRemark","callType","setCallType","availableCallTypes","setAvailableCallTypes","isLoading","setIsLoading","isTypesLoading","setIsTypesLoading","pendingParams","setPendingParams","executionLock","accessToken","userData","userInfo","loginResponse","access_token","isUserLoggedIn","data","sessionData","global_user_info","userToken","storeData","user_token","current","finalParams","matrix_access_token","type","executeApiCall","responseData","printLog","err","shellIsOk","dataIsOk","errorMessage","results","msg","successResults","filter","r","result_code","infoResults","errorResults","length","infoMessages","map","Boolean","join","errorMessages","fetchCallTypes","logger","stringify","types","formattedTypes","id","uuid","name","is_system","defaultType","handleSendInvitation","contactInputs","split","c","trim","contactIdentities","input","push","identity","identityType","appLoggedIn","showLoginDialog","currentAccessToken","apiParams","component","autoFocus","margin","label","multiline","rows","placeholder","value","onChange","e","target","trackingPrint","InviteEmergencyContactButton","onInviteClick","openInviteDialog","setOpenInviteDialog","handleClick","title","subtitle","extra","timestamp","Date","now","page","fontSize","fontWeight","minHeight","borderRadius","boxShadow","textTransform","position","overflow","transform","useRouter","ContactsManagementButton","router","content","top","left","width","height","transition","DesktopShortcutButton","ProductIntroductionButton","display","justifyContent","UserGuideButton","fileLog","stopAllHandler","stopEmergencyMethods","script","methodError","Snackbar","Fab","Tooltip","Stop","StopIcon","VolumeOff","VolumeOffIcon","EmergencyStopButton","loading","setLoading","isAndroidWebView","handleStopAllEmergencyAudio","buttonType","bl","result","reason","String","stack","undefined","handleCloseMessage","placement","bottom","right","zIndex","autoHideDuration","anchorOrigin","vertical","horizontal","Switch","Paper","FormControlLabel","Slider","Divider","Collapse","List","ListItem","ListItemText","ListItemSecondaryAction","IconButton","Chip","LinearProgress","Tabs","Tab","PlayArrow","VolumeUp","Settings","ExpandLess","Mic","Share","Delete","Refresh","Star","StarBorder","CloudUpload","InsertDriveFile","autoJsStoreUtils","ReportButton","DEFAULT_SETTINGS","enabled","repeatInterval","voiceSpeed","voicePitch","useCustomAudio","lastUpdated","DEFAULT_VOICE_CONFIG","TTS_SETTINGS_KEY","VOICE_CONFIG_KEY","EmergencyTTSSettings","settings","setSettings","voiceConfig","setVoiceConfig","fileList","setFileList","testing","setTesting","showSuccess","setShowSuccess","setError","successMessage","setSuccessMessage","expanded","setExpanded","activeTab","setActiveTab","isRecording","setIsRecording","playingFile","setPlayingFile","recordText","setRecordText","recordSpeed","setRecordSpeed","recordPitch","setRecordPitch","showRecordDialog","setShowRecordDialog","ttsAvailable","setTtsAvailable","isUploading","setIsUploading","selectedFile","setSelectedFile","uploadProgress","setUploadProgress","supportedFormats","setSupportedFormats","onRecordClick","loadData","savedSettings","read","savedConfig","checkTTSAvailability","loadFileList","loadSupportedFormats","formats","maxFileSizeMB","maxDurationSeconds","recommendedDurationSeconds","listJson","files","filesWithType","file","isDefault","handleSelectAndUploadAudioFile","progressInterval","setInterval","prev","clearInterval","saveSettings","newSettings","settingsToSave","write","saveVoiceConfig","newConfig","configToSave","handleRecord","getFullYear","toString","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","fileName","replace","setTimeout","resultJson","handlePlayFile","filePath","handleShareFile","handleDeleteFile","window","confirm","setAsDefaultAudio","medicalDefault","updatedSettings","medicalEmergencyAudioPath","securityDefault","updatedFiles","formatFileSize","bytes","toFixed","formatTime","toLocaleString","formatDuration","milliseconds","seconds","Math","floor","minutes","remainingSeconds","testTTS","Promise","resolve","stopTest","handleSettingChange","key","handleSave","p","textAlign","elevation","alignItems","gap","xs","sm","flexWrap","flex","minWidth","flexShrink","control","checked","padding","in","border","_","newValue","helperText","lineHeight","min","max","step","marks","valueLabelDisplay","valueLabelFormat","br","toUpperCase","dense","index","Fragment","pl","primary","source","format","secondary","fileSize","createTime","duration","mimeType","strong","gutterBottom","ErrorDisplay","errors","setErrors","isVisible","setIsVisible","loadErrors","parsed","clearErrors","handleErrorEvent","handleErrorClearedEvent","handleFocus","handleCustomError","event","handleCustomErrorCleared","addEventListener","removeEventListener","getSeverityColor","getSeverityText","getErrorTypeText","div","className","h3","span","button","slice","errorType","context","Object","keys","entries","stackTrace","details","summary","pre","CheckCircle","CheckCircleIcon","ErrorIcon","Help","HelpIcon","Security","SecurityIcon","Info","InfoIcon","isRealInAndroid","FALL_DETECTION_EXCLUDED_PERMISSIONS","PermissionStatusPanel","isExpanded","onStatsChange","permissionsData","setPermissionsData","infoDialogOpen","setInfoDialogOpen","selectedPermission","setSelectedPermission","fetchPermissions","isAndroid","permissionsCount","permissions","grantedCount","status","deniedCount","unknownCount","deviceBrand","apiLevel","filterRelevantPermissions","permission","includes","updateStats","relevantPermissions","granted","denied","unknown","intervalId","permissionId","permissionName","permissionType","currentStatus","canDetect","jpushScript","jpushErr","handleShowPermissionInfo","permissionStatus","handleCloseInfoDialog","getPermissionReason","reasonMap","getPermissionImpact","impactMap","getStatusIcon","iconProps","getStatusChip","statusConfig","config","getTypeLabel","typeLabels","runtime","special","vendor","ml","previousError","borderLeft","borderLeftColor","bgcolor","mr","PaperProps","mx","pt","fromDialog","Stack","FormControl","MenuItem","InputLabel","Select","DragIndicator","DragIndicatorIcon","ExpandMore","VolumeUpIcon","Vibration","VibrationIcon","DndContext","closestCenter","KeyboardSensor","PointerSensor","TouchSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","useSortable","verticalListSortingStrategy","CSS","debounce","PRE_ALARM_CONFIG_KEY","defaultSoundResources","SortableActionItem","isPlaying","onUpdate","onRemove","onPreview","onStopPreview","attributes","listeners","setNodeRef","isDragging","Transform","ref","userSelect","cursor","touchAction","flexGrow","flexDirection","parseInt","resourceId","startAdornment","sound","PreAlarmConfig","setConfig","playingSoundId","setPlayingSoundId","debouncedWrite","sensors","activationConstraint","distance","delay","tolerance","coordinateGetter","loadConfig","storedConfig","actionsWithIds","actions","random","substr","calculatedDuration","calculateTotalDuration","maxWaitDuration","defaultActions","totalDuration","reduce","total","updateConfig","updates","updateConfigWithCalculatedDuration","handleToggleEnabled","handleAddAction","newAction","handleUpdateAction","handleRemoveAction","handleDragEnd","active","over","oldIndex","findIndex","a","newIndex","handlePreviewSound","handleStopSound","SoundManager","previewSound","stopPreview","direction","spacing","collisionDetection","onDragEnd","items","strategy","OriginalEmergencyTTSSettings","showOriginal","setShowOriginal","default","useImperativeHandle","forwardRef","MusicNote","DEFAULT_TTS_SETTINGS","AUDIO_FILE_UPLOAD_SUCCESS_EVENT","VoiceEmergencySettings","props","showError","setShowError","setErrorMessage","handleAudioUploadSuccess","detail","reloadConfig","saveTTSSettings","stopScript","handleSaveSettings","wordBreak","icon","pr","Accordion","AccordionSummary","AccordionDetails","ExpandMoreIcon","FallDetectionSettings","voiceSettingsRef","threshold","setThreshold","lastValidThreshold","setLastValidThreshold","debounceTimerRef","localVoiceSettingsRef","effectiveVoiceSettingsRef","permissionExpanded","setPermissionExpanded","permissionStats","setPermissionStats","fetchThresholdFromAndroid","thresholdValue","parseFloat","initializeThreshold","fetchedThreshold","clearTimeout","submitThreshold","isValidThreshold","numValue","isNaN","showToast","alert","handleThresholdChange","marginBottom","expandIcon","aria-controls","SENSOR_MONITORING_STATE_CHANGED","fileMapUtils","FallDownVideoPlayer","fallDownImg","getFile","falldownVideo","VIDEO_CONFIG","src","poster","controls","muted","loop","videoRef","setIsPlaying","videoElement","initVideo","load","handleLoadedData","handlePlay","handlePause","paused","pause","video","objectFit","useTheme","alpha","DialogContentText","Animation","AnimationIcon","PrivacyDialogDisplay","REQUIRE_LOGIN_FOR_FALL_DETECTION","FallDetectionWrapper","onToggleExpanded","animationType","dispatcher","theme","fallThreshold","setFallThreshold","fallIsMonitoring","setFallIsMonitoring","fallSensorInfoDialogOpen","setFallSensorInfoDialogOpen","fallForegroundServiceDialogOpen","setFallForegroundServiceDialogOpen","privacyDialogOpen","setPrivacyDialogOpen","fallSensorCallbackRef","fallForegroundServiceCallbackRef","privacyCallbackRef","readFallIsMonitoring","isMonitoring","handleMonitoringStateChange","newState","checkShowFallSensorInfo","callback","info","passed","checkShowFallInfo","checkShowFallForegroundServiceInfo","handleFallSensorDialog","handleFallForegroundServiceDialog","checkPrivacyAgreement","def","agree","disagreeTime","handlePrivacyDialogClose","agreed","handleToggleFallMonitoring","then","permissionPassed","AnimationPlaceholder","getAnimationContent","description","palette","main","warning","animation","shadows","stopPropagation","background","paper","borderTop","divider","aria-labelledby","aria-describedby","area","EmergencyCallSettings","fallExpanded","setFallExpanded","shakeExpanded","setShakeExpanded","isLoggedIn","handleToggleExpanded","FunctionWrapper","onToggleEnabled","children","useMemo","Grid","SHAKE_CONFIG_KEY","THRESHOLD_MIN","THRESHOLD_MAX","THRESHOLD_DEFAULT","defaultConfig","shakeCount","timeWindowMs","emergencyType","baseMotionThreshold","directionChangeThreshold","minMotionInterval","cooldownDuration","vibrationFeedback","soundFeedback","version","emergencyTypeOptions","conf","merge","ShakeDetectionSettings","lastSaveTime","setLastSaveTime","tempValues","setTempValues","loadConfigFromAndroid","validateConfig","saveConfigToAndroid","sum","configJson","base64Config","btoa","unescape","encodeURIComponent","toLocaleTimeString","handleNumberInput","field","timerId","handleAddPreAlarmAction","handleUpdatePreAlarmAction","handleRemovePreAlarmAction","SortablePreAlarmActionItem","localDuration","setLocalDuration","debouncedUpdate","handleDurationChange","cancel","container","item","option","inputProps","ul","paddingLeft","li","tmsEmergencyCallListPendingReceivedInvitations","MEmcListPendingReceivedInvitations","emergencyCallPendingInvitationService","listPendingReceivedInvitations","Card","CardContent","CardActions","Avatar","Check","CheckIcon","Close","CloseIcon","AccessTime","AccessTimeIcon","Notifications","NotificationsIcon","formatDistanceToNow","zhCN","AppModelEvent","appModel","matrixClient","PendingInvitationCard","invitation","onRespond","isProcessing","isProcessingAction","setIsProcessingAction","handleRespond","isExpired","expires_at","user_info","avatar_url","alt","display_name","created_at","addSuffix","locale","PendingInvitationsList","invitations","setInvitations","setIsProcessing","loadPendingInvitations","is_ok","handleRespondToInvite","invite","emit","InviteListUpdated","unsubscribe","addListener","unsub","imDispatcher","ImDispatcherEventTypes","INVITE","PreAlarmConfig2","InputProps","endAdornment","privacyDialogClosedEventType","autoOpened","PrivacyDialogAuto","uiLog","setOpen","handleClose","dispatch","effLog","ListenShowPrivacyContent","RefreshIcon","currentPermissionsCount","SensorMonitor","setIsMonitoring","isSensorInfoDialogOpen","setSensorInfoDialogOpen","isForegroundServiceDialogOpen","setForegroundServiceDialogOpen","sensorCallbackRef","foregroundServiceCallbackRef","readIsMonitoring","handleSetThreshold","handleToggleMonitoring","checkShowInfo","checkShowSensorInfo","checkShowForegroundServiceInfo","handleSensorDialog","handleForegroundServiceDialog","ShakeConfigUI","setIsExpanded","originalConsoleLog","args","startsWith","configData","loadedConfig","apply","pointerEvents","Grid2","TestEmergencyCall","executeEmergencyCall","scriptResult","executeSecurityEmergencyCall","onSecurityClick","isWebView","privacyPassed","onVisibilityChange","useFontSize","HomeFontSizeButton","openDialog","showInHome","preventDefault","aria-label","AppShell","TabbarContainer","Dispatcher","nextPreload","Link","MeetingList","NavBar","Content","href","textDecoration","m","Content2","maxItemLength","Home","titleConf","ns","navBar"],"sourceRoot":"","ignoreList":[17]}