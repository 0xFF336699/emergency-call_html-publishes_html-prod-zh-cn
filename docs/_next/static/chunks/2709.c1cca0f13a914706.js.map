{"version":3,"file":"static/chunks/2709.c1cca0f13a914706.js","mappings":";;;;;;;;;;AAAgC;AAGhC,YAAY;AACZ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEJ,MAAMC,UAAU,IAAIL,oDAAGA,CAAC,OAAO;AAC/BK,QAAQC,KAAK,GAAG;AAChBD,QAAQE,cAAc,GAAG;AAEzB;;;CAGC,GACM,eAAeC;IACpBH,QAAQI,GAAG,CAAC;IAEZ,gBAAgB;IAChB,IAAI,CAACR,oBAAoB;QACvB,MAAMS,kBAAkB,MAAM,gGAAqB;QACnDT,qBAAqBS,gBAAgBT,kBAAkB;IACzD;IAEA,IAAI,CAACC,kBAAkB,CAACC,qBAAqB;QAC3C,MAAMQ,2BAA2B,MAAM,6KAAqC;QAC5ET,iBAAiBS,yBAAyBC,YAAY;QACtDT,sBAAsBQ,yBAAyBE,iBAAiB;IAClE;IAEA,IAAI,CAACT,qBAAqB;QACxB,MAAMU,qBAAqB,MAAM,oQAA+B;QAChEV,sBAAsBU,mBAAmBN,iBAAiB;IAC5D;IAEA,MAAMP,mBAAmBc,IAAI;IAC7BV,QAAQI,GAAG,CAAC;IAEZN,oBAAoBY,IAAI;IACxBb,eAAea,IAAI;IACnBX;IAEA,eAAe;IACfY;IAEAX,QAAQI,GAAG,CAAC;AACd;AAEA;;CAEC,GACD,eAAeO;IACb,eAAe;IACf,IAAI;QACF,MAAM,EAAEC,cAAc,EAAE,GAAG,MAAM,iSAA8B;QAC/D,MAAMA,eAAeF,IAAI;IAC3B,EAAE,OAAOG,OAAO;QACdb,QAAQI,GAAG,CAAC,uDAAuDS;IACrE;AACF","sources":["webpack://_N_E/../../libs/app/model/src/mc/app/AppControllerProjectExt.ts"],"sourcesContent":["import { Log } from '@fanfanlo';\r\nimport { user } from '../../user/User';\r\n\r\n// 项目管理相关的导入\r\nlet appPackagesStoreV2: any;\r\nlet projectStoreV2: any;\r\nlet projectEventUtilsV2: any;\r\nlet initProjectSystemV2: any;\r\n\r\nconst fileLog = new Log(false, 'AppControllerProjectExt_f')\r\nfileLog.pause = true;\r\nfileLog.childrenPaused = true;\r\n\r\n/**\r\n * 项目管理功能初始化（只有需要项目管理功能的应用调用）\r\n * 包括：项目包管理、项目存储、项目事件等\r\n */\r\nexport async function initProjectSystem() {\r\n  fileLog.log('[initProjectSystem] 开始初始化项目管理功能')\r\n\r\n  // 动态导入项目管理相关的模块\r\n  if (!appPackagesStoreV2) {\r\n    const appStaticModule = await import('@app/static');\r\n    appPackagesStoreV2 = appStaticModule.appPackagesStoreV2;\r\n  }\r\n\r\n  if (!projectStoreV2 || !projectEventUtilsV2) {\r\n    const projectV2InterfaceModule = await import('@droid/project-v2-interface');\r\n    projectStoreV2 = projectV2InterfaceModule.projectStore;\r\n    projectEventUtilsV2 = projectV2InterfaceModule.projectEventUtils;\r\n  }\r\n\r\n  if (!initProjectSystemV2) {\r\n    const projectV2ExtModule = await import('@droid/project-v2-ext');\r\n    initProjectSystemV2 = projectV2ExtModule.initProjectSystem;\r\n  }\r\n\r\n  await appPackagesStoreV2.init();\r\n  fileLog.log('[initProjectSystem] appPackagesStoreV2.init() 调用完成')\r\n\r\n  projectEventUtilsV2.init();\r\n  projectStoreV2.init();\r\n  initProjectSystemV2();\r\n\r\n  // 不阻塞的项目管理器初始化\r\n  initDependOnRemoteProject();\r\n\r\n  fileLog.log('[initProjectSystem] 项目管理功能初始化完成')\r\n}\r\n\r\n/**\r\n * 项目管理功能的远程依赖初始化\r\n */\r\nasync function initDependOnRemoteProject() {\r\n  // 使用动态导入避免循环依赖\r\n  try {\r\n    const { projectManager } = await import(\"@droid/project-v2-ui\");\r\n    await projectManager.init();\r\n  } catch (error) {\r\n    fileLog.log('[initDependOnRemoteProject] 动态导入 projectManager 失败:', error);\r\n  }\r\n}\r\n"],"names":["Log","appPackagesStoreV2","projectStoreV2","projectEventUtilsV2","initProjectSystemV2","fileLog","pause","childrenPaused","initProjectSystem","log","appStaticModule","projectV2InterfaceModule","projectStore","projectEventUtils","projectV2ExtModule","init","initDependOnRemoteProject","projectManager","error"],"sourceRoot":"","ignoreList":[]}